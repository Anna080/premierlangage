!function(e){function r(r){for(var n,f,i=r[0],l=r[1],a=r[2],c=0,s=[];c<i.length;c++)o[f=i[c]]&&s.push(o[f][0]),o[f]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(p&&p(r);s.length;)s.shift()();return u.push.apply(u,a||[]),t()}function t(){for(var e,r=0;r<u.length;r++){for(var t=u[r],n=!0,i=1;i<t.length;i++)0!==o[t[i]]&&(n=!1);n&&(u.splice(r--,1),e=f(f.s=t[0]))}return e}var n={},o={0:0},u=[];function f(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,f),t.l=!0,t.exports}f.m=e,f.c=n,f.d=function(e,r,t){f.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(e,r){if(1&r&&(e=f(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(f.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)f.d(t,n,(function(r){return e[r]}).bind(null,n));return t},f.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(r,"a",r),r},f.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},f.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=r,i=i.slice();for(var a=0;a<i.length;a++)r(i[a]);var p=l;t()}([]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"0TWp":function(e,t,n){!function(){"use strict";!function(e){var t=e.performance;function n(e){t&&t.mark&&t.mark(e)}function r(e,n){t&&t.measure&&t.measure(e,n)}n("Zone");var o=!0===e.__zone_symbol__forceDuplicateZoneCheck;if(e.Zone){if(o||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}var a,i=function(){function t(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new c(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==Z.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"root",{get:function(){for(var e=t.current;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"current",{get:function(){return O.zone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return P},enumerable:!0,configurable:!0}),t.__load_patch=function(a,i){if(Z.hasOwnProperty(a)){if(o)throw Error("Already loaded patch: "+a)}else if(!e["__Zone_disable_"+a]){var s="Zone:"+a;n(s),Z[a]=i(e,t,z),r(s,s)}},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},t.prototype.run=function(e,t,n,r){O={parent:O,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{O=O.parent}},t.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),O={parent:O,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{O=O.parent}},t.prototype.runTask=function(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")");if(e.state!==m||e.type!==D&&e.type!==S){var r=e.state!=b;r&&e._transitionTo(b,_),e.runCount++;var o=P;P=e,O={parent:O,zone:this};try{e.type==S&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(a){if(this._zoneDelegate.handleError(this,a))throw a}}finally{e.state!==m&&e.state!==w&&(e.type==D||e.data&&e.data.isPeriodic?r&&e._transitionTo(_,b):(e.runCount=0,this._updateTaskCount(e,-1),r&&e._transitionTo(m,b,m))),O=O.parent,P=o}}},t.prototype.scheduleTask=function(e){if(e.zone&&e.zone!==this)for(var t=this;t;){if(t===e.zone)throw Error("can not reschedule task to "+this.name+" which is descendants of the original zone "+e.zone.name);t=t.parent}e._transitionTo(k,m);var n=[];e._zoneDelegates=n,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(r){throw e._transitionTo(w,k,m),this._zoneDelegate.handleError(this,r),r}return e._zoneDelegates===n&&this._updateTaskCount(e,1),e.state==k&&e._transitionTo(_,k),e},t.prototype.scheduleMicroTask=function(e,t,n,r){return this.scheduleTask(new l(E,e,t,n,r,void 0))},t.prototype.scheduleMacroTask=function(e,t,n,r,o){return this.scheduleTask(new l(S,e,t,n,r,o))},t.prototype.scheduleEventTask=function(e,t,n,r,o){return this.scheduleTask(new l(D,e,t,n,r,o))},t.prototype.cancelTask=function(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||y).name+"; Execution: "+this.name+")");e._transitionTo(T,_,b);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(w,T),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(m,T),e.runCount=0,e},t.prototype._updateTaskCount=function(e,t){var n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)},t.__symbol__=I,t}(),s={name:"",onHasTask:function(e,t,n,r){return e.hasTask(n,r)},onScheduleTask:function(e,t,n,r){return e.scheduleTask(n,r)},onInvokeTask:function(e,t,n,r,o,a){return e.invokeTask(n,r,o,a)},onCancelTask:function(e,t,n,r){return e.cancelTask(n,r)}},c=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var r=n&&n.onHasTask;(r||t&&t._hasTaskZS)&&(this._hasTaskZS=r?n:s,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}return e.prototype.fork=function(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new i(e,t)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,o){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,o):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){var n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t))||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=E)throw new Error("Task is missing scheduleFn.");v(t)}return n},e.prototype.invokeTask=function(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n},e.prototype.hasTask=function(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(n){this.handleError(e,n)}},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],o=n[e]=r+t;if(o<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=o||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e})},e}(),l=function(){function t(n,r,o,a,i,s){this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=a,this.scheduleFn=i,this.cancelFn=s,this.callback=o;var c=this;this.invoke=n===D&&a&&a.useG?t.invokeTask:function(){return t.invokeTask.call(e,c,this,arguments)}}return t.invokeTask=function(e,t,n){e||(e=this),C++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==C&&g(),C--}},Object.defineProperty(t.prototype,"zone",{get:function(){return this._zone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),t.prototype.cancelScheduleRequest=function(){this._transitionTo(m,k)},t.prototype._transitionTo=function(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(this.type+" '"+this.source+"': can not transition to '"+e+"', expecting state '"+t+"'"+(n?" or '"+n+"'":"")+", was '"+this._state+"'.");this._state=e,e==m&&(this._zoneDelegates=null)},t.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},t.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}},t}(),u=I("setTimeout"),f=I("Promise"),p=I("then"),h=[],d=!1;function v(t){if(0===C&&0===h.length)if(a||e[f]&&(a=e[f].resolve(0)),a){var n=a[p];n||(n=a.then),n.call(a,g)}else e[u](g,0);t&&h.push(t)}function g(){if(!d){for(d=!0;h.length;){var e=h;h=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(r){z.onUnhandledError(r)}}}z.microtaskDrainDone(),d=!1}}var y={name:"NO ZONE"},m="notScheduled",k="scheduling",_="scheduled",b="running",T="canceling",w="unknown",E="microTask",S="macroTask",D="eventTask",Z={},z={symbol:I,currentZoneFrame:function(){return O},onUnhandledError:j,microtaskDrainDone:j,scheduleMicroTask:v,showUncaughtError:function(){return!i[I("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:j,patchMethod:function(){return j},bindArguments:function(){return[]},patchThen:function(){return j},setNativePromise:function(e){e&&"function"==typeof e.resolve&&(a=e.resolve(0))}},O={parent:null,zone:new i(null,null)},P=null,C=0;function j(){}function I(e){return"__zone_symbol__"+e}r("Zone","Zone"),e.Zone=i}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);var e=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Zone.__load_patch("ZoneAwarePromise",function(t,n,r){var o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,i=r.symbol,s=[],c=i("Promise"),l=i("then"),u="__creationTrace__";r.onUnhandledError=function(e){if(r.showUncaughtError()){var t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},r.microtaskDrainDone=function(){for(;s.length;)for(var e=function(){var e=s.shift();try{e.zone.runGuarded(function(){throw e})}catch(t){p(t)}};s.length;)e()};var f=i("unhandledPromiseRejectionHandler");function p(e){r.onUnhandledError(e);try{var t=n[f];t&&"function"==typeof t&&t.call(this,e)}catch(o){}}function h(e){return e&&e.then}function d(e){return e}function v(e){return M.reject(e)}var g=i("state"),y=i("value"),m=i("finally"),k=i("parentPromiseValue"),_=i("parentPromiseState"),b="Promise.then",T=null,w=!0,E=!1,S=0;function D(e,t){return function(n){try{P(e,t,n)}catch(r){P(e,!1,r)}}}var Z=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},z="Promise resolved with itself",O=i("currentTaskTrace");function P(e,t,o){var i,c=Z();if(e===o)throw new TypeError(z);if(e[g]===T){var l=null;try{"object"!=typeof o&&"function"!=typeof o||(l=o&&o.then)}catch(v){return c(function(){P(e,!1,v)})(),e}if(t!==E&&o instanceof M&&o.hasOwnProperty(g)&&o.hasOwnProperty(y)&&o[g]!==T)j(o),P(e,o[g],o[y]);else if(t!==E&&"function"==typeof l)try{l.call(o,c(D(e,t)),c(D(e,!1)))}catch(v){c(function(){P(e,!1,v)})()}else{e[g]=t;var f=e[y];if(e[y]=o,e[m]===m&&t===w&&(e[g]=e[_],e[y]=e[k]),t===E&&o instanceof Error){var p=n.currentTask&&n.currentTask.data&&n.currentTask.data[u];p&&a(o,O,{configurable:!0,enumerable:!1,writable:!0,value:p})}for(var h=0;h<f.length;)I(e,f[h++],f[h++],f[h++],f[h++]);if(0==f.length&&t==E){e[g]=S;try{throw new Error("Uncaught (in promise): "+((i=o)&&i.toString===Object.prototype.toString?(i.constructor&&i.constructor.name||"")+": "+JSON.stringify(i):i?i.toString():Object.prototype.toString.call(i))+(o&&o.stack?"\n"+o.stack:""))}catch(v){var d=v;d.rejection=o,d.promise=e,d.zone=n.current,d.task=n.currentTask,s.push(d),r.scheduleMicroTask()}}}}return e}var C=i("rejectionHandledHandler");function j(e){if(e[g]===S){try{var t=n[C];t&&"function"==typeof t&&t.call(this,{rejection:e[y],promise:e})}catch(o){}e[g]=E;for(var r=0;r<s.length;r++)e===s[r].promise&&s.splice(r,1)}}function I(e,t,n,r,o){j(e);var a=e[g],i=a?"function"==typeof r?r:d:"function"==typeof o?o:v;t.scheduleMicroTask(b,function(){try{var r=e[y],o=n&&m===n[m];o&&(n[k]=r,n[_]=a);var s=t.run(i,void 0,o&&i!==v&&i!==d?[]:[r]);P(n,!0,s)}catch(c){P(n,!1,c)}},n)}var M=function(){function t(e){if(!(this instanceof t))throw new Error("Must be an instanceof Promise.");this[g]=T,this[y]=[];try{e&&e(D(this,w),D(this,E))}catch(n){P(this,!1,n)}}return t.toString=function(){return"function ZoneAwarePromise() { [native code] }"},t.resolve=function(e){return P(new this(null),w,e)},t.reject=function(e){return P(new this(null),E,e)},t.race=function(t){var n,r,o,a,i=new this(function(e,t){o=e,a=t});function s(e){i&&(i=o(e))}function c(e){i&&(i=a(e))}try{for(var l=e(t),u=l.next();!u.done;u=l.next()){var f=u.value;h(f)||(f=this.resolve(f)),f.then(s,c)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return i},t.all=function(t){var n,r,o,a,i=new this(function(e,t){o=e,a=t}),s=2,c=0,l=[],u=function(e){h(e)||(e=f.resolve(e));var t=c;e.then(function(e){l[t]=e,0==--s&&o(l)},a),s++,c++},f=this;try{for(var p=e(t),d=p.next();!d.done;d=p.next())u(d.value)}catch(v){n={error:v}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}return 0==(s-=2)&&o(l),i},t.prototype.then=function(e,t){var r=new this.constructor(null),o=n.current;return this[g]==T?this[y].push(o,r,e,t):I(this,o,r,e,t),r},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(e){var t=new this.constructor(null);t[m]=m;var r=n.current;return this[g]==T?this[y].push(r,t,e,e):I(this,r,t,e,e),t},t}();M.resolve=M.resolve,M.reject=M.reject,M.race=M.race,M.all=M.all;var L=t[c]=t.Promise,x=n.__symbol__("ZoneAwarePromise"),R=o(t,"Promise");R&&!R.configurable||(R&&delete R.writable,R&&delete R.value,R||(R={configurable:!0,enumerable:!0}),R.get=function(){return t[x]?t[x]:t[c]},R.set=function(e){e===M?t[x]=e:(t[c]=e,e.prototype[l]||F(e),r.setNativePromise(e))},a(t,"Promise",R)),t.Promise=M;var H=i("thenPatched");function F(e){var t=e.prototype,n=o(t,"then");if(!n||!1!==n.writable&&n.configurable){var r=t.then;t[l]=r,e.prototype.then=function(e,t){var n=this;return new M(function(e,t){r.call(n,e,t)}).then(e,t)},e[H]=!0}}return r.patchThen=F,L&&F(L),Promise[n.__symbol__("uncaughtPromiseErrors")]=s,M}),Zone.__load_patch("fetch",function(e,t,n){var r=e.fetch,o=e.Promise,a=n.symbol("thenPatched"),i=n.symbol("fetchTaskScheduling"),s=n.symbol("fetchTaskAborting");if("function"==typeof r){var c=e.AbortController,l="function"==typeof c,u=null;l&&(e.AbortController=function(){var e=new c;return e.signal.abortController=e,e},u=n.patchMethod(c.prototype,"abort",function(e){return function(t,n){return t.task?t.task.zone.cancelTask(t.task):e.apply(t,n)}}));var f=function(){};e.fetch=function(){var e=this,c=Array.prototype.slice.call(arguments),p=c.length>1?c[1]:null,h=p&&p.signal;return new Promise(function(p,d){var v=t.current.scheduleMacroTask("fetch",f,c,function(){var s,l=t.current;try{l[i]=!0,s=r.apply(e,c)}catch(f){return void d(f)}finally{l[i]=!1}if(!(s instanceof o)){var u=s.constructor;u[a]||n.patchThen(u)}s.then(function(e){"notScheduled"!==v.state&&v.invoke(),p(e)},function(e){"notScheduled"!==v.state&&v.invoke(),d(e)})},function(){if(l)if(h&&h.abortController&&!h.aborted&&"function"==typeof h.abortController.abort&&u)try{t.current[s]=!0,u.call(h.abortController)}finally{t.current[s]=!1}else d("cancel fetch need a AbortController.signal");else d("No AbortController supported, can not cancel fetch")});h&&h.abortController&&(h.abortController.task=v)})}}});var t=Object.getOwnPropertyDescriptor,n=Object.defineProperty,r=Object.getPrototypeOf,o=Object.create,a=Array.prototype.slice,i="addEventListener",s="removeEventListener",c=Zone.__symbol__(i),l=Zone.__symbol__(s),u="true",f="false",p="__zone_symbol__";function h(e,t){return Zone.current.wrap(e,t)}function d(e,t,n,r,o){return Zone.current.scheduleMacroTask(e,t,n,r,o)}var v=Zone.__symbol__,g="undefined"!=typeof window,y=g?window:void 0,m=g&&y||"object"==typeof self&&self||global,k="removeAttribute",_=[null];function b(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=h(e[n],t+"_"+n));return e}function T(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}var w="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,E=!("nw"in m)&&void 0!==m.process&&"[object process]"==={}.toString.call(m.process),S=!E&&!w&&!(!g||!y.HTMLElement),D=void 0!==m.process&&"[object process]"==={}.toString.call(m.process)&&!w&&!(!g||!y.HTMLElement),Z={},z=function(e){if(e=e||m.event){var t=Z[e.type];t||(t=Z[e.type]=v("ON_PROPERTY"+e.type));var n,r=this||e.target||m,o=r[t];return S&&r===y&&"error"===e.type?!0===(n=o&&o.call(this,e.message,e.filename,e.lineno,e.colno,e.error))&&e.preventDefault():null==(n=o&&o.apply(this,arguments))||n||e.preventDefault(),n}};function O(e,r,o){var a=t(e,r);if(!a&&o&&t(o,r)&&(a={enumerable:!0,configurable:!0}),a&&a.configurable){var i=v("on"+r+"patched");if(!e.hasOwnProperty(i)||!e[i]){delete a.writable,delete a.value;var s=a.get,c=a.set,l=r.substr(2),u=Z[l];u||(u=Z[l]=v("ON_PROPERTY"+l)),a.set=function(t){var n=this;n||e!==m||(n=m),n&&(n[u]&&n.removeEventListener(l,z),c&&c.apply(n,_),"function"==typeof t?(n[u]=t,n.addEventListener(l,z,!1)):n[u]=null)},a.get=function(){var t=this;if(t||e!==m||(t=m),!t)return null;var n=t[u];if(n)return n;if(s){var o=s&&s.call(this);if(o)return a.set.call(this,o),"function"==typeof t[k]&&t.removeAttribute(r),o}return null},n(e,r,a),e[i]=!0}}}function P(e,t,n){if(t)for(var r=0;r<t.length;r++)O(e,"on"+t[r],n);else{var o=[];for(var a in e)"on"==a.substr(0,2)&&o.push(a);for(var i=0;i<o.length;i++)O(e,o[i],n)}}var C=v("originalInstance");function j(e){var t=m[e];if(t){m[v(e)]=t,m[e]=function(){var n=b(arguments,e);switch(n.length){case 0:this[C]=new t;break;case 1:this[C]=new t(n[0]);break;case 2:this[C]=new t(n[0],n[1]);break;case 3:this[C]=new t(n[0],n[1],n[2]);break;case 4:this[C]=new t(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},L(m[e],t);var r,o=new t(function(){});for(r in o)"XMLHttpRequest"===e&&"responseBlob"===r||function(t){"function"==typeof o[t]?m[e].prototype[t]=function(){return this[C][t].apply(this[C],arguments)}:n(m[e].prototype,t,{set:function(n){"function"==typeof n?(this[C][t]=h(n,e+"."+t),L(this[C][t],n)):this[C][t]=n},get:function(){return this[C][t]}})}(r);for(r in t)"prototype"!==r&&t.hasOwnProperty(r)&&(m[e][r]=t[r])}}var I=!1;function M(e,n,o){for(var a=e;a&&!a.hasOwnProperty(n);)a=r(a);!a&&e[n]&&(a=e);var i,s,c=v(n),l=null;if(a&&!(l=a[c])&&(l=a[c]=a[n],T(a&&t(a,n)))){var u=o(l,c,n);a[n]=function(){return u(this,arguments)},L(a[n],l),I&&(i=l,s=a[n],"function"==typeof Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(i).forEach(function(e){var t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(s,e,{get:function(){return i[e]},set:function(n){(!t||t.writable&&"function"==typeof t.set)&&(i[e]=n)},enumerable:!t||t.enumerable,configurable:!t||t.configurable})}))}return l}function L(e,t){e[v("OriginalDelegate")]=t}var x=!1,R=!1;function H(){try{var e=y.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(t){}return!1}function F(){if(x)return R;x=!0;try{var e=y.navigator.userAgent;return-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(R=!0),R}catch(t){}}Zone.__load_patch("toString",function(e){var t=Function.prototype.toString,n=v("OriginalDelegate"),r=v("Promise"),o=v("Error"),a=function(){if("function"==typeof this){var a=this[n];if(a)return"function"==typeof a?t.apply(this[n],arguments):Object.prototype.toString.call(a);if(this===Promise){var i=e[r];if(i)return t.apply(i,arguments)}if(this===Error){var s=e[o];if(s)return t.apply(s,arguments)}}return t.apply(this,arguments)};a[n]=t,Function.prototype.toString=a;var i=Object.prototype.toString;Object.prototype.toString=function(){return this instanceof Promise?"[object Promise]":i.apply(this,arguments)}});var A=!1;if("undefined"!=typeof window)try{var B=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",B,B),window.removeEventListener("test",B,B)}catch(me){A=!1}var N={useG:!0},q={},W={},X=/^__zone_symbol__(\w+)(true|false)$/,G="__zone_symbol__propagationStopped";function U(e,t,n){var o=n&&n.add||i,a=n&&n.rm||s,c=n&&n.listeners||"eventListeners",l=n&&n.rmAll||"removeAllListeners",h=v(o),d="."+o+":",g="prependListener",y="."+g+":",m=function(e,t,n){if(!e.isRemoved){var r=e.callback;"object"==typeof r&&r.handleEvent&&(e.callback=function(e){return r.handleEvent(e)},e.originalDelegate=r),e.invoke(e,t,[n]);var o=e.options;o&&"object"==typeof o&&o.once&&t[a].call(t,n.type,e.originalDelegate?e.originalDelegate:e.callback,o)}},k=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[q[t.type][f]];if(r)if(1===r.length)m(r[0],n,t);else for(var o=r.slice(),a=0;a<o.length&&(!t||!0!==t[G]);a++)m(o[a],n,t)}},_=function(t){if(t=t||e.event){var n=this||t.target||e,r=n[q[t.type][u]];if(r)if(1===r.length)m(r[0],n,t);else for(var o=r.slice(),a=0;a<o.length&&(!t||!0!==t[G]);a++)m(o[a],n,t)}};function b(t,n){if(!t)return!1;var i=!0;n&&void 0!==n.useG&&(i=n.useG);var s=n&&n.vh,m=!0;n&&void 0!==n.chkDup&&(m=n.chkDup);var b=!1;n&&void 0!==n.rt&&(b=n.rt);for(var T=t;T&&!T.hasOwnProperty(o);)T=r(T);if(!T&&t[o]&&(T=t),!T)return!1;if(T[h])return!1;var w,S=n&&n.eventNameToString,D={},Z=T[h]=T[o],z=T[v(a)]=T[a],O=T[v(c)]=T[c],P=T[v(l)]=T[l];function C(e){A||"boolean"==typeof D.options||null==D.options||(e.options=!!D.options.capture,D.options=e.options)}n&&n.prepend&&(w=T[v(n.prepend)]=T[n.prepend]);var j=i?function(e){if(!D.isExisting)return C(e),Z.call(D.target,D.eventName,D.capture?_:k,D.options)}:function(e){return C(e),Z.call(D.target,D.eventName,e.invoke,D.options)},I=i?function(e){if(!e.isRemoved){var t=q[e.eventName],n=void 0;t&&(n=t[e.capture?u:f]);var r=n&&e.target[n];if(r)for(var o=0;o<r.length;o++)if(r[o]===e){r.splice(o,1),e.isRemoved=!0,0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return z.call(e.target,e.eventName,e.capture?_:k,e.options)}:function(e){return z.call(e.target,e.eventName,e.invoke,e.options)},M=n&&n.diff?n.diff:function(e,t){var n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},x=Zone[Zone.__symbol__("BLACK_LISTED_EVENTS")],R=function(t,n,r,o,a,c){return void 0===a&&(a=!1),void 0===c&&(c=!1),function(){var l=this||e,h=arguments[0],d=arguments[1];if(!d)return t.apply(this,arguments);if(E&&"uncaughtException"===h)return t.apply(this,arguments);var v=!1;if("function"!=typeof d){if(!d.handleEvent)return t.apply(this,arguments);v=!0}if(!s||s(t,d,l,arguments)){var g,y=arguments[2];if(x)for(var k=0;k<x.length;k++)if(h===x[k])return t.apply(this,arguments);var _=!1;void 0===y?g=!1:!0===y?g=!0:!1===y?g=!1:(g=!!y&&!!y.capture,_=!!y&&!!y.once);var b,T=Zone.current,w=q[h];if(w)b=w[g?u:f];else{var Z=(S?S(h):h)+f,z=(S?S(h):h)+u,O=p+Z,P=p+z;q[h]={},q[h][f]=O,q[h][u]=P,b=g?P:O}var C,j=l[b],I=!1;if(j){if(I=!0,m)for(k=0;k<j.length;k++)if(M(j[k],d))return}else j=l[b]=[];var L=l.constructor.name,R=W[L];R&&(C=R[h]),C||(C=L+n+(S?S(h):h)),D.options=y,_&&(D.options.once=!1),D.target=l,D.capture=g,D.eventName=h,D.isExisting=I;var H=i?N:void 0;H&&(H.taskData=D);var F=T.scheduleEventTask(C,d,H,r,o);return D.target=null,H&&(H.taskData=null),_&&(y.once=!0),(A||"boolean"!=typeof F.options)&&(F.options=y),F.target=l,F.capture=g,F.eventName=h,v&&(F.originalDelegate=d),c?j.unshift(F):j.push(F),a?l:void 0}}};return T[o]=R(Z,d,j,I,b),w&&(T[g]=R(w,y,function(e){return w.call(D.target,D.eventName,e.invoke,D.options)},I,b,!0)),T[a]=function(){var t,n=this||e,r=arguments[0],o=arguments[2];t=void 0!==o&&(!0===o||!1!==o&&!!o&&!!o.capture);var a=arguments[1];if(!a)return z.apply(this,arguments);if(!s||s(z,a,n,arguments)){var i,c=q[r];c&&(i=c[t?u:f]);var l=i&&n[i];if(l)for(var p=0;p<l.length;p++){var h=l[p];if(M(h,a))return l.splice(p,1),h.isRemoved=!0,0===l.length&&(h.allRemoved=!0,n[i]=null),h.zone.cancelTask(h),b?n:void 0}return z.apply(this,arguments)}},T[c]=function(){for(var t=arguments[0],n=[],r=V(this||e,S?S(t):t),o=0;o<r.length;o++){var a=r[o];n.push(a.originalDelegate?a.originalDelegate:a.callback)}return n},T[l]=function(){var t=this||e,n=arguments[0];if(n){var r=q[n];if(r){var o=t[r[f]],i=t[r[u]];if(o){var s=o.slice();for(h=0;h<s.length;h++)this[a].call(this,n,(c=s[h]).originalDelegate?c.originalDelegate:c.callback,c.options)}if(i)for(s=i.slice(),h=0;h<s.length;h++){var c;this[a].call(this,n,(c=s[h]).originalDelegate?c.originalDelegate:c.callback,c.options)}}}else{for(var p=Object.keys(t),h=0;h<p.length;h++){var d=X.exec(p[h]),v=d&&d[1];v&&"removeListener"!==v&&this[l].call(this,v)}this[l].call(this,"removeListener")}if(b)return this},L(T[o],Z),L(T[a],z),P&&L(T[l],P),O&&L(T[c],O),!0}for(var T=[],w=0;w<t.length;w++)T[w]=b(t[w],n);return T}function V(e,t){var n=[];for(var r in e){var o=X.exec(r),a=o&&o[1];if(a&&(!t||a===t)){var i=e[r];if(i)for(var s=0;s<i.length;s++)n.push(i[s])}}return n}var J=v("zoneTask");function K(e,t,n,r){var o=null,a=null;n+=r;var i={};function s(t){var n=t.data;return n.args[0]=function(){try{t.invoke.apply(this,arguments)}finally{t.data&&t.data.isPeriodic||("number"==typeof n.handleId?delete i[n.handleId]:n.handleId&&(n.handleId[J]=null))}},n.handleId=o.apply(e,n.args),t}function c(e){return a(e.data.handleId)}o=M(e,t+=r,function(n){return function(o,a){if("function"==typeof a[0]){var l=d(t,a[0],{isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?a[1]||0:void 0,args:a},s,c);if(!l)return l;var u=l.data.handleId;return"number"==typeof u?i[u]=l:u&&(u[J]=l),u&&u.ref&&u.unref&&"function"==typeof u.ref&&"function"==typeof u.unref&&(l.ref=u.ref.bind(u),l.unref=u.unref.bind(u)),"number"==typeof u||u?u:l}return n.apply(e,a)}}),a=M(e,n,function(t){return function(n,r){var o,a=r[0];"number"==typeof a?o=i[a]:(o=a&&a[J])||(o=a),o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&("number"==typeof a?delete i[a]:a&&(a[J]=null),o.zone.cancelTask(o)):t.apply(e,r)}})}var Y=Object[v("defineProperty")]=Object.defineProperty,Q=Object[v("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,$=Object.create,ee=v("unconfigurables");function te(e,t){return e&&e[ee]&&e[ee][t]}function ne(e,t,n){return Object.isFrozen(n)||(n.configurable=!0),n.configurable||(e[ee]||Object.isFrozen(e)||Y(e,ee,{writable:!0,value:{}}),e[ee]&&(e[ee][t]=!0)),n}function re(e,t,n,r){try{return Y(e,t,n)}catch(a){if(!n.configurable)throw a;void 0===r?delete n.configurable:n.configurable=r;try{return Y(e,t,n)}catch(a){var o=null;try{o=JSON.stringify(n)}catch(a){o=n.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+o+"' on object '"+e+"' and got error, giving up: "+a)}}}var oe=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplyconnected","vrdisplaydisconnected","vrdisplaypresentchange"],ae=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],ie=["load"],se=["blur","error","focus","load","resize","scroll","messageerror"],ce=["bounce","finish","start"],le=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],ue=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],fe=["close","error","open","message"],pe=["error","message"],he=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],oe,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function de(e,t,n,r){e&&P(e,function(e,t,n){if(!n||0===n.length)return t;var r=n.filter(function(t){return t.target===e});if(!r||0===r.length)return t;var o=r[0].ignoreProperties;return t.filter(function(e){return-1===o.indexOf(e)})}(e,t,n),r)}function ve(e,c){if(!E||D){var l="undefined"!=typeof WebSocket;if(function(){if((S||D)&&!t(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=t(Element.prototype,"onclick");if(e&&!e.configurable)return!1}var r=XMLHttpRequest.prototype,o=t(r,"onreadystatechange");if(o){n(r,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return!0}});var a=!!(s=new XMLHttpRequest).onreadystatechange;return n(r,"onreadystatechange",o||{}),a}var i=v("fake");n(r,"onreadystatechange",{enumerable:!0,configurable:!0,get:function(){return this[i]},set:function(e){this[i]=e}});var s,c=function(){};return(s=new XMLHttpRequest).onreadystatechange=c,a=s[i]===c,s.onreadystatechange=null,a}()){var u=c.__Zone_ignore_on_properties;if(S){var f=window,p=H?[{target:f,ignoreProperties:["error"]}]:[];de(f,he.concat(["messageerror"]),u?u.concat(p):u,r(f)),de(Document.prototype,he,u),void 0!==f.SVGElement&&de(f.SVGElement.prototype,he,u),de(Element.prototype,he,u),de(HTMLElement.prototype,he,u),de(HTMLMediaElement.prototype,ae,u),de(HTMLFrameSetElement.prototype,oe.concat(se),u),de(HTMLBodyElement.prototype,oe.concat(se),u),de(HTMLFrameElement.prototype,ie,u),de(HTMLIFrameElement.prototype,ie,u);var d=f.HTMLMarqueeElement;d&&de(d.prototype,ce,u);var g=f.Worker;g&&de(g.prototype,pe,u)}de(XMLHttpRequest.prototype,le,u);var y=c.XMLHttpRequestEventTarget;y&&de(y&&y.prototype,le,u),"undefined"!=typeof IDBIndex&&(de(IDBIndex.prototype,ue,u),de(IDBRequest.prototype,ue,u),de(IDBOpenDBRequest.prototype,ue,u),de(IDBDatabase.prototype,ue,u),de(IDBTransaction.prototype,ue,u),de(IDBCursor.prototype,ue,u)),l&&de(WebSocket.prototype,fe,u)}else!function(){for(var e=function(e){var t=he[e],n="on"+t;self.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][ge]&&((t=h(o[n],r))[ge]=o[n],o[n]=t),o=o.parentElement},!0)},t=0;t<he.length;t++)e(t)}(),j("XMLHttpRequest"),l&&function(e,n){var r=n.WebSocket;n.EventTarget||U(n,[r.prototype]),n.WebSocket=function(e,n){var c,l,u=arguments.length>1?new r(e,n):new r(e),f=t(u,"onmessage");return f&&!1===f.configurable?(c=o(u),l=u,[i,s,"send","close"].forEach(function(e){c[e]=function(){var t=a.call(arguments);if(e===i||e===s){var n=t.length>0?t[0]:void 0;if(n){var r=Zone.__symbol__("ON_PROPERTY"+n);u[r]=c[r]}}return u[e].apply(u,t)}})):c=u,P(c,["close","error","message","open"],l),c};var c=n.WebSocket;for(var l in r)c[l]=r[l]}(0,c)}}var ge=v("unbound");function ye(e,n,r,o){var a=Zone.__symbol__(r);if(!e[a]){var i=e[a]=e[r];e[r]=function(a,s,c){return s&&s.prototype&&o.forEach(function(e){var o,a,i,c,l=n+"."+r+"::"+e,u=s.prototype;if(u.hasOwnProperty(e)){var f=t(u,e);f&&f.value?(f.value=h(f.value,l),c=(i=f).configurable,re(o=s.prototype,a=e,i=ne(o,a,i),c)):u[e]&&(u[e]=h(u[e],l))}else u[e]&&(u[e]=h(u[e],l))}),i.call(e,a,s,c)},L(e[r],i)}}Zone.__load_patch("util",function(e,t,n){n.patchOnProperties=P,n.patchMethod=M,n.bindArguments=b}),Zone.__load_patch("timers",function(e){K(e,"set","clear","Timeout"),K(e,"set","clear","Interval"),K(e,"set","clear","Immediate")}),Zone.__load_patch("requestAnimationFrame",function(e){K(e,"request","cancel","AnimationFrame"),K(e,"mozRequest","mozCancel","AnimationFrame"),K(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(e,t){for(var n=["alert","prompt","confirm"],r=0;r<n.length;r++)M(e,n[r],function(n,r,o){return function(r,a){return t.current.run(n,e,a,o)}})}),Zone.__load_patch("EventTarget",function(e,t,n){var r=t.__symbol__("BLACK_LISTED_EVENTS");e[r]&&(t[r]=e[r]),function(e,t){!function(e,t){var n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",function(e){return function(t,n){t[G]=!0,e&&e.apply(t,n)}})}(e,t)}(e,n),function(e,t){var n="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",r="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),o=[],a=e.wtf,i=n.split(",");a?o=i.map(function(e){return"HTML"+e+"Element"}).concat(r):e.EventTarget?o.push("EventTarget"):o=r;for(var s=e.__Zone_disable_IE_check||!1,c=e.__Zone_enable_cross_context_check||!1,l=F(),h="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",d=0;d<he.length;d++){var v=p+((_=he[d])+f),g=p+(_+u);q[_]={},q[_][f]=v,q[_][u]=g}for(d=0;d<n.length;d++)for(var y=i[d],m=W[y]={},k=0;k<he.length;k++){var _;m[_=he[k]]=y+".addEventListener:"+_}var b=[];for(d=0;d<o.length;d++){var T=e[o[d]];b.push(T&&T.prototype)}U(e,b,{vh:function(e,t,n,r){if(!s&&l){if(c)try{var o;if("[object FunctionWrapper]"===(o=t.toString())||o==h)return e.apply(n,r),!1}catch(a){return e.apply(n,r),!1}else if("[object FunctionWrapper]"===(o=t.toString())||o==h)return e.apply(n,r),!1}else if(c)try{t.toString()}catch(a){return e.apply(n,r),!1}return!0}}),t.patchEventTarget=U}(e,n);var o=e.XMLHttpRequestEventTarget;o&&o.prototype&&n.patchEventTarget(e,[o.prototype]),j("MutationObserver"),j("WebKitMutationObserver"),j("IntersectionObserver"),j("FileReader")}),Zone.__load_patch("on_property",function(e,t,n){ve(0,e),Object.defineProperty=function(e,t,n){if(te(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=ne(e,t,n)),re(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=ne(e,n,t[n])}),$(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=Q(e,t);return n&&te(e,t)&&(n.configurable=!1),n}}),Zone.__load_patch("customElements",function(e,t,n){(S||D)&&"registerElement"in e.document&&ye(document,"Document","registerElement",["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"]),(S||D)&&"customElements"in e&&ye(e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}),Zone.__load_patch("canvas",function(e){var t=e.HTMLCanvasElement;void 0!==t&&t.prototype&&t.prototype.toBlob&&function(e,n,r){var o=null;function a(e){var t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},o.apply(t.target,t.args),e}o=M(t.prototype,"toBlob",function(e){return function(t,n){var r=function(e,t){return{name:"HTMLCanvasElement.toBlob",target:e,cbIdx:0,args:t}}(t,n);return r.cbIdx>=0&&"function"==typeof n[r.cbIdx]?d(r.name,n[r.cbIdx],r,a):e.apply(t,n)}})}()}),Zone.__load_patch("XHR",function(e,t){!function(u){var f=XMLHttpRequest.prototype,p=f[c],h=f[l];if(!p){var g=e.XMLHttpRequestEventTarget;if(g){var y=g.prototype;p=y[c],h=y[l]}}var m="readystatechange",k="scheduled";function _(e){var t=e.data,r=t.target;r[a]=!1,r[s]=!1;var i=r[o];p||(p=r[c],h=r[l]),i&&h.call(r,m,i);var u=r[o]=function(){if(r.readyState===r.DONE)if(!t.aborted&&r[a]&&e.state===k){var n=r.__zone_symbol__loadfalse;if(n&&n.length>0){var o=e.invoke;e.invoke=function(){for(var n=r.__zone_symbol__loadfalse,a=0;a<n.length;a++)n[a]===e&&n.splice(a,1);t.aborted||e.state!==k||o.call(e)},n.push(e)}else e.invoke()}else t.aborted||!1!==r[a]||(r[s]=!0)};return p.call(r,m,u),r[n]||(r[n]=e),D.apply(r,t.args),r[a]=!0,e}function b(){}function T(e){var t=e.data;return t.aborted=!0,Z.apply(t.target,t.args)}var w=M(f,"open",function(){return function(e,t){return e[r]=0==t[2],e[i]=t[1],w.apply(e,t)}}),E=v("fetchTaskAborting"),S=v("fetchTaskScheduling"),D=M(f,"send",function(){return function(e,n){if(!0===t.current[S])return D.apply(e,n);if(e[r])return D.apply(e,n);var o={target:e,url:e[i],isPeriodic:!1,args:n,aborted:!1},a=d("XMLHttpRequest.send",b,o,_,T);e&&!0===e[s]&&!o.aborted&&a.state===k&&a.invoke()}}),Z=M(f,"abort",function(){return function(e,r){var o=e[n];if(o&&"string"==typeof o.type){if(null==o.cancelFn||o.data&&o.data.aborted)return;o.zone.cancelTask(o)}else if(!0===t.current[E])return Z.apply(e,r)}})}();var n=v("xhrTask"),r=v("xhrSync"),o=v("xhrListener"),a=v("xhrScheduled"),i=v("xhrURL"),s=v("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",function(e){e.navigator&&e.navigator.geolocation&&function(e,n){for(var r=e.constructor.name,o=function(o){var a=n[o],i=e[a];if(i){if(!T(t(e,a)))return"continue";e[a]=function(e){var t=function(){return e.apply(this,b(arguments,r+"."+a))};return L(t,e),t}(i)}},a=0;a<n.length;a++)o(a)}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",function(e,t){function n(t){return function(n){V(e,t).forEach(function(r){var o=e.PromiseRejectionEvent;if(o){var a=new o(t,{promise:n.promise,reason:n.rejection});r.invoke(a)}})}}e.PromiseRejectionEvent&&(t[v("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[v("rejectionHandledHandler")]=n("rejectionhandled"))})}()},1:function(e,t,n){e.exports=n("hN/g")},"hN/g":function(e,t,n){"use strict";n.r(t),n("0TWp")}},[[1,0]]]);
var global,factory;!function(t,e){"use strict";function i(){var t=w.splice(0,w.length);for($t=0;t.length;)t.shift().call(null,t.shift())}function s(t,e){for(var i=0,s=t.length;i<s;i++)f(t[i],e)}function n(t){return function(e){jt(e)&&(f(e,t),nt.length&&s(e.querySelectorAll(nt),t))}}function r(t){var e=Yt.call(t,"is"),i=t.nodeName.toUpperCase(),s=ot.call(it,e?Q+e.toUpperCase():Z+i);return e&&-1<s&&!o(i,e)?-1:s}function o(t,e){return-1<nt.indexOf(t+'[is="'+e+'"]')}function a(t){var e=t.currentTarget,i=t.attrChange,s=t.attrName,n=t.target,r=t[J]||2,o=t[V]||3;!ee||n&&n!==e||!e[z]||"style"===s||t.prevValue===t.newValue&&(""!==t.newValue||i!==r&&i!==o)||e[z](s,i===r?null:t.prevValue,i===o?null:t.newValue)}function l(t){var e=n(t);return function(t){w.push(e,t.target),$t&&clearTimeout($t),$t=setTimeout(i,1)}}function h(t){te&&(te=!1,t.currentTarget.removeEventListener(W,h)),nt.length&&s((t.target||_).querySelectorAll(nt),t.detail===F?F:R),Lt&&function(){for(var t,e=0,i=It.length;e<i;e++)rt.contains(t=It[e])||(i--,It.splice(e--,1),f(t,F))}()}function c(t,e){var i=this;Ut.call(i,t,e),E.call(i,{target:i})}function d(t,e,i){var s=e.apply(t,i),n=r(s);return-1<n&&N(s,st[n]),i.pop()&&nt.length&&function(t){for(var e,i=0,s=t.length;i<s;i++)N(e=t[i],st[r(e)])}(s.querySelectorAll(nt)),s}function u(t,e){Tt(t,e),T?T.observe(t,Jt):(Qt&&(t.setAttribute=c,t[j]=A(t),t[I](K,E)),t[I]($,a)),t[H]&&ee&&(t.created=!0,t[H](),t.created=!1)}function p(t){throw new Error("A "+t+" type is already registered")}function f(t,e){var i,s,n=r(t);-1<n&&(O(t,st[n]),n=0,e!==R||t[R]?e!==F||t[F]||(t[R]=!1,t[F]=!0,s="disconnected",n=1):(t[F]=!1,t[R]=!0,s="connected",n=1,Lt&&ot.call(It,t)<0&&It.push(t)),n&&(i=t[e+B]||t[s+B])&&i.call(t))}function m(){}function g(t,e,i){var s=i&&i[Y]||"",n=e.prototype,r=At(n),o=e.observedAttributes||dt,a={prototype:r};Dt(r,H,{value:function(){if(Pt)Pt=!1;else if(!this[bt]){this[bt]=!0,new e(this),n[H]&&n[H].call(this);var t=St[Et.get(e)];(!vt||t.create.length>1)&&v(this)}}}),Dt(r,z,{value:function(t){-1<ot.call(o,t)&&n[z]&&n[z].apply(this,arguments)}}),n[U]&&Dt(r,X,{value:n[U]}),n[G]&&Dt(r,q,{value:n[G]}),s&&(a[Y]=s),t=t.toUpperCase(),St[t]={constructor:e,create:s?[s,kt(t)]:[t]},Et.set(e,t),_[D](t.toLowerCase(),a),C(t),wt[t].r()}function b(t){var e=St[t.toUpperCase()];return e&&e.constructor}function y(t){return"string"==typeof t?t:t&&t.is||""}function v(t){for(var e,i=t[z],s=i?t.attributes:dt,n=s.length;n--;)i.call(t,(e=s[n]).name||e.nodeName,null,e.value||e.nodeValue)}function C(t){return(t=t.toUpperCase())in wt||(wt[t]={},wt[t].p=new _t(function(e){wt[t].r=e})),wt[t].p}function x(){yt&&delete t.customElements,ct(t,"customElements",{configurable:!0,value:new m}),ct(t,"CustomElementRegistry",{configurable:!0,value:m});for(var e=S.get(/^HTML[A-Z]*[a-z]/),i=e.length;i--;function(e){var i=t[e];if(i){t[e]=function(t){var e,s;return t||(t=this),t[bt]||(Pt=!0,e=St[Et.get(t.constructor)],(t=(s=vt&&1===e.create.length)?Reflect.construct(i,dt,e.constructor):_.createElement.apply(_,e.create))[bt]=!0,Pt=!1,s||v(t)),t},t[e].prototype=i.prototype;try{i.prototype.constructor=t[e]}catch(s){ct(i,bt,{value:t[e]})}}}(e[i]));_.createElement=function(t,e){var i=y(e);return i?qt.call(this,t,kt(i)):qt.call(this,t)},Wt||(Zt=!0,_[D](""))}var _=t.document,P=t.Object,S=function(t){var e,i,s,n,r=/^[A-Z]+[a-z]/,o=function(t,e){(e=e.toLowerCase())in a||(a[t]=(a[t]||[]).concat(e),a[e]=a[e.toUpperCase()]=t)},a=(P.create||P)(null),l={};for(i in t)for(n in t[i])for(a[n]=s=t[i][n],e=0;e<s.length;e++)a[s[e].toLowerCase()]=a[s[e].toUpperCase()]=n;return l.get=function(t){return"string"==typeof t?a[t]||(r.test(t)?[]:""):function(t){var e,i=[];for(e in a)t.test(e)&&i.push(e);return i}(t)},l.set=function(t,e){return r.test(t)?o(t,e):o(e,t),l},l}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof e&&(e={type:e||"auto"});var w,E,k,A,T,M,O,N,L,D="registerElement",j="__"+D+(1e5*t.Math.random()>>0),I="addEventListener",R="attached",B="Callback",F="detached",Y="extends",z="attributeChanged"+B,X=R+B,U="connected"+B,G="disconnected"+B,H="created"+B,q=F+B,J="ADDITION",V="REMOVAL",$="DOMAttrModified",W="DOMContentLoaded",K="DOMSubtreeModified",Z="<",Q="=",tt=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,et=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],it=[],st=[],nt="",rt=_.documentElement,ot=it.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},at=P.prototype,lt=at.hasOwnProperty,ht=at.isPrototypeOf,ct=P.defineProperty,dt=[],ut=P.getOwnPropertyDescriptor,pt=P.getOwnPropertyNames,ft=P.getPrototypeOf,mt=P.setPrototypeOf,gt=!!P.__proto__,bt="__dreCEv1",yt=t.customElements,vt=!/^force/.test(e.type)&&!!(yt&&yt.define&&yt.get&&yt.whenDefined),Ct=P.create||P,xt=t.Map||function(){var t,e=[],i=[];return{get:function(t){return i[ot.call(e,t)]},set:function(s,n){(t=ot.call(e,s))<0?i[e.push(s)-1]=n:i[t]=n}}},_t=t.Promise||function(t){function e(t){for(s=!0;i.length;)i.shift()(t)}var i=[],s=!1,n={catch:function(){return n},then:function(t){return i.push(t),s&&setTimeout(e,1),n}};return t(e),n},Pt=!1,St=Ct(null),wt=Ct(null),Et=new xt,kt=function(t){return t.toLowerCase()},At=P.create||function t(e){return e?(t.prototype=e,new t):this},Tt=mt||(gt?function(t,e){return t.__proto__=e,t}:pt&&ut?function(){function t(t,e){for(var i,s=pt(e),n=0,r=s.length;n<r;n++)lt.call(t,i=s[n])||ct(t,i,ut(e,i))}return function(e,i){do{t(e,i)}while((i=ft(i))&&!ht.call(i,e));return e}}():function(t,e){for(var i in e)t[i]=e[i];return t}),Mt=t.MutationObserver||t.WebKitMutationObserver,Ot=t.HTMLAnchorElement,Nt=(t.HTMLElement||t.Element||t.Node).prototype,Lt=!ht.call(Nt,rt),Dt=Lt?function(t,e,i){return t[e]=i.value,t}:ct,jt=Lt?function(t){return 1===t.nodeType}:function(t){return ht.call(Nt,t)},It=Lt&&[],Rt=Nt.attachShadow,Bt=Nt.cloneNode,Ft=Nt.dispatchEvent,Yt=Nt.getAttribute,zt=Nt.hasAttribute,Xt=Nt.removeAttribute,Ut=Nt.setAttribute,Gt=_.createElement,Ht=_.importNode,qt=Gt,Jt=Mt&&{attributes:!0,characterData:!0,attributeOldValue:!0},Vt=Mt||function(t){Qt=!1,rt.removeEventListener($,Vt)},$t=0,Wt=D in _&&!/^force-all/.test(e.type),Kt=!0,Zt=!1,Qt=!0,te=!0,ee=!0;if(Mt&&((L=_.createElement("div")).innerHTML="<div><div></div></div>",new Mt(function(t,e){if(t[0]&&"childList"==t[0].type&&!t[0].removedNodes[0].childNodes.length){var i=(L=ut(Nt,"innerHTML"))&&L.set;i&&ct(Nt,"innerHTML",{set:function(t){for(;this.lastChild;)this.removeChild(this.lastChild);i.call(this,t)}})}e.disconnect(),L=null}).observe(L,{childList:!0,subtree:!0}),L.innerHTML=""),Wt||(mt||gt?(O=function(t,e){ht.call(e,t)||u(t,e)},N=u):N=O=function(t,e){t[j]||(t[j]=P(!0),u(t,e))},Lt?(Qt=!1,function(){var t=ut(Nt,I),e=t.value,i=function(t){var e=new CustomEvent($,{bubbles:!0});e.attrName=t,e.prevValue=Yt.call(this,t),e.newValue=null,e[V]=e.attrChange=2,Xt.call(this,t),Ft.call(this,e)},s=function(t,e){var i=zt.call(this,t),s=i&&Yt.call(this,t),n=new CustomEvent($,{bubbles:!0});Ut.call(this,t,e),n.attrName=t,n.prevValue=i?s:null,n.newValue=e,i?n.MODIFICATION=n.attrChange=1:n[J]=n.attrChange=0,Ft.call(this,n)},n=function(t){var e,i=t.currentTarget,s=i[j],n=t.propertyName;s.hasOwnProperty(n)&&(s=s[n],(e=new CustomEvent($,{bubbles:!0})).attrName=s.name,e.prevValue=s.value||null,e.newValue=s.value=i[n]||null,null==e.prevValue?e[J]=e.attrChange=0:e.MODIFICATION=e.attrChange=1,Ft.call(i,e))};t.value=function(t,r,o){t===$&&this[z]&&this.setAttribute!==s&&(this[j]={className:{name:"class",value:this.className}},this.setAttribute=s,this.removeAttribute=i,e.call(this,"propertychange",n)),e.call(this,t,r,o)},ct(Nt,I,t)}()):Mt||(rt[I]($,Vt),rt.setAttribute(j,1),rt.removeAttribute(j),Qt&&(E=function(t){var e,i,s,n=this;if(n===t.target){for(s in e=n[j],n[j]=i=A(n),i){if(!(s in e))return k(0,n,s,e[s],i[s],J);if(i[s]!==e[s])return k(1,n,s,e[s],i[s],"MODIFICATION")}for(s in e)if(!(s in i))return k(2,n,s,e[s],i[s],V)}},k=function(t,e,i,s,n,r){var o={attrChange:t,currentTarget:e,attrName:i,prevValue:s,newValue:n};o[r]=t,a(o)},A=function(t){for(var e,i,s={},n=t.attributes,r=0,o=n.length;r<o;r++)"setAttribute"!==(i=(e=n[r]).name)&&(s[i]=e.value);return s})),_[D]=function(t,e){if(i=t.toUpperCase(),Kt&&(Kt=!1,Mt?(T=function(t,e){function i(t,e){for(var i=0,s=t.length;i<s;e(t[i++]));}return new Mt(function(s){for(var n,r,o,a=0,l=s.length;a<l;a++)"childList"===(n=s[a]).type?(i(n.addedNodes,t),i(n.removedNodes,e)):(r=n.target,ee&&r[z]&&"style"!==n.attributeName&&(o=Yt.call(r,n.attributeName))!==n.oldValue&&r[z](n.attributeName,n.oldValue,o))})}(n(R),n(F)),(M=function(t){return T.observe(t,{childList:!0,subtree:!0}),t})(_),Rt&&(Nt.attachShadow=function(){return M(Rt.apply(this,arguments))})):(w=[],_[I]("DOMNodeInserted",l(R)),_[I]("DOMNodeRemoved",l(F))),_[I](W,h),_[I]("readystatechange",h),_.importNode=function(t,e){switch(t.nodeType){case 1:return d(_,Ht,[t,!!e]);case 11:for(var i=_.createDocumentFragment(),s=t.childNodes,n=s.length,r=0;r<n;r++)i.appendChild(_.importNode(s[r],!!e));return i;default:return Bt.call(t,!!e)}},Nt.cloneNode=function(t){return d(this,Bt,[!!t])}),Zt)return Zt=!1;if(-2<ot.call(it,Q+i)+ot.call(it,Z+i)&&p(t),!tt.test(i)||-1<ot.call(et,i))throw new Error("The type "+t+" is invalid");var i,r,o=function(){return c?_.createElement(u,i):_.createElement(u)},a=e||at,c=lt.call(a,Y),u=c?e[Y].toUpperCase():i;return c&&-1<ot.call(it,Z+u)&&p(u),r=it.push((c?Q:Z)+i)-1,nt=nt.concat(nt.length?",":"",c?u+'[is="'+t.toLowerCase()+'"]':u),o.prototype=st[r]=lt.call(a,"prototype")?a.prototype:At(Nt),nt.length&&s(_.querySelectorAll(nt),R),o},_.createElement=qt=function(t,e){var i=y(e),s=i?Gt.call(_,t,kt(i)):Gt.call(_,t),n=""+t,r=ot.call(it,(i?Q:Z)+(i||n).toUpperCase()),a=-1<r;return i&&(s.setAttribute("is",i=i.toLowerCase()),a&&(a=o(n.toUpperCase(),i))),ee=!_.createElement.innerHTMLHelper,a&&N(s,st[r]),s}),m.prototype={constructor:m,define:vt?function(t,e,i){if(i)g(t,e,i);else{var s=t.toUpperCase();St[s]={constructor:e,create:[s]},Et.set(e,s),yt.define(t,e)}}:g,get:vt?function(t){return yt.get(t)||b(t)}:b,whenDefined:vt?function(t){return _t.race([yt.whenDefined(t),C(t)])}:C},!yt||/^force/.test(e.type))x();else if(!e.noBuiltIn)try{!function(e,i,s){var n=new RegExp("^<a\\s+is=('|\")"+s+"\\1></a>$");if(i[Y]="a",(e.prototype=At(Ot.prototype)).constructor=e,t.customElements.define(s,e,i),!n.test(_.createElement("a",{is:s}).outerHTML)||!n.test((new e).outerHTML))throw i}(function t(){return Reflect.construct(Ot,[],t)},{},"document-register-element-a")}catch(ie){x()}if(!e.noBuiltIn)try{if(Gt.call(_,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(se){kt=function(t){return{is:t.toLowerCase()}}}}(window),(function(){function t(t,e){return[3*t[1][e]-t[0][e]+-3*t[2][e]+t[3][e],3*t[0][e]-6*t[1][e]+3*t[2][e],-3*t[0][e]+3*t[1][e],t[0][e]]}function e(e){return[t(e,"x"),t(e,"y")]}function i(t){return 0>t?-1:t>0?1:0}function s(t,e,s,n){var r,o,a=e/t,l=s/t,h=n/t,c=(3*l-Math.pow(a,2))/9,d=(9*a*l-27*h-2*Math.pow(a,3))/54,u=Math.pow(c,3)+Math.pow(d,2),p=[];if(u>=0)r=i(d+Math.sqrt(u))*Math.pow(Math.abs(d+Math.sqrt(u)),1/3),o=i(d-Math.sqrt(u))*Math.pow(Math.abs(d-Math.sqrt(u)),1/3),p[0]=-a/3+(r+o),p[1]=-a/3-(r+o)/2,p[2]=-a/3-(r+o)/2,0!==Math.abs(Math.sqrt(3)*(r-o)/2)&&(p[1]=-1,p[2]=-1);else{var f=Math.acos(d/Math.sqrt(-Math.pow(c,3)));p[0]=2*Math.sqrt(-c)*Math.cos(f/3)-a/3,p[1]=2*Math.sqrt(-c)*Math.cos((f+2*Math.PI)/3)-a/3,p[2]=2*Math.sqrt(-c)*Math.cos((f+4*Math.PI)/3)-a/3}for(var m=0;3>m;m++)(p[m]<0||p[m]>1)&&(p[m]=-1);return p}void 0===Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var n=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},r=function(t,e){return t.x*e.x+t.y*e.y},o=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},a=function(t,e){return{x:t.x*e,y:t.y*e}},l=Math.pow(2,-65),h=function(t,e){for(var i=[],s=c(t,e),r=e.length-1,a=d(s,2*r-1,i,0),l=n(t,e[0]),h=o(l),u=0,p=0;a>p;p++){l=n(t,m(e,r,i[p],null,null));var f=o(l);h>f&&(h=f,u=i[p])}return l=n(t,e[r]),h>(f=o(l))&&(h=f,u=1),{location:u,distance:h}},c=function(t,e){for(var i=e.length-1,s=2*i-1,o=[],l=[],h=[],c=[],d=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;i>=u;u++)o[u]=n(e[u],t);for(u=0;i-1>=u;u++)l[u]=n(e[u+1],e[u]),l[u]=a(l[u],3);for(var p=0;i-1>=p;p++)for(var f=0;i>=f;f++)h[p]||(h[p]=[]),h[p][f]=r(l[p],o[f]);for(u=0;s>=u;u++)c[u]||(c[u]=[]),c[u].y=0,c[u].x=parseFloat(u)/s;for(var m=i,g=i-1,b=0;m+g>=b;b++){var y=Math.max(0,b-g),v=Math.min(b,m);for(u=y;v>=u;u++){var C=b-u;c[u+C].y+=h[C][u]*d[C][u]}}return c},d=function(t,e,i,s){var n,r,o=[],a=[],l=[],h=[];switch(u(t,e)){case 0:return 0;case 1:if(s>=64)return i[0]=(t[0].x+t[e].x)/2,1;if(p(t,e))return i[0]=f(t,e),1}m(t,e,.5,o,a),n=d(o,e,l,s+1),r=d(a,e,h,s+1);for(var c=0;n>c;c++)i[c]=l[c];for(c=0;r>c;c++)i[c+n]=h[c];return n+r},u=function(t,e){var i,s,n=0;i=s=Math.sgn(t[0].y);for(var r=1;e>=r;r++)(i=Math.sgn(t[r].y))!=s&&n++,s=i;return n},p=function(t,e){var i,s,n,r,o,a,h,c,d,u;o=t[0].y-t[e].y,a=t[e].x-t[0].x,h=t[0].x*t[e].y-t[e].x*t[0].y,d=u=0;for(var p=1;e>p;p++){var f=o*t[p].x+a*t[p].y+h;f>d?d=f:u>f&&(u=f)}return i=(1*(h-d)-0*(c=a))*(1/(0*c-1*o)),s=(1*(h-u)-0*(c=a))*(1/(0*c-1*o)),n=Math.min(i,s),r=Math.max(i,s),l>r-n?1:0},f=function(t,e){var i=t[e].x-t[0].x,s=t[e].y-t[0].y;return 0+1/(0*i-1*s)*(i*(t[0].y-0)-s*(t[0].x-0))*1},m=function(t,e,i,s,n){for(var r=[[]],o=0;e>=o;o++)r[0][o]=t[o];for(var a=1;e>=a;a++)for(o=0;e-a>=o;o++)r[a]||(r[a]=[]),r[a][o]||(r[a][o]={}),r[a][o].x=(1-i)*r[a-1][o].x+i*r[a-1][o+1].x,r[a][o].y=(1-i)*r[a-1][o].y+i*r[a-1][o+1].y;if(null!=s)for(o=0;e>=o;o++)s[o]=r[o][0];if(null!=n)for(o=0;e>=o;o++)n[o]=r[e-o][o];return r[e][0]},g={},b=function(t,e){for(var i=function(t){var e=g[t];if(!e){var i=function(t){return function(e){return t}},s=function(){return function(t){return t}},n=function(){return function(t){return 1-t}},r=function(t){return function(e){for(var i=1,s=0;s<t.length;s++)i*=t[s](e);return i}};(e=[]).push(new function(){return function(e){return Math.pow(e,t)}});for(var o=1;t>o;o++){for(var a=[new i(t)],l=0;t-o>l;l++)a.push(new s);for(l=0;o>l;l++)a.push(new n);e.push(new r(a))}e.push(new function(){return function(e){return Math.pow(1-e,t)}}),g[t]=e}return e}(t.length-1),s=0,n=0,r=0;r<t.length;r++)s+=t[r].x*i[r](e),n+=t[r].y*i[r](e);return{x:s,y:n}},y=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},v=function(t){return t[0].x===t[1].x&&t[0].y===t[1].y},C=function(t,e,i){if(v(t))return{point:t[0],location:e};for(var s=b(t,e),n=0,r=e,o=i>0?1:-1,a=null;n<Math.abs(i);)a=b(t,r+=.005*o),n+=y(a,s),s=a;return{point:a,location:r}},x=function(t,e){var i=b(t,e),s=b(t.slice(0,t.length-1),e),n=s.y-i.y;return 0===n?1/0:Math.atan(n/(s.x-i.x))},_=function(t,i,n,r,o){var a=r-i,l=t-n,h=t*(i-r)+i*(n-t),c=e(o),d=s.apply(null,[a*c[0][0]+l*c[1][0],a*c[0][1]+l*c[1][1],a*c[0][2]+l*c[1][2],a*c[0][3]+l*c[1][3]+h]),u=[];if(null!=d)for(var p=0;3>p;p++){var f,m=d[p],g=Math.pow(m,2),b=Math.pow(m,3),y=[c[0][0]*b+c[0][1]*g+c[0][2]*m+c[0][3],c[1][0]*b+c[1][1]*g+c[1][2]*m+c[1][3]];f=n-t!=0?(y[0]-t)/(n-t):(y[1]-i)/(r-i),m>=0&&1>=m&&f>=0&&1>=f&&u.push(y)}return u},P=this.jsBezier={distanceFromCurve:h,gradientAtPoint:x,gradientAtPointAlongCurveFrom:function(t,e,i){var s=C(t,e,i);return s.location>1&&(s.location=1),s.location<0&&(s.location=0),x(t,s.location)},nearestPointOnCurve:function(t,e){var i=h(t,e);return{point:m(e,e.length-1,i.location,null,null),location:i.location}},pointOnCurve:b,pointAlongCurveFrom:function(t,e,i){return C(t,e,i).point},perpendicularToCurveAt:function(t,e,i,s){var n=C(t,e,s=null==s?0:s),r=x(t,n.location),o=Math.atan(-1/r),a=i/2*Math.sin(o),l=i/2*Math.cos(o);return[{x:n.point.x+l,y:n.point.y+a},{x:n.point.x-l,y:n.point.y-a}]},locationAlongCurveFrom:function(t,e,i){return C(t,e,i).location},getLength:function(t){if(v(t))return 0;for(var e=b(t,0),i=0,s=0,n=null;1>s;)n=b(t,s+=.005),i+=y(n,e),e=n;return i},lineIntersection:_,boxIntersection:function(t,e,i,s,n){var r=[];return r.push.apply(r,_(t,e,t+i,e,n)),r.push.apply(r,_(t+i,e,t+i,e+s,n)),r.push.apply(r,_(t+i,e+s,t,e+s,n)),r.push.apply(r,_(t,e+s,t,e,n)),r},boundingBoxIntersection:function(t,e){var i=[];return i.push.apply(i,_(t.x,t.y,t.x+t.w,t.y,e)),i.push.apply(i,_(t.x+t.w,t.y,t.x+t.w,t.y+t.h,e)),i.push.apply(i,_(t.x+t.w,t.y+t.h,t.x,t.y+t.h,e)),i.push.apply(i,_(t.x,t.y+t.h,t.x,t.y,e)),i},version:"0.9.0"};"undefined"!=typeof exports&&(exports.jsBezier=P)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.Biltong={version:"0.4.0"};"undefined"!=typeof exports&&(exports.Biltong=t);var e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=function(t,i,s){return s(t=e(t)?t:[t.x,t.y],i=e(i)?i:[i.x,i.y])},s=t.gradient=function(t,e){return i(t,e,function(t,e){return e[0]==t[0]?e[1]>t[1]?1/0:-1/0:e[1]==t[1]?e[0]>t[0]?0:-0:(e[1]-t[1])/(e[0]-t[0])})},n=(t.normal=function(t,e){return-1/s(t,e)},t.lineLength=function(t,e){return i(t,e,function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))})},t.quadrant=function(t,e){return i(t,e,function(t,e){return e[0]>t[0]?e[1]>t[1]?2:1:e[0]==t[0]?e[1]>t[1]?2:1:e[1]>t[1]?3:4})}),r=(t.theta=function(t,e){return i(t,e,function(t,e){var i=s(t,e),r=Math.atan(i),o=n(t,e);return(4==o||3==o)&&(r+=Math.PI),0>r&&(r+=2*Math.PI),r})},t.intersects=function(t,e){var i=t.x,s=t.x+t.w,n=t.y,r=t.y+t.h,o=e.x,a=e.x+e.w,l=e.y,h=e.y+e.h;return o>=i&&s>=o&&l>=n&&r>=l||a>=i&&s>=a&&l>=n&&r>=l||o>=i&&s>=o&&h>=n&&r>=h||a>=i&&s>=o&&h>=n&&r>=h||i>=o&&a>=i&&n>=l&&h>=n||s>=o&&a>=s&&n>=l&&h>=n||i>=o&&a>=i&&r>=l&&h>=r||s>=o&&a>=i&&r>=l&&h>=r},t.encloses=function(t,e,i){var s=t.y,n=t.y+t.h,r=e.y,o=e.y+e.h,a=function(t,e,s,n){return i?e>=t&&s>=n:e>t&&s>n};return a(t.x,e.x,t.x+t.w,e.x+e.w)&&a(s,r,n,o)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),o=[null,[-1,-1],[-1,1],[1,1],[1,-1]];t.pointOnLine=function(t,e,i){var a=s(t,e),l=n(t,e),h=i>0?r[l]:o[l],c=Math.atan(a),d=Math.abs(i*Math.sin(c))*h[1],u=Math.abs(i*Math.cos(c))*h[0];return{x:t.x+u,y:t.y+d}},t.perpendicularLineTo=function(t,e,i){var n=s(t,e),r=Math.atan(-1/n),o=i/2*Math.sin(r),a=i/2*Math.cos(r);return[{x:e.x+a,y:e.y+o},{x:e.x-a,y:e.y-o}]}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=function(t,e,i){for(var s=(i=i||t.parentNode).querySelectorAll(e),n=0;n<s.length;n++)if(s[n]===t)return!0;return!1},i=function(t){return"string"==typeof t||t.constructor===String?document.getElementById(t):t},s=function(t){return t.srcElement||t.target},n=function(t,e,i,s){if(s){if(void 0!==t.path&&t.path.indexOf)return{path:t.path,end:t.path.indexOf(i)};var n={path:[],end:-1},r=function(t){n.path.push(t),t===i?n.end=n.path.length-1:null!=t.parentNode&&r(t.parentNode)};return r(e),n}return{path:[e],end:1}},r=function(t,e){for(var i=0,s=t.length;s>i&&t[i]!=e;i++);i<t.length&&t.splice(i,1)},o=1,a=function(t,e,i){var s=o++;return t.__ta=t.__ta||{},t.__ta[e]=t.__ta[e]||{},t.__ta[e][s]=i,i.__tauid=s,s},l=function(t,i,r,o){if(null==t)return r;var a=t.split(","),l=function(o){l.__tauid=r.__tauid;var h=s(o),c=h,d=n(o,h,i,null!=t);if(-1!=d.end)for(var u=0;u<d.end;u++){c=d.path[u];for(var p=0;p<a.length;p++)e(c,a[p],i)&&r.apply(c,arguments)}};return h(r,o,l),l},h=function(t,e,i){t.__taExtra=t.__taExtra||[],t.__taExtra.push([e,i])},c=function(t,e,i,s){if(g&&y[e]){var n=l(s,t,i,y[e]);E(t,y[e],n,i)}"focus"===e&&null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),E(t,e,l(s,t,i,e),i)},d=function(t,e,i,n){null==t.__taSmartClicks&&(c(t,"mousedown",function(e){t.__tad=_(e)},n),c(t,"mouseup",function(e){t.__tau=_(e)},n),c(t,"click",function(e){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var i=0;i<t.__taSmartClicks.length;i++)t.__taSmartClicks[i].apply(s(e),[e])},n),t.__taSmartClicks=[]),t.__taSmartClicks.push(i),i.__taUnstore=function(){r(t.__taSmartClicks,i)}},u={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},p=function(t,i){return function(o,a,l,h){if("contextmenu"==a&&b)c(o,a,l,h);else{if(null==o.__taTapHandler){var d=o.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},p=function(){d.down=!1},f=function(){d.taps=0};c(o,"mousedown",function(r){for(var a=s(r),l=n(r,a,o,null!=h),c=!1,u=0;u<l.end;u++){if(c)return;a=l.path[u];for(var m=0;m<d.downSelectors.length;m++)if(null==d.downSelectors[m]||e(a,d.downSelectors[m],o)){d.down=!0,setTimeout(p,t),setTimeout(f,i),c=!0;break}}}),c(o,"mouseup",function(t){if(d.down){var i,r,a=s(t);d.taps++;var l=w(t);for(var h in u)if(u.hasOwnProperty(h)){var c=u[h];if(c.touches===l&&(1===c.taps||c.taps===d.taps))for(var p=0;p<d[h].length;p++){r=n(t,a,o,null!=d[h][p][1]);for(var f=0;f<r.end;f++)if(i=r.path[f],null==d[h][p][1]||e(i,d[h][p][1],o)){d[h][p][0].apply(i,[t]);break}}}}})}o.__taTapHandler.downSelectors.push(h),o.__taTapHandler[a].push([l,h]),l.__taUnstore=function(){r(o.__taTapHandler[a],l)}}}},f=function(t,e,i,s){for(var n in i.__tamee[t])i.__tamee[t].hasOwnProperty(n)&&i.__tamee[t][n].apply(s,[e])},m=function(){var t=[];return function(i,n,r,o){if(!i.__tamee){i.__tamee={over:!1,mouseenter:[],mouseexit:[]};var h=function(n){var r=s(n);(null==o&&r==i&&!i.__tamee.over||e(r,o,i)&&(null==r.__tamee||!r.__tamee.over))&&(f("mouseenter",n,i,r),r.__tamee=r.__tamee||{},r.__tamee.over=!0,t.push(r))},c=function(n){for(var r=s(n),o=0;o<t.length;o++)r!=t[o]||e(n.relatedTarget||n.toElement,"*",r)||(r.__tamee.over=!1,t.splice(o,1),f("mouseexit",n,i,r))};E(i,"mouseover",l(o,i,h,"mouseover"),h),E(i,"mouseout",l(o,i,c,"mouseout"),c)}r.__taUnstore=function(){delete i.__tamee[n][r.__tauid]},a(i,n,r),i.__tamee[n][r.__tauid]=r}},g="ontouchstart"in document.documentElement,b="onmousedown"in document.documentElement,y={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},v=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),C=v>-1&&9>v,x=function(t,e){if(null==t)return[0,0];var i=S(t),s=P(i,0);return[s[e+"X"],s[e+"Y"]]},_=function(t){return null==t?[0,0]:C?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:x(t,"page")},P=function(t,e){return t.item?t.item(e):t[e]},S=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},w=function(t){return S(t).length},E=function(t,e,i,s){if(a(t,e,i),s.__tauid=i.__tauid,t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent){var n=e+i.__tauid;t["e"+n]=i,t[n]=function(){t["e"+n]&&t["e"+n](window.event)},t.attachEvent("on"+e,t[n])}},k=function(t,e,s){null!=s&&A(t,function(){var n=i(this);if(function(t,e,i){if(t.__ta&&t.__ta[e]&&delete t.__ta[e][i.__tauid],i.__taExtra){for(var s=0;s<i.__taExtra.length;s++)k(t,i.__taExtra[s][0],i.__taExtra[s][1]);i.__taExtra.length=0}i.__taUnstore&&i.__taUnstore()}(n,e,s),null!=s.__tauid)if(n.removeEventListener)n.removeEventListener(e,s,!1),g&&y[e]&&n.removeEventListener(y[e],s,!1);else if(this.detachEvent){var r=e+s.__tauid;n[r]&&n.detachEvent("on"+e,n[r]),n[r]=null,n["e"+r]=null}s.__taTouchProxy&&k(t,s.__taTouchProxy[1],s.__taTouchProxy[0])})},A=function(t,e){if(null!=t){t="undefined"!=typeof Window&&"unknown"!=typeof t.top&&t==t.top?[t]:"string"!=typeof t&&null==t.tagName&&null!=t.length?t:"string"==typeof t?document.querySelectorAll(t):[t];for(var i=0;i<t.length;i++)e.apply(t[i])}};t.Mottle=function(t){var e=(t=t||{}).clickThreshold||250,s=t.dblClickThreshold||450,n=new m,r=new p(e,s),o=t.smartClicks;this.remove=function(t){return A(t,function(){var t=i(this);if(t.__ta)for(var e in t.__ta)if(t.__ta.hasOwnProperty(e))for(var s in t.__ta[e])t.__ta[e].hasOwnProperty(s)&&k(t,e,t.__ta[e][s]);t.parentNode&&t.parentNode.removeChild(t)}),this},this.on=function(t,e,s,a){return function(t,e,s,a){null!=s&&A(t,function(){var t=i(this);o&&"click"===e?d(t,0,s,a):"tap"===e||"dbltap"===e||"contextmenu"===e?r(t,e,s,a):"mouseenter"===e||"mouseexit"==e?n(t,e,s,a):c(t,e,s,a)})}(arguments[0],arguments[1],arguments[arguments.length-1],4==arguments.length?arguments[2]:null),this},this.off=function(t,e,i){return k(t,e,i),this},this.trigger=function(t,e,s,n){var r=b&&("undefined"==typeof MouseEvent||null==s||s.constructor===MouseEvent),o=g&&!b&&y[e]?y[e]:e,a=!(g&&!b&&y[e]),l=_(s),h=x(s,"screen"),c=x(s,"client");return A(t,function(){var t,d=i(this);s=s||{screenX:h[0],screenY:h[1],clientX:c[0],clientY:c[1]};var u=function(t){n&&(t.payload=n)},p={TouchEvent:function(t){var e=function(t,e,i,s,n,r,o,a){return function(){var t=[];return Array.prototype.push.apply(t,arguments),t.item=function(t){return this[t]},t}((function(t,e,i,s,n,r,o,a){return new Touch({target:e,identifier:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),pageX:i,pageY:s,screenX:n,screenY:r,clientX:o||n,clientY:a||r})}).apply(null,arguments))}(window,d,0,l[0],l[1],h[0],h[1],c[0],c[1]);(t.initTouchEvent||t.initEvent)(o,!0,!0,window,null,h[0],h[1],c[0],c[1],!1,!1,!1,!1,e,e,e,1,0)},MouseEvents:function(t){t.initMouseEvent(o,!0,!0,window,0,h[0],h[1],c[0],c[1],!1,!1,!1,!1,1,d)}};if(document.createEvent){var f=!a&&!r&&g&&y[e]?"TouchEvent":"MouseEvents";t=document.createEvent(f),p[f](t),u(t),d.dispatchEvent(t)}else document.createEventObject&&((t=document.createEventObject()).eventType=t.eventName=o,t.screenX=h[0],t.screenY=h[1],t.clientX=c[0],t.clientY=c[1],u(t),d.fireEvent("on"+o,t))}),this}},t.Mottle.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},t.Mottle.pageLocation=_,t.Mottle.setForceTouchEvents=function(t){g=t},t.Mottle.setForceMouseEvents=function(t){b=t},t.Mottle.version="0.8.0","undefined"!=typeof exports&&(exports.Mottle=t.Mottle)}).call("undefined"==typeof window?this:window),(function(){"use strict";var t=this,e=function(t,e,i){return-1===t.indexOf(e)&&(i?t.unshift(e):t.push(e),!0)},i=function(t,e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)},s=function(t){return null!=t&&("string"==typeof t||t.constructor===String)},n=function(t,e,i){for(var s=(i=i||t.parentNode).querySelectorAll(e),n=0;n<s.length;n++)if(s[n]===t)return!0;return!1},r=function(t,e,i){if(n(e,i,t))return e;for(var s=e.parentNode;null!=s&&s!==t;){if(n(s,i,t))return s;s=s.parentNode}},o=function(t,e,i){for(var s=null,o=e.getAttribute("katavorio-draggable"),a=null!=o?"[katavorio-draggable='"+o+"'] ":"",l=0;l<t.length;l++)if(null!=(s=r(e,i,a+t[l].selector))){if(t[l].filter){var h=n(i,t[l].filter,s);if(!0===t[l].filterExclude&&!h||h)return null}return[t[l],s]}return null},a=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),l=a>-1&&9>a,h=9===a,c=function(t){if(l)return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop];var e=u(t),i=d(e,0);return h?[i.pageX||i.clientX,i.pageY||i.clientY]:[i.pageX,i.pageY]},d=function(t,e){return t.item?t.item(e):t[e]},u=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},p={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},f=["stop","start","drag","drop","over","out","beforeStart"],m=function(){},g=function(){return!0},b=function(t,e,i){for(var s=0;s<t.length;s++)t[s]!=i&&e(t[s])},y=function(t,e,i,s){b(t,function(t){t.setActive(e),e&&t.updatePosition(),i&&t.setHover(s,e)})},v=function(t,e){if(null!=t){t=s(t)||null!=t.tagName||null==t.length?[t]:t;for(var i=0;i<t.length;i++)e.apply(t[i],[t[i]])}},C=function(t){t.stopPropagation?(t.stopPropagation(),t.preventDefault()):t.returnValue=!1},x=function(t,e,i){return!n(t.srcElement||t.target,i.getInputFilterSelector(),e)},_=function(t,e,i,s){this.params=e||{},this.el=t,this.params.addClass(this.el,this._class),this.uuid=k();var n=!0;return this.setEnabled=function(t){n=t},this.isEnabled=function(){return n},this.toggleEnabled=function(){n=!n},this.setScope=function(t){this.scopes=t?t.split(/\s+/):[s]},this.addScope=function(t){var e={};for(var i in v(this.scopes,function(t){e[t]=!0}),v(t?t.split(/\s+/):[],function(t){e[t]=!0}),this.scopes=[],e)this.scopes.push(i)},this.removeScope=function(t){var e={};for(var i in v(this.scopes,function(t){e[t]=!0}),v(t?t.split(/\s+/):[],function(t){delete e[t]}),this.scopes=[],e)this.scopes.push(i)},this.toggleScope=function(t){var e={};for(var i in v(this.scopes,function(t){e[t]=!0}),v(t?t.split(/\s+/):[],function(t){e[t]?delete e[t]:e[t]=!0}),this.scopes=[],e)this.scopes.push(i)},this.setScope(e.scope),this.k=e.katavorio,e.katavorio},P=function(){return!0},S=function(){return!1},w=function(t,e,i,r){this._class=i.draggable;var a=_.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var l,h,d,u,f=[0,0],m=null,b=null,v=[0,0],w=!1,E=[0,0],T=!1!==this.params.consumeStartEvent,M=this.el,O=this.params.clone,N=!1!==e.multipleDrop,L=!1,D=!0===e.ghostProxy?P:e.ghostProxy&&"function"==typeof e.ghostProxy?e.ghostProxy:S,j=null,I=[],R=null,B=e.ghostProxyParent;if(e.selector){var F=t.getAttribute("katavorio-draggable");null==F&&(F=""+(new Date).getTime(),t.setAttribute("katavorio-draggable",F)),I.push(e)}var Y=e.snapThreshold,z=function(t,e,i,s,n){var r=e*Math.floor(t[0]/e),o=r+e,a=Math.abs(t[0]-r)<=s?r:Math.abs(o-t[0])<=s?o:t[0],l=i*Math.floor(t[1]/i),h=l+i;return[a,Math.abs(t[1]-l)<=n?l:Math.abs(h-t[1])<=n?h:t[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(t){return null==this.params.grid?t:z(t,this.params.grid[0],this.params.grid[1],this.params.grid?this.params.grid[0]/2:Y||5,this.params.grid?this.params.grid[1]/2:Y||5)},this.snap=function(t,e){if(null!=M){t=t||(this.params.grid?this.params.grid[0]:10),e=e||(this.params.grid?this.params.grid[1]:10);var i=this.params.getPosition(M);this.params.setPosition(M,z(i,t,e,this.params.grid?this.params.grid[0]/2:Y,this.params.grid?this.params.grid[1]/2:Y))}},this.setUseGhostProxy=function(t){D=t?P:S};var X,U,G=function(t){return!1===e.allowNegative?[Math.max(0,t[0]),Math.max(0,t[1])]:t},H=(function(t){X="function"==typeof t?t:t?(function(t,e,i,s){return G([Math.max(0,Math.min(i.w-s[0],t[0])),Math.max(0,Math.min(i.h-s[1],t[1]))])}).bind(this):function(t){return G(t)}}).bind(this);H("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(t){H(t)},this.setRevert=function(t){U=t},this.params.revert&&(U=this.params.revert);var q={},J=this.setFilter=function(e,i){if(e){var r=function(t){return"function"==typeof t?(t._katavorioId=k(),t._katavorioId):t}(e);q[r]=[function(i){var r,o=i.srcElement||i.target;return s(e)?r=n(o,e,t):"function"==typeof e&&(r=e(i,t)),r},!1!==i]}};this.addFilter=J,this.removeFilter=function(t){delete q["function"==typeof t?t._katavorioId:t]},this.clearAllFilters=function(){q={}},this.canDrag=this.params.canDrag||g;var V,$=[],W=[];this.addSelector=function(t){t.selector&&I.push(t)},this.downListener=(function(t){if(!t.defaultPrevented&&(this.rightButtonCanDrag||3!==t.which&&2!==t.button)&&this.isEnabled()&&this.canDrag())if(function(t){for(var e in q){var i=q[e],s=i[0](t);if(i[1]&&(s=!s),!s)return!1}return!0}(t)&&x(t,this.el,this.k)){if(R=null,j=null,I.length>0){var e=o(I,this.el,t.target||t.srcElement);if(null!=e&&(R=e[0],j=e[1]),null==j)return}else j=this.el;if(O)if(M=j.cloneNode(!0),this.params.addClass(M,p.clonedDrag),M.setAttribute("id",null),M.style.position="absolute",null!=this.params.parent){var s=this.params.getPosition(this.el);M.style.left=s[0]+"px",M.style.top=s[1]+"px",this.params.parent.appendChild(M)}else{var n=function(t){var e=j.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,r=window.pageXOffset||s.scrollLeft||i.scrollLeft,o=e.left+r-(s.clientLeft||i.clientLeft||0);return{top:Math.round(e.top+n-(s.clientTop||i.clientTop||0)),left:Math.round(o)}}();M.style.left=n.left+"px",M.style.top=n.top+"px",document.body.appendChild(M)}else M=j;T&&C(t),f=c(t),M&&M.parentNode&&(E=[M.parentNode.scrollLeft,M.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),a.markSelection(this),a.markPosses(this),this.params.addClass(document.body,i.noSelect),Q("beforeStart",{el:this.el,pos:m,e:t,drag:this})}else this.params.consumeFilteredEvents&&C(t)}).bind(this),this.moveListener=(function(t){if(f){if(!w)if(!1!==Q("start",{el:this.el,pos:m,e:t,drag:this})){if(!f)return;this.mark(!0),w=!0}else this.abort();if(f){W.length=0;var e=c(t),i=e[0]-f[0],s=e[1]-f[1],n=this.params.ignoreZoom?1:a.getZoom();M&&M.parentNode&&(i+=M.parentNode.scrollLeft-E[0],s+=M.parentNode.scrollTop-E[1]),this.moveBy(i/=n,s/=n,t),a.updateSelection(i,s,this),a.updatePosses(i,s,this)}}}).bind(this),this.upListener=(function(t){f&&(f=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,i.noSelect),this.unmark(t),a.unmarkSelection(this,t),a.unmarkPosses(this,t),this.stop(t),a.notifyPosseDragStop(this,t),w=!1,W.length=0,O?(M&&M.parentNode&&M.parentNode.removeChild(M),M=null):U&&!0===U(M,this.params.getPosition(M))&&(this.params.setPosition(M,m),Q("revert",M)))}).bind(this),this.getFilters=function(){return q},this.abort=function(){null!=f&&this.upListener()},this.getDragElement=function(t){return t?j||this.el:M||this.el};var K={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};e.events.start&&K.start.push(e.events.start),e.events.beforeStart&&K.beforeStart.push(e.events.beforeStart),e.events.stop&&K.stop.push(e.events.stop),e.events.drag&&K.drag.push(e.events.drag),e.events.revert&&K.revert.push(e.events.revert),this.on=function(t,e){K[t]&&K[t].push(e)},this.off=function(t,e){if(K[t]){for(var i=[],s=0;s<K[t].length;s++)K[t][s]!==e&&i.push(K[t][s]);K[t]=i}};var Z,Q=function(t,e){var i=null;if(R&&R[t])i=R[t](e);else if(K[t])for(var s=0;s<K[t].length;s++)try{var n=K[t][s](e);null!=n&&(i=n)}catch(r){}return i};this.notifyStart=function(t){Q("start",{el:this.el,pos:this.params.getPosition(M),e:t,drag:this})},this.stop=function(t,e){if(e||w){var i=[],s=a.getSelection(),n=this.params.getPosition(M);if(s.length>0)for(var r=0;r<s.length;r++){var o=this.params.getPosition(s[r].el);i.push([s[r].el,{left:o[0],top:o[1]},s[r]])}else i.push([M,{left:n[0],top:n[1]},this]);Q("stop",{el:M,pos:Z||n,finalPos:n,e:t,drag:this,selection:i})}},this.mark=function(t){var e;m=this.params.getPosition(M),b=this.params.getPosition(M,!0),v=[b[0]-m[0],b[1]-m[1]],this.size=this.params.getSize(M),$=a.getMatchingDroppables(this),y($,!0,!1,this),this.params.addClass(M,this.params.dragClass||i.drag),e=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(M):this.params.getSize(M.parentNode),V={w:e[0],h:e[1]},d=0,u=0,t&&a.notifySelectionDragStart(this)},this.unmark=function(t,s){if(y($,!1,!0,this),L&&D(j,M)?(Z=[M.offsetLeft-d,M.offsetTop-u],M.parentNode.removeChild(M),M=j):Z=null,this.params.removeClass(M,this.params.dragClass||i.drag),$.length=0,L=!1,!s){W.length>0&&Z&&e.setPosition(j,Z),W.sort(A);for(var n=0;n<W.length&&!0!==W[n].drop(this,t);n++);}},this.moveBy=function(t,i,s){W.length=0;var n=this.toGrid([m[0]+t,m[1]+i]),r=X(n,M,V,this.size);if(D(this.el,M))if(n[0]!==r[0]||n[1]!==r[1]){if(!L){var o=j.cloneNode(!0);e.addClass(o,p.ghostProxy),B?(B.appendChild(o),l=e.getPosition(j.parentNode,!0),h=e.getPosition(e.ghostProxyParent,!0),d=l[0]-h[0],u=l[1]-h[1]):j.parentNode.appendChild(o),M=o,L=!0}r=n}else L&&(M.parentNode.removeChild(M),M=j,L=!1,l=null,h=null,d=0,u=0);var a={x:r[0],y:r[1],w:this.size[0],h:this.size[1]},c={x:a.x+v[0],y:a.y+v[1],w:a.w,h:a.h},f=null;this.params.setPosition(M,[r[0]+d,r[1]+u]);for(var g=0;g<$.length;g++)this.params.intersects(c,{x:$[g].pagePosition[0],y:$[g].pagePosition[1],w:$[g].size[0],h:$[g].size[1]})&&(N||null==f||f===$[g].el)&&$[g].canDrop(this)?(f||(f=$[g].el),W.push($[g]),$[g].setHover(this,!0,s)):$[g].isHover()&&$[g].setHover(this,!1,s);Q("drag",{el:this.el,pos:r,e:s,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?J(this.params.handle,!1):J(this.params.filter,this.params.filterExclude)},E=function(t,e,i,s){this._class=i.droppable,this.params=e||{},this.rank=e.rank||0,this._activeClass=this.params.activeClass||i.active,this._hoverClass=this.params.hoverClass||i.hover,_.apply(this,arguments);var n=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(t){return!0},this.isHover=function(){return n},this.setHover=function(t,e,i){(e||null==this.el._katavorioDragHover||this.el._katavorioDragHover===t.el._katavorio)&&(this.params[e?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=e?t.el._katavorio:null,n!==e&&this.params.events[e?"over":"out"]({el:this.el,e:i,drag:t,drop:this}),n=e)},this.drop=function(t,e){return this.params.events.drop({drag:t,e,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,n=null}},k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},A=function(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:0},T=function(t){return null==t?null:null==(t="string"==typeof t||t.constructor===String?document.getElementById(t):t)?null:(t._katavorio=t._katavorio||k(),t)};t.Katavorio=function(t){var n=[],r={};this._dragsByScope={},this._dropsByScope={};var o=1,a=function(t,e){v(t,function(t){for(var i=0;i<t.scopes.length;i++)e[t.scopes[i]]=e[t.scopes[i]]||[],e[t.scopes[i]].push(t)})},l=function(e,i){var s=0;return v(e,function(e){for(var n=0;n<e.scopes.length;n++)if(i[e.scopes[n]]){var r=t.indexOf(i[e.scopes[n]],e);-1!==r&&(i[e.scopes[n]].splice(r,1),s++)}}),s>0},h=(this.getMatchingDroppables=function(t){for(var e=[],i={},s=0;s<t.scopes.length;s++){var n=this._dropsByScope[t.scopes[s]];if(n)for(var r=0;r<n.length;r++)!n[r].canDrop(t)||i[n[r].uuid]||!n[r].allowLoopback&&n[r].el===t.el||(i[n[r].uuid]=!0,e.push(n[r]))}return e.sort(A),e},(function(e){e=e||{};var i,s={events:{}};for(i in t)s[i]=t[i];for(i in e)s[i]=e[i];for(i=0;i<f.length;i++)s.events[f[i]]=e[f[i]]||m;return s.katavorio=this,s}).bind(this)),c=(function(t,e){for(var i=0;i<f.length;i++)e[f[i]]&&t.on(f[i],e[f[i]])}).bind(this),d={},u=t.css||{},g=t.scope||"katavorio-drag-scope";for(var y in p)d[y]=p[y];for(var y in u)d[y]=u[y];var C=t.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return C},this.setInputFilterSelector=function(t){return C=t,this},this.draggable=function(e,i){var s=[];return v(e,(function(e){if(null!=(e=T(e)))if(null==e._katavorioDrag){var n=h(i);e._katavorioDrag=new w(e,n,d,g),a(e._katavorioDrag,this._dragsByScope),s.push(e._katavorioDrag),t.addClass(e,n.selector?d.delegatedDraggable:d.draggable)}else c(e._katavorioDrag,i)}).bind(this)),s},this.droppable=function(e,i){var s=[];return v(e,(function(e){if(null!=(e=T(e))){var n=new E(e,h(i),d,g);e._katavorioDrop=e._katavorioDrop||[],e._katavorioDrop.push(n),a(n,this._dropsByScope),s.push(n),t.addClass(e,d.droppable)}}).bind(this)),s},this.select=function(e){return v(e,function(){var e=T(this);e&&e._katavorioDrag&&(r[e._katavorio]||(n.push(e._katavorioDrag),r[e._katavorio]=[e,n.length-1],t.addClass(e,d.selected)))}),this},this.deselect=function(e){return v(e,function(){var e=T(this);if(e&&e._katavorio&&r[e._katavorio]){for(var i=[],s=0;s<n.length;s++)n[s].el!==e&&i.push(n[s]);n=i,delete r[e._katavorio],t.removeClass(e,d.selected)}}),this},this.deselectAll=function(){for(var e in r)t.removeClass(r[e][0],d.selected);n.length=0,r={}},this.markSelection=function(t){b(n,function(t){t.mark()},t)},this.markPosses=function(t){t.posses&&v(t.posses,function(e){t.posseRoles[e]&&k[e]&&b(k[e].members,function(t){t.mark()},t)})},this.unmarkSelection=function(t,e){b(n,function(t){t.unmark(e)},t)},this.unmarkPosses=function(t,e){t.posses&&v(t.posses,function(i){t.posseRoles[i]&&k[i]&&b(k[i].members,function(t){t.unmark(e,!0)},t)})},this.getSelection=function(){return n.slice(0)},this.updateSelection=function(t,e,i){b(n,function(i){i.moveBy(t,e)},i)};var x=function(t,e){e.posses&&v(e.posses,function(i){e.posseRoles[i]&&k[i]&&b(k[i].members,function(e){t(e)},e)})};this.updatePosses=function(t,e,i){x(function(i){i.moveBy(t,e)},i)},this.notifyPosseDragStop=function(t,e){x(function(t){t.stop(e,!0)},t)},this.notifySelectionDragStop=function(t,e){b(n,function(t){t.stop(e,!0)},t)},this.notifySelectionDragStart=function(t,e){b(n,function(t){t.notifyStart(e)},t)},this.setZoom=function(t){o=t},this.getZoom=function(){return o};var _=function(t,e,i,s){v(t,function(t){l(t,i),t[s](e),a(t,i)})};v(["set","add","remove","toggle"],(function(t){this[t+"Scope"]=(function(e,i){_(e._katavorioDrag,i,this._dragsByScope,t+"Scope"),_(e._katavorioDrop,i,this._dropsByScope,t+"Scope")}).bind(this),this[t+"DragScope"]=(function(e,i){_(e.constructor===w?e:e._katavorioDrag,i,this._dragsByScope,t+"Scope")}).bind(this),this[t+"DropScope"]=(function(e,i){_(e.constructor===E?e:e._katavorioDrop,i,this._dropsByScope,t+"Scope")}).bind(this)}).bind(this)),this.snapToGrid=function(t,e){for(var i in this._dragsByScope)b(this._dragsByScope[i],function(i){i.snap(t,e)})},this.getDragsForScope=function(t){return this._dragsByScope[t]},this.getDropsForScope=function(t){return this._dropsByScope[t]};var P=function(t,e,i){if((t=T(t))[e]){var s=n.indexOf(t[e]);s>=0&&n.splice(s,1),l(t[e],i)&&v(t[e],function(t){t.destroy()}),delete t[e]}},S=function(t,e,i,s){(t=T(t))[e]&&t[e].off(i,s)};this.elementRemoved=function(t){this.destroyDraggable(t),this.destroyDroppable(t)},this.destroyDraggable=function(t,e,i){1===arguments.length?P(t,"_katavorioDrag",this._dragsByScope):S(t,"_katavorioDrag",e,i)},this.destroyDroppable=function(t,e,i){1===arguments.length?P(t,"_katavorioDrop",this._dropsByScope):S(t,"_katavorioDrop",e,i)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},n=[],r={},k={}};var k={},M=function(t,i,n){var r=s(i)?i:i.id,o=!!s(i)||!1!==i.active,a=k[r]||function(){var t={name:r,members:[]};return k[r]=t,t}();return v(t,function(t){if(t._katavorioDrag){if(n&&null!=t._katavorioDrag.posseRoles[a.name])return;e(a.members,t._katavorioDrag),e(t._katavorioDrag.posses,a.name),t._katavorioDrag.posseRoles[a.name]=o}}),a};this.addToPosse=function(t,e){for(var i=[],s=1;s<arguments.length;s++)i.push(M(t,arguments[s]));return 1===i.length?i[0]:i},this.setPosse=function(t,e){for(var i=[],s=1;s<arguments.length;s++)i.push(M(t,arguments[s],!0).name);return v(t,(function(t){if(t._katavorioDrag){var e=function(t,e){for(var i=[],s=0;s<t.length;s++)-1===e.indexOf(t[s])&&i.push(t[s]);return i}(t._katavorioDrag.posses,i);Array.prototype.push.apply([],t._katavorioDrag.posses);for(var s=0;s<e.length;s++)this.removeFromPosse(t,e[s])}}).bind(this)),1===i.length?i[0]:i},this.removeFromPosse=function(t,e){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var s=1;s<arguments.length;s++)e=arguments[s],v(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var s=t._katavorioDrag;v(e,function(t){i(k[t].members,s),i(s.posses,t),delete s.posseRoles[t]})}})},this.removeFromAllPosses=function(t){v(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var e=t._katavorioDrag;v(e.posses,function(t){i(k[t].members,e)}),e.posses.length=0,e.posseRoles={}}})},this.setPosseState=function(t,e,i){var s=k[e];s&&v(t,function(t){t._katavorioDrag&&t._katavorioDrag.posses&&(t._katavorioDrag.posseRoles[s.name]=i)})}},t.Katavorio.version="1.0.0","undefined"!=typeof exports&&(exports.Katavorio=t.Katavorio)}).call("undefined"!=typeof window?window:this),(function(){function t(t){return"[object Array]"===Object.prototype.toString.call(t)}function e(t){return"string"==typeof t}function i(t){return"boolean"==typeof t}function s(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function n(t){return"[object Date]"===Object.prototype.toString.call(t)}function r(t){return"[object Function]"===Object.prototype.toString.call(t)}function o(a){if(e(a))return""+a;if(i(a))return!!a;if(n(a))return new Date(a.getTime());if(r(a))return a;if(t(a)){for(var l=[],h=0;h<a.length;h++)l.push(o(a[h]));return l}if(s(a)){var c={};for(var d in a)c[d]=o(a[d]);return c}return a}function a(n,r,a,l){var h,c,d={},u={};for(a=a||[],l=l||[],c=0;c<a.length;c++)d[a[c]]=!0;for(c=0;c<l.length;c++)u[l[c]]=!0;var p=o(n);for(c in r)if(null==p[c]||u[c])p[c]=r[c];else if(e(r[c])||i(r[c]))d[c]?((h=[]).push.apply(h,t(p[c])?p[c]:[p[c]]),h.push.apply(h,i(r[c])?r[c]:[r[c]]),p[c]=h):p[c]=r[c];else if(t(r[c]))h=[],t(p[c])&&h.push.apply(h,p[c]),h.push.apply(h,r[c]),p[c]=h;else if(s(r[c]))for(var f in s(p[c])||(p[c]={}),r[c])p[c][f]=r[c][f];return p}function l(t,e){if(t)for(var i=0;i<t.length;i++)if(e(t[i]))return i;return-1}function h(t,e){var i=t.indexOf(e);return i>-1&&t.splice(i,1),-1!==i}function c(t,e,i,s){var n=t[e];return null==n&&(t[e]=n=[]),n[s?"unshift":"push"](i),n}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(f.logEnabled&&"undefined"!=typeof console)try{console.log(arguments[arguments.length-1])}catch(i){}}var p=this;p.jsPlumbUtil=p.jsPlumbUtil||{};var f=p.jsPlumbUtil;"undefined"!=typeof exports&&(exports.jsPlumbUtil=f),f.isArray=t,f.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)},f.isString=e,f.isBoolean=i,f.isNull=function(t){return null==t},f.isObject=s,f.isDate=n,f.isFunction=r,f.isNamedFunction=function(t){return r(t)&&null!=t.name&&t.name.length>0},f.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},f.clone=o,f.merge=a,f.replace=function(t,e,i){if(null!=t){var s=t;return e.replace(/([^\.])+/g,function(t,e,n,r){var o=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),a=function(){return s[o[1]]||(s[o[1]]=[],s[o[1]])};if(n+t.length>=r.length)o?a()[o[3]]=i:s[t]=i;else if(o){var l=a();s=l[o[3]]||(l[o[3]]={},l[o[3]])}else s=s[t]||(s[t]={},s[t]);return""}),t}},f.functionChain=function(t,e,i){for(var s=0;s<i.length;s++){var n=i[s][0][i[s][1]].apply(i[s][0],i[s][2]);if(n===e)return n}return t},f.populate=function(i,n,o,a){var l=function(i){if(null!=i){if(e(i))return function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var i=0;i<e.length;i++){var s=n[e[i].substring(2,e[i].length-1)]||"";null!=s&&(t=t.replace(e[i],s))}return t}(i);if(!r(i)||a||null!=o&&0!==(i.name||"").indexOf(o)){if(t(i)){for(var h=[],c=0;c<i.length;c++)h.push(l(i[c]));return h}if(s(i)){var d={};for(var u in i)d[u]=l(i[u]);return d}return i}return i(n)}};return l(i)},f.findWithFunction=l,f.removeWithFunction=function(t,e){var i=l(t,e);return i>-1&&t.splice(i,1),-1!==i},f.remove=h,f.addWithFunction=function(t,e,i){-1===l(t,i)&&t.push(e)},f.addToList=c,f.suggest=function(t,e,i){return-1===t.indexOf(e)&&(i?t.unshift(e):t.push(e),!0)},f.extend=function(e,i,s){var n;i=t(i)?i:[i];var r=function(t){for(var i=t.__proto__;null!=i;)if(null!=i.prototype){for(var s in i.prototype)i.prototype.hasOwnProperty(s)&&!e.prototype.hasOwnProperty(s)&&(e.prototype[s]=i.prototype[s]);i=i.prototype.__proto__}else i=null};for(n=0;n<i.length;n++){for(var o in i[n].prototype)i[n].prototype.hasOwnProperty(o)&&!e.prototype.hasOwnProperty(o)&&(e.prototype[o]=i[n].prototype[o]);r(i[n])}var a=function(t,e){return function(){for(n=0;n<i.length;n++)i[n].prototype[t]&&i[n].prototype[t].apply(this,arguments);return e.apply(this,arguments)}},l=function(t){for(var i in t)e.prototype[i]=a(i,t[i])};if(arguments.length>2)for(n=2;n<arguments.length;n++)l(arguments[n]);return e},f.uuid=d,f.fastTrim=function(t){if(null==t)return null;for(var e=t.replace(/^\s\s*/,""),i=/\s/,s=e.length;i.test(e.charAt(--s)););return e.slice(0,s+1)},f.each=function(t,e){t=null==t.length||"string"==typeof t?[t]:t;for(var i=0;i<t.length;i++)e(t[i])},f.map=function(t,e){for(var i=[],s=0;s<t.length;s++)i.push(e(t[s]));return i},f.mergeWithParents=function(t,e,i){i=i||"parent";var s=function(t){return t?e[t]:null},n=function(t){return t?s(t[i]):null},r=function(t,e){if(null==t)return e;var i=a(t,e);return r(n(t),i)},o=function(t){if(null==t)return{};if("string"==typeof t)return s(t);if(t.length){for(var e=!1,i=0,n=void 0;!e&&i<t.length;)(n=o(t[i]))?e=!0:i++;return n}},l=o(t);return l?r(n(l),l):{}},f.logEnabled=!0,f.log=u,f.wrap=function(t,e,i){return function(){var s=null;try{null!=e&&(s=e.apply(this,arguments))}catch(n){u("jsPlumb function failed : "+n)}if(null!=t&&(null==i||s!==i))try{s=t.apply(this,arguments)}catch(n){u("wrapped function failed : "+n)}return s}},f.EventGenerator=function(){var t=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(e,i,s){var n=function(e){c(t._listeners,e,i,s),i.__jsPlumb=i.__jsPlumb||{},i.__jsPlumb[d()]=e};if("string"==typeof e)n(e);else if(null!=e.length)for(var r=0;r<e.length;r++)n(e[r]);return t},this.fire=function(t,e,i){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var s=this._listeners[t].length,n=0,o=!1,a=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,e,i))for(;!o&&s>n&&!1!==a;){if(this.eventsToDieOn[t])this._listeners[t][n].apply(this,[e,i]);else try{a=this._listeners[t][n].apply(this,[e,i])}catch(r){u("jsPlumb: fire failed for event "+t+" : "+r)}n++,(null==this._listeners||null==this._listeners[t])&&(o=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var e=t.queue.pop();e&&t.fire.apply(t,e)},this.unbind=function(t,e){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"==typeof t)delete this._listeners[t];else if(t.__jsPlumb)for(var i in t.__jsPlumb)h(this._listeners[t.__jsPlumb[i]]||[],t)}else 2===arguments.length&&h(this._listeners[t]||[],e);return this},this.getListener=function(e){return t._listeners[e]},this.setSuspendEvents=function(e){t.eventsSuspended=e},this.isSuspendEvents=function(){return t.eventsSuspended},this.silently=function(i){t.setSuspendEvents(!0);try{i()}catch(e){u("Cannot execute silent function "+e)}t.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var e in t._listeners)t._listeners[e]=null}}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this;t.jsPlumbUtil.matchesSelector=function(t,e,i){for(var s=(i=i||t.parentNode).querySelectorAll(e),n=0;n<s.length;n++)if(s[n]===t)return!0;return!1},t.jsPlumbUtil.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},t.jsPlumbUtil.sizeElement=function(t,e,i,s,n){t&&(t.style.height=n+"px",t.height=n,t.style.width=s+"px",t.width=s,t.style.left=e+"px",t.style.top=i+"px")}}).call("undefined"!=typeof window?window:this),(function(){var t={deriveAnchor:function(t,e,i,s){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[t][e]}},e=function(t){this.count=0,this.instance=t,this.lists={},this.instance.addList=function(t,e){return this.listManager.addList(t,e)},this.instance.removeList=function(t){this.listManager.removeList(t)},this.instance.bind("manageElement",(function(t){for(var e=this.instance.getSelector(t.el,"[jtk-scrollable-list]"),i=0;i<e.length;i++)this.addList(e[i])}).bind(this)),this.instance.bind("unmanageElement",function(t){this.removeList(t.el)}),this.instance.bind("connection",(function(t,e){null==e&&(this._maybeUpdateParentList(t.source),this._maybeUpdateParentList(t.target))}).bind(this))};this.jsPlumbListManager=e,e.prototype={addList:function(e,s){var n=this.instance.extend({},t);s=this.instance.extend(n,s||{});var r=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[r]=new i(this.instance,e,s,r)},removeList:function(t){var e=this.lists[t._jsPlumbList];e&&(e.destroy(),delete this.lists[t._jsPlumbList])},_maybeUpdateParentList:function(t){for(var e=t.parentNode,i=this.instance.getContainer();null!=e&&e!==i;){if(null!=e._jsPlumbList&&null!=this.lists[e._jsPlumbList])return void e._jsPlumbScrollHandler();e=e.parentNode}}};var i=function(t,e,i,s){function n(t,e,s,n){return i.anchor?i.anchor:i.deriveAnchor(t,e,s,n)}function r(t,e,s,n){return i.deriveEndpoint?i.deriveEndpoint(t,e,s,n):i.endpoint?i.endpoint:s.type}e._jsPlumbList=s;var o=function(i){for(var s=t.getSelector(e,".jtk-managed"),o=t.getId(e),a=0;a<s.length;a++){if(s[a].offsetTop<e.scrollTop)s[a]._jsPlumbProxies||(s[a]._jsPlumbProxies=s[a]._jsPlumbProxies||[],t.select({source:s[a]}).each(function(i){t.proxyConnection(i,0,e,o,function(){return r("top",0,i.endpoints[0],i)},function(){return n("top",0,i.endpoints[0],i)}),s[a]._jsPlumbProxies.push([i,0])}),t.select({target:s[a]}).each(function(i){t.proxyConnection(i,1,e,o,function(){return r("top",1,i.endpoints[1],i)},function(){return n("top",1,i.endpoints[1],i)}),s[a]._jsPlumbProxies.push([i,1])}));else if(s[a].offsetTop>e.scrollTop+e.offsetHeight)s[a]._jsPlumbProxies||(s[a]._jsPlumbProxies=s[a]._jsPlumbProxies||[],t.select({source:s[a]}).each(function(i){t.proxyConnection(i,0,e,o,function(){return r("bottom",0,i.endpoints[0],i)},function(){return n("bottom",0,i.endpoints[0],i)}),s[a]._jsPlumbProxies.push([i,0])}),t.select({target:s[a]}).each(function(i){t.proxyConnection(i,1,e,o,function(){return r("bottom",1,i.endpoints[1],i)},function(){return n("bottom",1,i.endpoints[1],i)}),s[a]._jsPlumbProxies.push([i,1])}));else if(s[a]._jsPlumbProxies){for(var l=0;l<s[a]._jsPlumbProxies.length;l++)t.unproxyConnection(s[a]._jsPlumbProxies[l][0],s[a]._jsPlumbProxies[l][1],o);delete s[a]._jsPlumbProxies}t.revalidate(s[a])}!function(e){for(var i=e.parentNode,s=t.getContainer();null!=i&&i!==s;){if(t.hasClass(i,"jtk-managed"))return void t.recalculateOffsets(i);i=i.parentNode}}(e)};t.setAttribute(e,"jtk-scrollable-list","true"),e._jsPlumbScrollHandler=o,t.on(e,"scroll",o),o(),this.destroy=function(){t.off(e,"scroll",o),delete e._jsPlumbScrollHandler;for(var i=t.getSelector(e,".jtk-managed"),s=t.getId(e),n=0;n<i.length;n++)if(i[n]._jsPlumbProxies){for(var r=0;r<i[n]._jsPlumbProxies.length;r++)t.unproxyConnection(i[n]._jsPlumbProxies[r][0],i[n]._jsPlumbProxies[r][1],s);delete i[n]._jsPlumbProxies}}}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumbUtil,i=function(){return""+(new Date).getTime()},s=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var e={};p.extend(e,t._jsPlumb.paintStyle),p.extend(e,t._jsPlumb.hoverPaintStyle),delete t._jsPlumb.hoverPaintStyle,e.gradient&&t._jsPlumb.paintStyle.fill&&delete e.gradient,t._jsPlumb.hoverPaintStyle=e}},n=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],r=function(t){return null==t?null:t.split(" ")},o=function(t,e,i){for(var s in e)t[s]=i},a=function(t,i,s){if(t.getDefaultType){var n=t.getTypeDescriptor(),r={},a=t.getDefaultType(),l=e.merge({},a);o(r,a,"__default");for(var h=0,c=t._jsPlumb.types.length;c>h;h++){var d=t._jsPlumb.types[h];if("__default"!==d){var u=t._jsPlumb.instance.getType(d,n);null!=u&&(l=e.merge(l,u,["cssClass"],["connector"]),o(r,u,d))}}i&&(l=e.populate(l,i,"_")),t.applyType(l,s,r),s||t.repaint()}},l=t.jsPlumbUIComponent=function(t){e.EventGenerator.apply(this,arguments);var i=arguments,s=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(t,e,i){this._jsPlumb.typeCache[i]=this._jsPlumb.typeCache[i]||{},this._jsPlumb.typeCache[i][t]=e},this.getCachedTypeItem=function(t,e){return this._jsPlumb.typeCache[e]?this._jsPlumb.typeCache[e][t]:null},this.getId=function(){return s};var n=t.overlays||[],r={};if(this.defaultOverlayKeys){for(var o=0;o<this.defaultOverlayKeys.length;o++)Array.prototype.push.apply(n,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[o]]||[]);for(o=0;o<n.length;o++){var a=p.convertToFullOverlaySpec(n[o]);r[a[1].id]=a}}var l={overlays:r,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return l},this.appendToDefaultType=function(t){for(var e in t)l[e]=t[e]},t.events)for(var h in t.events)this.bind(h,t.events[h]);this.clone=(function(){var t=Object.create(this.constructor.prototype);return this.constructor.apply(t,i),t}).bind(this),this.isDetachAllowed=function(t){var s=!0;if(this._jsPlumb.beforeDetach)try{s=this._jsPlumb.beforeDetach(t)}catch(i){e.log("jsPlumb: beforeDetach callback failed",i)}return s},this.isDropAllowed=function(t,i,s,n,r,o,l){var h=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:i,scope:s,connection:n,dropEndpoint:r,source:o,target:l});if(this._jsPlumb.beforeDrop)try{h=this._jsPlumb.beforeDrop({sourceId:t,targetId:i,scope:s,connection:n,dropEndpoint:r,source:o,target:l})}catch(a){e.log("jsPlumb: beforeDrop callback failed",a)}return h};var c=[];this.setListenerComponent=function(t){for(var e=0;e<c.length;e++)c[e][3]=t}},h=function(t,e){var i=t._jsPlumb.instance.getType(t._jsPlumb.types[e],t.getTypeDescriptor());null!=i&&i.cssClass&&t.canvas&&t._jsPlumb.instance.removeClass(t.canvas,i.cssClass)};e.extend(t.jsPlumbUIComponent,e.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,e){this._jsPlumb.parameters[t]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},getClass:function(){return p.getClass(this.canvas)},hasClass:function(t){return p.hasClass(this.canvas,t)},addClass:function(t){p.addClass(this.canvas,t)},removeClass:function(t){p.removeClass(this.canvas,t)},updateClasses:function(t,e){p.updateClasses(this.canvas,t,e)},setType:function(t,e,i){this.clearTypes(),this._jsPlumb.types=r(t)||[],a(this,e,i)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,e){a(this,t,e)},hasType:function(t){return-1!==this._jsPlumb.types.indexOf(t)},addType:function(t,e,i){var s=r(t),n=!1;if(null!=s){for(var o=0,l=s.length;l>o;o++)this.hasType(s[o])||(this._jsPlumb.types.push(s[o]),n=!0);n&&a(this,e,i)}},removeType:function(t,e,i){var s=r(t),n=!1,o=(function(t){var e=this._jsPlumb.types.indexOf(t);return-1!==e&&(h(this,e),this._jsPlumb.types.splice(e,1),!0)}).bind(this);if(null!=s){for(var l=0,c=s.length;c>l;l++)n=o(s[l])||n;n&&a(this,e,i)}},clearTypes:function(t,e){for(var i=this._jsPlumb.types.length,s=0;i>s;s++)h(this,0),this._jsPlumb.types.splice(0,1);a(this,t,e)},toggleType:function(t,e,i){var s=r(t);if(null!=s){for(var n=0,o=s.length;o>n;n++){var l=this._jsPlumb.types.indexOf(s[n]);-1!==l?(h(this,l),this._jsPlumb.types.splice(l,1)):this._jsPlumb.types.push(s[n])}a(this,e,i)}},applyType:function(t,e){if(this.setPaintStyle(t.paintStyle,e),this.setHoverPaintStyle(t.hoverPaintStyle,e),t.parameters)for(var i in t.parameters)this.setParameter(i,t.parameters[i]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,e){this._jsPlumb.paintStyle=t,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,s(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,e){this._jsPlumb.hoverPaintStyle=t,s(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){(t||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(t,e,s){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=t;var n=t?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[n](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[n](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(s=s||i(),this.repaint({timestamp:s,recalc:!1}))),this.getAttachedElements&&!e&&function(t,e,i,s){var n=t.getAttachedElements();if(n)for(var r=0,o=n.length;o>r;r++)s&&s===n[r]||n[r].setHover(e,!0,i)}(this,t,i(),this)}}});var c=0,d=function(){var t=c+1;return c++,t},u=t.jsPlumbInstance=function(s){this.version="2.10.1",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},s&&p.extend(this.Defaults,s),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},e.EventGenerator.apply(this);var r=this,o=d(),a=r.bind,h={},c=1,u=function(t){if(null==t)return null;if(3===t.nodeType||8===t.nodeType)return{el:t,text:!0};var i=r.getElement(t);return{el:i,id:e.isString(t)&&null==i?t:z(i)}};for(var f in this.getInstanceIndex=function(){return o},this.setZoom=function(t,e){return r.fire("zoom",c=t),e&&r.repaintEverything(),!0},this.getZoom=function(){return c},this.Defaults)h[f]=this.Defaults[f];var m,g=[];this.unbindContainer=function(){if(null!=m&&g.length>0)for(var t=0;t<g.length;t++)r.off(m,g[t][0],g[t][1])},this.setContainer=function(t){this.unbindContainer(),t=this.getElement(t),this.select().each(function(e){e.moveParent(t)}),this.selectEndpoints().each(function(e){e.moveParent(t)});var e=m;m=t,g.length=0;for(var i={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},s=function(t,e,s){var n=e.srcElement||e.target,o=(n&&n.parentNode?n.parentNode._jsPlumb:null)||(n?n._jsPlumb:null)||(n&&n.parentNode&&n.parentNode.parentNode?n.parentNode.parentNode._jsPlumb:null);o&&(o.fire(t,o,e),r.fire(s&&i[s+t]||t,o.component||o,e))},o=function(t,e,i){g.push([t,i]),r.on(m,t,e,i)},a=function(t){o(t,".jtk-connector",function(e){s(t,e)}),o(t,".jtk-endpoint",function(e){s(t,e,"endpoint")}),o(t,".jtk-overlay",function(e){s(t,e)})},l=0;l<n.length;l++)a(n[l]);for(var h in _){var c=_[h].el;c.parentNode===e&&(e.removeChild(c),m.appendChild(c))}},this.getContainer=function(){return m},this.bind=function(t,e){"ready"===t&&y?e():a.apply(r,[t,e])},r.importDefaults=function(t){for(var e in t)r.Defaults[e]=t[e];return t.Container&&r.setContainer(t.Container),r},r.restoreDefaults=function(){return r.Defaults=p.extend({},h),r};var b=null,y=!1,v=[],C={},x={},_={},P={},S={},w=!1,E=[],k=!1,A=null,T=this.Defaults.Scope,M=1,O=function(){return""+M++},N=(function(t,e){m?m.appendChild(t):e?this.getElement(e).appendChild(t):this.appendToRoot(t)}).bind(this),L=function(t,e,s,n){if(!k){var o,a=z(t),l=r.getDragManager();l&&(o=l.getElementsForDraggable(a)),null==s&&(s=i());var h=rt({elId:a,offset:e,recalc:!1,timestamp:s});if(o&&h&&h.o)for(var c in o)rt({elId:o[c].id,offset:{left:h.o.left+o[c].offset.left,top:h.o.top+o[c].offset.top},recalc:!1,timestamp:s});if(r.anchorManager.redraw(a,e,s,null,n),o)for(var d in o)r.anchorManager.redraw(o[d].id,e,s,o[d].offset,n,!0)}},D=function(t){return x[t]},j=(function(t,i){var s=p.extend({},t);if(i&&p.extend(s,i),s.source&&(s.source.endpoint?s.sourceEndpoint=s.source:s.source=r.getElement(s.source)),s.target&&(s.target.endpoint?s.targetEndpoint=s.target:s.target=r.getElement(s.target)),t.uuids&&(s.sourceEndpoint=D(t.uuids[0]),s.targetEndpoint=D(t.uuids[1])),s.sourceEndpoint&&s.sourceEndpoint.isFull())e.log(r,"could not add connection; source endpoint is full");else{if(!s.targetEndpoint||!s.targetEndpoint.isFull()){if(!s.type&&s.sourceEndpoint&&(s.type=s.sourceEndpoint.connectionType),s.sourceEndpoint&&s.sourceEndpoint.connectorOverlays){s.overlays=s.overlays||[];for(var n=0,o=s.sourceEndpoint.connectorOverlays.length;o>n;n++)s.overlays.push(s.sourceEndpoint.connectorOverlays[n])}s.sourceEndpoint&&s.sourceEndpoint.scope&&(s.scope=s.sourceEndpoint.scope),!s["pointer-events"]&&s.sourceEndpoint&&s.sourceEndpoint.connectorPointerEvents&&(s["pointer-events"]=s.sourceEndpoint.connectorPointerEvents);var a=function(t,e,i,n){if(s[t]&&!s[t].endpoint&&!s[t+"Endpoint"]&&!s.newConnection){var o=i[z(s[t])];if(o=o?o[n]:null){if(!o.enabled)return!1;var a=null!=o.endpoint&&o.endpoint._jsPlumb?o.endpoint:function(t,e,i){return r.addEndpoint(t,function(t,e){var i=p.extend({},t);for(var s in e)e[s]&&(i[s]=e[s]);return i}(o.def,{anchor:s.anchors?s.anchors[i]:s.anchor,endpoint:s.endpoints?s.endpoints[i]:s.endpoint,paintStyle:s.endpointStyles?s.endpointStyles[i]:s.endpointStyle,hoverPaintStyle:s.endpointHoverStyles?s.endpointHoverStyles[i]:s.endpointHoverStyle}))}(s[t],0,e);if(a.isFull())return!1;s[t+"Endpoint"]=a,!s.scope&&o.def.scope&&(s.scope=o.def.scope),o.uniqueEndpoint?o.endpoint?a.finalEndpoint=o.endpoint:(o.endpoint=a,a.setDeleteOnEmpty(!1)):a.setDeleteOnEmpty(!0),0===e&&o.def.connectorOverlays&&(s.overlays=s.overlays||[],Array.prototype.push.apply(s.overlays,o.def.connectorOverlays))}}};return!1!==a("source",0,this.sourceEndpointDefinitions,s.type||"default")&&!1!==a("target",1,this.targetEndpointDefinitions,s.type||"default")?(s.sourceEndpoint&&s.targetEndpoint&&(function(t,e){for(var i=t.scope.split(/\s/),s=e.scope.split(/\s/),n=0;n<i.length;n++)for(var r=0;r<s.length;r++)if(s[r]===i[n])return!0;return!1}(s.sourceEndpoint,s.targetEndpoint)||(s=null)),s):void 0}e.log(r,"could not add connection; target endpoint is full")}}).bind(r),I=function(t){var e=r.Defaults.ConnectionType||r.getDefaultConnectionType();t._jsPlumb=r,t.newConnection=I,t.newEndpoint=B,t.endpointsByUUID=x,t.endpointsByElement=C,t.finaliseConnection=R,t.id="con_"+O();var i=new e(t);return i.isDetachable()&&(i.endpoints[0].initDraggable("_jsPlumbSource"),i.endpoints[1].initDraggable("_jsPlumbTarget")),i},R=r.finaliseConnection=function(t,e,i,s){e=e||{},t.suspendedEndpoint||v.push(t),t.pending=null,t.endpoints[0].isTemporarySource=!1,!1!==s&&r.anchorManager.newConnection(t),L(t.source),e.doNotFireConnectionEvent||!1===e.fireEvent||r.fire("connection",{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]},i)},B=function(t,e){var i=r.Defaults.EndpointType||p.Endpoint,s=p.extend({},t);s._jsPlumb=r,s.newConnection=I,s.newEndpoint=B,s.endpointsByUUID=x,s.endpointsByElement=C,s.fireDetachEvent=G,s.elementId=e||z(s.source);var n=new i(s);return n.id="ep_"+O(),nt(s.elementId,s.source),p.headless||r.getDragManager().endpointAdded(s.source,e),n},F=function(t,e,i){var s=C[t];if(s&&s.length)for(var n=0,r=s.length;r>n;n++){for(var o=0,a=s[n].connections.length;a>o;o++)if(e(s[n].connections[o]))return;i&&i(s[n])}},Y=function(t,e,i){e="block"===e;var s=null;i&&(s=function(t){t.setVisible(e,!0,!0)});var n=u(t);F(n.id,function(t){e&&i?t.endpoints[t.sourceId===n.id?1:0].isVisible()&&t.setVisible(!0):t.setVisible(e)},s)},z=function(t,i,s){if(e.isString(t))return t;if(null==t)return null;var n=r.getAttribute(t,"id");return n&&"undefined"!==n||(2===arguments.length&&void 0!==arguments[1]?n=i:(1===arguments.length||3===arguments.length&&!arguments[2])&&(n="jsPlumb_"+o+"_"+O()),s||r.setAttribute(t,"id",n)),n};this.setConnectionBeingDragged=function(t){w=t},this.isConnectionBeingDragged=function(){return w},this.getManagedElements=function(){return _},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(t,i,s){var n=p.extend({},s=s||{});p.extend(n,i),n.endpoint=n.endpoint||r.Defaults.Endpoint,n.paintStyle=n.paintStyle||r.Defaults.EndpointStyle;for(var o=[],a=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],l=0,h=a.length;h>l;l++){n.source=r.getElement(a[l]),st(n.source);var c=z(n.source),d=B(n,c),u=nt(c,n.source).info.o;e.addToList(C,c,d),k||d.paint({anchorLoc:d.anchor.compute({xy:[u.left,u.top],wh:E[c],element:d,timestamp:A}),timestamp:A}),o.push(d)}return 1===o.length?o[0]:o},this.addEndpoints=function(t,i,s){for(var n=[],o=0,a=i.length;a>o;o++){var l=r.addEndpoint(t,i[o],s);e.isArray(l)?Array.prototype.push.apply(n,l):n.push(l)}return n},this.animate=function(t,i,s){if(!this.animationSupported)return!1;s=s||{};var n=r.getElement(t),o=z(n),a=p.animEvents.step,l=p.animEvents.complete;s[a]=e.wrap(s[a],function(){r.revalidate(o)}),s[l]=e.wrap(s[l],function(){r.revalidate(o)}),r.doAnimate(n,i,s)},this.checkCondition=function(t,i){var s=r.getListener(t),n=!0;if(s&&s.length>0){var o=Array.prototype.slice.call(arguments,1);try{for(var a=0,h=s.length;h>a;a++)n=n&&s[a].apply(s[a],o)}catch(l){e.log(r,"cannot check condition ["+t+"]"+l)}}return n},this.connect=function(t,i){var s,n=j(t,i);if(n){if(null==n.source&&null==n.sourceEndpoint)return void e.log("Cannot establish connection - source does not exist");if(null==n.target&&null==n.targetEndpoint)return void e.log("Cannot establish connection - target does not exist");st(n.source),s=I(n),R(s,n)}return s};var X=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],U=(function(t,e,i,s){var n,r,o,a=X[i],l=t[a.elId],h=t.endpoints[i],c={index:i,originalSourceId:0===i?l:t.sourceId,newSourceId:t.sourceId,originalTargetId:1===i?l:t.targetId,newTargetId:t.targetId,connection:t};if(e.constructor===p.Endpoint)(n=e).addConnection(t),e=n.element;else if(r=z(e),o=this[a.epDefs][r],r===t[a.elId])n=null;else if(o)for(var d in o){if(!o[d].enabled)return;n=null!=o[d].endpoint&&o[d].endpoint._jsPlumb?o[d].endpoint:this.addEndpoint(e,o[d].def),o[d].uniqueEndpoint&&(o[d].endpoint=n),n.addConnection(t)}else n=t.makeEndpoint(0===i,e,r);return null!=n&&(h.detachFromConnection(t),t.endpoints[i]=n,t[a.el]=n.element,t[a.elId]=n.elementId,c[0===i?"newSourceId":"newTargetId"]=n.elementId,H(c),s||t.repaint()),c.element=e,c}).bind(this);this.setSource=function(t,e,i){var s=U(t,e,0,i);this.anchorManager.sourceChanged(s.originalSourceId,s.newSourceId,t,s.el)},this.setTarget=function(t,e,i){var s=U(t,e,1,i);this.anchorManager.updateOtherEndpoint(s.originalSourceId,s.originalTargetId,s.newTargetId,t)},this.deleteEndpoint=function(t,e,i){var s="string"==typeof t?x[t]:t;return s&&r.deleteObject({endpoint:s,dontUpdateHover:e,deleteAttachedObjects:i}),r},this.deleteEveryEndpoint=function(){var t=r.setSuspendDrawing(!0);for(var e in C){var i=C[e];if(i&&i.length)for(var s=0,n=i.length;n>s;s++)r.deleteEndpoint(i[s],!0)}C={},_={},x={},P={},S={},r.anchorManager.reset();var o=r.getDragManager();return o&&o.reset(),t||r.setSuspendDrawing(!1),r};var G=function(t,e,i){var s=r.Defaults.ConnectionType||r.getDefaultConnectionType(),n=t.constructor===s?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;e&&r.fire("connectionDetached",n,i),r.fire("internal.connectionDetached",n,i),r.anchorManager.connectionDetached(n)},H=r.fireMoveEvent=function(t,e){r.fire("connectionMoved",t,e)};this.unregisterEndpoint=function(t){for(var e in t._jsPlumb.uuid&&(x[t._jsPlumb.uuid]=null),r.anchorManager.deleteEndpoint(t),C){var i=C[e];if(i){for(var s=[],n=0,o=i.length;o>n;n++)i[n]!==t&&s.push(i[n]);C[e]=s}C[e].length<1&&delete C[e]}};var q="isDetachAllowed";this.deleteConnection=function(t,i){return!(null==t||(i=i||{},!i.force&&!e.functionChain(!0,!1,[[t.endpoints[0],q,[t]],[t.endpoints[1],q,[t]],[t,q,[t]],[r,"checkCondition",["beforeDetach",t]]]))||(t.setHover(!1),G(t,!t.pending&&!1!==i.fireEvent,i.originalEvent),t.endpoints[0].detachFromConnection(t),t.endpoints[1].detachFromConnection(t),e.removeWithFunction(v,function(e){return t.id===e.id}),t.cleanup(),t.destroy(),0))},this.deleteEveryConnection=function(t){t=t||{};var e=v.length,i=0;return r.batch(function(){for(var s=0;e>s;s++)i+=r.deleteConnection(v[0],t)?1:0}),i},this.deleteConnectionsForElement=function(t,e){e=e||{},t=r.getElement(t);var i=z(t),s=C[i];if(s&&s.length)for(var n=0,o=s.length;o>n;n++)s[n].deleteEveryConnection(e);return r},this.deleteObject=function(t){var i={endpoints:{},connections:{},endpointCount:0,connectionCount:0},s=!1!==t.deleteAttachedObjects,n=function(e){null!=e&&null==i.connections[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),i.connections[e.id]=e,i.connectionCount++)};for(var o in t.connection?n(t.connection):function(e){if(null!=e&&null==i.endpoints[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),i.endpoints[e.id]=e,i.endpointCount++,s))for(var r=0;r<e.connections.length;r++)n(e.connections[r])}(t.endpoint),i.connections){var a=i.connections[o];if(a._jsPlumb){e.removeWithFunction(v,function(t){return a.id===t.id}),G(a,!1!==t.fireEvent&&!a.pending,t.originalEvent);var l=null==t.deleteAttachedObjects?null:!t.deleteAttachedObjects;a.endpoints[0].detachFromConnection(a,null,l),a.endpoints[1].detachFromConnection(a,null,l),a.cleanup(!0),a.destroy(!0)}}for(var h in i.endpoints){var c=i.endpoints[h];c._jsPlumb&&(r.unregisterEndpoint(c),c.cleanup(!0),c.destroy(!0))}return i};var J=function(t,e,i){return function(){return function(t,e,i,s){for(var n=0,r=t.length;r>n;n++)t[n][e].apply(t[n],i);return s(t)}(t,e,arguments,i)}},V=function(t,e){return function(){return function(t,e,i){for(var s=[],n=0,r=t.length;r>n;n++)s.push([t[n][e].apply(t[n],i),t[n]]);return s}(t,e,arguments)}},$=function(t,e){var i=[];if(t)if("string"==typeof t){if("*"===t)return t;i.push(t)}else if(e)i=t;else if(t.length)for(var s=0,n=t.length;n>s;s++)i.push(u(t[s]).id);else i.push(u(t).id);return i},W=function(t,e,i){return"*"===t||(t.length>0?-1!==t.indexOf(e):!i)};this.getConnections=function(t,e){t?t.constructor===String&&(t={scope:t}):t={};for(var i=t.scope||r.getDefaultScope(),s=$(i,!0),n=$(t.source),o=$(t.target),a=!e&&s.length>1?{}:[],l=function(t,i){if(!e&&s.length>1){var n=a[t];null==n&&(n=a[t]=[]),n.push(i)}else a.push(i)},h=0,c=v.length;c>h;h++){var d=v[h],u=d.proxies&&d.proxies[0]?d.proxies[0].originalEp.elementId:d.sourceId,p=d.proxies&&d.proxies[1]?d.proxies[1].originalEp.elementId:d.targetId;W(s,d.scope)&&W(n,u)&&W(o,p)&&l(d.scope,d)}return a};var K=function(t,e){return function(i){for(var s=0,n=t.length;n>s;s++)i(t[s]);return e(t)}},Z=function(t){return function(e){return t[e]}},Q=function(t,e){var i,s,n={length:t.length,each:K(t,e),get:Z(t)},r=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],o=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(i=0,s=r.length;s>i;i++)n[r[i]]=J(t,r[i],e);for(i=0,s=o.length;s>i;i++)n[o[i]]=V(t,o[i]);return n},tt=function(t){var e=Q(t,tt);return p.extend(e,{setDetachable:J(t,"setDetachable",tt),setReattach:J(t,"setReattach",tt),setConnector:J(t,"setConnector",tt),delete:function(){for(var e=0,i=t.length;i>e;e++)r.deleteConnection(t[e])},isDetachable:V(t,"isDetachable"),isReattach:V(t,"isReattach")})},et=function(t){var e=Q(t,et);return p.extend(e,{setEnabled:J(t,"setEnabled",et),setAnchor:J(t,"setAnchor",et),isEnabled:V(t,"isEnabled"),deleteEveryConnection:function(){for(var e=0,i=t.length;i>e;e++)t[e].deleteEveryConnection()},delete:function(){for(var e=0,i=t.length;i>e;e++)r.deleteEndpoint(t[e])}})};this.select=function(t){return(t=t||{}).scope=t.scope||"*",tt(t.connections||r.getConnections(t,!0))},this.selectEndpoints=function(t){(t=t||{}).scope=t.scope||"*";var e=!t.element&&!t.source&&!t.target,i=e?"*":$(t.element),s=e?"*":$(t.source),n=e?"*":$(t.target),r=$(t.scope,!0),o=[];for(var a in C){var l=W(i,a,!0),h=W(s,a,!0),c="*"!==s,d=W(n,a,!0),u="*"!==n;if(l||h||d)t:for(var p=0,f=C[a].length;f>p;p++){var m=C[a][p];if(W(r,m.scope,!0)){if(c&&s.length>0&&!m.isSource||u&&n.length>0&&!m.isTarget)continue t;o.push(m)}}}return et(o)},this.getAllConnections=function(){return v},this.getDefaultScope=function(){return T},this.getEndpoint=D,this.getEndpoints=function(t){return C[u(t).id]||[]},this.getDefaultEndpointType=function(){return p.Endpoint},this.getDefaultConnectionType=function(){return p.Connection},this.getId=z,this.draw=L,this.info=u,this.appendElement=N;var it=!1;this.isHoverSuspended=function(){return it},this.setHoverSuspended=function(t){it=t},this.hide=function(t,e){return Y(t,"none",e),r},this.idstamp=O;var st=function(t){if(!m&&t){var e=r.getElement(t);e.offsetParent&&r.setContainer(e.offsetParent)}},nt=r.manage=function(t,e,i){return _[t]||(_[t]={el:e,endpoints:[],connections:[]},_[t].info=rt({elId:t,timestamp:A}),r.addClass(e,"jtk-managed"),i||r.fire("manageElement",{id:t,info:_[t].info,el:e})),_[t]},rt=(r.unmanage=function(t){if(_[t]){var e=_[t].el;r.removeClass(e,"jtk-managed"),delete _[t],r.fire("unmanageElement",{id:t,el:e})}},function(t){var e,i=t.timestamp,s=t.recalc,n=t.offset,o=t.elId;return k&&!i&&(i=A),!s&&i&&i===S[o]?{o:t.offset||P[o],s:E[o]}:(s||!n&&null==P[o]?null!=(e=_[o]?_[o].el:null)&&(E[o]=r.getSize(e),P[o]=r.getOffset(e),S[o]=i):(P[o]=n||P[o],null==E[o]&&null!=(e=_[o].el)&&(E[o]=r.getSize(e)),S[o]=i),P[o]&&!P[o].right&&(P[o].right=P[o].left+E[o][0],P[o].bottom=P[o].top+E[o][1],P[o].width=E[o][0],P[o].height=E[o][1],P[o].centerx=P[o].left+P[o].width/2,P[o].centery=P[o].top+P[o].height/2),{o:P[o],s:E[o]})});this.updateOffset=rt,this.init=(function(){y||(r.Defaults.Container&&r.setContainer(r.Defaults.Container),r.anchorManager=new t.jsPlumb.AnchorManager({jsPlumbInstance:r}),y=!0,r.fire("ready",r))}).bind(this),this.log=b,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var i,s=function(e,i){if(t.jsPlumb.Anchors[e])return new t.jsPlumb.Anchors[e](i);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+e+"'"}};if(0===arguments.length)return null;var n=arguments[0],o=arguments[1],a=null;if(n.compute&&n.getOrientation)return n;if("string"==typeof n)a=s(arguments[0],{elementId:o,jsPlumbInstance:r});else if(e.isArray(n))if(e.isArray(n[0])||e.isString(n[0]))2===n.length&&e.isObject(n[1])?e.isString(n[0])?(i=t.jsPlumb.extend({elementId:o,jsPlumbInstance:r},n[1]),a=s(n[0],i)):(i=t.jsPlumb.extend({elementId:o,jsPlumbInstance:r,anchors:n[0]},n[1]),a=new t.jsPlumb.DynamicAnchor(i)):a=new p.DynamicAnchor({anchors:n,selector:null,elementId:o,jsPlumbInstance:r});else{var l={x:n[0],y:n[1],orientation:n.length>=4?[n[2],n[3]]:[0,0],offsets:n.length>=6?[n[4],n[5]]:[0,0],elementId:o,jsPlumbInstance:r,cssClass:7===n.length?n[6]:null};(a=new t.jsPlumb.Anchor(l)).clone=function(){return new t.jsPlumb.Anchor(l)}}return a.id||(a.id="anchor_"+O()),a},this.makeAnchors=function(i,s,n){for(var o=[],a=0,l=i.length;l>a;a++)"string"==typeof i[a]?o.push(t.jsPlumb.Anchors[i[a]]({elementId:s,jsPlumbInstance:n})):e.isArray(i[a])&&o.push(r.makeAnchor(i[a],s,n));return o},this.makeDynamicAnchor=function(e,i){return new t.jsPlumb.DynamicAnchor({anchors:e,selector:i,elementId:null,jsPlumbInstance:r})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var ot=function(i,s,n,o,a){var h=new l(s),c=s._jsPlumb.EndpointDropHandler({jsPlumb:r,enabled:function(){return i.def.enabled},isFull:function(){var t=r.select({target:i.id}).length;return i.def.maxConnections>0&&t>=i.def.maxConnections},element:i.el,elementId:i.id,isSource:o,isTarget:a,addClass:function(t){r.addClass(i.el,t)},removeClass:function(t){r.removeClass(i.el,t)},onDrop:function(t){t.endpoints[0].anchor.unlock()},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments)},isRedrop:function(t){return null!=t.suspendedElement&&null!=t.suspendedEndpoint&&t.suspendedEndpoint.element===i.el},getEndpoint:function(e){var n=i.def.endpoint;if(null==n||null==n._jsPlumb){var o=r.deriveEndpointAndAnchorSpec(e.getType().join(" "),!0),a=o.endpoints?t.jsPlumb.extend(s,{endpoint:i.def.def.endpoint||o.endpoints[1]}):s;o.anchors&&(a=t.jsPlumb.extend(a,{anchor:i.def.def.anchor||o.anchors[1]})),(n=r.addEndpoint(i.el,a))._mtNew=!0}if(s.uniqueEndpoint&&(i.def.endpoint=n),n.setDeleteOnEmpty(!0),e.isDetachable()&&n.initDraggable(),null!=n.anchor.positionFinder){var l=r.getUIPosition(arguments,r.getZoom()),h=r.getOffset(i.el),c=r.getSize(i.el),d=null==l?[0,0]:n.anchor.positionFinder(l,h,c,n.anchor.constructorParams);n.anchor.x=d[0],n.anchor.y=d[1]}return n},maybeCleanup:function(t){t._mtNew&&0===t.connections.length?r.deleteObject({endpoint:t}):delete t._mtNew}}),d=t.jsPlumb.dragEvents.drop;return n.scope=n.scope||s.scope||r.Defaults.Scope,n[d]=e.wrap(n[d],c,!0),n.rank=s.rank||0,a&&(n[t.jsPlumb.dragEvents.over]=function(){return!0}),!1===s.allowLoopback&&(n.canDrop=function(t){return t.getDragElement()._jsPlumbRelatedElement!==i.el}),r.initDroppable(i.el,n,"internal"),c};this.makeTarget=function(e,i,s){var n=t.jsPlumb.extend({_jsPlumb:this},s);t.jsPlumb.extend(n,i);for(var o=n.maxConnections||-1,a=(function(e){var i=u(e),s=i.id,a=t.jsPlumb.extend({},n.dropOptions||{}),l=n.connectionType||"default";this.targetEndpointDefinitions[s]=this.targetEndpointDefinitions[s]||{},st(s),i.el._isJsPlumbGroup&&null==a.rank&&(a.rank=-1);var h={def:t.jsPlumb.extend({},n),uniqueEndpoint:n.uniqueEndpoint,maxConnections:o,enabled:!0};n.createEndpoint&&(h.uniqueEndpoint=!0,h.endpoint=r.addEndpoint(e,h.def),h.endpoint.setDeleteOnEmpty(!1)),i.def=h,this.targetEndpointDefinitions[s][l]=h,ot(i,n,a,!0===n.isSource,!0),i.el._katavorioDrop[i.el._katavorioDrop.length-1].targetDef=h}).bind(this),l=e.length&&e.constructor!==String?e:[e],h=0,c=l.length;c>h;h++)a(l[h]);return this},this.unmakeTarget=function(t,e){var i=u(t);return r.destroyDroppable(i.el,"internal"),e||delete this.targetEndpointDefinitions[i.id],this},this.makeSource=function(i,s,n){var o=t.jsPlumb.extend({_jsPlumb:this},n);t.jsPlumb.extend(o,s);var a=o.connectionType||"default",l=r.deriveEndpointAndAnchorSpec(a);o.endpoint=o.endpoint||l.endpoints[0],o.anchor=o.anchor||l.anchors[0];for(var h=o.maxConnections||-1,d=o.onMaxConnections,p=(function(s){var n=s.id,l=this.getElement(s.el);this.sourceEndpointDefinitions[n]=this.sourceEndpointDefinitions[n]||{},st(n);var u={def:t.jsPlumb.extend({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:h,enabled:!0};o.createEndpoint&&(u.uniqueEndpoint=!0,u.endpoint=r.addEndpoint(i,u.def),u.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[n][a]=u,s.def=u;var p=t.jsPlumb.dragEvents.stop,f=t.jsPlumb.dragEvents.drag,m=t.jsPlumb.extend({},o.dragOptions||{}),g=m.drag,b=m.stop,y=null,v=!1;m.scope=m.scope||o.scope,m[f]=e.wrap(m[f],function(){g&&g.apply(this,arguments),v=!1}),m[p]=e.wrap(m[p],(function(){if(b&&b.apply(this,arguments),this.currentlyDragging=!1,null!=y._jsPlumb){var t=y.anchor,e=y.connections[0],i=this.makeAnchor(o.anchor||this.Defaults.Anchor,n,this),s=y.element;if(null!=i.positionFinder){var a=r.getOffset(s),l=this.getSize(s),h=i.positionFinder({left:a.left+t.x*l[0],top:a.top+t.y*l[1]},a,l,i.constructorParams);i.x=h[0],i.y=h[1]}y.setAnchor(i,!0),y.repaint(),this.repaint(y.elementId),null!=e&&this.repaint(e.targetId)}}).bind(this));var C=(function(i){if(3!==i.which&&2!==i.button){var u=this.sourceEndpointDefinitions[n][a];if(u.enabled){if(n=this.getId(this.getElement(s.el)),o.filter&&!1===(e.isString(o.filter)?function(t,e,i,s,n){for(var r=t.target||t.srcElement,o=!1,a=s.getSelector(e,i),l=0;l<a.length;l++)if(a[l]===r){o=!0;break}return n?!o:o}(i,s.el,o.filter,this,o.filterExclude):o.filter(i,s.el)))return;var p=this.select({source:n}).length;if(u.maxConnections>=0&&p>=u.maxConnections)return d&&d({element:s.el,maxConnections:h},i),!1;var f=t.jsPlumb.getPositionOnElement(i,l,c),g={};t.jsPlumb.extend(g,u.def),g.isTemporarySource=!0,g.anchor=[f[0],f[1],0,0],g.dragOptions=m,u.def.scope&&(g.scope=u.def.scope),y=this.addEndpoint(n,g),v=!0,y.setDeleteOnEmpty(!0),u.uniqueEndpoint&&(u.endpoint?y.finalEndpoint=u.endpoint:(u.endpoint=y,y.setDeleteOnEmpty(!1)));var b=function(){r.off(y.canvas,"mouseup",b),r.off(s.el,"mouseup",b),v&&(v=!1,r.deleteEndpoint(y))};r.on(y.canvas,"mouseup",b),r.on(s.el,"mouseup",b);var C={};if(u.def.extract)for(var x in u.def.extract){var _=(i.srcElement||i.target).getAttribute(x);_&&(C[u.def.extract[x]]=_)}r.trigger(y.canvas,"mousedown",i,C),e.consume(i)}}}).bind(this);this.on(s.el,"mousedown",C),u.trigger=C,o.filter&&(e.isString(o.filter)||e.isFunction(o.filter))&&r.setDragFilter(s.el,o.filter);var x=t.jsPlumb.extend({},o.dropOptions||{});ot(s,o,x,!0,!0===o.isTarget)}).bind(this),f=i.length&&i.constructor!==String?i:[i],m=0,g=f.length;g>m;m++)p(u(f[m]));return this},this.unmakeSource=function(t,e,i){var s=u(t);r.destroyDroppable(s.el,"internal");var n=this.sourceEndpointDefinitions[s.id];if(n)for(var o in n)if(null==e||e===o){var a=n[o].trigger;a&&r.off(s.el,"mousedown",a),i||delete this.sourceEndpointDefinitions[s.id][o]}return this},this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions)r.unmakeSource(t,null,!0);return this.sourceEndpointDefinitions={},this};var at=(function(t,i,s){i=e.isArray(i)?i:[i];var n=z(t);s=s||"default";for(var r=0;r<i.length;r++){var o=this[i[r]][n];if(o&&o[s])return o[s].def.scope||this.Defaults.Scope}}).bind(this),lt=(function(t,i,s,n){s=e.isArray(s)?s:[s];var r=z(t);n=n||"default";for(var o=0;o<s.length;o++){var a=this[s[o]][r];a&&a[n]&&(a[n].def.scope=i)}}).bind(this);this.getScope=function(t,e){return at(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(t){return at(t,"sourceEndpointDefinitions")},this.getTargetScope=function(t){return at(t,"targetEndpointDefinitions")},this.setScope=function(t,e,i){this.setSourceScope(t,e,i),this.setTargetScope(t,e,i)},this.setSourceScope=function(t,e,i){lt(t,e,"sourceEndpointDefinitions",i),this.setDragScope(t,e)},this.setTargetScope=function(t,e,i){lt(t,e,"targetEndpointDefinitions",i),this.setDropScope(t,e)},this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions)r.unmakeTarget(t,!0);return this.targetEndpointDefinitions={},this};var ht=(function(t,i,s,n,o){var a,l,h,c="source"===t?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(o=o||"default",i.length&&!e.isString(i)){a=[];for(var d=0,p=i.length;p>d;d++)c[(l=u(i[d])).id]&&c[l.id][o]&&(a[d]=c[l.id][o].enabled,c[l.id][o].enabled=h=n?!a[d]:s,r[h?"removeClass":"addClass"](l.el,"jtk-"+t+"-disabled"))}else{var f=(l=u(i)).id;c[f]&&c[f][o]&&(a=c[f][o].enabled,c[f][o].enabled=h=n?!a:s,r[h?"removeClass":"addClass"](l.el,"jtk-"+t+"-disabled"))}return a}).bind(this),ct=(function(t,i){return e.isString(t)||!t.length?i.apply(this,[t]):t.length?i.apply(this,[t[0]]):void 0}).bind(this);this.toggleSourceEnabled=function(t,e){return ht("source",t,null,!0,e),this.isSourceEnabled(t,e)},this.setSourceEnabled=function(t,e,i){return ht("source",t,e,null,i)},this.isSource=function(t,e){return e=e||"default",ct(t,(function(t){var i=this.sourceEndpointDefinitions[u(t).id];return null!=i&&null!=i[e]}).bind(this))},this.isSourceEnabled=function(t,e){return e=e||"default",ct(t,(function(t){var i=this.sourceEndpointDefinitions[u(t).id];return i&&i[e]&&!0===i[e].enabled}).bind(this))},this.toggleTargetEnabled=function(t,e){return ht("target",t,null,!0,e),this.isTargetEnabled(t,e)},this.isTarget=function(t,e){return e=e||"default",ct(t,(function(t){var i=this.targetEndpointDefinitions[u(t).id];return null!=i&&null!=i[e]}).bind(this))},this.isTargetEnabled=function(t,e){return e=e||"default",ct(t,(function(t){var i=this.targetEndpointDefinitions[u(t).id];return i&&i[e]&&!0===i[e].enabled}).bind(this))},this.setTargetEnabled=function(t,e,i){return ht("target",t,e,null,i)},this.ready=function(t){r.bind("ready",t)};var dt=function(t,e){if("object"==typeof t&&t.length)for(var i=0,s=t.length;s>i;i++)e(t[i]);else e(t);return r};this.repaint=function(t,e,i){return dt(t,function(t){L(t,e,i)})},this.revalidate=function(t,e,i){return dt(t,function(t){var s=i?t:r.getId(t);r.updateOffset({elId:s,recalc:!0,timestamp:e});var n=r.getDragManager();n&&n.updateOffsets(s),r.repaint(t)})},this.repaintEverything=function(){var t,e=i();for(t in C)r.updateOffset({elId:t,recalc:!0,timestamp:e});for(t in C)L(t,null,e);return this},this.removeAllEndpoints=function(t,e,i){i=i||[];var s=function(t){var n,o,a=u(t),l=C[a.id];if(l)for(i.push(a),n=0,o=l.length;o>n;n++)r.deleteEndpoint(l[n],!1);if(delete C[a.id],e&&a.el&&3!==a.el.nodeType&&8!==a.el.nodeType)for(n=0,o=a.el.childNodes.length;o>n;n++)s(a.el.childNodes[n])};return s(t),this};var ut=function(t,e){r.removeAllEndpoints(t.id,!0,e);for(var i=r.getDragManager(),s=function(t){i&&i.elementRemoved(t.id),r.anchorManager.clearFor(t.id),r.anchorManager.removeFloatingConnection(t.id),r.isSource(t.el)&&r.unmakeSource(t.el),r.isTarget(t.el)&&r.unmakeTarget(t.el),r.destroyDraggable(t.el),r.destroyDroppable(t.el),delete r.floatingConnections[t.id],delete _[t.id],delete P[t.id],t.el&&(r.removeElement(t.el),t.el._jsPlumb=null)},n=1;n<e.length;n++)s(e[n]);s(t)};this.remove=function(t,e){var i=u(t),s=[];return i.text?i.el.parentNode.removeChild(i.el):i.id&&r.batch(function(){ut(i,s)},!0===e),r},this.empty=function(t,e){var i=[],s=function(t,e){var n=u(t);if(n.text)n.el.parentNode.removeChild(n.el);else if(n.el){for(;n.el.childNodes.length>0;)s(n.el.childNodes[0]);e||ut(n,i)}};return r.batch(function(){s(t,!0)},!1===e),r},this.reset=function(t){r.silently((function(){it=!1,r.removeAllGroups(),r.removeGroupManager(),r.deleteEveryEndpoint(),t||r.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},v.length=0,this.doReset&&this.doReset()}).bind(this))};var pt=function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.cleanup(),t.destroy()};this.clear=function(){r.select().each(pt),r.selectEndpoints().each(pt),C={},x={}},this.setDefaultScope=function(t){return T=t,r},this.deriveEndpointAndAnchorSpec=function(t,e){for(var i=((e?"":"default ")+t).split(/[\s]/),s=null,n=null,o=null,a=null,l=0;l<i.length;l++){var h=r.getType(i[l],"connection");h&&(h.endpoints&&(s=h.endpoints),h.endpoint&&(n=h.endpoint),h.anchors&&(a=h.anchors),h.anchor&&(o=h.anchor))}return{endpoints:s||[n,n],anchors:a||[o,o]}},this.setId=function(t,i,s){var n;e.isString(t)?n=t:(t=this.getElement(t),n=this.getId(t));var r=this.getConnections({source:n,scope:"*"},!0),o=this.getConnections({target:n,scope:"*"},!0);i=""+i,s?t=this.getElement(i):(t=this.getElement(n),this.setAttribute(t,"id",i)),C[i]=C[n]||[];for(var a=0,l=C[i].length;l>a;a++)C[i][a].setElementId(i),C[i][a].setReferenceElement(t);delete C[n],this.sourceEndpointDefinitions[i]=this.sourceEndpointDefinitions[n],delete this.sourceEndpointDefinitions[n],this.targetEndpointDefinitions[i]=this.targetEndpointDefinitions[n],delete this.targetEndpointDefinitions[n],this.anchorManager.changeId(n,i);var h=this.getDragManager();h&&h.changeId(n,i),_[i]=_[n],delete _[n];var c=function(e,s,n){for(var r=0,o=e.length;o>r;r++)e[r].endpoints[s].setElementId(i),e[r].endpoints[s].setReferenceElement(t),e[r][n+"Id"]=i,e[r][n]=t};c(r,0,"source"),c(o,1,"target"),this.repaint(i)},this.setDebugLog=function(t){b=t},this.setSuspendDrawing=function(t,e){var i=k;return k=t,A=t?(new Date).getTime():null,e&&this.repaintEverything(),i},this.isSuspendDrawing=function(){return k},this.getSuspendedAt=function(){return A},this.batch=function(t,i){var s=this.isSuspendDrawing();s||this.setSuspendDrawing(!0);try{t()}catch(n){e.log("Function run while suspended failed",n)}s||this.setSuspendDrawing(!1,!i)},this.doWhileSuspended=this.batch,this.getCachedData=function(t){var e=P[t];return e?{o:e,s:E[t]}:rt({elId:t})},this.timestamp=i,this.show=function(t,e){return Y(t,"block",e),r},this.toggleVisible=function(t,e){var i=null;e&&(i=function(t){var e=t.isVisible();t.setVisible(!e)}),F(t,function(t){var e=t.isVisible();t.setVisible(!e)},i)},this.addListener=this.bind;var ft=[];this.registerFloatingConnection=function(t,i,s){ft[t.id]=i,e.addToList(C,t.id,s)},this.getFloatingConnectionFor=function(t){return ft[t]},this.listManager=new t.jsPlumbListManager(this)};e.extend(t.jsPlumbInstance,e.EventGenerator,{setAttribute:function(t,e,i){this.setAttribute(t,e,i)},getAttribute:function(e,i){return this.getAttribute(t.jsPlumb.getElement(e),i)},convertToFullOverlaySpec:function(t){return e.isString(t)&&(t=[t,{}]),t[1].id=t[1].id||e.uuid(),t},registerConnectionType:function(e,i){if(this._connectionTypes[e]=t.jsPlumb.extend({},i),i.overlays){for(var s={},n=0;n<i.overlays.length;n++){var r=this.convertToFullOverlaySpec(i.overlays[n]);s[r[1].id]=r}this._connectionTypes[e].overlays=s}},registerConnectionTypes:function(t){for(var e in t)this.registerConnectionType(e,t[e])},registerEndpointType:function(e,i){if(this._endpointTypes[e]=t.jsPlumb.extend({},i),i.overlays){for(var s={},n=0;n<i.overlays.length;n++){var r=this.convertToFullOverlaySpec(i.overlays[n]);s[r[1].id]=r}this._endpointTypes[e].overlays=s}},registerEndpointTypes:function(t){for(var e in t)this.registerEndpointType(e,t[e])},getType:function(t,e){return"connection"===e?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,e){this.setId(t,e,!0)},setParent:function(t,e){var i=this.getElement(t),s=this.getId(i),n=this.getElement(e),r=this.getId(n),o=this.getDragManager();i.parentNode.removeChild(i),n.appendChild(i),o&&o.setParent(i,s,n,r)},extend:function(t,e,i){var s;if(i)for(s=0;s<i.length;s++)t[i[s]]=e[i[s]];else for(s in e)t[s]=e[s];return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:t.endpoints[1].isFloating()?1:-1},proxyConnection:function(t,e,i,s,n,r){var o,a=t.endpoints[e].elementId,l=t.endpoints[e];t.proxies=t.proxies||[],(o=t.proxies[e]?t.proxies[e].ep:this.addEndpoint(i,{endpoint:n(t,e),anchor:r(t,e),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),t.proxies[e]={ep:o,originalEp:l},0===e?this.anchorManager.sourceChanged(a,s,t,i):(this.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,a,s,t),t.target=i,t.targetId=s),l.detachFromConnection(t,null,!0),o.connections=[t],t.endpoints[e]=o,l.setVisible(!1),t.setVisible(!0),this.revalidate(i)},unproxyConnection:function(t,e,i){if(null!=t._jsPlumb&&null!=t.proxies&&null!=t.proxies[e]){var s=t.proxies[e].originalEp.element,n=t.proxies[e].originalEp.elementId;t.endpoints[e]=t.proxies[e].originalEp,0===e?this.anchorManager.sourceChanged(i,n,t,s):(this.anchorManager.updateOtherEndpoint(t.endpoints[0].elementId,i,n,t),t.target=s,t.targetId=n),t.proxies[e].ep.detachFromConnection(t,null),t.proxies[e].originalEp.addConnection(t),t.isVisible()&&t.proxies[e].originalEp.setVisible(!0),delete t.proxies[e]}}});var p=new u;t.jsPlumb=p,p.getInstance=function(t,e){var i=new u(t);if(e)for(var s in e)i[s]=e[s];return i.init(),i},p.each=function(t,e){if(null!=t)if("string"==typeof t)e(p.getElement(t));else if(null!=t.length)for(var i=0;i<t.length;i++)e(p.getElement(t[i]));else e(t)},"undefined"!=typeof exports&&(exports.jsPlumb=p)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumb,i=t.jsPlumbUtil,s="__label",n=function(t,i){var n=e.extend({cssClass:i.cssClass,labelStyle:t.labelStyle,id:s,component:t,_jsPlumb:t._jsPlumb.instance},i);return new(e.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(n)},r=function(t,s){var n=null;if(i.isArray(s)){var r=s[0],o=e.extend({component:t,_jsPlumb:t._jsPlumb.instance},s[1]);3===s.length&&e.extend(o,s[2]),n=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][r])(o)}else n=s.constructor===String?new(e.Overlays[t._jsPlumb.instance.getRenderMode()][s])({component:t,_jsPlumb:t._jsPlumb.instance}):s;return n.id=n.id||i.uuid(),t.cacheTypeItem("overlay",n,n.id),t._jsPlumb.overlays[n.id]=n,n};e.OverlayCapableJsPlumbUIComponent=function(e){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},e.label&&(this.getDefaultType().overlays[s]=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:s}]),this.setListenerComponent=function(t){if(this._jsPlumb)for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].setListenerComponent(t)}},e.OverlayCapableJsPlumbUIComponent.applyType=function(t,e){if(e.overlays){var i,s={};for(i in e.overlays){var n=t._jsPlumb.overlays[e.overlays[i][1].id];if(n)n.updateFrom(e.overlays[i][1]),s[e.overlays[i][1].id]=!0;else{var r=t.getCachedTypeItem("overlay",e.overlays[i][1].id);null!=r?(r.reattach(t._jsPlumb.instance,t),r.setVisible(!0),r.updateFrom(e.overlays[i][1]),t._jsPlumb.overlays[r.id]=r):r=t.addOverlay(e.overlays[i],!0),s[r.id]=!0}}for(i in t._jsPlumb.overlays)null==s[t._jsPlumb.overlays[i].id]&&t.removeOverlay(t._jsPlumb.overlays[i].id,!0)}},i.extend(e.OverlayCapableJsPlumbUIComponent,t.jsPlumbUIComponent,{setHover:function(t,e){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(t,e){var i=r(this,t);return e||this.repaint(),i},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var e=this.getOverlay(t);e&&e.hide()},hideOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].hide()},showOverlay:function(t){var e=this.getOverlay(t);e&&e.show()},showOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].show()},removeAllOverlays:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup&&this._jsPlumb.overlays[e].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},t||this.repaint()},removeOverlay:function(t,e){var i=this._jsPlumb.overlays[t];i&&(i.setVisible(!1),!e&&i.cleanup&&i.cleanup(),delete this._jsPlumb.overlays[t],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[t],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[t])},removeOverlays:function(){for(var t=0,e=arguments.length;e>t;t++)this.removeOverlay(arguments[t])},moveParent:function(t){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),t.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var e in this.canvas.parentNode.removeChild(this.canvas),t.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){var i=this._jsPlumb.overlays[e].getElement();i.parentNode.removeChild(i),t.appendChild(i)}},getLabel:function(){var t=this.getOverlay(s);return null!=t?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay(s)},setLabel:function(t){var e=this.getOverlay(s);if(e)t.constructor===String||t.constructor===Function?e.setLabel(t):(t.label&&e.setLabel(t.label),t.location&&e.setLocation(t.location));else{var i=t.constructor===String||t.constructor===Function?{label:t}:t;e=n(this,i),this._jsPlumb.overlays[s]=e}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup(t),this._jsPlumb.overlays[e].destroy(t);t&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,e){this._jsPlumb.overlayPositions[t.id]=e},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null},_clazzManip:function(t,e,i){if(!i)for(var s in this._jsPlumb.overlays)this._jsPlumb.overlays[s][t+"Class"](e)},addClass:function(t,e){this._clazzManip("add",t,e)},removeClass:function(t,e){this._clazzManip("remove",t,e)}})}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumb,i=t.jsPlumbUtil,s=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];e.Endpoint=function(t){var n=t._jsPlumb,r=t.newConnection,o=t.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:t.connectionType,maxConnections:null==t.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:t.maxConnections,paintStyle:t.endpointStyle||t.paintStyle||t.style||this._jsPlumb.instance.Defaults.EndpointStyle||e.Defaults.EndpointStyle,hoverPaintStyle:t.endpointHoverStyle||t.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle,connectorStyle:t.connectorStyle,connectorHoverStyle:t.connectorHoverStyle,connectorClass:t.connectorClass,connectorHoverClass:t.connectorHoverClass,connectorOverlays:t.connectorOverlays,connector:t.connector,connectorTooltip:t.connectorTooltip}),this._jsPlumb.enabled=!(!1===t.enabled),this._jsPlumb.visible=!0,this.element=e.getElement(t.source),this._jsPlumb.uuid=t.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(t.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=t.elementId,this.dragProxy=t.dragProxy,this._jsPlumb.connectionCost=t.connectionCost,this._jsPlumb.connectionsDirected=t.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var a=!0===t.deleteOnEmpty;this.setDeleteOnEmpty=function(t){a=t};var l=(function(){var t=n.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var i=n.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(t),this.addClass(i),e.updateClasses(this.element,i,t)}).bind(this);this.prepareAnchor=function(t){var e=this._jsPlumb.instance.makeAnchor(t,this.elementId,n);return e.bind("anchorChanged",(function(t){this.fire("anchorChanged",{endpoint:this,anchor:t}),l()}).bind(this)),e},this.setPreparedAnchor=function(t,e){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=t,l(),e||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(t,e){var i=this.prepareAnchor(t);return this.setPreparedAnchor(i,e),this};var h=(function(t){if(this.connections.length>0)for(var e=0;e<this.connections.length;e++)this.connections[e].setHover(t,!1);else this.setHover(t)}).bind(this);this.bind("mouseover",function(){h(!0)}),this.bind("mouseout",function(){h(!1)}),t._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(s,r){var o,a=function(t,i){var s=n.getRenderMode();if(e.Endpoints[s][t])return new e.Endpoints[s][t](i);if(!n.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}},l={_jsPlumb:this._jsPlumb.instance,cssClass:t.cssClass,container:t.container,tooltip:t.tooltip,connectorTooltip:t.connectorTooltip,endpoint:this};return i.isString(s)?o=a(s,l):i.isArray(s)?(l=i.merge(s[1],l),o=a(s[0],l)):o=s.clone(),o.clone=(function(){return i.isString(s)?a(s,l):i.isArray(s)?(l=i.merge(s[1],l),a(s[0],l)):void 0}).bind(this),o.typeId=r,o},this.setEndpoint=function(t,e){var i=this.prepareEndpoint(t);this.setPreparedEndpoint(i,!0)},this.setPreparedEndpoint=function(t,e){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=t,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},e.extend(this,t,s),this.isSource=t.isSource||!1,this.isTemporarySource=t.isTemporarySource||!1,this.isTarget=t.isTarget||!1,this.connections=t.connections||[],this.connectorPointerEvents=t["connector-pointer-events"],this.scope=t.scope||n.getDefaultScope(),this.timestamp=null,this.reattachConnections=t.reattach||n.Defaults.ReattachConnections,this.connectionsDetachable=n.Defaults.ConnectionsDetachable,(!1===t.connectionsDetachable||!1===t.detachable)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==t.dragAllowedWhenFull,t.onMaxConnections&&this.bind("maxConnections",t.onMaxConnections),this.addConnection=function(t){this.connections.push(t),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)},this.detachFromConnection=function(t,e,i){(e=null==e?this.connections.indexOf(t):e)>=0&&(this.connections.splice(e,1),this[(this.connections.length>0?"add":"remove")+"Class"](n.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](n.endpointFullClass)),!i&&a&&0===this.connections.length&&n.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==i})},this.deleteEveryConnection=function(t){for(var e=this.connections.length,i=0;e>i;i++)n.deleteConnection(this.connections[0],t)},this.detachFrom=function(t,e,i){for(var s=[],r=0;r<this.connections.length;r++)(this.connections[r].endpoints[1]===t||this.connections[r].endpoints[0]===t)&&s.push(this.connections[r]);for(var o=0,a=s.length;a>o;o++)n.deleteConnection(s[0]);return this},this.getElement=function(){return this.element},this.setElement=function(s){var r=this._jsPlumb.instance.getId(s),o=this.elementId;return i.removeWithFunction(t.endpointsByElement[this.elementId],(function(t){return t.id===this.id}).bind(this)),this.element=e.getElement(s),this.elementId=n.getId(this.element),n.anchorManager.rehomeEndpoint(this,o,this.element),n.dragManager.endpointAdded(this.element),i.addToList(t.endpointsByElement,r,this),this},this.makeInPlaceCopy=function(){var e=this.anchor.getCurrentLocation({element:this}),i=this.anchor.getOrientation(this),s=this.anchor.getCssClass();return o({dropOptions:t.dropOptions,anchor:{bind:function(){},compute:function(){return[e[0],e[1]]},getCurrentLocation:function(){return[e[0],e[1]]},getOrientation:function(){return i},getCssClass:function(){return s}},source:this.element,paintStyle:this.getPaintStyle(),endpoint:t.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(t){var e=(t=t||{}).timestamp,i=!(!1===t.recalc);if(!e||this.timestamp!==e){var s=n.updateOffset({elId:this.elementId,timestamp:e}),r=t.offset?t.offset.o:s.o;if(null!=r){var o=t.anchorPoint,a=t.connectorPaintStyle;if(null==o){var l={xy:[r.left,r.top],wh:t.dimensions||s.s,element:this,timestamp:e};if(i&&this.anchor.isDynamic&&this.connections.length>0){var h=function(t,e){var i=0;if(null!=e)for(var s=0;s<t.connections.length;s++)if(t.connections[s].sourceId===e||t.connections[s].targetId===e){i=s;break}return t.connections[i]}(this,t.elementWithPrecedence),c=h.endpoints[0]===this?1:0,d=n.getCachedData(0===c?h.sourceId:h.targetId),u=d.o,p=d.s;l.index=0===c?1:0,l.connection=h,l.txy=[u.left,u.top],l.twh=p,l.tElement=h.endpoints[c]}else this.connections.length>0&&(l.connection=this.connections[0]);o=this.anchor.compute(l)}for(var f in this.endpoint.compute(o,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,a||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=e,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(f)){var m=this._jsPlumb.overlays[f];m.isVisible()&&(this._jsPlumb.overlayPlacements[f]=m.draw(this.endpoint,this._jsPlumb.paintStyleInUse),m.paint(this._jsPlumb.overlayPlacements[f]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var c=!1;this.initDraggable=function(){if(!c&&e.isDragSupported(this.element)){var s,a={id:null,element:null},l=null,h=!1,d=null,u=function(t,e,i){var s=!1;return{drag:function(){if(s)return s=!1,!0;if(e.element){var n=i.getUIPosition(arguments,i.getZoom());null!=n&&i.setPosition(e.element,n),i.repaint(e.element,n),t.paint({anchorPoint:t.anchor.getCurrentLocation({element:t})})}},stopDrag:function(){s=!0}}}(this,a,n),p=t.dragOptions||{},f=e.dragEvents.start,m=e.dragEvents.stop,g=e.dragEvents.drag,b=e.dragEvents.beforeStart,y=(function(i){l=this.connectorSelector();var c=!0;this.isEnabled()||(c=!1),null!=l||this.isSource||this.isTemporarySource||(c=!1),!this.isSource||!this.isFull()||null!=l&&this.dragAllowedWhenFull||(c=!1),null==l||l.isDetachable(this)||(this.isFull()?c=!1:l=null);var p=n.checkCondition(null==l?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:l});if(!1===p?c=!1:"object"==typeof p?e.extend(p,s||{}):p=s||{},!1===c)return n.stopDrag&&n.stopDrag(this.canvas),u.stopDrag(),!1;for(var f=0;f<this.connections.length;f++)this.connections[f].setHover(!1);this.addClass("endpointDrag"),n.setConnectionBeingDragged(!0),l&&!this.isFull()&&this.isSource&&(l=null),n.updateOffset({elId:this.elementId});var m=this._jsPlumb.instance.getOffset(this.canvas),g=this.canvas,b=this._jsPlumb.instance.getSize(this.canvas);(function(t,e,i,s){var n=e.createElement("div",{position:"absolute"});e.appendElement(n);var r=e.getId(n);e.setPosition(n,i),n.style.width=s[0]+"px",n.style.height=s[1]+"px",e.manage(r,n,!0),t.id=r,t.element=n})(a,n,m,b),n.setAttributes(this.canvas,{dragId:a.id,elId:this.elementId});var y=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var v=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);v.endpoints[1]&&(y=v.endpoints[1])}var C=this._jsPlumb.instance.makeAnchor("Center");C.isFloating=!0,this._jsPlumb.floatingEndpoint=function(t,i,s,n,r,a,l,h){return o({paintStyle:t,endpoint:y,anchor:new e.FloatingAnchor({reference:C,referenceCanvas:n,jsPlumbInstance:a}),source:r,scope:h})}(this.getPaintStyle(),0,0,this.canvas,a.element,n,0,this.scope);var x=this._jsPlumb.floatingEndpoint.anchor;if(null==l)this.setHover(!1,!1),(l=r({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:a.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:t.connectorStyle,hoverPaintStyle:t.connectorHoverStyle,connector:t.connector,overlays:t.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:t.scope,data:p})).pending=!0,l.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.anchor=x,n.fire("connectionDrag",l),n.anchorManager.newConnection(l);else{h=!0,l.setHover(!1);var _=l.endpoints[0].id===this.id?0:1;this.detachFromConnection(l,null,!0);var P=n.getDragScope(g);n.setAttribute(this.canvas,"originalScope",P),n.fire("connectionDrag",l),0===_?(d=[l.source,l.sourceId,g,P],n.anchorManager.sourceChanged(l.endpoints[_].elementId,a.id,l,a.element)):(d=[l.target,l.targetId,g,P],l.target=a.element,l.targetId=a.id,n.anchorManager.updateOtherEndpoint(l.sourceId,l.endpoints[_].elementId,l.targetId,l)),l.suspendedEndpoint=l.endpoints[_],l.suspendedElement=l.endpoints[_].getElement(),l.suspendedElementId=l.endpoints[_].elementId,l.suspendedElementType=0===_?"source":"target",l.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=l.suspendedEndpoint,l.endpoints[_]=this._jsPlumb.floatingEndpoint,l.addClass(n.draggingClass),this._jsPlumb.floatingEndpoint.addClass(n.draggingClass)}n.registerFloatingConnection(a,l,this._jsPlumb.floatingEndpoint),n.currentlyDragging=!0}).bind(this),v=(function(){if(n.setConnectionBeingDragged(!1),l&&null!=l.endpoints){var t=n.getDropEvent(arguments),e=n.getFloatingAnchorIndex(l);if(l.endpoints[0===e?1:0].anchor.unlock(),l.removeClass(n.draggingClass),this._jsPlumb&&(l.deleteConnectionNow||l.endpoints[e]===this._jsPlumb.floatingEndpoint)&&h&&l.suspendedEndpoint){0===e?(l.floatingElement=l.source,l.floatingId=l.sourceId,l.floatingEndpoint=l.endpoints[0],l.floatingIndex=0,l.source=d[0],l.sourceId=d[1]):(l.floatingElement=l.target,l.floatingId=l.targetId,l.floatingEndpoint=l.endpoints[1],l.floatingIndex=1,l.target=d[0],l.targetId=d[1]);var i=this._jsPlumb.floatingEndpoint;n.setDragScope(d[2],d[3]),l.endpoints[e]=l.suspendedEndpoint,l.isReattach()||l._forceReattach||l._forceDetach||!n.deleteConnection(l,{originalEvent:t})?(l.setHover(!1),l._forceDetach=null,l._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(l),l.suspendedEndpoint.addConnection(l),1===e?n.anchorManager.updateOtherEndpoint(l.sourceId,l.floatingId,l.targetId,l):n.anchorManager.sourceChanged(l.floatingId,l.sourceId,l,l.source),n.repaint(d[1])):n.deleteObject({endpoint:i})}this.deleteAfterDragStop?n.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),n.fire("connectionDragStop",l,t),l.pending&&n.fire("connectionAborted",l,t),n.currentlyDragging=!1,l.suspendedElement=null,l.suspendedEndpoint=null,l=null}a&&a.element&&n.remove(a.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.unlock(),this._jsPlumb.floatingEndpoint=null)}).bind(this);(p=e.extend({},p)).scope=this.scope||p.scope,p[b]=i.wrap(p[b],function(t){s=t.e.payload||{}},!1),p[f]=i.wrap(p[f],y,!1),p[g]=i.wrap(p[g],u.drag),p[m]=i.wrap(p[m],v),p.multipleDrop=!1,p.canDrag=(function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}).bind(this),n.initDraggable(this.canvas,p,"internal"),this.canvas._jsPlumbRelatedElement=this.element,c=!0}},this.setEndpoint(t.endpoint||this._jsPlumb.instance.Defaults.Endpoint||e.Defaults.Endpoint,!0),this.setAnchor(t.anchor?t.anchor:t.anchors?t.anchors:n.Defaults.Anchor||"Top",!0);var d=["default",t.type||""].join(" ");this.addType(d,t.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var u=(function(s,r,o,a){if(e.isDropSupported(this.element)){var l=t.dropOptions||n.Defaults.DropOptions||e.Defaults.DropOptions;(l=e.extend({},l)).scope=l.scope||this.scope;var h=e.dragEvents.drop,c=e.dragEvents.over,d=e.dragEvents.out,u=this,p=n.EndpointDropHandler({getEndpoint:function(){return u},jsPlumb:n,enabled:function(){return null==o||o.isEnabled()},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){u.addClass(t)},removeClass:function(t){u.removeClass(t)},isDropAllowed:function(){return u.isDropAllowed.apply(u,arguments)},reference:a,isRedrop:function(t,e){return t.suspendedEndpoint&&e.reference&&t.suspendedEndpoint.id===e.reference.id}});l[h]=i.wrap(l[h],p,!0),l[c]=i.wrap(l[c],(function(){var t=e.getDragObject(arguments),i=n.getAttribute(e.getElement(t),"dragId"),s=n.getFloatingConnectionFor(i);if(null!=s){var r=n.getFloatingAnchorIndex(s);if(this.isTarget&&0!==r||s.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===s.suspendedEndpoint.id){var o=n.checkCondition("checkDropAllowed",{sourceEndpoint:s.endpoints[r],targetEndpoint:this,connection:s});this[(o?"add":"remove")+"Class"](n.endpointDropAllowedClass),this[(o?"remove":"add")+"Class"](n.endpointDropForbiddenClass),s.endpoints[r].anchor.over(this.anchor,this)}}}).bind(this)),l[d]=i.wrap(l[d],(function(){var t=e.getDragObject(arguments),i=null==t?null:n.getAttribute(e.getElement(t),"dragId"),s=i?n.getFloatingConnectionFor(i):null;if(null!=s){var r=n.getFloatingAnchorIndex(s);(this.isTarget&&0!==r||s.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===s.suspendedEndpoint.id)&&(this.removeClass(n.endpointDropAllowedClass),this.removeClass(n.endpointDropForbiddenClass),s.endpoints[r].anchor.out())}}).bind(this)),n.initDroppable(s,l,"internal",r)}}).bind(this);return this.anchor.isFloating||u(this.canvas,!(t._transient||this.anchor.isFloating),this,t.reference),this},i.extend(e.Endpoint,e.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,e,i){if(this._jsPlumb.visible=t,this.canvas&&(this.canvas.style.display=t?"block":"none"),this[t?"showOverlays":"hideOverlays"](),!e)for(var s=0;s<this.connections.length;s++)if(this.connections[s].setVisible(t),!i){var n=this===this.connections[s].endpoints[0]?1:0;1===this.connections[s].endpoints[n].connections.length&&this.connections[s].endpoints[n].setVisible(t,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(t,i){this.setPaintStyle(t.endpointStyle||t.paintStyle,i),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,i),null!=t.maxConnections&&(this._jsPlumb.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),e.extend(this,t,s),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){e.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"")),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(t)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(t){var e=!1;if(t)for(var i=0;i<this.connections.length;i++)if(this.connections[i].endpoints[1]===t||this.connections[i].endpoints[0]===t){e=!0;break}return e},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t,this.anchor.elementId=t},setReferenceElement:function(t){this.element=e.getElement(t)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}}),t.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(e){var s=t.jsPlumb;t.removeClass(s.endpointDropAllowedClass),t.removeClass(s.endpointDropForbiddenClass);var n=s.getDropEvent(arguments),r=s.getDragObject(arguments),o=s.getAttribute(r,"dragId"),a=(s.getAttribute(r,"elId"),s.getAttribute(r,"originalScope")),l=s.getFloatingConnectionFor(o);if(null!=l){var h=null!=l.suspendedEndpoint;if(!h||null!=l.suspendedEndpoint._jsPlumb){var c=t.getEndpoint(l);if(null!=c){if(t.isRedrop(l,t))return l._forceReattach=!0,l.setHover(!1),void(t.maybeCleanup&&t.maybeCleanup(c));var d=s.getFloatingAnchorIndex(l);if(0===d&&!t.isSource||1===d&&!t.isTarget)return void(t.maybeCleanup&&t.maybeCleanup(c));t.onDrop&&t.onDrop(l),a&&s.setDragScope(r,a);var u=t.isFull(e);if(u&&c.fire("maxConnections",{endpoint:this,connection:l,maxConnections:c._jsPlumb.maxConnections},n),!u&&t.enabled()){var p=!0;0===d?(l.floatingElement=l.source,l.floatingId=l.sourceId,l.floatingEndpoint=l.endpoints[0],l.floatingIndex=0,l.source=t.element,l.sourceId=t.elementId):(l.floatingElement=l.target,l.floatingId=l.targetId,l.floatingEndpoint=l.endpoints[1],l.floatingIndex=1,l.target=t.element,l.targetId=t.elementId),h&&l.suspendedEndpoint.id!==c.id&&(l.isDetachAllowed(l)&&l.endpoints[d].isDetachAllowed(l)&&l.suspendedEndpoint.isDetachAllowed(l)&&s.checkCondition("beforeDetach",l)||(p=!1));var f=(function(e){l.endpoints[d].detachFromConnection(l),l.suspendedEndpoint&&l.suspendedEndpoint.detachFromConnection(l),l.endpoints[d]=c,c.addConnection(l);var r=c.getParameters();for(var o in r)l.setParameter(o,r[o]);if(h){var a=l.suspendedEndpoint.elementId;s.fireMoveEvent({index:d,originalSourceId:0===d?a:l.sourceId,newSourceId:0===d?c.elementId:l.sourceId,originalTargetId:1===d?a:l.targetId,newTargetId:1===d?c.elementId:l.targetId,originalSourceEndpoint:0===d?l.suspendedEndpoint:l.endpoints[0],newSourceEndpoint:0===d?c:l.endpoints[0],originalTargetEndpoint:1===d?l.suspendedEndpoint:l.endpoints[1],newTargetEndpoint:1===d?c:l.endpoints[1],connection:l},n)}else r.draggable&&s.initDraggable(this.element,t.dragOptions,"internal",s);1===d?s.anchorManager.updateOtherEndpoint(l.sourceId,l.floatingId,l.targetId,l):s.anchorManager.sourceChanged(l.floatingId,l.sourceId,l,l.source),l.endpoints[0].finalEndpoint&&(l.endpoints[0].detachFromConnection(l),l.endpoints[0]=l.endpoints[0].finalEndpoint,l.endpoints[0].addConnection(l)),i.isObject(e)&&l.mergeData(e),s.finaliseConnection(l,null,n,!1),l.setHover(!1),s.revalidate(l.endpoints[0].element)}).bind(this);if(p=p&&t.isDropAllowed(l.sourceId,l.targetId,l.scope,l,c))return f(p),!0;l.suspendedEndpoint&&(l.endpoints[d]=l.suspendedEndpoint,l.setHover(!1),l._forceDetach=!0,0===d?(l.source=l.suspendedEndpoint.element,l.sourceId=l.suspendedEndpoint.elementId):(l.target=l.suspendedEndpoint.element,l.targetId=l.suspendedEndpoint.elementId),l.suspendedEndpoint.addConnection(l),1===d?s.anchorManager.updateOtherEndpoint(l.sourceId,l.floatingId,l.targetId,l):s.anchorManager.sourceChanged(l.floatingId,l.sourceId,l,l.source),s.repaint(l.sourceId),l._forceDetach=!1)}t.maybeCleanup&&t.maybeCleanup(c),s.currentlyDragging=!1}}}}}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumb,i=t.jsPlumbUtil,s=function(t,s,n,r,o){if(e.Connectors[s]=e.Connectors[s]||{},null==e.Connectors[s][n]){if(null==e.Connectors[n]){if(t.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+n+"'")}e.Connectors[s][n]=function(){e.Connectors[n].apply(this,arguments),e.ConnectorRenderers[s].apply(this,arguments)},i.extend(e.Connectors[s][n],[e.Connectors[n],e.ConnectorRenderers[s]])}return new e.Connectors[s][n](r,o)},n=function(t,e,i){return t?i.makeAnchor(t,e,i):null},r=function(t,e,s,n){null!=e&&(e._jsPlumbConnections=e._jsPlumbConnections||{},n?delete e._jsPlumbConnections[t.id]:e._jsPlumbConnections[t.id]=!0,i.isEmpty(e._jsPlumbConnections)?s.removeClass(e,s.connectedClass):s.addClass(e,s.connectedClass))};e.Connection=function(t){var s=t.newEndpoint;this.id=t.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=t.previousConnection,this.source=e.getElement(t.source),this.target=e.getElement(t.target),e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),t.sourceEndpoint?(this.source=t.sourceEndpoint.getElement(),this.sourceId=t.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),t.targetEndpoint?(this.target=t.targetEndpoint.getElement(),this.targetId=t.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=t.scope,this.endpoints=[],this.endpointStyles=[];var n=this._jsPlumb.instance;n.manage(this.sourceId,this.source),n.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",(function(){this.setHover(!0)}).bind(this)),this.bind("mouseout",(function(){this.setHover(!1)}).bind(this)),this.makeEndpoint=function(e,i,r,o){return r=r||this._jsPlumb.instance.getId(i),this.prepareEndpoint(n,s,this,o,e?0:1,t,i,r)},t.type&&(t.endpoints=t.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(t.type).endpoints);var r=this.makeEndpoint(!0,this.source,this.sourceId,t.sourceEndpoint),o=this.makeEndpoint(!1,this.target,this.targetId,t.targetEndpoint);r&&i.addToList(t.endpointsByElement,this.sourceId,r),o&&i.addToList(t.endpointsByElement,this.targetId,o),this.scope||(this.scope=this.endpoints[0].scope),null!=t.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(t.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(t.deleteEndpointsOnEmpty));var a=n.Defaults.ConnectionsDetachable;!1===t.detachable&&(a=!1),!1===this.endpoints[0].connectionsDetachable&&(a=!1),!1===this.endpoints[1].connectionsDetachable&&(a=!1),this.appendToDefaultType({detachable:a,reattach:t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||n.Defaults.ReattachConnections,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||n.Defaults.PaintStyle||e.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||n.Defaults.HoverPaintStyle||e.Defaults.HoverPaintStyle});var l=n.getSuspendedAt();if(!n.isSuspendDrawing()){var h=n.getCachedData(this.sourceId),c=h.o,d=h.s,u=n.getCachedData(this.targetId),p=u.o,f=u.s,m=l||n.timestamp(),g=this.endpoints[0].anchor.compute({xy:[c.left,c.top],wh:d,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[p.left,p.top],twh:f,tElement:this.endpoints[1],timestamp:m});this.endpoints[0].paint({anchorLoc:g,timestamp:m}),g=this.endpoints[1].anchor.compute({xy:[p.left,p.top],wh:f,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[c.left,c.top],twh:d,tElement:this.endpoints[0],timestamp:m}),this.endpoints[1].paint({anchorLoc:g,timestamp:m})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(t){return!1!==this._jsPlumb.detachable&&(null!=t?!0===t.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(t){this._jsPlumb.detachable=!0===t},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(t){this._jsPlumb.reattach=!0===t},this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=t.directed,null==t.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var b=e.extend({},this.endpoints[1].getParameters());e.extend(b,this.endpoints[0].getParameters()),e.extend(b,this.getParameters()),this.setParameters(b),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||n.Defaults.Connector||e.Defaults.Connector,!0);var y=null!=t.data&&i.isObject(t.data)?t.data:{};this.getData=function(){return y},this.setData=function(t){y=t||{}},this.mergeData=function(t){y=e.extend(y,t)};var v=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,t.type].join(" ");/[^\s]/.test(v)&&this.addType(v,t.data,!0),this.updateConnectedClass()},i.extend(e.Connection,e.OverlayCapableJsPlumbUIComponent,{applyType:function(t,i,s){var n=null;null!=t.connector&&(null==(n=this.getCachedTypeItem("connector",s.connector))&&(n=this.prepareConnector(t.connector,s.connector),this.cacheTypeItem("connector",n,s.connector)),this.setPreparedConnector(n)),null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var r=null;t.anchor?null==(r=this.getCachedTypeItem("anchors",s.anchor))&&(r=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",r,s.anchor)):t.anchors&&null==(r=this.getCachedTypeItem("anchors",s.anchors))&&(r=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",r,s.anchors)),null!=r&&(this.endpoints[0].anchor=r[0],this.endpoints[1].anchor=r[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,e){e&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.connector.addClass(t)},removeClass:function(t,e){e&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.connector.removeClass(t)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t,this.connector&&this.connector.setVisible(t),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(t){this._jsPlumb&&(r(this,this.source,this._jsPlumb.instance,t),r(this,this.target,this._jsPlumb.instance,t))},setHover:function(e){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(e),t.jsPlumb[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),t.jsPlumb[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(t,e){var n,r={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},o=this._jsPlumb.instance.getRenderMode();return i.isString(t)?n=s(this._jsPlumb.instance,o,t,r,this):i.isArray(t)&&(n=s(this._jsPlumb.instance,o,t[0],1===t.length?r:i.merge(t[1],r),this)),null!=e&&(n.typeId=e),n},setPreparedConnector:function(t,e,i,s){if(this.connector!==t){var n,r="";if(null!=this.connector&&(r=(n=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=t,s&&this.cacheTypeItem("connector",t,s),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(r),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=n)for(var o=this.getOverlays(),a=0;a<o.length;a++)o[a].transfer&&o[a].transfer(this.connector);i||this.setListenerComponent(this.connector),e||this.repaint()}},setConnector:function(t,e,i,s){var n=this.prepareConnector(t,s);this.setPreparedConnector(n,e,i,s)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var e=(t=t||{}).timestamp,i=this.targetId;if(null==e||e!==this._jsPlumb.lastPaintedAt){var s=this._jsPlumb.instance.updateOffset({elId:this.sourceId}).o,n=this._jsPlumb.instance.updateOffset({elId:i}).o,r=this.endpoints[0],o=this.endpoints[1],a=r.anchor.getCurrentLocation({xy:[s.left,s.top],wh:[s.width,s.height],element:r,timestamp:e}),l=o.anchor.getCurrentLocation({xy:[n.left,n.top],wh:[n.width,n.height],element:o,timestamp:e});this.connector.resetBounds(),this.connector.compute({sourcePos:a,targetPos:l,sourceOrientation:r.anchor.getOrientation(r),targetOrientation:o.anchor.getOrientation(o),sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:s,targetInfo:n});var h={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var c in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(c)){var d=this._jsPlumb.overlays[c];d.isVisible()&&(this._jsPlumb.overlayPlacements[c]=d.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(d)),h.minX=Math.min(h.minX,this._jsPlumb.overlayPlacements[c].minX),h.maxX=Math.max(h.maxX,this._jsPlumb.overlayPlacements[c].maxX),h.minY=Math.min(h.minY,this._jsPlumb.overlayPlacements[c].minY),h.maxY=Math.max(h.maxY,this._jsPlumb.overlayPlacements[c].maxY))}var u=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,p=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),f={xmin:Math.min(this.connector.bounds.minX-(u+p),h.minX),ymin:Math.min(this.connector.bounds.minY-(u+p),h.minY),xmax:Math.max(this.connector.bounds.maxX+(u+p),h.maxX),ymax:Math.max(this.connector.bounds.maxY+(u+p),h.maxY)};for(var m in this.connector.paint(this._jsPlumb.paintStyleInUse,null,f),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var g=this._jsPlumb.overlays[m];g.isVisible()&&g.paint(this._jsPlumb.overlayPlacements[m],f)}}this._jsPlumb.lastPaintedAt=e}},repaint:function(t){var e=jsPlumb.extend(t||{},{});e.elId=this.sourceId,this.paint(e)},prepareEndpoint:function(t,i,s,r,o,a,l,h){var c;if(r)s.endpoints[o]=r,r.addConnection(s);else{a.endpoints||(a.endpoints=[null,null]);var d=a.endpoints[o]||a.endpoint||t.Defaults.Endpoints[o]||e.Defaults.Endpoints[o]||t.Defaults.Endpoint||e.Defaults.Endpoint;a.endpointStyles||(a.endpointStyles=[null,null]),a.endpointHoverStyles||(a.endpointHoverStyles=[null,null]);var u=a.endpointStyles[o]||a.endpointStyle||t.Defaults.EndpointStyles[o]||e.Defaults.EndpointStyles[o]||t.Defaults.EndpointStyle||e.Defaults.EndpointStyle;null==u.fill&&null!=a.paintStyle&&(u.fill=a.paintStyle.stroke),null==u.outlineStroke&&null!=a.paintStyle&&(u.outlineStroke=a.paintStyle.outlineStroke),null==u.outlineWidth&&null!=a.paintStyle&&(u.outlineWidth=a.paintStyle.outlineWidth);var p=a.endpointHoverStyles[o]||a.endpointHoverStyle||t.Defaults.EndpointHoverStyles[o]||e.Defaults.EndpointHoverStyles[o]||t.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle;null!=a.hoverPaintStyle&&(null==p&&(p={}),null==p.fill&&(p.fill=a.hoverPaintStyle.stroke));var f=a.anchors?a.anchors[o]:a.anchor?a.anchor:n(t.Defaults.Anchors[o],h,t)||n(e.Defaults.Anchors[o],h,t)||n(t.Defaults.Anchor,h,t)||n(e.Defaults.Anchor,h,t);c=i({paintStyle:u,hoverPaintStyle:p,endpoint:d,connections:[s],uuid:a.uuids?a.uuids[o]:null,anchor:f,source:l,scope:a.scope,reattach:a.reattach||t.Defaults.ReattachConnections,detachable:a.detachable||t.Defaults.ConnectionsDetachable}),null==r&&c.setDeleteOnEmpty(!0),s.endpoints[o]=c,!1===a.drawEndpoints&&c.setVisible(!1,!0,!0)}return c}})}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumbUtil,i=t.jsPlumb;i.AnchorManager=function(t){var s={},n={},r={},o={},a=this,l={},h=t.jsPlumbInstance,c={},d=function(t){return function(e,i){return 0==(t?e[0][0]<i[0][0]:e[0][0]>i[0][0])?-1:1}},u={top:function(t,e){return t[0]>e[0]?1:-1},right:d(!0),bottom:d(!0),left:function(t,e){return(t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0])>(e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0])?1:-1}},p=function(t,e){var i=h.getCachedData(t),s=i.s,o=i.o,a=function(e,i,s,o,a,l,h){if(o.length>0)for(var c=function(t,e,i,s,n,r,o){for(var a=[],l=e[n?0:1]/(s.length+1),h=0;h<s.length;h++){var c=(h+1)*l,d=r*e[n?1:0];o&&(c=e[n?0:1]-c);var u=n?c:d,p=n?d:c;a.push([i[0]+u,i[1]+p,u/e[0],p/e[1],s[h][1],s[h][2]])}return a}(0,i,s,function(t,e){return o.sort(e)}(0,u[e]),a,l,"right"===e||"top"===e),d=function(t,e){n[t.id]=[e[0],e[1],e[2],e[3]],r[t.id]=h},p=0;p<c.length;p++){var f=c[p][4],m=f.endpoints[1].elementId===t;f.endpoints[0].elementId===t&&d(f.endpoints[0],c[p]),m&&d(f.endpoints[1],c[p])}};a("bottom",s,[o.left,o.top],e.bottom,!0,1,[0,1]),a("top",s,[o.left,o.top],e.top,!0,0,[0,-1]),a("left",s,[o.left,o.top],e.left,!1,0,[-1,0]),a("right",s,[o.left,o.top],e.right,!1,1,[1,0])};this.reset=function(){s={},o={},l={}},this.addFloatingConnection=function(t,e){c[t]=e},this.removeFloatingConnection=function(t){delete c[t]},this.newConnection=function(t){var s=t.sourceId,n=t.targetId,r=t.endpoints,a=!0,l=function(l,h,c,d,u){s===n&&c.isContinuous&&(t._jsPlumb.instance.removeElement(r[1].canvas),a=!1),e.addToList(o,d,[u,h,c.constructor===i.DynamicAnchor])};l(0,r[0],r[0].anchor,n,t),a&&l(0,r[1],r[1].anchor,s,t)};var f=function(t){!function(t,i){if(t){var s=function(t){return t[4]===i};e.removeWithFunction(t.top,s),e.removeWithFunction(t.left,s),e.removeWithFunction(t.bottom,s),e.removeWithFunction(t.right,s)}}(l[t.elementId],t.id)};this.connectionDetached=function(t,i){var s=t.connection||t,n=t.targetId,r=function(t,i,s,n,r){e.removeWithFunction(o[n],function(t){return t[0].id===r.id})};r(0,0,0,t.sourceId,s),r(0,0,0,n,s),s.floatingId&&(r(0,0,0,s.floatingId,s),f(s.floatingEndpoint)),f(s.endpoints[0]),f(s.endpoints[1]),i||(a.redraw(s.sourceId),s.targetId!==s.sourceId&&a.redraw(s.targetId))},this.add=function(t,i){e.addToList(s,i,t)},this.changeId=function(t,e){o[e]=o[t],s[e]=s[t],delete o[t],delete s[t]},this.getConnectionsFor=function(t){return o[t]||[]},this.getEndpointsFor=function(t){return s[t]||[]},this.deleteEndpoint=function(t){e.removeWithFunction(s[t.elementId],function(e){return e.id===t.id}),f(t)},this.clearFor=function(t){delete s[t],s[t]=[]};var m=function(i,s,n,r,o,a,l,h,c,d,u,p){var f,m,g=-1,b=r.endpoints[l],y=b.id,v=[1,0][l],C=[[s,n],r,o,a,y],x=i[c],_=b._continuousAnchorEdge?i[b._continuousAnchorEdge]:null;if(_){var P=e.findWithFunction(_,function(t){return t[4]===y});if(-1!==P)for(_.splice(P,1),f=0;f<_.length;f++)e.addWithFunction(u,m=_[f][1],function(t){return t.id===m.id}),e.addWithFunction(p,_[f][1].endpoints[l],function(t){return t.id===m.endpoints[l].id}),e.addWithFunction(p,_[f][1].endpoints[v],function(t){return t.id===m.endpoints[v].id})}for(f=0;f<x.length;f++)1===t.idx&&x[f][3]===a&&-1===g&&(g=f),e.addWithFunction(u,m=x[f][1],function(t){return t.id===m.id}),e.addWithFunction(p,x[f][1].endpoints[l],function(t){return t.id===m.endpoints[l].id}),e.addWithFunction(p,x[f][1].endpoints[v],function(t){return t.id===m.endpoints[v].id});x.splice(h?-1!==g?g:0:x.length,0,C),b._continuousAnchorEdge=c};this.updateOtherEndpoint=function(t,s,n,r){var a=e.findWithFunction(o[t],function(t){return t[0].id===r.id}),l=e.findWithFunction(o[s],function(t){return t[0].id===r.id});-1!==a&&(o[t][a][0]=r,o[t][a][1]=r.endpoints[1],o[t][a][2]=r.endpoints[1].anchor.constructor===i.DynamicAnchor),l>-1&&(o[s].splice(l,1),e.addToList(o,n,[r,r.endpoints[0],r.endpoints[0].anchor.constructor===i.DynamicAnchor])),r.updateConnectedClass()},this.sourceChanged=function(t,s,n,r){if(t!==s){n.sourceId=s,n.source=r,e.removeWithFunction(o[t],function(t){return t[0].id===n.id});var a=e.findWithFunction(o[n.targetId],function(t){return t[0].id===n.id});a>-1&&(o[n.targetId][a][0]=n,o[n.targetId][a][1]=n.endpoints[0],o[n.targetId][a][2]=n.endpoints[0].anchor.constructor===i.DynamicAnchor),e.addToList(o,s,[n,n.endpoints[1],n.endpoints[1].anchor.constructor===i.DynamicAnchor]),n.endpoints[1].anchor.isContinuous&&(n.source===n.target?n._jsPlumb.instance.removeElement(n.endpoints[1].canvas):null==n.endpoints[1].canvas.parentNode&&n._jsPlumb.instance.appendElement(n.endpoints[1].canvas)),n.updateConnectedClass()}},this.rehomeEndpoint=function(t,e,i){var n=s[e]||[],r=h.getId(i);if(r!==e){var o=n.indexOf(t);if(o>-1){var l=n.splice(o,1)[0];a.add(l,r)}}for(var c=0;c<t.connections.length;c++)t.connections[c].sourceId===e?a.sourceChanged(e,t.elementId,t.connections[c],t.element):t.connections[c].targetId===e&&(t.connections[c].targetId=t.elementId,t.connections[c].target=t.element,a.updateOtherEndpoint(t.connections[c].sourceId,e,t.elementId,t.connections[c]))},this.redraw=function(t,n,r,a,d,u){if(!h.isSuspendDrawing()){var f=s[t]||[],g=o[t]||[],b=[],y=[],v=[];r=r||h.timestamp(),a=a||{left:0,top:0},n&&(n={left:n.left+a.left,top:n.top+a.top});for(var C=h.updateOffset({elId:t,offset:n,recalc:!1,timestamp:r}),x={},_=0;_<g.length;_++){var P=g[_][0],S=P.sourceId,w=P.targetId,E=P.endpoints[0].anchor.isContinuous,k=P.endpoints[1].anchor.isContinuous;if(E||k){var A=S+"_"+w,T=x[A],M=P.sourceId===t?1:0;E&&!l[S]&&(l[S]={top:[],right:[],bottom:[],left:[]}),k&&!l[w]&&(l[w]={top:[],right:[],bottom:[],left:[]}),t!==w&&h.updateOffset({elId:w,timestamp:r}),t!==S&&h.updateOffset({elId:S,timestamp:r});var O=h.getCachedData(w),N=h.getCachedData(S);w===S&&(E||k)?(m(l[S],-Math.PI/2,0,P,!1,w,0,!1,"top",0,b,y),m(l[w],-Math.PI/2,0,P,!1,S,1,!1,"top",0,b,y)):(T||(T=this.calculateOrientation(S,w,N.o,O.o,P.endpoints[0].anchor,P.endpoints[1].anchor,P),x[A]=T),E&&m(l[S],T.theta,0,P,!1,w,0,!1,T.a[0],0,b,y),k&&m(l[w],T.theta2,-1,P,!0,S,1,!0,T.a[1],0,b,y)),E&&e.addWithFunction(v,S,function(t){return t===S}),k&&e.addWithFunction(v,w,function(t){return t===w}),e.addWithFunction(b,P,function(t){return t.id===P.id}),(E&&0===M||k&&1===M)&&e.addWithFunction(y,P.endpoints[M],function(t){return t.id===P.endpoints[M].id})}}for(_=0;_<f.length;_++)0===f[_].connections.length&&f[_].anchor.isContinuous&&(l[t]||(l[t]={top:[],right:[],bottom:[],left:[]}),m(l[t],-Math.PI/2,0,{endpoints:[f[_],f[_]],paint:function(){}},!1,t,0,!1,f[_].anchor.getDefaultFace(),0,b,y),e.addWithFunction(v,t,function(e){return e===t}));for(_=0;_<v.length;_++)p(v[_],l[v[_]]);for(_=0;_<f.length;_++)f[_].paint({timestamp:r,offset:C,dimensions:C.s,recalc:!0!==u});for(_=0;_<y.length;_++){var L=h.getCachedData(y[_].elementId);y[_].paint({timestamp:null,offset:L,dimensions:L.s})}for(_=0;_<g.length;_++){var D=g[_][1];if(D.anchor.constructor===i.DynamicAnchor){D.paint({elementWithPrecedence:t,timestamp:r}),e.addWithFunction(b,g[_][0],function(t){return t.id===g[_][0].id});for(var j=0;j<D.connections.length;j++)D.connections[j]!==g[_][0]&&e.addWithFunction(b,D.connections[j],function(t){return t.id===D.connections[j].id})}else e.addWithFunction(b,g[_][0],function(t){return t.id===g[_][0].id})}var I=c[t];for(I&&I.paint({timestamp:r,recalc:!1,elId:t}),_=0;_<b.length;_++)b[_].paint({elId:t,timestamp:null,recalc:!1,clearEdits:d})}};var g=function(t){e.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var i=t.faces||["top","right","bottom","left"],s=!(!1===t.clockwise),o={},a={top:"bottom",right:"left",left:"right",bottom:"top"},l={top:"right",right:"bottom",left:"top",bottom:"left"},h={top:"left",right:"top",left:"bottom",bottom:"right"},c=s?l:h,d=s?h:l,u=t.cssClass||"",p=null,f=null,m=["left","right"],g=["top","bottom"],b=null,y=0;y<i.length;y++)o[i[y]]=!0;this.getDefaultFace=function(){return 0===i.length?"top":i[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(t){return o[t]?t:o[a[t]]?a[t]:o[c[t]]?c[t]:o[d[t]]?d[t]:t},this.isEdgeSupported=function(t){return null==b?null==f?!0===o[t]:f===t:-1!==b.indexOf(t)},this.setCurrentFace=function(t,e){p=t,e&&null!=f&&(f=p)},this.getCurrentFace=function(){return p},this.getSupportedFaces=function(){var t=[];for(var e in o)o[e]&&t.push(e);return t},this.lock=function(){f=p},this.unlock=function(){f=null},this.isLocked=function(){return null!=f},this.lockCurrentAxis=function(){null!=p&&(b="left"===p||"right"===p?m:g)},this.unlockCurrentAxis=function(){b=null},this.compute=function(t){return n[t.element.id]||[0,0]},this.getCurrentLocation=function(t){return n[t.element.id]||[0,0]},this.getOrientation=function(t){return r[t.id]||[0,0]},this.getCssClass=function(){return u}};h.continuousAnchorFactory={get:function(t){return new g(t)},clear:function(t){delete n[t]}}},i.AnchorManager.prototype.calculateOrientation=function(t,e,i,s,n,r){var o=["left","top","right","bottom"];if(t===e)return{orientation:"identity",a:["top","top"]};var a=Math.atan2(s.centery-i.centery,s.centerx-i.centerx),l=Math.atan2(i.centery-s.centery,i.centerx-s.centerx),h=[],c={};!function(t,e){for(var i=0;i<t.length;i++)c[t[i]]={left:[e[i].left,e[i].centery],right:[e[i].right,e[i].centery],top:[e[i].centerx,e[i].top],bottom:[e[i].centerx,e[i].bottom]}}(["source","target"],[i,s]);for(var d=0;d<o.length;d++)for(var u=0;u<o.length;u++)h.push({source:o[d],target:o[u],dist:Biltong.lineLength(c.source[o[d]],c.target[o[u]])});h.sort(function(t,e){return t.dist<e.dist?-1:t.dist>e.dist?1:0});for(var p=h[0].source,f=h[0].target,m=0;m<h.length&&(p=!n.isContinuous||n.isEdgeSupported(h[m].source)?h[m].source:null,f=!r.isContinuous||r.isEdgeSupported(h[m].target)?h[m].target:null,null==p||null==f);m++);return n.isContinuous&&n.setCurrentFace(p),r.isContinuous&&r.setCurrentFace(f),{a:[p,f],theta:a,theta2:l}},i.Anchor=function(t){this.x=t.x||0,this.y=t.y||0,this.elementId=t.elementId,this.cssClass=t.cssClass||"",this.userDefinedLocation=null,this.orientation=t.orientation||[0,0],this.lastReturnValue=null,this.offsets=t.offsets||[0,0],this.timestamp=null;var i=!1!==t.relocatable;this.isRelocatable=function(){return i},this.setRelocatable=function(t){i=t};var s=!1!==t.snapOnRelocate;this.isSnapOnRelocate=function(){return s};var n=!1;this.lock=function(){n=!0},this.unlock=function(){n=!1},this.isLocked=function(){return n},e.EventGenerator.apply(this),this.compute=function(t){var e=t.xy,i=t.wh,s=t.timestamp;return t.clearUserDefinedLocation&&(this.userDefinedLocation=null),s&&s===this.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[e[0]+this.x*i[0]+this.offsets[0],e[1]+this.y*i[1]+this.offsets[1],this.x,this.y],this.timestamp=s,this.lastReturnValue)},this.getCurrentLocation=function(t){return t=t||{},null==this.lastReturnValue||null!=t.timestamp&&this.timestamp!==t.timestamp?this.compute(t):this.lastReturnValue},this.setPosition=function(t,e,i,s,r){(!n||r)&&(this.x=t,this.y=e,this.orientation=[i,s],this.lastReturnValue=null)}},e.extend(i.Anchor,e.EventGenerator,{equals:function(t){if(!t)return!1;var e=t.getOrientation(),i=this.getOrientation();return this.x===t.x&&this.y===t.y&&this.offsets[0]===t.offsets[0]&&this.offsets[1]===t.offsets[1]&&i[0]===e[0]&&i[1]===e[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(t){this.userDefinedLocation=t},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),i.FloatingAnchor=function(t){i.Anchor.apply(this,arguments);var e=t.reference,s=i.getSize(t.referenceCanvas),n=null,r=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(t){var e=t.xy,i=[e[0]+s[0]/2,e[1]+s[1]/2];return r=i,i},this.getOrientation=function(t){if(n)return n;var i=e.getOrientation(t);return[0*Math.abs(i[0])*-1,0*Math.abs(i[1])*-1]},this.over=function(t,e){n=t.getOrientation(e)},this.out=function(){n=null},this.getCurrentLocation=function(t){return null==r?this.compute(t):r}},e.extend(i.FloatingAnchor,i.Anchor);var s=function(t,e,s){return t.constructor===i.Anchor?t:e.makeAnchor(t,s,e)};i.DynamicAnchor=function(t){i.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=t.elementId,this.jsPlumbInstance=t.jsPlumbInstance;for(var e=0;e<t.anchors.length;e++)this.anchors[e]=s(t.anchors[e],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var n=this.anchors.length>0?this.anchors[0]:null,r=n,o=this,a=function(t,e,i,s,n){var r=s[0]+t.x*n[0],o=s[1]+t.y*n[1],a=s[0]+n[0]/2,l=s[1]+n[1]/2;return Math.sqrt(Math.pow(e-r,2)+Math.pow(i-o,2))+Math.sqrt(Math.pow(a-r,2)+Math.pow(l-o,2))},l=t.selector||function(t,e,i,s,n){for(var r=i[0]+s[0]/2,o=i[1]+s[1]/2,l=-1,h=1/0,c=0;c<n.length;c++){var d=a(n[c],r,o,t,e);h>d&&(l=c+0,h=d)}return n[l]};this.compute=function(t){var e=t.xy,i=t.wh,s=t.txy,a=t.twh;this.timestamp=t.timestamp;var h=o.getUserDefinedLocation();return null!=h?h:this.isLocked()||null==s||null==a?n.compute(t):(t.timestamp=null,n=l(e,i,s,a,this.anchors),this.x=n.x,this.y=n.y,n!==r&&this.fire("anchorChanged",n),r=n,n.compute(t))},this.getCurrentLocation=function(t){return this.getUserDefinedLocation()||(null!=n?n.getCurrentLocation(t):null)},this.getOrientation=function(t){return null!=n?n.getOrientation(t):[0,0]},this.over=function(t,e){null!=n&&n.over(t,e)},this.out=function(){null!=n&&n.out()},this.setAnchor=function(t){n=t},this.getCssClass=function(){return n&&n.getCssClass()||""},this.setAnchorCoordinates=function(t){var e=jsPlumbUtil.findWithFunction(this.anchors,function(e){return e.x===t[0]&&e.y===t[1]});return-1!==e&&(this.setAnchor(this.anchors[e]),!0)}},e.extend(i.DynamicAnchor,i.Anchor);var n=function(t,e,s,n,r,o){i.Anchors[r]=function(i){var a=i.jsPlumbInstance.makeAnchor([t,e,s,n,0,0],i.elementId,i.jsPlumbInstance);return a.type=r,o&&o(a,i),a}};n(.5,0,0,-1,"TopCenter"),n(.5,1,0,1,"BottomCenter"),n(0,.5,-1,0,"LeftMiddle"),n(1,.5,1,0,"RightMiddle"),n(.5,0,0,-1,"Top"),n(.5,1,0,1,"Bottom"),n(0,.5,-1,0,"Left"),n(1,.5,1,0,"Right"),n(.5,.5,0,0,"Center"),n(1,0,0,-1,"TopRight"),n(1,1,0,1,"BottomRight"),n(0,0,0,-1,"TopLeft"),n(0,1,0,1,"BottomLeft"),i.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)},i.Anchors.AutoDefault=function(t){var e=t.jsPlumbInstance.makeDynamicAnchor(i.Defaults.DynamicAnchors(t));return e.type="AutoDefault",e};var r=function(t,e){i.Anchors[t]=function(i){var s=i.jsPlumbInstance.makeAnchor(["Continuous",{faces:e}],i.elementId,i.jsPlumbInstance);return s.type=t,s}};i.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)},r("ContinuousLeft",["left"]),r("ContinuousTop",["top"]),r("ContinuousBottom",["bottom"]),r("ContinuousRight",["right"]),n(0,0,0,0,"Assign",function(t,e){var i=e.position||"Fixed";t.positionFinder=i.constructor===String?e.jsPlumbInstance.AnchorPositionFinders[i]:i,t.constructorParams=e}),t.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,e,i){return[(t.left-e.left)/i[0],(t.top-e.top)/i[1]]},Grid:function(t,e,i,s){var n=t.top-e.top,r=i[0]/s.grid[0],o=i[1]/s.grid[1],a=Math.floor((t.left-e.left)/r),l=Math.floor(n/o);return[(a*r+r/2)/i[0],(l*o+o/2)/i[1]]}},i.Anchors.Perimeter=function(t){var e=(t=t||{}).anchorCount||60,i=t.shape;if(!i)throw new Error("no shape supplied to Perimeter Anchor type");var s=function(){for(var t=2*Math.PI/e,i=0,s=[],n=0;e>n;n++){var r=.5+.5*Math.sin(i),o=.5+.5*Math.cos(i);s.push([r,o,0,0]),i+=t}return s},n=function(t){for(var i=e/t.length,s=[],n=function(t,n,r,o,a,l,h){for(var c=(r-t)/(i=e*a),d=(o-n)/i,u=0;i>u;u++)s.push([t+c*u,n+d*u,null==l?0:l,null==h?0:h])},r=0;r<t.length;r++)n.apply(null,t[r]);return s},r=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i][0],t[i][1],t[i][2],t[i][3],1/t.length,t[i][4],t[i][5]]);return n(e)},o=function(){return r([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},a={Circle:s,Ellipse:s,Diamond:function(){return r([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:o,Square:o,Triangle:function(){return r([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){for(var e=t.points,i=[],s=0,r=0;r<e.length-1;r++){var o=Math.sqrt(Math.pow(e[r][2]-e[r][0])+Math.pow(e[r][3]-e[r][1]));s+=o,i.push([e[r][0],e[r][1],e[r+1][0],e[r+1][1],o])}for(var a=0;a<i.length;a++)i[a][4]=i[a][4]/s;return n(i)}};if(!a[i])throw new Error("Shape ["+i+"] is unknown by Perimeter Anchor type");var l=a[i](t);t.rotation&&(l=function(t,e){for(var i=[],s=e/180*Math.PI,n=0;n<t.length;n++){var r=t[n][0]-.5,o=t[n][1]-.5;i.push([r*Math.cos(s)-o*Math.sin(s)+.5,r*Math.sin(s)+o*Math.cos(s)+.5,t[n][2],t[n][3]])}return i}(l,t.rotation));var h=t.jsPlumbInstance.makeDynamicAnchor(l);return h.type="Perimeter",h}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumb,i=t.jsPlumbUtil,s=t.Biltong;e.Segments={AbstractSegment:function(t){this.params=t,this.findClosestPointOnPath=function(t,e){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}},this.lineIntersection=function(t,e,i,s){return[]},this.boxIntersection=function(t,e,i,s){var n=[];return n.push.apply(n,this.lineIntersection(t,e,t+i,e)),n.push.apply(n,this.lineIntersection(t+i,e,t+i,e+s)),n.push.apply(n,this.lineIntersection(t+i,e+s,t,e+s)),n.push.apply(n,this.lineIntersection(t,e+s,t,e)),n},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.y)}},Straight:function(t){var i,n,r,o,a,l,h,c=(e.Segments.AbstractSegment.apply(this,arguments),function(){i=Math.sqrt(Math.pow(a-o,2)+Math.pow(h-l,2)),n=s.gradient({x:o,y:l},{x:a,y:h}),r=-1/n});this.type="Straight",this.getLength=function(){return i},this.getGradient=function(){return n},this.getCoordinates=function(){return{x1:o,y1:l,x2:a,y2:h}},this.setCoordinates=function(t){o=t.x1,l=t.y1,a=t.x2,h=t.y2,c()},this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),this.getBounds=function(){return{minX:Math.min(o,a),minY:Math.min(l,h),maxX:Math.max(o,a),maxY:Math.max(l,h)}},this.pointOnPath=function(t,e){return 0!==t||e?1!==t||e?s.pointOnLine({x:o,y:l},{x:a,y:h},e?t>0?t:i+t:t*i):{x:a,y:h}:{x:o,y:l}},this.gradientAtPoint=function(t){return n},this.pointAlongPathFrom=function(t,e,i){var n=this.pointOnPath(t,i),r=0>=e?{x:o,y:l}:{x:a,y:h};return 0>=e&&Math.abs(e)>1&&(e*=-1),s.pointOnLine(n,r,e)};var d=function(t,e,i){return i>=Math.min(t,e)&&i<=Math.max(t,e)},u=function(t,e,i){return Math.abs(i-t)<Math.abs(i-e)?t:e};this.findClosestPointOnPath=function(t,e){var c={d:1/0,x:null,y:null,l:null,x1:o,x2:a,y1:l,y2:h};if(0===n)c.y=l,c.x=d(o,a,t)?t:u(o,a,t);else if(n===1/0||n===-1/0)c.x=o,c.y=d(l,h,e)?e:u(l,h,e);else{var p=l-n*o,f=(e-r*t-p)/(n-r),m=n*f+p;c.x=d(o,a,f)?f:u(o,a,f),c.y=d(l,h,m)?m:u(l,h,m)}var g=s.lineLength([c.x,c.y],[o,l]);return c.d=s.lineLength([t,e],[c.x,c.y]),c.l=g/i,c};var p=function(t,e,i){return i>e?t>=e&&i>=t:e>=t&&t>=i};this.lineIntersection=function(t,e,i,r){var c=Math.abs(s.gradient({x:t,y:e},{x:i,y:r})),d=Math.abs(n),u=d===1/0?o:l-d*o,f=[],m=c===1/0?t:e-c*t;if(c!==d)if(c===1/0&&0===d)p(t,o,a)&&p(l,e,r)&&(f=[t,l]);else if(0===c&&d===1/0)p(e,l,h)&&p(o,t,i)&&(f=[o,e]);else{var g,b;c===1/0?p(g=t,o,a)&&p(b=d*t+u,e,r)&&(f=[g,b]):0===c?p(b=e,l,h)&&p(g=(e-u)/d,t,i)&&(f=[g,b]):(b=d*(g=(m-u)/(d-c))+u,p(g,o,a)&&p(b,l,h)&&(f=[g,b]))}return f},this.boxIntersection=function(t,e,i,s){var n=[];return n.push.apply(n,this.lineIntersection(t,e,t+i,e)),n.push.apply(n,this.lineIntersection(t+i,e,t+i,e+s)),n.push.apply(n,this.lineIntersection(t+i,e+s,t,e+s)),n.push.apply(n,this.lineIntersection(t,e+s,t,e)),n},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.h)}},Arc:function(t){var i=(e.Segments.AbstractSegment.apply(this,arguments),function(e,i){return s.theta([t.cx,t.cy],[e,i])}),n=function(t,e){if(t.anticlockwise){var i=t.startAngle<t.endAngle?t.startAngle+r:t.startAngle;return i-Math.abs(i-t.endAngle)*e}var s=Math.abs((t.endAngle<t.startAngle?t.endAngle+r:t.endAngle)-t.startAngle);return t.startAngle+s*e},r=2*Math.PI;this.radius=t.r,this.anticlockwise=t.ac,this.type="Arc",t.startAngle&&t.endAngle?(this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.x1=t.cx+this.radius*Math.cos(t.startAngle),this.y1=t.cy+this.radius*Math.sin(t.startAngle),this.x2=t.cx+this.radius*Math.cos(t.endAngle),this.y2=t.cy+this.radius*Math.sin(t.endAngle)):(this.startAngle=i(t.x1,t.y1),this.endAngle=i(t.x2,t.y2),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2),this.endAngle<0&&(this.endAngle+=r),this.startAngle<0&&(this.startAngle+=r),this.sweep=Math.abs((this.endAngle<this.startAngle?this.endAngle+r:this.endAngle)-this.startAngle),this.anticlockwise&&(this.sweep=r-this.sweep);var o=2*Math.PI*this.radius,a=o*(this.sweep/r);this.getLength=function(){return a},this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var l=function(t){var e=Math.floor(t),i=Math.ceil(t);return 1e-10>t-e?e:1e-10>i-t?i:t};this.pointOnPath=function(e,i){if(0===e)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===e)return{x:this.x2,y:this.y2,theta:this.endAngle};i&&(e/=a);var s=n(this,e),r=t.cx+t.r*Math.cos(s),o=t.cy+t.r*Math.sin(s);return{x:l(r),y:l(o),theta:s}},this.gradientAtPoint=function(e,i){var n=this.pointOnPath(e,i),r=s.normal([t.cx,t.cy],[n.x,n.y]);return this.anticlockwise||r!==1/0&&r!==-1/0||(r*=-1),r},this.pointAlongPathFrom=function(e,i,s){var n=this.pointOnPath(e,s),r=i/o*2*Math.PI,a=n.theta+(this.anticlockwise?-1:1)*r;return{x:t.cx+this.radius*Math.cos(a),y:t.cy+this.radius*Math.sin(a)}}},Bezier:function(i){this.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}],e.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),minY:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),maxX:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),maxY:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},this.type="Bezier";var s=function(e,i,s){return s&&(i=t.jsBezier.locationAlongCurveFrom(e,i>0?0:1,i)),i};this.pointOnPath=function(e,i){return e=s(this.curve,e,i),t.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,i){return e=s(this.curve,e,i),t.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,i,n){return e=s(this.curve,e,n),t.jsBezier.pointAlongCurveFrom(this.curve,e,i)},this.getLength=function(){return t.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(e,i){var s=t.jsBezier.nearestPointOnCurve({x:e,y:i},this.curve);return{d:Math.sqrt(Math.pow(s.point.x-e,2)+Math.pow(s.point.y-i,2)),x:s.point.x,y:s.point.y,l:s.location,s:this}},this.lineIntersection=function(e,i,s,n){return t.jsBezier.lineIntersection(e,i,s,n,this.curve)}}},e.SegmentRenderer={getPath:function(t,e){return{Straight:function(e){var i=t.getCoordinates();return(e?"M "+i.x1+" "+i.y1+" ":"")+"L "+i.x2+" "+i.y2},Bezier:function(e){var i=t.params;return(e?"M "+i.x2+" "+i.y2+" ":"")+"C "+i.cp2x+" "+i.cp2y+" "+i.cp1x+" "+i.cp1y+" "+i.x1+" "+i.y1},Arc:function(e){var i=t.sweep>Math.PI?1:0;return(e?"M"+t.x1+" "+t.y1+" ":"")+"A "+t.radius+" "+t.params.r+" 0 "+i+","+(t.anticlockwise?0:1)+" "+t.x2+" "+t.y2}}[t.type](e)}};var n=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};e.Connectors.AbstractConnector=function(t){n.apply(this,arguments);var r=[],o=0,a=[],l=[],h=t.stub||0,c=i.isArray(h)?h[0]:h,d=i.isArray(h)?h[1]:h,u=t.gap||0,p=i.isArray(u)?u[0]:u,f=i.isArray(u)?u[1]:u,m=null,g=null;this.getPathData=function(){for(var t="",i=0;i<r.length;i++)t+=e.SegmentRenderer.getPath(r[i],0===i),t+=" ";return t},this.findSegmentForPoint=function(t,e){for(var i={d:1/0,s:null,x:null,y:null,l:null},s=0;s<r.length;s++){var n=r[s].findClosestPointOnPath(t,e);n.d<i.d&&(i.d=n.d,i.l=n.l,i.x=n.x,i.y=n.y,i.s=r[s],i.x1=n.x1,i.x2=n.x2,i.y1=n.y1,i.y2=n.y2,i.index=s)}return i},this.lineIntersection=function(t,e,i,s){for(var n=[],o=0;o<r.length;o++)n.push.apply(n,r[o].lineIntersection(t,e,i,s));return n},this.boxIntersection=function(t,e,i,s){for(var n=[],o=0;o<r.length;o++)n.push.apply(n,r[o].boxIntersection(t,e,i,s));return n},this.boundingBoxIntersection=function(t){for(var e=[],i=0;i<r.length;i++)e.push.apply(e,r[i].boundingBoxIntersection(t));return e};var b=function(t,e){e&&(t=t>0?t/o:(o+t)/o);for(var i=a.length-1,s=1,n=0;n<a.length;n++)if(a[n][1]>=t){i=n,s=1===t?1:0===t?0:(t-a[n][0])/l[n];break}return{segment:r[i],proportion:s,index:i}};this.setSegments=function(t){m=[],o=0;for(var e=0;e<t.length;e++)m.push(t[e]),o+=t[e].getLength()},this.getLength=function(){return o};var y=function(t){this.strokeWidth=t.strokeWidth;var e=s.quadrant(t.sourcePos,t.targetPos),i=t.targetPos[0]<t.sourcePos[0],n=t.targetPos[1]<t.sourcePos[1],r=t.strokeWidth||1,o=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),a=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),l=i?t.targetPos[0]:t.sourcePos[0],h=n?t.targetPos[1]:t.sourcePos[1],u=Math.abs(t.targetPos[0]-t.sourcePos[0]),m=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(0===o[0]&&0===o[1]||0===a[0]&&0===a[1]){var g=u>m?0:1,b=[1,0][g];a=[],(o=[])[g]=t.sourcePos[g]>t.targetPos[g]?-1:1,a[g]=t.sourcePos[g]>t.targetPos[g]?1:-1,o[b]=0,a[b]=0}var y=i?u+p*o[0]:p*o[0],v=n?m+p*o[1]:p*o[1],C=i?f*a[0]:u+f*a[0],x=n?f*a[1]:m+f*a[1],_=o[0]*a[0]+o[1]*a[1],P={sx:y,sy:v,tx:C,ty:x,lw:r,xSpan:Math.abs(C-y),ySpan:Math.abs(x-v),mx:(y+C)/2,my:(v+x)/2,so:o,to:a,x:l,y:h,w:u,h:m,segment:e,startStubX:y+o[0]*c,startStubY:v+o[1]*c,endStubX:C+a[0]*d,endStubY:x+a[1]*d,isXGreaterThanStubTimes2:Math.abs(y-C)>c+d,isYGreaterThanStubTimes2:Math.abs(v-x)>c+d,opposite:-1===_,perpendicular:0===_,orthogonal:1===_,sourceAxis:0===o[0]?"y":"x",points:[l,h,u,m,y,v,C,x],stubs:[c,d]};return P.anchorOrientation=P.opposite?"opposite":P.orthogonal?"orthogonal":"perpendicular",P};return this.getSegments=function(){return r},this.updateBounds=function(t){var e=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,e.minX),this.bounds.maxX=Math.max(this.bounds.maxX,e.maxX),this.bounds.minY=Math.min(this.bounds.minY,e.minY),this.bounds.maxY=Math.max(this.bounds.maxY,e.maxY)},this.pointOnPath=function(t,e){var i=b(t,e);return i.segment&&i.segment.pointOnPath(i.proportion,!1)||[0,0]},this.gradientAtPoint=function(t,e){var i=b(t,e);return i.segment&&i.segment.gradientAtPoint(i.proportion,!1)||0},this.pointAlongPathFrom=function(t,e,i){var s=b(t,i);return s.segment&&s.segment.pointAlongPathFrom(s.proportion,e,!1)||[0,0]},this.compute=function(t){g=y.call(this,t),o=r.length=a.length=l.length=0,this._compute(g,t),this.x=g.points[0],this.y=g.points[1],this.w=g.points[2],this.h=g.points[3],this.segment=g.segment,function(){for(var t=0,e=0;e<r.length;e++){var i=r[e].getLength();l[e]=i/o,a[e]=[t,t+=i/o]}}()},{addSegment:function(t,i,s){if(s.x1!==s.x2||s.y1!==s.y2){var n=new e.Segments[i](s);r.push(n),o+=n.getLength(),t.updateBounds(n)}},prepareCompute:y,sourceStub:c,targetStub:d,maxStub:Math.max(c,d),sourceGap:p,targetGap:f,maxGap:Math.max(p,f)}},i.extend(e.Connectors.AbstractConnector,n),e.Endpoints.AbstractEndpoint=function(t){return n.apply(this,arguments),{compute:this.compute=function(t,e,i,s){var n=this._compute.apply(this,arguments);return this.x=n[0],this.y=n[1],this.w=n[2],this.h=n[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,n},cssClass:t.cssClass}},i.extend(e.Endpoints.AbstractEndpoint,n),e.Endpoints.Dot=function(t){this.type="Dot",e.Endpoints.AbstractEndpoint.apply(this,arguments),this.radius=(t=t||{}).radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(t,e,i,s){this.radius=i.radius||this.radius;var n=t[0]-this.radius,r=t[1]-this.radius,o=2*this.radius,a=2*this.radius;if(i.stroke){var l=i.strokeWidth||1;n-=l,r-=l,o+=2*l,a+=2*l}return[n,r,o,a,this.radius]}},i.extend(e.Endpoints.Dot,e.Endpoints.AbstractEndpoint),e.Endpoints.Rectangle=function(t){this.type="Rectangle",e.Endpoints.AbstractEndpoint.apply(this,arguments),this.width=(t=t||{}).width||20,this.height=t.height||20,this._compute=function(t,e,i,s){var n=i.width||this.width,r=i.height||this.height;return[t[0]-n/2,t[1]-r/2,n,r]}},i.extend(e.Endpoints.Rectangle,e.Endpoints.AbstractEndpoint);var r=function(t){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};i.extend(r,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}}),e.Endpoints.Image=function(s){this.type="Image",r.apply(this,arguments),e.Endpoints.AbstractEndpoint.apply(this,arguments);var n=s.onload,o=s.src||s.url,a=s.cssClass?" "+s.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=s.width,this._jsPlumb.heightToUse=s.height,this._jsPlumb.endpoint=s.endpoint,this._jsPlumb.img.onload=(function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,n&&n(this))}).bind(this),this._jsPlumb.endpoint.setImage=(function(t,e){var i=t.constructor===String?t:t.src;n=e,this._jsPlumb.img.src=i,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}).bind(this),this._jsPlumb.endpoint.setImage(o,n),this._compute=function(t,e,i,s){return this.anchorPoint=t,this._jsPlumb.ready?[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=e.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(t,e,s){this._jsPlumb.deleted||(this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0),i.sizeElement(this.canvas,this.anchorPoint[0]-this._jsPlumb.widthToUse/2,this.anchorPoint[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse))},this.paint=function(e,i){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(e,i):t.setTimeout((function(){this.paint(e,i)}).bind(this),200))}},i.extend(e.Endpoints.Image,[r,e.Endpoints.AbstractEndpoint],{cleanup:function(t){t&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),e.Endpoints.Blank=function(t){e.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",r.apply(this,arguments),this._compute=function(t,e,i,s){return[t[0],t[1],10,0]},this.canvas=e.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+(t.cssClass?" "+t.cssClass:"")),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(t,e){i.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},i.extend(e.Endpoints.Blank,[e.Endpoints.AbstractEndpoint,r],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),e.Endpoints.Triangle=function(t){this.type="Triangle",e.Endpoints.AbstractEndpoint.apply(this,arguments);var i=this;(t=t||{}).width=t.width||55,t.height=t.height||55,this.width=t.width,this.height=t.height,this._compute=function(t,e,s,n){var r=s.width||i.width,o=s.height||i.height;return[t[0]-r/2,t[1]-o/2,r,o]}};var o=e.Overlays.AbstractOverlay=function(t){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=t.component,this.loc=null==t.location?.5:t.location,this.endpointLoc=null==t.endpointLocation?[.5,.5]:t.endpointLocation,this.visible=!1!==t.visible};o.prototype={cleanup:function(t){t&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(t,e){},setVisible:function(t){this.visible=t,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(t){this.loc+=t,this.component.repaint()},setLocation:function(t){this.loc=t,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},e.Overlays.Arrow=function(t){this.type="Arrow",o.apply(this,arguments),this.isAppendedAtTopLevel=!1;var n=this;this.length=(t=t||{}).length||20,this.width=t.width||20,this.id=t.id,this.direction=(t.direction||1)<0?-1:1;var r=t.paintStyle||{"stroke-width":1},a=t.foldback||.623;this.computeMaxSize=function(){return 1.5*n.width},this.elementCreated=function(i,s){if(this.path=i,t.events)for(var n in t.events)e.on(i,n,t.events[n])},this.draw=function(t,e){var n,o,l,h;if(t.pointAlongPathFrom){if(i.isString(this.loc)||this.loc>1||this.loc<0){var c=parseInt(this.loc,10),d=this.loc<0?1:0;n=t.pointAlongPathFrom(d,c,!1),o=t.pointAlongPathFrom(d,c-this.direction*this.length/2,!1),l=s.pointOnLine(n,o,this.length)}else if(1===this.loc){if(n=t.pointOnPath(this.loc),o=t.pointAlongPathFrom(this.loc,-this.length),l=s.pointOnLine(n,o,this.length),-1===this.direction){var u=l;l=n,n=u}}else if(0===this.loc){if(l=t.pointOnPath(this.loc),o=t.pointAlongPathFrom(this.loc,this.length),n=s.pointOnLine(l,o,this.length),-1===this.direction){var p=l;l=n,n=p}}else n=t.pointAlongPathFrom(this.loc,this.direction*this.length/2),o=t.pointOnPath(this.loc),l=s.pointOnLine(n,o,this.length);return{component:t,d:{hxy:n,tail:h=s.perpendicularLineTo(n,l,this.width),cxy:s.pointOnLine(n,l,a*this.length)},"stroke-width":r.strokeWidth||e.strokeWidth,stroke:r.stroke||e.stroke,fill:r.fill||e.stroke,minX:Math.min(n.x,h[0].x,h[1].x),maxX:Math.max(n.x,h[0].x,h[1].x),minY:Math.min(n.y,h[0].y,h[1].y),maxY:Math.max(n.y,h[0].y,h[1].y)}}return{component:t,minX:0,maxX:0,minY:0,maxY:0}}},i.extend(e.Overlays.Arrow,o,{updateFrom:function(t){this.length=t.length||this.length,this.width=t.width||this.width,this.direction=null!=t.direction?t.direction:this.direction,this.foldback=t.foldback||this.foldback},cleanup:function(){this.path&&this.canvas&&this.canvas.removeChild(this.path)}}),e.Overlays.PlainArrow=function(t){var i=e.extend(t=t||{},{foldback:1});e.Overlays.Arrow.call(this,i),this.type="PlainArrow"},i.extend(e.Overlays.PlainArrow,e.Overlays.Arrow),e.Overlays.Diamond=function(t){var i=e.extend(t=t||{},{length:(t.length||40)/2,foldback:2});e.Overlays.Arrow.call(this,i),this.type="Diamond"},i.extend(e.Overlays.Diamond,e.Overlays.Arrow);var a=function(t,e){return(null==t._jsPlumb.cachedDimensions||e)&&(t._jsPlumb.cachedDimensions=t.getDimensions()),t._jsPlumb.cachedDimensions},l=function(t){e.jsPlumbUIComponent.apply(this,arguments),o.apply(this,arguments);var s=this.fire;this.fire=function(){s.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=t.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=t.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=t.create,this._jsPlumb.initiallyInvisible=!1===t.visible,this.getElement=function(){if(null==this._jsPlumb.div){var i=this._jsPlumb.div=e.getElement(this._jsPlumb.create(this._jsPlumb.component));i.style.position="absolute",jsPlumb.addClass(i,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:"")),this._jsPlumb.instance.appendElement(i),this._jsPlumb.instance.getId(i),this.canvas=i;var s="translate(-50%, -50%)";i.style.webkitTransform=s,i.style.mozTransform=s,i.style.msTransform=s,i.style.oTransform=s,i.style.transform=s,i._jsPlumb=this,!1===t.visible&&(i.style.display="none")}return this._jsPlumb.div},this.draw=function(t,e,s){var n=a(this);if(null!=n&&2===n.length){var r={x:0,y:0};if(s)r={x:s[0],y:s[1]};else if(t.pointOnPath){var o=this.loc,l=!1;(i.isString(this.loc)||this.loc<0||this.loc>1)&&(o=parseInt(this.loc,10),l=!0),r=t.pointOnPath(o,l)}else{var h=this.loc.constructor===Array?this.loc:this.endpointLoc;r={x:h[0]*t.w,y:h[1]*t.h}}var c=r.x-n[0]/2,d=r.y-n[1]/2;return{component:t,d:{minx:c,miny:d,td:n,cxy:r},minX:c,maxX:c+n[0],minY:d,maxY:d+n[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};i.extend(l,[e.jsPlumbUIComponent,o],{getDimensions:function(){return[1,1]},setVisible:function(t){this._jsPlumb.div&&(this._jsPlumb.div.style.display=t?"block":"none",t&&this._jsPlumb.initiallyInvisible&&(a(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){t?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(t,e){null!=this._jsPlumb.div&&t.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var t=a(this);return Math.max(t[0],t[1])},paint:function(t,e){this._jsPlumb.initialised||(this.getElement(),t.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px",this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}}),e.Overlays.Custom=function(t){this.type="Custom",l.apply(this,arguments)},i.extend(e.Overlays.Custom,l),e.Overlays.GuideLines=function(){var t=this;t.length=50,t.strokeWidth=5,this.type="GuideLines",o.apply(this,arguments),e.jsPlumbUIComponent.apply(this,arguments),this.draw=function(e,i){var n=e.pointAlongPathFrom(t.loc,t.length/2),r=e.pointOnPath(t.loc),o=s.pointOnLine(n,r,t.length),a=s.perpendicularLineTo(n,o,40),l=s.perpendicularLineTo(o,n,20);return{connector:e,head:n,tail:o,headLine:l,tailLine:a,minX:Math.min(n.x,o.x,l[0].x,l[1].x),minY:Math.min(n.y,o.y,l[0].y,l[1].y),maxX:Math.max(n.x,o.x,l[0].x,l[1].x),maxY:Math.max(n.y,o.y,l[0].y,l[1].y)}}},e.Overlays.Label=function(t){this.labelStyle=t.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var i=e.extend({create:function(){return e.createElement("div")}},t);if(e.Overlays.Custom.call(this,i),this.type="Label",this.label=t.label||"",this.labelText=null,this.labelStyle){var s=this.getElement();this.labelStyle.font=this.labelStyle.font||"12px sans-serif",s.style.font=this.labelStyle.font,s.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(s.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0&&(s.style.border=this.labelStyle.borderWidth+"px solid "+(this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black")),this.labelStyle.padding&&(s.style.padding=this.labelStyle.padding)}},i.extend(e.Overlays.Label,e.Overlays.Custom,{cleanup:function(t){t&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(t){this.label=t,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(t){null!=t.label&&this.setLabel(t.label)}})}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumbUtil,i=t.jsPlumbInstance,s="jtk-group-collapsed",n="jtk-group-expanded",r="stop",o="revert",a="_groupManager",l="_jsPlumbGroup",h="show",c="hide",d=function(t){function i(e,i){for(var s=e.getMembers(),n=0;n<s.length;n++)t[i?h:c](s[n],!0)}function r(e){var i=e.getMembers(),s=t.getConnections({source:i,scope:"*"},!0),n=t.getConnections({target:i,scope:"*"},!0),r={};e.connections.source.length=0,e.connections.target.length=0;var o=function(t){for(var i=0;i<t.length;i++)r[t[i].id]||(r[t[i].id]=!0,t[i].source._jsPlumbGroup===e?(t[i].target._jsPlumbGroup!==e&&e.connections.source.push(t[i]),a[t[i].id]=e):t[i].target._jsPlumbGroup===e&&(e.connections.target.push(t[i]),d[t[i].id]=e))};o(s),o(n)}var o={},a={},d={},u=this;t.bind("connection",function(t){null!=t.source[l]&&null!=t.target[l]&&t.source[l]===t.target[l]?(a[t.connection.id]=t.source[l],d[t.connection.id]=t.source[l]):(null!=t.source[l]&&(e.suggest(t.source[l].connections.source,t.connection),a[t.connection.id]=t.source[l]),null!=t.target[l]&&(e.suggest(t.target[l].connections.target,t.connection),d[t.connection.id]=t.target[l]))}),t.bind("internal.connectionDetached",function(t){!function(t){delete t.proxies;var i,s=a[t.id];null!=s&&(e.removeWithFunction(s.connections.source,i=function(e){return e.id===t.id}),e.removeWithFunction(s.connections.target,i),delete a[t.id]),null!=(s=d[t.id])&&(e.removeWithFunction(s.connections.source,i=function(e){return e.id===t.id}),e.removeWithFunction(s.connections.target,i),delete d[t.id])}(t.connection)}),t.bind("connectionMoved",function(t){var e=(0===t.index?a:d)[t.connection.id];if(e){var i=e.connections[0===t.index?"source":"target"],s=i.indexOf(t.connection);-1!==s&&i.splice(s,1)}}),this.addGroup=function(e){t.addClass(e.getEl(),n),o[e.id]=e,e.manager=this,r(e),t.fire("group:add",{group:e})},this.addToGroup=function(e,i,s){if(e=this.getGroup(e)){var n=e.getEl();if(i._isJsPlumbGroup)return;var r=i._jsPlumbGroup;if(r!==e){var o=t.getOffset(i,!0),a=t.getOffset(e.collapsed?n:e.getDragArea(),!0);null!=r&&(r.remove(i,!1,s,!1,e),u.updateConnectionsForGroup(r)),e.add(i,s);var l=function(t,i){var s=0===i?1:0;t.each(function(t){t.setVisible(!1),t.endpoints[s].element._jsPlumbGroup===e?(t.endpoints[s].setVisible(!1),f(t,s,e)):(t.endpoints[i].setVisible(!1),p(t,i,e))})};e.collapsed&&(l(t.select({source:i}),0),l(t.select({target:i}),1));var h=t.getId(i);t.dragManager.setParent(i,h,n,t.getId(n),o);var c={left:o.left-a.left,top:o.top-a.top};if(t.setPosition(i,c),t.dragManager.revalidateParent(i,h,o),u.updateConnectionsForGroup(e),t.revalidate(h),!s){var d={group:e,el:i,pos:c};r&&(d.sourceGroup=r),t.fire("group:addMember",d)}}}},this.removeFromGroup=function(t,e,i){(t=this.getGroup(t))&&t.remove(e,null,i)},this.getGroup=function(t){var i=t;if(e.isString(t)&&null==(i=o[t]))throw new TypeError("No such group ["+t+"]");return i},this.getGroups=function(){var t=[];for(var e in o)t.push(o[e]);return t},this.removeGroup=function(e,i,s,n){e=this.getGroup(e),this.expandGroup(e,!0);var r=e[i?"removeAll":"orphanAll"](s,n);return t.remove(e.getEl()),delete o[e.id],delete t._groups[e.id],t.fire("group:remove",{group:e}),r},this.removeAllGroups=function(t,e,i){for(var s in o)this.removeGroup(o[s],t,e,i)};var p=function(e,i,s){var n=e.endpoints[0===i?1:0].element;if(!n[l]||n[l].shouldProxy()||!n[l].collapsed){var r=s.getEl(),o=t.getId(r);t.proxyConnection(e,i,r,o,function(t,e){return s.getEndpoint(t,e)},function(t,e){return s.getAnchor(t,e)})}};this.collapseGroup=function(e){if(null!=(e=this.getGroup(e))&&!e.collapsed){var r=e.getEl();if(i(e,!1),e.shouldProxy()){var o=function(t,i){for(var s=0;s<t.length;s++)p(t[s],i,e)};o(e.connections.source,0),o(e.connections.target,1)}e.collapsed=!0,t.removeClass(r,n),t.addClass(r,s),t.revalidate(r),t.fire("group:collapse",{group:e})}};var f=function(e,i,s){t.unproxyConnection(e,i,t.getId(s.getEl()))};this.expandGroup=function(e,r){if(null!=(e=this.getGroup(e))&&e.collapsed){var o=e.getEl();if(i(e,!0),e.shouldProxy()){var a=function(t,i){for(var s=0;s<t.length;s++)f(t[s],i,e)};a(e.connections.source,0),a(e.connections.target,1)}e.collapsed=!1,t.addClass(o,n),t.removeClass(o,s),t.revalidate(o),this.repaintGroup(e),r||t.fire("group:expand",{group:e})}},this.repaintGroup=function(e){for(var i=(e=this.getGroup(e)).getMembers(),s=0;s<i.length;s++)t.revalidate(i[s])},this.updateConnectionsForGroup=r,this.refreshAllGroups=function(){for(var e in o)r(o[e]),t.dragManager.updateOffsets(t.getId(o[e].getEl()))}},u=function(i,s){function n(t,e){var s=function(t){return t.offsetParent}(t),n=i.getSize(s),r=i.getSize(t),o=e[0],a=e[1];return o+r[0]>0&&o<n[0]&&a+r[1]>0&&a<n[1]}function a(t){var e=i.getId(t),s=i.getOffset(t);return t.parentNode.removeChild(t),i.getContainer().appendChild(t),i.setPosition(t,s),delete t._jsPlumbGroup,d(t),i.dragManager.clearParent(t,e),[e,s]}function h(t){var e=null;if(!n(t.el,t.pos)){var s=t.el._jsPlumbGroup;C?i.remove(t.el):e=a(t.el),s.remove(t.el)}return e}function c(t){var e=i.getId(t);i.revalidate(t),i.dragManager.revalidateParent(t,e)}function d(t){t._katavorioDrag&&((C||v)&&t._katavorioDrag.off(r,h),C||v||!y||(t._katavorioDrag.off(o,c),t._katavorioDrag.setRevert(null)))}function u(t){t._katavorioDrag&&((C||v)&&t._katavorioDrag.on(r,h),b&&t._katavorioDrag.setConstrain(!0),g&&t._katavorioDrag.setUseGhostProxy(!0),C||v||!y||(t._katavorioDrag.on(o,c),t._katavorioDrag.setRevert(function(t,e){return!n(t,e)})))}var p=this,f=s.el;this.getEl=function(){return f},this.id=s.id||e.uuid(),f._isJsPlumbGroup=!0;var m=this.getDragArea=function(){var t=i.getSelector(f,"[jtk-group-content]");return t&&t.length>0?t[0]:f},g=!0===s.ghost,b=g||!0===s.constrain,y=!1!==s.revert,v=!0===s.orphan,C=!0===s.prune,x=!0===s.dropOverride,_=!1!==s.proxied,P=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(t,e){return s.anchor||"Continuous"},this.getEndpoint=function(t,e){return s.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==s.draggable){var S={stop:function(t){i.fire("groupDragStop",jsPlumb.extend(t,{group:p}))},scope:"_jsPlumbGroupDrag"};s.dragOptions&&t.jsPlumb.extend(S,s.dragOptions),i.draggable(s.el,S)}!1!==s.droppable&&i.droppable(s.el,{drop:function(t){var e=t.drag.el;if(!e._isJsPlumbGroup){var s=e._jsPlumbGroup;if(s!==p){if(null!=s&&s.overrideDrop(e,p))return;i.getGroupManager().addToGroup(p,e,!1)}}}});var w=function(t,e){for(var i=null==t.nodeType?t:[t],s=0;s<i.length;s++)e(i[s])};this.overrideDrop=function(t,e){return x&&(y||C||v)},this.add=function(t,e){var s=m();w(t,function(t){if(null!=t._jsPlumbGroup){if(t._jsPlumbGroup===p)return;t._jsPlumbGroup.remove(t,!0,e,!1)}t._jsPlumbGroup=p,P.push(t),i.isAlreadyDraggable(t)&&u(t),t.parentNode!==s&&s.appendChild(t)}),i.getGroupManager().updateConnectionsForGroup(p)},this.remove=function(t,s,n,r,o){w(t,function(t){if(delete t._jsPlumbGroup,e.removeWithFunction(P,function(e){return e===t}),s)try{p.getDragArea().removeChild(t)}catch(r){jsPlumbUtil.log("Could not remove element from Group "+r)}if(d(t),!n){var a={group:p,el:t};o&&(a.targetGroup=o),i.fire("group:removeMember",a)}}),r||i.getGroupManager().updateConnectionsForGroup(p)},this.removeAll=function(t,e){for(var s=0,n=P.length;n>s;s++){var r=P[0];p.remove(r,t,e,!0),i.remove(r,!0)}P.length=0,i.getGroupManager().updateConnectionsForGroup(p)},this.orphanAll=function(){for(var t={},e=0;e<P.length;e++){var i=a(P[e]);t[i[0]]=i[1]}return P.length=0,t},this.getMembers=function(){return P},f[l]=this,i.bind("elementDraggable",(function(t){t.el._jsPlumbGroup===this&&u(t.el)}).bind(this)),this.shouldProxy=function(){return _},i.getGroupManager().addGroup(this)};i.prototype.addGroup=function(t){var e=this;if(e._groups=e._groups||{},null!=e._groups[t.id])throw new TypeError("cannot create Group ["+t.id+"]; a Group with that ID exists");if(null!=t.el[l])throw new TypeError("cannot create Group ["+t.id+"]; the given element is already a Group");var i=new u(e,t);return e._groups[i.id]=i,t.collapsed&&this.collapseGroup(i),i},i.prototype.addToGroup=function(t,e,i){var s=(function(e){var s=this.getId(e);this.manage(s,e),this.getGroupManager().addToGroup(t,e,i)}).bind(this);if(Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n]);else s(e)},i.prototype.removeFromGroup=function(t,e,i){this.getGroupManager().removeFromGroup(t,e,i)},i.prototype.removeGroup=function(t,e,i,s){return this.getGroupManager().removeGroup(t,e,i,s)},i.prototype.removeAllGroups=function(t,e,i){this.getGroupManager().removeAllGroups(t,e,i)},i.prototype.getGroup=function(t){return this.getGroupManager().getGroup(t)},i.prototype.getGroups=function(){return this.getGroupManager().getGroups()},i.prototype.expandGroup=function(t){this.getGroupManager().expandGroup(t)},i.prototype.collapseGroup=function(t){this.getGroupManager().collapseGroup(t)},i.prototype.repaintGroup=function(t){this.getGroupManager().repaintGroup(t)},i.prototype.toggleGroup=function(t){null!=(t=this.getGroupManager().getGroup(t))&&this.getGroupManager()[t.collapsed?"expandGroup":"collapseGroup"](t)},i.prototype.getGroupManager=function(){var t=this[a];return null==t&&(t=this[a]=new d(this)),t},i.prototype.removeGroupManager=function(){delete this[a]},i.prototype.getGroupFor=function(t){return(t=this.getElement(t))?t[l]:void 0}}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.jsPlumb,e=this.jsPlumbUtil,i="Straight";t.Connectors.Flowchart=function(e){this.type="Flowchart",(e=e||{}).stub=null==e.stub?30:e.stub;var s,n=t.Connectors.AbstractConnector.apply(this,arguments),r=null==e.midpoint?.5:e.midpoint,o=!0===e.alwaysRespectStubs,a=null,l=null,h=null!=e.cornerRadius?e.cornerRadius:0,c=function(t){return 0>t?-1:0===t?0:1},d=function(t){return[c(t[2]-t[0]),c(t[3]-t[1])]},u=function(t,e,i,s){if(a!==e||l!==i){var n=null==a?s.sx:a,r=null==l?s.sy:l;a=e,l=i,t.push([n,r,e,i,n===e?"v":"h"])}},p=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},f=function(t){var e=[];return e.push.apply(e,t),e},m=function(t,e,s){for(var r,o,a,l=null,c=0;c<e.length-1;c++){if(l=l||f(e[c]),r=f(e[c+1]),o=d(l),a=d(r),h>0&&l[4]!==r[4]){var u=Math.min(p(l),p(r)),m=Math.min(h,u/2);l[2]-=o[0]*m,l[3]-=o[1]*m,r[0]+=a[0]*m,r[1]+=a[1]*m;var g=o[1]===a[0]&&1===a[0]||o[1]===a[0]&&0===a[0]&&o[0]!==a[1]||o[1]===a[0]&&-1===a[0],b=(r[1]>l[3]?1:-1)==(r[0]>l[2]?1:-1),y=b&&g||!b&&!g?r[0]:l[2],v=b&&g||!b&&!g?l[3]:r[1];n.addSegment(t,i,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),n.addSegment(t,"Arc",{r:m,x1:l[2],y1:l[3],x2:r[0],y2:r[1],cx:y,cy:v,ac:g})}else{var C=l[2]===l[0]?0:l[2]>l[0]?s.lw/2:-s.lw/2,x=l[3]===l[1]?0:l[3]>l[1]?s.lw/2:-s.lw/2;n.addSegment(t,i,{x1:l[0]-C,y1:l[1]-x,x2:l[2]+C,y2:l[3]+x})}l=r}null!=r&&n.addSegment(t,i,{x1:r[0],y1:r[1],x2:r[2],y2:r[3]})};this._compute=function(t,e){s=[],a=null,l=null;var i=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},h={perpendicular:i,orthogonal:i,opposite:function(e){var i=t,s="x"===e?0:1;return!o&&{x:function(){return 1===i.so[s]&&(i.startStubX>i.endStubX&&i.tx>i.startStubX||i.sx>i.endStubX&&i.tx>i.sx)||-1===i.so[s]&&(i.startStubX<i.endStubX&&i.tx<i.startStubX||i.sx<i.endStubX&&i.tx<i.sx)},y:function(){return 1===i.so[s]&&(i.startStubY>i.endStubY&&i.ty>i.startStubY||i.sy>i.endStubY&&i.ty>i.sy)||-1===i.so[s]&&(i.startStubY<i.endStubY&&i.ty<i.startStubY||i.sy<i.endStubY&&i.ty<i.sy)}}[e]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}}[t.anchorOrientation](t.sourceAxis),c="x"===t.sourceAxis?0:1,d="x"===t.sourceAxis?1:0,p=h[c],f=h[d],g=h[c+2],b=h[d+2];u(s,h[0],h[1],t);var y=t.startStubX+(t.endStubX-t.startStubX)*r,v=t.startStubY+(t.endStubY-t.startStubY)*r,C={x:[0,1],y:[1,0]},x={perpendicular:function(e){var i={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},s={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},n=C[e][1],r=t.so[C[e][0]]+1,o=-1===t.to[n]&&s[e][1]<s[e][0]||1===t.to[n]&&s[e][1]>s[e][0],a=i[e][r][0],l=i[e][r][1],h={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[e][r][t.to[n]+1];return t.segment===h[3]||t.segment===h[2]&&o?{x:[[y,t.startStubY],[y,t.endStubY]],y:[[t.startStubX,v],[t.endStubX,v]]}[e]:t.segment===h[2]&&a>l?{x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]}[e]:t.segment===h[2]&&l>=a||t.segment===h[1]&&!o?{x:[[t.startStubX,v],[t.endStubX,v],[t.endStubX,t.endStubY]],y:[[y,t.startStubY],[y,t.endStubY],[t.endStubX,t.endStubY]]}[e]:t.segment===h[0]||t.segment===h[1]&&o?{x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]}[e]:void 0},orthogonal:function(e,i,s,n,r){var o=t,a={x:-1===o.so[0]?Math.min(i,n):Math.max(i,n),y:-1===o.so[1]?Math.min(i,n):Math.max(i,n)}[e];return{x:[[a,s],[a,r],[n,r]],y:[[s,a],[r,a],[r,n]]}[e]},opposite:function(i,s,r,o){var a=t,l={x:"y",y:"x"}[i],h={x:"height",y:"width"}[i],d=a["is"+i.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var u=r+(1-e.sourceEndpoint.anchor[l])*e.sourceInfo[h]+n.maxStub;return{x:[[s,u],[o,u]],y:[[u,s],[u,o]]}[i]}return!d||1===a.so[c]&&s>o||-1===a.so[c]&&o>s?{x:[[s,v],[o,v]],y:[[y,s],[y,o]]}[i]:1===a.so[c]&&o>s||-1===a.so[c]&&s>o?{x:[[y,a.sy],[y,a.ty]],y:[[a.sx,v],[a.tx,v]]}[i]:void 0}}[t.anchorOrientation](t.sourceAxis,p,f,g,b);if(x)for(var _=0;_<x.length;_++)u(s,x[_][0],x[_][1],t);u(s,h[2],h[3],t),u(s,t.tx,t.ty,t),m(this,s,t)}},e.extend(t.Connectors.Flowchart,t.Connectors.AbstractConnector)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.jsPlumb,e=this.jsPlumbUtil;t.Connectors.AbstractBezierConnector=function(e){var i,s=!1!==(e=e||{}).showLoopback,n=e.margin||5,r=e.orientation&&"clockwise"===e.orientation,o=e.loopbackRadius||25;return this._compute=function(t,e){var a=e.sourcePos,l=e.targetPos,h=Math.abs(a[0]-l[0]),c=Math.abs(a[1]-l[1]);if(s&&e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var d=e.sourcePos[0],u=e.sourcePos[1]-n,p=d,f=u-o,m=p-o,g=f-o;h=2*o,c=2*o,t.points[0]=m,t.points[1]=g,t.points[2]=h,t.points[3]=c,i.addSegment(this,"Arc",{loopback:!0,x1:d-m+4,y1:u-g,startAngle:0,endAngle:2*Math.PI,r:o,ac:!r,x2:d-m-4,y2:u-g,cx:p-m,cy:f-g})}else this._computeBezier(t,e,a,l,h,c)},i=t.Connectors.AbstractConnector.apply(this,arguments)},e.extend(t.Connectors.AbstractBezierConnector,t.Connectors.AbstractConnector);var i=function(e){e=e||{},this.type="Bezier";var i=t.Connectors.AbstractBezierConnector.apply(this,arguments),s=e.curviness||150,n=10;this.getCurviness=function(){return s},this._findControlPoint=function(t,e,i,r,o,a,l){var h=[];return a[0]!==l[0]||a[1]===l[1]?(h.push(0===l[0]?i[0]<e[0]?t[0]+n:t[0]-n:t[0]+s*l[0]),h.push(0===l[1]?i[1]<e[1]?t[1]+n:t[1]-n:t[1]+s*a[1])):(h.push(0===a[0]?e[0]<i[0]?t[0]+n:t[0]-n:t[0]-s*a[0]),h.push(0===a[1]?e[1]<i[1]?t[1]+n:t[1]-n:t[1]+s*l[1])),h},this._computeBezier=function(t,e,s,n,r,o){var a,l,h=s[0]<n[0]?r:0,c=s[1]<n[1]?o:0,d=s[0]<n[0]?0:r,u=s[1]<n[1]?0:o;a=this._findControlPoint([h,c],s,n,e.sourceEndpoint,e.targetEndpoint,t.so,t.to),l=this._findControlPoint([d,u],n,s,e.targetEndpoint,e.sourceEndpoint,t.to,t.so),i.addSegment(this,"Bezier",{x1:h,y1:c,x2:d,y2:u,cp1x:a[0],cp1y:a[1],cp2x:l[0],cp2y:l[1]})}};t.Connectors.Bezier=i,e.extend(i,t.Connectors.AbstractBezierConnector)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.jsPlumb,e=this.jsPlumbUtil,i=function(e){e=e||{},this.type="StateMachine";var i,s=t.Connectors.AbstractBezierConnector.apply(this,arguments),n=e.curviness||10,r=e.margin||5,o=e.proximityLimit||80;this._computeBezier=function(t,e,a,l,h,c){var d=e.sourcePos[0]<e.targetPos[0]?0:h,u=e.sourcePos[1]<e.targetPos[1]?0:c,p=e.sourcePos[0]<e.targetPos[0]?h:0,f=e.sourcePos[1]<e.targetPos[1]?c:0;0===e.sourcePos[2]&&(d-=r),1===e.sourcePos[2]&&(d+=r),0===e.sourcePos[3]&&(u-=r),1===e.sourcePos[3]&&(u+=r),0===e.targetPos[2]&&(p-=r),1===e.targetPos[2]&&(p+=r),0===e.targetPos[3]&&(f-=r),1===e.targetPos[3]&&(f+=r);var m=(d+p)/2,g=(u+f)/2,b=p>=d&&u>=f?1:p>=d&&f>=u?2:d>=p&&f>=u?3:4,y=Math.sqrt(Math.pow(p-d,2)+Math.pow(f-u,2));i=function(t,e,i,s,n,r,o,a,l){return l>=y?[m,g]:1===b?s[3]<=0&&n[3]>=1?[m+(s[2]<.5?-1*r:r),g]:s[2]>=1&&n[2]<=0?[m,g+(s[3]<.5?-1*o:o)]:[m+-1*r,g+-1*o]:2===b?s[3]>=1&&n[3]<=0?[m+(s[2]<.5?-1*r:r),g]:s[2]>=1&&n[2]<=0?[m,g+(s[3]<.5?-1*o:o)]:[m+r,g+-1*o]:3===b?s[3]>=1&&n[3]<=0?[m+(s[2]<.5?-1*r:r),g]:s[2]<=0&&n[2]>=1?[m,g+(s[3]<.5?-1*o:o)]:[m+-1*r,g+-1*o]:4===b?s[3]<=0&&n[3]>=1?[m+(s[2]<.5?-1*r:r),g]:s[2]<=0&&n[2]>=1?[m,g+(s[3]<.5?-1*o:o)]:[m+r,g+-1*o]:void 0}(0,0,0,e.sourcePos,e.targetPos,n,n,0,o),s.addSegment(this,"Bezier",{x1:p,y1:f,x2:d,y2:u,cp1x:i[0],cp1y:i[1],cp2x:i[0],cp2y:i[1]})}};t.Connectors.StateMachine=i,e.extend(i,t.Connectors.AbstractBezierConnector)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.jsPlumb,e=this.jsPlumbUtil,i="Straight",s=function(e){this.type=i;var s=t.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,e){s.addSegment(this,i,{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),s.addSegment(this,i,{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),s.addSegment(this,i,{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};t.Connectors.Straight=s,e.extend(s,t.Connectors.AbstractConnector)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this.jsPlumb,e=this.jsPlumbUtil,i={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},s="stroke-dasharray",n="dashstyle",r="fill",o="stroke",a="none",l="http://www.w3.org/2000/svg",h=function(t,e){for(var i in e)t.setAttribute(i,""+e[i])},c=function(e,i){return(i=i||{}).version="1.1",i.xmlns=l,t.createElementNS(l,e,null,null,i)},d=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},u=function(t){for(var e=t.querySelectorAll(" defs,linearGradient,radialGradient"),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])},p=function(t,e,l,h,d){if(e.setAttribute(r,l.fill?l.fill:a),e.setAttribute(o,l.stroke?l.stroke:a),l.gradient?function(t,e,i,s,n){var a,l="jsplumb_gradient_"+n._jsPlumb.instance.idstamp();u(t),a=i.gradient.offset?c("radialGradient",{id:l}):c("linearGradient",{id:l,gradientUnits:"userSpaceOnUse"});var h=c("defs");t.appendChild(h),h.appendChild(a);for(var d=0;d<i.gradient.stops.length;d++){var p=i.gradient.stops[1===n.segment||2===n.segment?d:i.gradient.stops.length-1-d][1],f=c("stop",{offset:Math.floor(100*i.gradient.stops[d][0])+"%","stop-color":p});a.appendChild(f)}e.setAttribute(i.stroke?o:r,"url(#"+l+")")}(t,e,l,0,d):(u(t),e.setAttribute("style","")),l.strokeWidth&&e.setAttribute("stroke-width",l.strokeWidth),l[n]&&l.strokeWidth&&!l[s]){var p=-1===l[n].indexOf(",")?" ":",",f=l[n].split(p),m="";f.forEach(function(t){m+=Math.floor(t*l.strokeWidth)+p}),e.setAttribute(s,m)}else l[s]&&e.setAttribute(s,l[s]);for(var g in i)l[g]&&e.setAttribute(i[g],l[g])},f=function(t,e,i){t.childNodes.length>i?t.insertBefore(e,t.childNodes[i]):t.appendChild(e)};e.svg={node:c,attr:h,pos:d};var m=function(i){var s=i.pointerEventsSpec||"all",n={};t.jsPlumbUIComponent.apply(this,i.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var r=i.cssClass+" "+(i.originalArgs[0].cssClass||"");this.svg=c("svg",{style:"",width:0,height:0,"pointer-events":s,position:"absolute"}),i.useDivWrapper?(this.canvas=t.createElement("div",{position:"absolute"}),e.sizeElement(this.canvas,0,0,1,1),this.canvas.className=r):(h(this.svg,{class:r}),this.canvas=this.svg),i._jsPlumb.appendElement(this.canvas,i.originalArgs[0].parent),i.useDivWrapper&&this.canvas.appendChild(this.svg);var o=[this.canvas];return this.getDisplayElements=function(){return o},this.appendDisplayElement=function(t){o.push(t)},this.paint=function(t,s,r){if(null!=t){var o,a=[this.x,this.y],l=[this.w,this.h];null!=r&&(r.xmin<0&&(a[0]+=r.xmin),r.ymin<0&&(a[1]+=r.ymin),l[0]=r.xmax+(r.xmin<0?-r.xmin:0),l[1]=r.ymax+(r.ymin<0?-r.ymin:0)),i.useDivWrapper?(e.sizeElement(this.canvas,a[0],a[1],l[0],l[1]),a[0]=0,a[1]=0,o=d([0,0])):o=d([a[0],a[1]]),n.paint.apply(this,arguments),h(this.svg,{style:o,width:l[0]||0,height:l[1]||0})}},{renderer:n}};e.extend(m,t.jsPlumbUIComponent,{cleanup:function(t){t||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(t){var e=t.getContainer();this.canvas&&null==this.canvas.parentNode&&e.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&e.appendChild(this.bgCanvas)},setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none")}}),t.ConnectorRenderers.svg=function(e){var i=this;m.apply(this,[{cssClass:e._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:e._jsPlumb}]).renderer.paint=function(s,n,r){var o=i.getSegments(),a=[0,0];if(r.xmin<0&&(a[0]=-r.xmin),r.ymin<0&&(a[1]=-r.ymin),o.length>0){var l={d:i.getPathData(),transform:"translate("+a[0]+","+a[1]+")","pointer-events":e["pointer-events"]||"visibleStroke"},d=null;if(s.outlineStroke){var u=s.strokeWidth+2*(s.outlineWidth||1);delete(d=t.extend({},s)).gradient,d.stroke=s.outlineStroke,d.strokeWidth=u,null==i.bgPath?(i.bgPath=c("path",l),t.addClass(i.bgPath,t.connectorOutlineClass),f(i.svg,i.bgPath,0)):h(i.bgPath,l),p(i.svg,i.bgPath,d,0,i)}null==i.path?(i.path=c("path",l),f(i.svg,i.path,s.outlineStroke?1:0)):h(i.path,l),p(i.svg,i.path,s,0,i)}}},e.extend(t.ConnectorRenderers.svg,m);var g=t.SvgEndpoint=function(e){m.apply(this,[{cssClass:e._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:e._jsPlumb}]).renderer.paint=(function(e){var i=t.extend({},e);i.outlineStroke&&(i.stroke=i.outlineStroke),null==this.node?(this.node=this.makeNode(i),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),p(this.svg,this.node,i,0,this),d(this.node)}).bind(this)};e.extend(g,m),t.Endpoints.svg.Dot=function(){t.Endpoints.Dot.apply(this,arguments),g.apply(this,arguments),this.makeNode=function(t){return c("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(t){h(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}},e.extend(t.Endpoints.svg.Dot,[t.Endpoints.Dot,g]),t.Endpoints.svg.Rectangle=function(){t.Endpoints.Rectangle.apply(this,arguments),g.apply(this,arguments),this.makeNode=function(t){return c("rect",{width:this.w,height:this.h})},this.updateNode=function(t){h(t,{width:this.w,height:this.h})}},e.extend(t.Endpoints.svg.Rectangle,[t.Endpoints.Rectangle,g]),t.Endpoints.svg.Image=t.Endpoints.Image,t.Endpoints.svg.Blank=t.Endpoints.Blank,t.Overlays.svg.Label=t.Overlays.Label,t.Overlays.svg.Custom=t.Overlays.Custom;var b=function(e,i){e.apply(this,i),t.jsPlumbUIComponent.apply(this,i),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(t,e){if(t.component.svg&&e){null==this.path&&(this.path=c("path",{"pointer-events":"all"}),t.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,t.component),this.canvas=t.component.svg);var n=i&&1===i.length&&i[0].cssClass||"",r=[0,0];e.xmin<0&&(r[0]=-e.xmin),e.ymin<0&&(r[1]=-e.ymin),h(this.path,{d:s(t.d),class:n,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+r[0]+","+r[1]+")"})}};var s=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){t.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),t.canvas.appendChild(this.path))}};e.extend(b,[t.jsPlumbUIComponent,t.Overlays.AbstractOverlay],{cleanup:function(t){null!=this.path&&(t?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(t,e){this.path&&e.canvas&&e.canvas.appendChild(this.path)},setVisible:function(t){null!=this.path&&(this.path.style.display=t?"block":"none")}}),t.Overlays.svg.Arrow=function(){b.apply(this,[t.Overlays.Arrow,arguments])},e.extend(t.Overlays.svg.Arrow,[t.Overlays.Arrow,b]),t.Overlays.svg.PlainArrow=function(){b.apply(this,[t.Overlays.PlainArrow,arguments])},e.extend(t.Overlays.svg.PlainArrow,[t.Overlays.PlainArrow,b]),t.Overlays.svg.Diamond=function(){b.apply(this,[t.Overlays.Diamond,arguments])},e.extend(t.Overlays.svg.Diamond,[t.Overlays.Diamond,b]),t.Overlays.svg.GuideLines=function(){var e,i,s=null,n=this;t.Overlays.GuideLines.apply(this,arguments),this.paint=function(t,o){null==s&&(s=c("path"),t.connector.svg.appendChild(s),n.attachListeners(s,t.connector),n.attachListeners(s,n),e=c("path"),t.connector.svg.appendChild(e),n.attachListeners(e,t.connector),n.attachListeners(e,n),i=c("path"),t.connector.svg.appendChild(i),n.attachListeners(i,t.connector),n.attachListeners(i,n));var a=[0,0];o.xmin<0&&(a[0]=-o.xmin),o.ymin<0&&(a[1]=-o.ymin),h(s,{d:r(t.head,t.tail),stroke:"red",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),h(e,{d:r(t.tailLine[0],t.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),h(i,{d:r(t.headLine[0],t.headLine[1]),stroke:"green",fill:null,transform:"translate("+a[0]+","+a[1]+")"})};var r=function(t,e){return"M "+t.x+","+t.y+" L"+e.x+","+e.y}},e.extend(t.Overlays.svg.GuideLines,t.Overlays.GuideLines)}).call("undefined"!=typeof window?window:this),(function(){"use strict";var t=this,e=t.jsPlumb,i=t.jsPlumbUtil,s=t.Katavorio,n=t.Biltong,r=function(t,i){var r="_katavorio_"+(i=i||"main"),o=t[r],a=t.getEventManager();return o||((o=new s({bind:a.on,unbind:a.off,getSize:e.getSize,getConstrainingRectangle:function(t){return[t.parentNode.scrollWidth,t.parentNode.scrollHeight]},getPosition:function(e,i){var s=t.getOffset(e,i,e._katavorioDrag?e.offsetParent:null);return[s.left,s.top]},setPosition:function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"},addClass:e.addClass,removeClass:e.removeClass,intersects:n.intersects,indexOf:function(t,e){return t.indexOf(e)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(t.getZoom()),t[r]=o,t.bind("zoom",o.setZoom)),o},o=function(t,e){var s=function(s){if(null!=e[s]){if(i.isString(e[s])){var n=e[s].match(/-=/)?-1:1,r=e[s].substring(2);return t[s]+n*r}return e[s]}return t[s]};return[s("left"),s("top")]},a=function(t,e){if(null==e)return[0,0];var i=u(e),s=d(i,0);return[s[t+"X"],s[t+"Y"]]},l=a.bind(this,"page"),h=a.bind(this,"screen"),c=a.bind(this,"client"),d=function(t,e){return t.item?t.item(e):t[e]},u=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},p=function(t){var e={},i=[],s={},n={},r={};this.register=function(o){var a,l=t.getId(o);e[l]||(e[l]=o,i.push(o),s[l]={});var h=function(e){if(e)for(var i=0;i<e.childNodes.length;i++)if(3!==e.childNodes[i].nodeType&&8!==e.childNodes[i].nodeType){var c=jsPlumb.getElement(e.childNodes[i]),d=t.getId(e.childNodes[i],null,!0);if(d&&n[d]&&n[d]>0){a||(a=t.getOffset(o));var u=t.getOffset(c);s[l][d]={id:d,offset:{left:u.left-a.left,top:u.top-a.top}},r[d]=l}h(e.childNodes[i])}};h(o)},this.updateOffsets=function(e,i){if(null!=e){i=i||{};var n,o=jsPlumb.getElement(e),a=t.getId(o),l=s[a];if(l)for(var h in l)if(l.hasOwnProperty(h)){var c=jsPlumb.getElement(h),d=i[h]||t.getOffset(c);if(null==c.offsetParent&&null!=s[a][h])continue;n||(n=t.getOffset(o)),s[a][h]={id:h,offset:{left:d.left-n.left,top:d.top-n.top}},r[h]=a}}},this.endpointAdded=function(i,o){o=o||t.getId(i);var a=document.body,l=i.parentNode;for(n[o]=n[o]?n[o]+1:1;null!=l&&l!==a;){var h=t.getId(l,null,!0);if(h&&e[h]){var c=t.getOffset(l);if(null==s[h][o]){var d=t.getOffset(i);s[h][o]={id:o,offset:{left:d.left-c.left,top:d.top-c.top}},r[o]=h}break}l=l.parentNode}},this.endpointDeleted=function(t){if(n[t.elementId]&&(n[t.elementId]--,n[t.elementId]<=0))for(var e in s)s.hasOwnProperty(e)&&s[e]&&(delete s[e][t.elementId],delete r[t.elementId])},this.changeId=function(t,e){s[e]=s[t],s[t]={},r[e]=r[t],r[t]=null},this.getElementsForDraggable=function(t){return s[t]},this.elementRemoved=function(t){var e=r[t];e&&(delete s[e][t],delete r[t])},this.reset=function(){e={},i=[],s={},n={}},this.dragEnded=function(e){if(null!=e.offsetParent){var i=t.getId(e),s=r[i];s&&this.updateOffsets(s)}},this.setParent=function(e,i,n,o,a){var l=r[i];s[o]||(s[o]={});var h=t.getOffset(n),c=a||t.getOffset(e);l&&s[l]&&delete s[l][i],s[o][i]={id:i,offset:{left:c.left-h.left,top:c.top-h.top}},r[i]=o},this.clearParent=function(t,e){var i=r[e];i&&(delete s[i][e],delete r[e])},this.revalidateParent=function(e,i,s){var n=r[i];if(n){var o={};o[i]=s,this.updateOffsets(n,o),t.revalidate(n)}},this.getDragAncestor=function(e){var i=jsPlumb.getElement(e),s=t.getId(i),n=r[s];return n?jsPlumb.getElement(n):null}},f=function(t,e,s){e=i.fastTrim(e),void 0!==t.className.baseVal?t.className.baseVal=e:t.className=e;try{var n=t.classList;if(null!=n){for(;n.length>0;)n.remove(n.item(0));for(var o=0;o<s.length;o++)s[o]&&n.add(s[o])}}catch(r){i.log("JSPLUMB: cannot set class list",r)}},m=function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},g=function(t,e,s){e=null==e?[]:i.isArray(e)?e:e.split(/\s+/),s=null==s?[]:i.isArray(s)?s:s.split(/\s+/);var n=m(t).split(/\s+/),r=function(t,e){for(var i=0;i<e.length;i++)if(t)-1===n.indexOf(e[i])&&n.push(e[i]);else{var s=n.indexOf(e[i]);-1!==s&&n.splice(s,1)}};r(!0,e),r(!1,s),f(t,n.join(" "),n)};t.jsPlumb.extend(t.jsPlumbInstance.prototype,{headless:!1,pageLocation:l,screenLocation:h,clientLocation:c,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new p(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,e,i,s){return this.createElementNS(null,t,e,i,s)},createElementNS:function(t,e,i,s,n){var r,o=null==t?document.createElement(e):document.createElementNS(t,e);for(r in i=i||{})o.style[r]=i[r];for(r in s&&(o.className=s),n=n||{})o.setAttribute(r,""+n[r]);return o},getAttribute:function(t,e){return null!=t.getAttribute?t.getAttribute(e):null},setAttribute:function(t,e,i){null!=t.setAttribute&&t.setAttribute(e,i)},setAttributes:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:m,addClass:function(t,e){jsPlumb.each(t,function(t){g(t,e)})},hasClass:function(t,e){return(t=jsPlumb.getElement(t)).classList?t.classList.contains(e):-1!==m(t).indexOf(e)},removeClass:function(t,e){jsPlumb.each(t,function(t){g(t,null,e)})},toggleClass:function(t,e){jsPlumb.hasClass(t,e)?jsPlumb.removeClass(t,e):jsPlumb.addClass(t,e)},updateClasses:function(t,e,i){jsPlumb.each(t,function(t){g(t,e,i)})},setClass:function(t,e){null!=e&&jsPlumb.each(t,function(t){f(t,e,e.split(/\s+/))})},setPosition:function(t,e){t.style.left=e.left+"px",t.style.top=e.top+"px"},getPosition:function(t){var e=function(e){var i=t.style[e];return i?i.substring(0,i.length-2):0};return{left:e("left"),top:e("top")}},getStyle:function(t,e){return void 0!==window.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},getSelector:function(t,e){return 1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(e)},getOffset:function(t,e,i){t=jsPlumb.getElement(t),i=i||this.getContainer();for(var s={left:t.offsetLeft,top:t.offsetTop},n=e||null!=i&&t!==i&&t.offsetParent!==i?t.offsetParent:null,r=(function(t){null!=t&&t!==document.body&&(t.scrollTop>0||t.scrollLeft>0)&&(s.left-=t.scrollLeft,s.top-=t.scrollTop)}).bind(this);null!=n;)s.left+=n.offsetLeft,s.top+=n.offsetTop,r(n),n=e?n.offsetParent:n.offsetParent===i?null:n.offsetParent;if(null!=i&&!e&&(i.scrollTop>0||i.scrollLeft>0)){var o=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",a=this.getStyle(t,"position");"absolute"!==a&&"fixed"!==a&&"absolute"!==o&&"fixed"!==o&&(s.left-=i.scrollLeft,s.top-=i.scrollTop)}return s},getPositionOnElement:function(t,e,i){var s=void 0!==e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},n=document.body,r=document.documentElement,o=window.pageYOffset||r.scrollTop||n.scrollTop,a=window.pageXOffset||r.scrollLeft||n.scrollLeft,l=s.top+o-(r.clientTop||n.clientTop||0)+0*i,h=s.left+a-(r.clientLeft||n.clientLeft||0)+0*i,c=jsPlumb.pageLocation(t);return[(c[0]-h)/(s.width||e.offsetWidth*i),(c[1]-l)/(s.height||e.offsetHeight*i)]},getAbsolutePosition:function(t){var e=function(e){var i=t.style[e];return i?parseFloat(i.substring(0,i.length-2)):void 0};return[e("left"),e("top")]},setAbsolutePosition:function(t,e,i,s){i?this.animate(t,{left:"+="+(e[0]-i[0]),top:"+="+(e[1]-i[1])},s):(t.style.left=e[0]+"px",t.style.top=e[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(t,e){var s;return t=i.isArray(t)||null!=t.length&&!i.isString(t)?t:[t],Array.prototype.slice.call(t).forEach((function(t){(s=this.info(t)).el&&this._initDraggableIfNecessary(s.el,!0,e,s.id,!0)}).bind(this)),this},initDraggable:function(t,e,i){r(this,i).draggable(t,e),t._jsPlumbDragOptions=e},destroyDraggable:function(t,e){r(this,e).destroyDraggable(t),delete t._jsPlumbDragOptions},unbindDraggable:function(t,e,i,s){r(this,s).destroyDraggable(t,e,i)},setDraggable:function(t,e){return jsPlumb.each(t,(function(t){this.isDragSupported(t)&&(this._draggableStates[this.getAttribute(t,"id")]=e,this.setElementDraggable(t,e))}).bind(this))},_draggableStates:{},toggleDraggable:function(t){var e;return jsPlumb.each(t,(function(t){var i=this.getAttribute(t,"id");return this._draggableStates[i]=e=!(e=null!=this._draggableStates[i]&&this._draggableStates[i]),this.setDraggable(t,e),e}).bind(this)),e},_initDraggableIfNecessary:function(t,e,s,n,r){if(!jsPlumb.headless&&null!=e&&e&&jsPlumb.isDragSupported(t,this)){var o=s||this.Defaults.DragOptions;if(o=jsPlumb.extend({},o),jsPlumb.isAlreadyDraggable(t,this))s.force&&this.initDraggable(t,o);else{var a=jsPlumb.dragEvents.drag,l=jsPlumb.dragEvents.stop,h=jsPlumb.dragEvents.start;this.manage(n,t),o[h]=i.wrap(o[h],(function(t){var e=t.el._jsPlumbDragOptions,i=!0;return e.canDrag&&(i=e.canDrag()),i&&(this.setHoverSuspended(!0),this.select({source:t.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),i}).bind(this)),o[a]=i.wrap(o[a],(function(t){var e=this.getUIPosition(arguments,this.getZoom());if(null!=e){var i=t.el._jsPlumbDragOptions;this.draw(t.el,e,null,!0),i._dragging&&this.addClass(t.el,"jtk-dragged"),i._dragging=!0}}).bind(this)),o[l]=i.wrap(o[l],(function(t){for(var e,i=t.selection,s=(function(t){null!=t[1]&&(e=this.getUIPosition([{el:t[2].el,pos:[t[1].left,t[1].top]}]),this.draw(t[2].el,e)),delete t[0]._jsPlumbDragOptions._dragging,this.removeClass(t[0],"jtk-dragged"),this.select({source:t[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.getDragManager().dragEnded(t[2].el)}).bind(this),n=0;n<i.length;n++)s(i[n]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)}).bind(this));var c=this.getId(t);this._draggableStates[c]=!0;var d=this._draggableStates[c];o.disabled=null!=d&&!d,this.initDraggable(t,o),this.getDragManager().register(t),r&&this.fire("elementDraggable",{el:t,options:o})}}},animationSupported:!0,getElement:function(t){return null==t?null:"string"==typeof(t="string"==typeof t?t:null!=t.length&&null==t.enctype?t[0]:t)?document.getElementById(t):t},removeElement:function(t){r(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,i,s){s=s||{};var n=this.getOffset(t),r=o(n,i),a=s.duration||250,l=a/15,h=15/a*(r[0]-n.left),c=15/a*(r[1]-n.top),d=0,u=setInterval(function(){e.setPosition(t,{left:n.left+h*(d+1),top:n.top+c*(d+1)}),null!=s.step&&s.step(d,Math.ceil(l)),++d>=l&&(window.clearInterval(u),null!=s.complete&&s.complete())},15)},destroyDroppable:function(t,e){r(this,e).destroyDroppable(t)},unbindDroppable:function(t,e,i,s){r(this,s).destroyDroppable(t,e,i)},droppable:function(t,e){var s;return t=i.isArray(t)||null!=t.length&&!i.isString(t)?t:[t],(e=e||{}).allowLoopback=!1,Array.prototype.slice.call(t).forEach((function(t){(s=this.info(t)).el&&this.initDroppable(s.el,e)}).bind(this)),this},initDroppable:function(t,e,i){r(this,i).droppable(t,e)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,e){return!0},isDropSupported:function(t,e){return!0},isElementDraggable:function(t){return(t=e.getElement(t))._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,e){var i=t[0].el;if(null==i.offsetParent)return null;var s=t[0].finalPos||t[0].pos,n={left:s[0],top:s[1]};if(i._katavorioDrag&&i.offsetParent!==this.getContainer()){var r=this.getOffset(i.offsetParent);n.left+=r.left,n.top+=r.top}return n},setDragFilter:function(t,e,i){t._katavorioDrag&&t._katavorioDrag.setFilter(e,i)},setElementDraggable:function(t,i){(t=e.getElement(t))._katavorioDrag&&t._katavorioDrag.setEnabled(i)},setDragScope:function(t,e){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,e)},setDropScope:function(t,e){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,e)},addToPosse:function(t,i){var s=Array.prototype.slice.call(arguments,1),n=r(this);e.each(t,function(t){(t=[e.getElement(t)]).push.apply(t,s),n.addToPosse.apply(n,t)})},setPosse:function(t,i){var s=Array.prototype.slice.call(arguments,1),n=r(this);e.each(t,function(t){(t=[e.getElement(t)]).push.apply(t,s),n.setPosse.apply(n,t)})},removeFromPosse:function(t,i){var s=Array.prototype.slice.call(arguments,1),n=r(this);e.each(t,function(t){(t=[e.getElement(t)]).push.apply(t,s),n.removeFromPosse.apply(n,t)})},removeFromAllPosses:function(t){var i=r(this);e.each(t,function(t){i.removeFromAllPosses(e.getElement(t))})},setPosseState:function(t,i,s){var n=r(this);e.each(t,function(t){n.setPosseState(e.getElement(t),i,s)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){r(this).select(t)},removeFromDragSelection:function(t){r(this).deselect(t)},clearDragSelection:function(){r(this).deselectAll()},trigger:function(t,e,i,s){this.getEventManager().trigger(t,e,i,s)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()},getEventManager:function(){return(e=this._mottle)||(e=this._mottle=new t.Mottle),e;var e},on:function(t,e,i){return this.getEventManager().on.apply(this,arguments),this},off:function(t,e,i){return this.getEventManager().off.apply(this,arguments),this}}),function(t){var e=function(){/complete|loaded|interactive/.test(document.readyState)&&void 0!==document.body&&null!=document.body?t():setTimeout(e,9)};e()}(e.init)}).call("undefined"!=typeof window?window:this),global=this,factory=function(){const t=0,e=1,i=2,s=3,n=4,r=5,o=6,a=7,l=8,h=9,c=10,d=11,u=12;function p(t,e){const i=t.charCodeAt(e=e||0);if(55296<=i&&i<=56319&&e<t.length-1){const s=i,n=t.charCodeAt(e+1);return 56320<=n&&n<=57343?1024*(s-55296)+(n-56320)+65536:s}if(56320<=i&&i<=57343&&e>=1){const s=t.charCodeAt(e-1),n=i;return 55296<=s&&s<=56319?1024*(s-55296)+(n-56320)+65536:n}return i}function f(f,g){if((g=g||0)<0)return 0;if(g>=f.length-1)return f.length;let b=m(p(f,g));for(let C=g+1;C<f.length;C++){if(55296<=f.charCodeAt(C-1)&&f.charCodeAt(C-1)<=56319&&56320<=f.charCodeAt(C)&&f.charCodeAt(C)<=57343)continue;const g=m(p(f,C));if(v=g,!((y=b)===d&&v===u||y===s&&v===d||y===d&&v===s||y===t&&v===e||y!==i&&y!==t&&y!==e&&v!==i&&v!==t&&v!==e&&(y===o&&(v===o||v===a||v===h||v===c)||!(y!==h&&y!==a||v!==a&&v!==l)||(y===c||y===l)&&v===l||y===n&&v===n||v===s||v===r)))return C;b=g}var y,v;return f.length}function m(p){return 13===p?t:10===p?e:0<=p&&p<=9||11<=p&&p<=12||14<=p&&p<=31||127<=p&&p<=159||173===p||1536<=p&&p<=1541||1564===p||1757===p||1807===p||6158===p||8203===p||8206<=p&&p<=8207||8232===p||8233===p||8234<=p&&p<=8238||8288<=p&&p<=8292||8293===p||8294<=p&&p<=8303||55296<=p&&p<=57343||65279===p||65520<=p&&p<=65528||65529<=p&&p<=65531||69821===p||113824<=p&&p<=113827||119155<=p&&p<=119162||917504===p||917505===p||917506<=p&&p<=917535||917536<=p&&p<=917631||917632<=p&&p<=917759||918e3<=p&&p<=921599?i:768<=p&&p<=879||1155<=p&&p<=1159||1160<=p&&p<=1161||1425<=p&&p<=1469||1471===p||1473<=p&&p<=1474||1476<=p&&p<=1477||1479===p||1552<=p&&p<=1562||1611<=p&&p<=1631||1648===p||1750<=p&&p<=1756||1759<=p&&p<=1764||1767<=p&&p<=1768||1770<=p&&p<=1773||1809===p||1840<=p&&p<=1866||1958<=p&&p<=1968||2027<=p&&p<=2035||2070<=p&&p<=2073||2075<=p&&p<=2083||2085<=p&&p<=2087||2089<=p&&p<=2093||2137<=p&&p<=2139||2275<=p&&p<=2306||2362===p||2364===p||2369<=p&&p<=2376||2381===p||2385<=p&&p<=2391||2402<=p&&p<=2403||2433===p||2492===p||2494===p||2497<=p&&p<=2500||2509===p||2519===p||2530<=p&&p<=2531||2561<=p&&p<=2562||2620===p||2625<=p&&p<=2626||2631<=p&&p<=2632||2635<=p&&p<=2637||2641===p||2672<=p&&p<=2673||2677===p||2689<=p&&p<=2690||2748===p||2753<=p&&p<=2757||2759<=p&&p<=2760||2765===p||2786<=p&&p<=2787||2817===p||2876===p||2878===p||2879===p||2881<=p&&p<=2884||2893===p||2902===p||2903===p||2914<=p&&p<=2915||2946===p||3006===p||3008===p||3021===p||3031===p||3072===p||3134<=p&&p<=3136||3142<=p&&p<=3144||3146<=p&&p<=3149||3157<=p&&p<=3158||3170<=p&&p<=3171||3201===p||3260===p||3263===p||3266===p||3270===p||3276<=p&&p<=3277||3285<=p&&p<=3286||3298<=p&&p<=3299||3329===p||3390===p||3393<=p&&p<=3396||3405===p||3415===p||3426<=p&&p<=3427||3530===p||3535===p||3538<=p&&p<=3540||3542===p||3551===p||3633===p||3636<=p&&p<=3642||3655<=p&&p<=3662||3761===p||3764<=p&&p<=3769||3771<=p&&p<=3772||3784<=p&&p<=3789||3864<=p&&p<=3865||3893===p||3895===p||3897===p||3953<=p&&p<=3966||3968<=p&&p<=3972||3974<=p&&p<=3975||3981<=p&&p<=3991||3993<=p&&p<=4028||4038===p||4141<=p&&p<=4144||4146<=p&&p<=4151||4153<=p&&p<=4154||4157<=p&&p<=4158||4184<=p&&p<=4185||4190<=p&&p<=4192||4209<=p&&p<=4212||4226===p||4229<=p&&p<=4230||4237===p||4253===p||4957<=p&&p<=4959||5906<=p&&p<=5908||5938<=p&&p<=5940||5970<=p&&p<=5971||6002<=p&&p<=6003||6068<=p&&p<=6069||6071<=p&&p<=6077||6086===p||6089<=p&&p<=6099||6109===p||6155<=p&&p<=6157||6313===p||6432<=p&&p<=6434||6439<=p&&p<=6440||6450===p||6457<=p&&p<=6459||6679<=p&&p<=6680||6683===p||6742===p||6744<=p&&p<=6750||6752===p||6754===p||6757<=p&&p<=6764||6771<=p&&p<=6780||6783===p||6832<=p&&p<=6845||6846===p||6912<=p&&p<=6915||6964===p||6966<=p&&p<=6970||6972===p||6978===p||7019<=p&&p<=7027||7040<=p&&p<=7041||7074<=p&&p<=7077||7080<=p&&p<=7081||7083<=p&&p<=7085||7142===p||7144<=p&&p<=7145||7149===p||7151<=p&&p<=7153||7212<=p&&p<=7219||7222<=p&&p<=7223||7376<=p&&p<=7378||7380<=p&&p<=7392||7394<=p&&p<=7400||7405===p||7412===p||7416<=p&&p<=7417||7616<=p&&p<=7669||7676<=p&&p<=7679||8204<=p&&p<=8205||8400<=p&&p<=8412||8413<=p&&p<=8416||8417===p||8418<=p&&p<=8420||8421<=p&&p<=8432||11503<=p&&p<=11505||11647===p||11744<=p&&p<=11775||12330<=p&&p<=12333||12334<=p&&p<=12335||12441<=p&&p<=12442||42607===p||42608<=p&&p<=42610||42612<=p&&p<=42621||42654<=p&&p<=42655||42736<=p&&p<=42737||43010===p||43014===p||43019===p||43045<=p&&p<=43046||43204===p||43232<=p&&p<=43249||43302<=p&&p<=43309||43335<=p&&p<=43345||43392<=p&&p<=43394||43443===p||43446<=p&&p<=43449||43452===p||43493===p||43561<=p&&p<=43566||43569<=p&&p<=43570||43573<=p&&p<=43574||43587===p||43596===p||43644===p||43696===p||43698<=p&&p<=43700||43703<=p&&p<=43704||43710<=p&&p<=43711||43713===p||43756<=p&&p<=43757||43766===p||44005===p||44008===p||44013===p||64286===p||65024<=p&&p<=65039||65056<=p&&p<=65071||65438<=p&&p<=65439||66045===p||66272===p||66422<=p&&p<=66426||68097<=p&&p<=68099||68101<=p&&p<=68102||68108<=p&&p<=68111||68152<=p&&p<=68154||68159===p||68325<=p&&p<=68326||69633===p||69688<=p&&p<=69702||69759<=p&&p<=69761||69811<=p&&p<=69814||69817<=p&&p<=69818||69888<=p&&p<=69890||69927<=p&&p<=69931||69933<=p&&p<=69940||70003===p||70016<=p&&p<=70017||70070<=p&&p<=70078||70090<=p&&p<=70092||70191<=p&&p<=70193||70196===p||70198<=p&&p<=70199||70367===p||70371<=p&&p<=70378||70400<=p&&p<=70401||70460===p||70462===p||70464===p||70487===p||70502<=p&&p<=70508||70512<=p&&p<=70516||70832===p||70835<=p&&p<=70840||70842===p||70845===p||70847<=p&&p<=70848||70850<=p&&p<=70851||71087===p||71090<=p&&p<=71093||71100<=p&&p<=71101||71103<=p&&p<=71104||71132<=p&&p<=71133||71219<=p&&p<=71226||71229===p||71231<=p&&p<=71232||71339===p||71341===p||71344<=p&&p<=71349||71351===p||71453<=p&&p<=71455||71458<=p&&p<=71461||71463<=p&&p<=71467||92912<=p&&p<=92916||92976<=p&&p<=92982||94095<=p&&p<=94098||113821<=p&&p<=113822||119141===p||119143<=p&&p<=119145||119150<=p&&p<=119154||119163<=p&&p<=119170||119173<=p&&p<=119179||119210<=p&&p<=119213||119362<=p&&p<=119364||121344<=p&&p<=121398||121403<=p&&p<=121452||121461===p||121476===p||121499<=p&&p<=121503||121505<=p&&p<=121519||125136<=p&&p<=125142||917760<=p&&p<=917999?s:127462<=p&&p<=127487?n:127995<=p&&p<=127999?u:2307===p||2363===p||2366<=p&&p<=2368||2377<=p&&p<=2380||2382<=p&&p<=2383||2434<=p&&p<=2435||2495<=p&&p<=2496||2503<=p&&p<=2504||2507<=p&&p<=2508||2563===p||2622<=p&&p<=2624||2691===p||2750<=p&&p<=2752||2761===p||2763<=p&&p<=2764||2818<=p&&p<=2819||2880===p||2887<=p&&p<=2888||2891<=p&&p<=2892||3007===p||3009<=p&&p<=3010||3014<=p&&p<=3016||3018<=p&&p<=3020||3073<=p&&p<=3075||3137<=p&&p<=3140||3202<=p&&p<=3203||3262===p||3264<=p&&p<=3265||3267<=p&&p<=3268||3271<=p&&p<=3272||3274<=p&&p<=3275||3330<=p&&p<=3331||3391<=p&&p<=3392||3398<=p&&p<=3400||3402<=p&&p<=3404||3458<=p&&p<=3459||3536<=p&&p<=3537||3544<=p&&p<=3550||3570<=p&&p<=3571||3635===p||3763===p||3902<=p&&p<=3903||3967===p||4145===p||4155<=p&&p<=4156||4182<=p&&p<=4183||4228===p||6070===p||6078<=p&&p<=6085||6087<=p&&p<=6088||6435<=p&&p<=6438||6441<=p&&p<=6443||6448<=p&&p<=6449||6451<=p&&p<=6456||6681<=p&&p<=6682||6741===p||6743===p||6765<=p&&p<=6770||6916===p||6965===p||6971===p||6973<=p&&p<=6977||6979<=p&&p<=6980||7042===p||7073===p||7078<=p&&p<=7079||7082===p||7143===p||7146<=p&&p<=7148||7150===p||7154<=p&&p<=7155||7204<=p&&p<=7211||7220<=p&&p<=7221||7393===p||7410<=p&&p<=7411||43043<=p&&p<=43044||43047===p||43136<=p&&p<=43137||43188<=p&&p<=43203||43346<=p&&p<=43347||43395===p||43444<=p&&p<=43445||43450<=p&&p<=43451||43453<=p&&p<=43456||43567<=p&&p<=43568||43571<=p&&p<=43572||43597===p||43755===p||43758<=p&&p<=43759||43765===p||44003<=p&&p<=44004||44006<=p&&p<=44007||44009<=p&&p<=44010||44012===p||69632===p||69634===p||69762===p||69808<=p&&p<=69810||69815<=p&&p<=69816||69932===p||70018===p||70067<=p&&p<=70069||70079<=p&&p<=70080||70188<=p&&p<=70190||70194<=p&&p<=70195||70197===p||70368<=p&&p<=70370||70402<=p&&p<=70403||70463===p||70465<=p&&p<=70468||70471<=p&&p<=70472||70475<=p&&p<=70477||70498<=p&&p<=70499||70833<=p&&p<=70834||70841===p||70843<=p&&p<=70844||70846===p||70849===p||71088<=p&&p<=71089||71096<=p&&p<=71099||71102===p||71216<=p&&p<=71218||71227<=p&&p<=71228||71230===p||71340===p||71342<=p&&p<=71343||71350===p||71456<=p&&p<=71457||71462===p||94033<=p&&p<=94078||119142===p||119149===p?r:4352<=p&&p<=4447||43360<=p&&p<=43388?o:4448<=p&&p<=4519||55216<=p&&p<=55238?a:4520<=p&&p<=4607||55243<=p&&p<=55291?l:44032===p||44060===p||44088===p||44116===p||44144===p||44172===p||44200===p||44228===p||44256===p||44284===p||44312===p||44340===p||44368===p||44396===p||44424===p||44452===p||44480===p||44508===p||44536===p||44564===p||44592===p||44620===p||44648===p||44676===p||44704===p||44732===p||44760===p||44788===p||44816===p||44844===p||44872===p||44900===p||44928===p||44956===p||44984===p||45012===p||45040===p||45068===p||45096===p||45124===p||45152===p||45180===p||45208===p||45236===p||45264===p||45292===p||45320===p||45348===p||45376===p||45404===p||45432===p||45460===p||45488===p||45516===p||45544===p||45572===p||45600===p||45628===p||45656===p||45684===p||45712===p||45740===p||45768===p||45796===p||45824===p||45852===p||45880===p||45908===p||45936===p||45964===p||45992===p||46020===p||46048===p||46076===p||46104===p||46132===p||46160===p||46188===p||46216===p||46244===p||46272===p||46300===p||46328===p||46356===p||46384===p||46412===p||46440===p||46468===p||46496===p||46524===p||46552===p||46580===p||46608===p||46636===p||46664===p||46692===p||46720===p||46748===p||46776===p||46804===p||46832===p||46860===p||46888===p||46916===p||46944===p||46972===p||47e3===p||47028===p||47056===p||47084===p||47112===p||47140===p||47168===p||47196===p||47224===p||47252===p||47280===p||47308===p||47336===p||47364===p||47392===p||47420===p||47448===p||47476===p||47504===p||47532===p||47560===p||47588===p||47616===p||47644===p||47672===p||47700===p||47728===p||47756===p||47784===p||47812===p||47840===p||47868===p||47896===p||47924===p||47952===p||47980===p||48008===p||48036===p||48064===p||48092===p||48120===p||48148===p||48176===p||48204===p||48232===p||48260===p||48288===p||48316===p||48344===p||48372===p||48400===p||48428===p||48456===p||48484===p||48512===p||48540===p||48568===p||48596===p||48624===p||48652===p||48680===p||48708===p||48736===p||48764===p||48792===p||48820===p||48848===p||48876===p||48904===p||48932===p||48960===p||48988===p||49016===p||49044===p||49072===p||49100===p||49128===p||49156===p||49184===p||49212===p||49240===p||49268===p||49296===p||49324===p||49352===p||49380===p||49408===p||49436===p||49464===p||49492===p||49520===p||49548===p||49576===p||49604===p||49632===p||49660===p||49688===p||49716===p||49744===p||49772===p||49800===p||49828===p||49856===p||49884===p||49912===p||49940===p||49968===p||49996===p||50024===p||50052===p||50080===p||50108===p||50136===p||50164===p||50192===p||50220===p||50248===p||50276===p||50304===p||50332===p||50360===p||50388===p||50416===p||50444===p||50472===p||50500===p||50528===p||50556===p||50584===p||50612===p||50640===p||50668===p||50696===p||50724===p||50752===p||50780===p||50808===p||50836===p||50864===p||50892===p||50920===p||50948===p||50976===p||51004===p||51032===p||51060===p||51088===p||51116===p||51144===p||51172===p||51200===p||51228===p||51256===p||51284===p||51312===p||51340===p||51368===p||51396===p||51424===p||51452===p||51480===p||51508===p||51536===p||51564===p||51592===p||51620===p||51648===p||51676===p||51704===p||51732===p||51760===p||51788===p||51816===p||51844===p||51872===p||51900===p||51928===p||51956===p||51984===p||52012===p||52040===p||52068===p||52096===p||52124===p||52152===p||52180===p||52208===p||52236===p||52264===p||52292===p||52320===p||52348===p||52376===p||52404===p||52432===p||52460===p||52488===p||52516===p||52544===p||52572===p||52600===p||52628===p||52656===p||52684===p||52712===p||52740===p||52768===p||52796===p||52824===p||52852===p||52880===p||52908===p||52936===p||52964===p||52992===p||53020===p||53048===p||53076===p||53104===p||53132===p||53160===p||53188===p||53216===p||53244===p||53272===p||53300===p||53328===p||53356===p||53384===p||53412===p||53440===p||53468===p||53496===p||53524===p||53552===p||53580===p||53608===p||53636===p||53664===p||53692===p||53720===p||53748===p||53776===p||53804===p||53832===p||53860===p||53888===p||53916===p||53944===p||53972===p||54e3===p||54028===p||54056===p||54084===p||54112===p||54140===p||54168===p||54196===p||54224===p||54252===p||54280===p||54308===p||54336===p||54364===p||54392===p||54420===p||54448===p||54476===p||54504===p||54532===p||54560===p||54588===p||54616===p||54644===p||54672===p||54700===p||54728===p||54756===p||54784===p||54812===p||54840===p||54868===p||54896===p||54924===p||54952===p||54980===p||55008===p||55036===p||55064===p||55092===p||55120===p||55148===p||55176===p?h:44033<=p&&p<=44059||44061<=p&&p<=44087||44089<=p&&p<=44115||44117<=p&&p<=44143||44145<=p&&p<=44171||44173<=p&&p<=44199||44201<=p&&p<=44227||44229<=p&&p<=44255||44257<=p&&p<=44283||44285<=p&&p<=44311||44313<=p&&p<=44339||44341<=p&&p<=44367||44369<=p&&p<=44395||44397<=p&&p<=44423||44425<=p&&p<=44451||44453<=p&&p<=44479||44481<=p&&p<=44507||44509<=p&&p<=44535||44537<=p&&p<=44563||44565<=p&&p<=44591||44593<=p&&p<=44619||44621<=p&&p<=44647||44649<=p&&p<=44675||44677<=p&&p<=44703||44705<=p&&p<=44731||44733<=p&&p<=44759||44761<=p&&p<=44787||44789<=p&&p<=44815||44817<=p&&p<=44843||44845<=p&&p<=44871||44873<=p&&p<=44899||44901<=p&&p<=44927||44929<=p&&p<=44955||44957<=p&&p<=44983||44985<=p&&p<=45011||45013<=p&&p<=45039||45041<=p&&p<=45067||45069<=p&&p<=45095||45097<=p&&p<=45123||45125<=p&&p<=45151||45153<=p&&p<=45179||45181<=p&&p<=45207||45209<=p&&p<=45235||45237<=p&&p<=45263||45265<=p&&p<=45291||45293<=p&&p<=45319||45321<=p&&p<=45347||45349<=p&&p<=45375||45377<=p&&p<=45403||45405<=p&&p<=45431||45433<=p&&p<=45459||45461<=p&&p<=45487||45489<=p&&p<=45515||45517<=p&&p<=45543||45545<=p&&p<=45571||45573<=p&&p<=45599||45601<=p&&p<=45627||45629<=p&&p<=45655||45657<=p&&p<=45683||45685<=p&&p<=45711||45713<=p&&p<=45739||45741<=p&&p<=45767||45769<=p&&p<=45795||45797<=p&&p<=45823||45825<=p&&p<=45851||45853<=p&&p<=45879||45881<=p&&p<=45907||45909<=p&&p<=45935||45937<=p&&p<=45963||45965<=p&&p<=45991||45993<=p&&p<=46019||46021<=p&&p<=46047||46049<=p&&p<=46075||46077<=p&&p<=46103||46105<=p&&p<=46131||46133<=p&&p<=46159||46161<=p&&p<=46187||46189<=p&&p<=46215||46217<=p&&p<=46243||46245<=p&&p<=46271||46273<=p&&p<=46299||46301<=p&&p<=46327||46329<=p&&p<=46355||46357<=p&&p<=46383||46385<=p&&p<=46411||46413<=p&&p<=46439||46441<=p&&p<=46467||46469<=p&&p<=46495||46497<=p&&p<=46523||46525<=p&&p<=46551||46553<=p&&p<=46579||46581<=p&&p<=46607||46609<=p&&p<=46635||46637<=p&&p<=46663||46665<=p&&p<=46691||46693<=p&&p<=46719||46721<=p&&p<=46747||46749<=p&&p<=46775||46777<=p&&p<=46803||46805<=p&&p<=46831||46833<=p&&p<=46859||46861<=p&&p<=46887||46889<=p&&p<=46915||46917<=p&&p<=46943||46945<=p&&p<=46971||46973<=p&&p<=46999||47001<=p&&p<=47027||47029<=p&&p<=47055||47057<=p&&p<=47083||47085<=p&&p<=47111||47113<=p&&p<=47139||47141<=p&&p<=47167||47169<=p&&p<=47195||47197<=p&&p<=47223||47225<=p&&p<=47251||47253<=p&&p<=47279||47281<=p&&p<=47307||47309<=p&&p<=47335||47337<=p&&p<=47363||47365<=p&&p<=47391||47393<=p&&p<=47419||47421<=p&&p<=47447||47449<=p&&p<=47475||47477<=p&&p<=47503||47505<=p&&p<=47531||47533<=p&&p<=47559||47561<=p&&p<=47587||47589<=p&&p<=47615||47617<=p&&p<=47643||47645<=p&&p<=47671||47673<=p&&p<=47699||47701<=p&&p<=47727||47729<=p&&p<=47755||47757<=p&&p<=47783||47785<=p&&p<=47811||47813<=p&&p<=47839||47841<=p&&p<=47867||47869<=p&&p<=47895||47897<=p&&p<=47923||47925<=p&&p<=47951||47953<=p&&p<=47979||47981<=p&&p<=48007||48009<=p&&p<=48035||48037<=p&&p<=48063||48065<=p&&p<=48091||48093<=p&&p<=48119||48121<=p&&p<=48147||48149<=p&&p<=48175||48177<=p&&p<=48203||48205<=p&&p<=48231||48233<=p&&p<=48259||48261<=p&&p<=48287||48289<=p&&p<=48315||48317<=p&&p<=48343||48345<=p&&p<=48371||48373<=p&&p<=48399||48401<=p&&p<=48427||48429<=p&&p<=48455||48457<=p&&p<=48483||48485<=p&&p<=48511||48513<=p&&p<=48539||48541<=p&&p<=48567||48569<=p&&p<=48595||48597<=p&&p<=48623||48625<=p&&p<=48651||48653<=p&&p<=48679||48681<=p&&p<=48707||48709<=p&&p<=48735||48737<=p&&p<=48763||48765<=p&&p<=48791||48793<=p&&p<=48819||48821<=p&&p<=48847||48849<=p&&p<=48875||48877<=p&&p<=48903||48905<=p&&p<=48931||48933<=p&&p<=48959||48961<=p&&p<=48987||48989<=p&&p<=49015||49017<=p&&p<=49043||49045<=p&&p<=49071||49073<=p&&p<=49099||49101<=p&&p<=49127||49129<=p&&p<=49155||49157<=p&&p<=49183||49185<=p&&p<=49211||49213<=p&&p<=49239||49241<=p&&p<=49267||49269<=p&&p<=49295||49297<=p&&p<=49323||49325<=p&&p<=49351||49353<=p&&p<=49379||49381<=p&&p<=49407||49409<=p&&p<=49435||49437<=p&&p<=49463||49465<=p&&p<=49491||49493<=p&&p<=49519||49521<=p&&p<=49547||49549<=p&&p<=49575||49577<=p&&p<=49603||49605<=p&&p<=49631||49633<=p&&p<=49659||49661<=p&&p<=49687||49689<=p&&p<=49715||49717<=p&&p<=49743||49745<=p&&p<=49771||49773<=p&&p<=49799||49801<=p&&p<=49827||49829<=p&&p<=49855||49857<=p&&p<=49883||49885<=p&&p<=49911||49913<=p&&p<=49939||49941<=p&&p<=49967||49969<=p&&p<=49995||49997<=p&&p<=50023||50025<=p&&p<=50051||50053<=p&&p<=50079||50081<=p&&p<=50107||50109<=p&&p<=50135||50137<=p&&p<=50163||50165<=p&&p<=50191||50193<=p&&p<=50219||50221<=p&&p<=50247||50249<=p&&p<=50275||50277<=p&&p<=50303||50305<=p&&p<=50331||50333<=p&&p<=50359||50361<=p&&p<=50387||50389<=p&&p<=50415||50417<=p&&p<=50443||50445<=p&&p<=50471||50473<=p&&p<=50499||50501<=p&&p<=50527||50529<=p&&p<=50555||50557<=p&&p<=50583||50585<=p&&p<=50611||50613<=p&&p<=50639||50641<=p&&p<=50667||50669<=p&&p<=50695||50697<=p&&p<=50723||50725<=p&&p<=50751||50753<=p&&p<=50779||50781<=p&&p<=50807||50809<=p&&p<=50835||50837<=p&&p<=50863||50865<=p&&p<=50891||50893<=p&&p<=50919||50921<=p&&p<=50947||50949<=p&&p<=50975||50977<=p&&p<=51003||51005<=p&&p<=51031||51033<=p&&p<=51059||51061<=p&&p<=51087||51089<=p&&p<=51115||51117<=p&&p<=51143||51145<=p&&p<=51171||51173<=p&&p<=51199||51201<=p&&p<=51227||51229<=p&&p<=51255||51257<=p&&p<=51283||51285<=p&&p<=51311||51313<=p&&p<=51339||51341<=p&&p<=51367||51369<=p&&p<=51395||51397<=p&&p<=51423||51425<=p&&p<=51451||51453<=p&&p<=51479||51481<=p&&p<=51507||51509<=p&&p<=51535||51537<=p&&p<=51563||51565<=p&&p<=51591||51593<=p&&p<=51619||51621<=p&&p<=51647||51649<=p&&p<=51675||51677<=p&&p<=51703||51705<=p&&p<=51731||51733<=p&&p<=51759||51761<=p&&p<=51787||51789<=p&&p<=51815||51817<=p&&p<=51843||51845<=p&&p<=51871||51873<=p&&p<=51899||51901<=p&&p<=51927||51929<=p&&p<=51955||51957<=p&&p<=51983||51985<=p&&p<=52011||52013<=p&&p<=52039||52041<=p&&p<=52067||52069<=p&&p<=52095||52097<=p&&p<=52123||52125<=p&&p<=52151||52153<=p&&p<=52179||52181<=p&&p<=52207||52209<=p&&p<=52235||52237<=p&&p<=52263||52265<=p&&p<=52291||52293<=p&&p<=52319||52321<=p&&p<=52347||52349<=p&&p<=52375||52377<=p&&p<=52403||52405<=p&&p<=52431||52433<=p&&p<=52459||52461<=p&&p<=52487||52489<=p&&p<=52515||52517<=p&&p<=52543||52545<=p&&p<=52571||52573<=p&&p<=52599||52601<=p&&p<=52627||52629<=p&&p<=52655||52657<=p&&p<=52683||52685<=p&&p<=52711||52713<=p&&p<=52739||52741<=p&&p<=52767||52769<=p&&p<=52795||52797<=p&&p<=52823||52825<=p&&p<=52851||52853<=p&&p<=52879||52881<=p&&p<=52907||52909<=p&&p<=52935||52937<=p&&p<=52963||52965<=p&&p<=52991||52993<=p&&p<=53019||53021<=p&&p<=53047||53049<=p&&p<=53075||53077<=p&&p<=53103||53105<=p&&p<=53131||53133<=p&&p<=53159||53161<=p&&p<=53187||53189<=p&&p<=53215||53217<=p&&p<=53243||53245<=p&&p<=53271||53273<=p&&p<=53299||53301<=p&&p<=53327||53329<=p&&p<=53355||53357<=p&&p<=53383||53385<=p&&p<=53411||53413<=p&&p<=53439||53441<=p&&p<=53467||53469<=p&&p<=53495||53497<=p&&p<=53523||53525<=p&&p<=53551||53553<=p&&p<=53579||53581<=p&&p<=53607||53609<=p&&p<=53635||53637<=p&&p<=53663||53665<=p&&p<=53691||53693<=p&&p<=53719||53721<=p&&p<=53747||53749<=p&&p<=53775||53777<=p&&p<=53803||53805<=p&&p<=53831||53833<=p&&p<=53859||53861<=p&&p<=53887||53889<=p&&p<=53915||53917<=p&&p<=53943||53945<=p&&p<=53971||53973<=p&&p<=53999||54001<=p&&p<=54027||54029<=p&&p<=54055||54057<=p&&p<=54083||54085<=p&&p<=54111||54113<=p&&p<=54139||54141<=p&&p<=54167||54169<=p&&p<=54195||54197<=p&&p<=54223||54225<=p&&p<=54251||54253<=p&&p<=54279||54281<=p&&p<=54307||54309<=p&&p<=54335||54337<=p&&p<=54363||54365<=p&&p<=54391||54393<=p&&p<=54419||54421<=p&&p<=54447||54449<=p&&p<=54475||54477<=p&&p<=54503||54505<=p&&p<=54531||54533<=p&&p<=54559||54561<=p&&p<=54587||54589<=p&&p<=54615||54617<=p&&p<=54643||54645<=p&&p<=54671||54673<=p&&p<=54699||54701<=p&&p<=54727||54729<=p&&p<=54755||54757<=p&&p<=54783||54785<=p&&p<=54811||54813<=p&&p<=54839||54841<=p&&p<=54867||54869<=p&&p<=54895||54897<=p&&p<=54923||54925<=p&&p<=54951||54953<=p&&p<=54979||54981<=p&&p<=55007||55009<=p&&p<=55035||55037<=p&&p<=55063||55065<=p&&p<=55091||55093<=p&&p<=55119||55121<=p&&p<=55147||55149<=p&&p<=55175||55177<=p&&p<=55203?c:d}var g={splitGraphemes:function(t){if(/^[\x20-\xFF]*$/.test(t))return t;const e=[];let i,s=0;for(;(i=f(t,s))<t.length;)e.push(t.slice(s,i)),s=i;return s<t.length&&e.push(t.slice(s)),e},countGraphemes:function(t){let e,i=0,s=0;for(;(e=f(t,s))<t.length;)s=e,i++;return s<t.length&&i++,i},nextBreak:f};class b{constructor(t,e){this.type=t,this.value=e}}class y{constructor(t){this.s=g.splitGraphemes(t),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:null}peek(){return this.s[this.pos]}scan(t){let e;return(e=t.exec("string"==typeof this.s?this.s.slice(this.pos):this.s.slice(this.pos).join("")))?(this.pos+=e[0].length,e[0]):null}isWhiteSpace(){return/[ \f\n\r\t\v\xA0\u2028\u2029]/.test(this.s[this.pos])}makeToken(){if(this.end())return null;if(this.isWhiteSpace())return this.get(),new b("space");let t=null;if("\\"===this.peek()){if(this.get(),!this.end()){let e=this.scan(/^[a-zA-Z*]+/);"bgroup"===e?t=new b("{"):"egroup"===e?t=new b("}"):(e||(e=this.get()),t=new b("command",e))}}else if("{"===this.peek()||"}"===this.peek())t=new b(this.get());else if("#"===this.peek()){if(this.get(),!this.end()){let e=!1,i=this.peek();/[0-9?]/.test(i)&&(e=!0,this.pos+1<this.s.length)&&(e=/[^0-9A-Za-z]/.test(this.s[this.pos+1])),e?(t=new b("#"),i=this.get(),t.value=i>="0"&&i<="9"?parseInt(i):"?"):t=new b("literal","#")}}else"~"===this.peek()?(this.get(),t=new b("command","space")):"$"===this.peek()?(this.get(),"$"===this.peek()?(this.get(),t=new b("$$")):t=new b("$")):t=new b("literal",this.get());return t}}var v={tokenize:function(t){const e=[],i=t.toString().split(/\r?\n/);let s="",n="";for(const o of i){s+=n,n=" ";const t=o.match(/((?:\\%)|[^%])*/);t&&(s+=t[0])}const r=new y(s);for(;!r.end();){const t=r.makeToken();t&&e.push(t)}return e}},C={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],96:[0,.69444,0,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],175:[0,.59611,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],180:[0,.69444,0,0],215:[.13333,.63333,0,0],247:[.13333,.63333,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.69444,0,0],772:[0,.59611,0,0],774:[0,.69444,0,0],775:[0,.69444,0,0],776:[0,.69444,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],824:[.19444,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],305:[0,.43056,0,.02778],567:[.19444,.43056,0,.08334],768:[0,.69444,0,0],769:[0,.69444,.09694,0],770:[0,.69444,.06646,0],771:[0,.66786,.11585,0],772:[0,.56167,.10333,0],774:[0,.69444,.10806,0],775:[0,.66786,.11752,0],776:[0,.66786,.10474,0],778:[0,.69444,0,0],779:[0,.69444,.1225,0],780:[0,.62847,.08295,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],96:[0,.69444,0,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],175:[0,.56778,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],180:[0,.69444,0,0],215:[.08333,.58333,0,0],247:[.08333,.58333,0,0],305:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.66786,0,0],772:[0,.56778,0,0],774:[0,.69444,0,0],775:[0,.66786,0,0],776:[0,.66786,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.62847,0,0],824:[.19444,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8800:[.215,.716,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0]},"Math-BoldItalic":{47:[.19444,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{47:[.19444,.69444,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"Math-Regular":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.67659,0,0],772:[0,.60889,0,0],774:[0,.69444,0,0],775:[0,.67937,0,0],776:[0,.67937,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],768:[0,.61111,0,0],769:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],772:[0,.56555,0,0],774:[0,.61111,0,0],776:[0,.61111,0,0],778:[0,.61111,0,0],780:[0,.56597,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],2018:[0,.61111,0,0],2019:[0,.61111,0,0],8242:[0,.61111,0,0]}};const x=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,_={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},P={defaultRuleThickness:.04,bigOpSpacing1:.111,bigOpSpacing2:.166,bigOpSpacing3:.2,bigOpSpacing4:.6,bigOpSpacing5:.1,ptPerEm:10,pxPerEm:40/3,doubleRuleSep:.2,arraycolsep:.5,baselineskip:1.2,arrayrulewidth:.04,fboxsep:.3,fboxrule:.04},S={"\xa0":" ","\u200b":" ","\xc5":"A","\xc7":"C","\xd0":"D","\xde":"o","\xe5":"a","\xe7":"c","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function w(t,e,i){if("string"==typeof t){const i=t.match(/([-+]?[0-9.]*)\s*([a-zA-Z]+)/);i?(t=parseFloat(i[1]),e=i[2].toLowerCase()):t=parseFloat(t)}const s={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:.75,em:P.ptPerEm,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[e]||1;if(isFinite(i)){const e=Math.pow(10,i);return Math.round(t/P.ptPerEm*s*e)/e}return t/P.ptPerEm*s}var E={toEm:w,toPx:function(t,e){return w(t,e)*(4/3)*P.ptPerEm},METRICS:P,SIGMAS:_,getCharacterMetrics:function(t,e){const i={cal:"Caligraphic-Regular",ams:"AMS-Regular",frak:"Fraktur-Regular",bb:"AMS-Regular",scr:"Script-Regular",cmr:"Main-Regular",cmtt:"Typewriter-Regular",cmss:"SansSerif-Regular"}[e]||e;let s=t.charCodeAt(0);t[0]in S?s=S[t[0]].charCodeAt(0):x.test(t[0])&&(s=77);const n=C[i][s];return n?n?{depth:n[0],height:n[1],italic:n[2],skew:n[3]}:null:{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}};const k=[{},{},{}];let A;for(const Us in _)if(_.hasOwnProperty(Us))for(A=0;A<3;A++)k[A][Us]=_[Us][A];for(A=0;A<3;A++)k[A].emPerEx=_.xHeight[A]/_.quad[A];class T{constructor(t,e,i,s){this.id=t,this.size=e,this.cramped=s,this.sizeMultiplier=i,this.metrics=k[e>0?e-1:0]}sup(){return M[L[this.id]]}sub(){return M[D[this.id]]}fracNum(){return M[j[this.id]]}fracDen(){return M[I[this.id]]}cramp(){return M[R[this.id]]}cls(){return O[this.size]}adjustTo(t){let e=N[this.size][t.size];return e.length>0&&(e=" "+e),e}isTight(){return this.size>=2}}const M=[new T(0,0,1,!1),new T(1,0,1,!0),new T(2,1,1,!1),new T(3,1,1,!0),new T(4,2,.7,!1),new T(5,2,.7,!0),new T(6,3,.5,!1),new T(7,3,.5,!0)],O=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],N=[["","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-textstyle displaystyle textstyle","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-scriptstyle textstyle displaystyle","reset-scriptstyle textstyle","","reset-scriptstyle scriptscriptstyle"],["reset-scriptscriptstyle textstyle displaystyle","reset-scriptscriptstyle textstyle","reset-scriptscriptstyle scriptstyle",""]],L=[4,5,4,5,6,7,6,7],D=[5,5,5,5,7,7,7,7],j=[2,3,4,5,6,7,6,7],I=[3,3,5,5,7,7,7,7],R=[1,1,3,3,5,5,7,7];var B={DISPLAY:M[0],TEXT:M[2],SCRIPT:M[4],SCRIPTSCRIPT:M[6],toMathstyle:function(t){return t?"object"==typeof t?t:{displaystyle:M[0],textstyle:M[2],scriptstyle:M[4],scriptscriptstyle:M[6]}[t]:t}};class F{constructor(t){this.macros=t.macros||{},this.generateID=!!t.generateID&&t.generateID,this.mathstyle=B.toMathstyle(t.mathstyle||"displaystyle"),this.size=t.size||"size5",this.parentMathstyle=t.parentMathstyle||this.mathstyle,this.parentSize=t.parentSize||this.size,this.opacity=t.opacity}clone(t){const e=new F(this);return e.parentMathstyle=this.mathstyle,e.parentSize=this.size,e.macros=this.macros,t&&("auto"!==t.mathstyle&&t.mathstyle||delete t.mathstyle,Object.assign(e,t),"string"==typeof t.mathstyle&&(e.mathstyle=B.toMathstyle(t.mathstyle))),e}setMathstyle(t){t&&"auto"!==t&&(this.mathstyle=B.toMathstyle(t))}cramp(){return this.clone({mathstyle:this.mathstyle.cramp()})}sup(){return this.clone({mathstyle:this.mathstyle.sup()})}sub(){return this.clone({mathstyle:this.mathstyle.sup()})}}var Y={Context:F};function z(t){let e="";if("number"==typeof t)e+=Math.floor(100*t)/100;else if("string"==typeof t)e+=t;else if(Array.isArray(t))for(const i of t)e+=z(i);else t&&(e+=t.toString());return e}class X{constructor(t,e){this.classes=e||"",Array.isArray(t)?this.children=[].concat.apply([],t):"string"==typeof t?this.body=t:t&&"object"==typeof t&&(this.children=[t]),this.style=null,this.updateDimensions()}updateDimensions(){let t=0,e=0,i=1;this.children&&this.children.forEach(s=>{s.height>t&&(t=s.height),s.depth>e&&(e=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}),this.height=t,this.depth=e,this.maxFontSize=i}selected(t){t&&!/ML__selected/.test(this.classes)&&(this.classes.length>0&&(this.classes+=" "),this.classes+="ML__selected"),!t&&/ML__selected/.test(this.classes)&&(this.classes=this.classes.replace("ML__selected","")),this.children&&this.children.forEach(e=>e.selected(t))}applyStyle(t){if(!t)return;if(t.color&&this.setStyle("color","none"!==t.color?t.color:""),t.backgroundColor&&this.setStyle("background-color","none"!==t.backgroundColor?t.backgroundColor:""),t.cssClass&&(this.classes+=" "+t.cssClass),!this.body)return;let e=t.fontFamily;"math"===e&&"n"===t.fontShape&&(e="cmr");let i="Main-Regular";if(e&&(i=function(t,e){if("string"!=typeof t||t.length>1||"\u200b"===t)return Q[e];if("bb"===e||"scr"===e){if(!/^[A-Z ]$/.test(t))return null}else if("cal"===e){if(!/^[0-9A-Z ]$/.test(t))return null}else if("frak"===e){if(!/^[0-9A-Za-z ]$|^[!"#$%&'()*+,\-.\/:;=?[]^\u2019\u2018]$/.test(t))return null}else if(("cmtt"===e||"cmss"===e)&&!/^[0-9A-Za-z ]$|^[!"&'()*+,\-.\/:;=?@[]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9\u2019\u2018]$/.test(t))return null;return Q[e]}(this.body,e)),t.fontShape&&(this.classes+=" "+({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[t.fontShape]||"")),t.fontSeries){const e=t.fontSeries.match(/(.?[lbm])?(.?[cx])?/);e&&(this.classes+=" "+({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[e[1]||""]||""),this.classes+=" "+({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[e[2]||""]||""))}if(tt[e]?this.classes+=" "+tt[e]:e&&this.setStyle("font-family",e),this.body&&this.body.length>0&&i){this.height=0,this.depth=0,this.maxFontSize={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49}[t.fontSize]||1,this.skew=0,this.italic=0;for(let t=0;t<this.body.length;t++){const e=E.getCharacterMetrics(this.body.charAt(t),i);e&&(this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this.skew=e.skew,this.italic=e.italic)}}}setStyle(t,...e){const i=z(e);i.length>0&&(this.style||(this.style={}),this.style[t]=i)}setTop(t){t&&0!==t&&(this.style||(this.style={}),this.style.top=z(t)+"em",this.height-=t,this.depth+=t)}setLeft(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-left"]=z(t)+"em")}setRight(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-right"]=z(t)+"em")}setWidth(t){t&&0!==t&&(this.style||(this.style={}),this.style.width=z(t)+"em")}addMarginRight(t){if(t&&0!==t){if(!this.style&&!/qquad|quad|enspace|thickspace|mediumspace|thinspace|negativethinspace/.test(this.classes)){const e={2:"qquad",1:"quad",".5":"enspace",.277778:"thickspace",.222222:"mediumspace",.166667:"thinspace","-0.166667":"negativethinspace"}[t.toString()];if(e)return void(this.classes+=" rspace "+e)}this.style||(this.style={});const e=parseFloat(this.style["margin-right"]||"0");this.style["margin-right"]=z(e+t)+"em"}}toMarkup(t,e){t=t||0,e=e||1;let i="",s=this.body||"";if(this.children){let t="none";for(const i of this.children){let n=0;if(t){let s=i.type;s&&("textord"===s&&(s="mord"),"first"===s&&(s="none"),n=i.isTight?q[t+"+"+s]||0:U[t+"+"+s]||0,n=Math.floor(e*n))}s+=i.toMarkup(n,e),t=J(i)}}if("\u200b"!==s&&s||this.classes&&"ML__selected"!==this.classes){if(i="<span",this.cssId&&(i+=' id="'+this.cssId+'" '),this.svgOverlay&&(this.setStyle("position","relative"),this.setStyle("height",this.height+this.depth,"em"),this.setStyle("vertical-align",-this.depth,"em")),this.attributes)for(const t in this.attributes)this.attributes.hasOwnProperty(t)&&(i+=" "+t+'="'+this.attributes[t]+'"');const e=this.classes.split(" ");this.type&&(/command|placeholder|error/.test(this.type)&&e.push({command:"ML__command",placeholder:"ML__placeholder",error:"ML__error"}[this.type]),this.caret&&"command"===this.type&&e.push("ML__command-caret"));let n="";if((n=e.length>1?e.filter(function(t,e,i){return t.length>0&&i.indexOf(t)===e}).join(" "):e[0]).length>0&&(i+=' class="'+n+'"'),t&&(this.style&&this.style["margin-left"]?this.style["margin-left"]=z(parseFloat(this.style["margin-left"])+t/18)+"em":t<0&&H[-t]?s=H[-t]+s:G[t]?s=G[t]+s:(this.style||(this.style={}),this.style["margin-left"]=z(t/18)+"em")),this.style){let t="";const e=/ML__selected/.test(this.classes);for(const i in this.style)this.style.hasOwnProperty(i)&&("background-color"===i&&e||(t+=i+":"+this.style[i]+";"));t.length>0&&(i+=' style="'+t+'"')}i+=">",this.svgOverlay?(i+='<span style="',i+="display: inline-block;",i+="height:"+(this.height+this.depth)+"em;",i+="vertical-align:"+this.depth+"em;",i+='">',i+=s,i+="</span>",i+="<svg ",i+='style="position:absolute;',i+="overflow:overlay;",i+="height:"+(this.height+this.depth)+"em;",i+="transform:translateY(-"+Math.round(E.toPx(this.depth,"em")+E.toPx(this.style.padding))+"px);",this.style&&this.style.padding?(i+="top:"+this.style.padding+";",i+="left:"+this.style.padding+";",i+="width:calc(100% - 2 * "+this.style.padding+" );"):(i+="top:0;",i+="left:0;",i+="width:100%;"),i+="z-index:2;",i+='"',this.svgStyle&&(i+=' style="'+this.svgStyle+'"'),i+=">",i+=this.svgOverlay,i+="</svg>"):i+=s,i+="</span>"}else i="";return this.caret&&"command"!==this.type&&(i+="text"===this.caret?'<span class="ML__text-caret"></span>':'<span class="ML__caret"></span>'),i}tryCoalesceWith(t){if(this.tag!==t.tag)return!1;if(this.type!==t.type)return!1;if("error"===this.type||"placeholder"===this.type||"command"===this.type)return!1;if(this.children&&this.children.length>0||t.children&&t.children.length>0)return!1;if((this.style?this.style.length:0)!==(t.style?t.style.length:0))return!1;const e=this.classes.trim().replace(/\s+/g," ").split(" "),i=t.classes.trim().replace(/\s+/g," ").split(" ");if(e.length!==i.length)return!1;e.sort(),i.sort();for(let s=0;s<e.length;s++){if("vertical-separator"===e[s])return!1;if(e[s]!==i[s])return!1}if(this.style&&t.style)for(const s in this.style)if(this.style.hasOwnProperty(s)&&t.style.hasOwnProperty(s)&&this.style[s]!==t.style[s])return!1;return this.body+=t.body,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this.maxFontSize=Math.max(this.maxFontSize,t.maxFontSize),this.italic=t.italic,!0}}const U={"mord+mop":3,"mord+mbin":4,"mord+mrel":5,"mord+minner":3,"mop+mord":3,"mop+mop":3,"mop+mbin":5,"mop+minner":3,"mbin+mord":4,"mbin+mop":4,"mbin+mopen":4,"mbin+minner":4,"mrel+mord":5,"mrel+mop":5,"mrel+mopen":5,"mrel+minner":5,"mclose+mop":3,"mclose+mbin":4,"mclose+mrel":5,"mclose+minner":3,"mpunct+mord":3,"mpunct+mop":3,"mpunct+mbin":4,"mpunct+mrel":5,"mpunct+mopen":3,"mpunct+mpunct":3,"mpunct+minner":3},G=["\u200b","\u200a","\u200a\u200a","\u2009","\u205f","\u205f\u200a","\u2004","","","\u2002"],H=["","\u200a\u2063","","\u2009\u2063","\u205f\u2063","\u2005\u2063"],q={"mord+mop":3,"mop+mord":3,"mop+mop":3,"mclose+mop":3,"minner+mop":3};function J(t){const e=t.type;return"first"===e?"none":"textord"===e?"mord":e}function V(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.height),0):t.height:0}function $(t){return t?Array.isArray(t)?t.reduce((t,e)=>Math.max(t,e.depth),0):t.depth:0}function W(t,e){if(Array.isArray(t)){const i=[];for(const e of t)e&&i.push(e);if(1===i.length)return W(i[0],e)}return new X(t,e)}function K(t,e,i){const s=W(e,i);return s.type=t,s}function Z(t,e){if(!e||0===e.length){if(t instanceof X)return t;if(Array.isArray(t)&&1===t.length)return t[0]}const i=new X(t,e);let s=1;return s=t instanceof X?t.maxFontSize:t.reduce((t,e)=>Math.max(t,e.maxFontSize),0),i.height*=s,i.depth*=s,i}const Q={ams:"AMS-Regular",bb:"AMS-Regular",cal:"Caligraphic-Regular",frak:"Fraktur-Regular",scr:"Script-Regular",cmr:"Main-Regular",cmss:"SansSerif-Regular",cmtt:"Typewriter-Regular",math:"Math-Regular",mainit:"Main-Italic"},tt={ams:"ML__ams",bb:"ML__bb",cal:"ML__cal",frak:"ML__frak",scr:"ML__script",cmr:"ML__mathrm",cmss:"ML__sans",cmtt:"ML__tt",math:"ML__mathit",mainit:"ML__mainit"};var et={coalesce:function t(e){if(!e||0===e.length)return[];e[0].children=t(e[0].children);const i=[e[0]];for(let s=1;s<e.length;s++)i[i.length-1].tryCoalesceWith(e[s])||(e[s].children=t(e[s].children),i.push(e[s]));return i},makeSpan:W,makeOp:function(t,e){return K("mop",t,e)},makeOrd:function(t,e){return K("mord",t,e)},makeRel:function(t,e){return K("mrel",t,e)},makeClose:function(t,e){return K("mclose",t,e)},makeOpen:function(t,e){return K("mopen",t,e)},makeInner:function(t,e){return K("minner",t,e)},makePunct:function(t,e){return K("mpunct",t,e)},makeSpanOfType:K,makeSymbol:function(t,e,i){const s=new X(e,i),n=E.getCharacterMetrics(e,t);return s.height=n.height,s.depth=n.depth,s.skew=n.skew,s.italic=n.italic,s.setRight(s.italic),s},makeVlist:function(t,e,i,s){let n=0,r=0;i=i||"shift",s=s||0;for(let c=0;c<e.length;c++)Array.isArray(e[c])&&(e[c]=1===e[c].length?e[c][0]:W(e[c]));if("shift"===i)n=-e[0].depth-s;else if("bottom"===i)n=-s;else if("top"===i){let t=s;for(const i of e)t-=i instanceof X?i.height+i.depth:i;n=t}else if("individualShift"===i){const t=e;e=[t[0]],r=n=-t[1]-t[0].depth;for(let i=2;i<t.length;i+=2){const s=-t[i+1]-r-t[i].depth;r+=s,e.push(s-(t[i-2].height+t[i-2].depth)),e.push(t[i])}}let o=1;for(const c of e)c instanceof X&&(o=Math.max(o,c.maxFontSize));const a=function(t,e){const i=o?o/t.mathstyle.sizeMultiplier:0,s=new X("\u200b");return 1!==i&&(s.setStyle("font-size",i,i>0?"em":""),s.attributes={"aria-hidden":!0}),"size5"!==t.size?new X(s,"fontsize-ensurer reset-"+t.size+" size5"):0!==i?s:null}(t),l=[];r=n;for(const c of e)if("number"==typeof c)r+=c;else{const t=W([a,c]);t.setTop(-c.depth-r),l.push(t),r+=c.height+c.depth}const h=W(l,"vlist");return h.depth=Math.max(n,$(h)||0),h.height=Math.max(-r,V(h)||0),h},makeHlist:Z,makeStyleWrap:function(t,e,i,s,n){n=n||"";const r=Z(e,(n+=" style-wrap ")+i.adjustTo(s));r.type=t;const o=s.sizeMultiplier/i.sizeMultiplier;return r.height*=o,r.depth*=o,r.maxFontSize=s.sizeMultiplier,r},makeSVG:function(t,e,i){return t.svgOverlay=e,t.svgStyle=i,t},height:V,depth:$,skew:function(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const i of t)e+=i.skew||0;return e}return t.skew},italic:function(t){return t?Array.isArray(t)?t[t.length-1].italic:t.italic:0}};let it="";const st={},nt={},rt={},ot="CRYPTIC",at="COMMON",lt="SUPERCOMMON",ht={CRYPTIC:0,ARCANE:200,VERY_RARE:600,RARE:1200,UNCOMMON:2e3,COMMON:3e3,SUPERCOMMON:4e3};function ct(t,...e){const i="string"==typeof t?ht[t]:t;for(const s of e)st[s]&&(st[s].frequency=i),nt[s]&&(nt[s]=Object.assign({},nt[s]),nt[s].frequency=i)}function dt(t,e,i,s,n){e&&/^(ams|cmr|bb|cal|frak|scr)$/.test(e),"string"==typeof n&&(n=ht[n]),st[t]={type:i===Ct?xt:i,baseFontFamily:e,value:s,category:it,frequency:n}}function ut(t,e){for(let i=t;i<=e;i++){const t=String.fromCodePoint(i);dt(t,"","mord",t)}}const pt={8739:"|",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",8243:"\\doubleprime",8736:"\\angle",8450:"\\C",8469:"\\N",8473:"\\P",8474:"\\Q",8477:"\\R",8484:"\\Z"};function ft(t,e){const i=String.fromCodePoint(e);if("math"===t&&pt[i])return pt[i];if(e>32&&e<127)return i;let s="";if("math"===t){for(const n in st)if(st.hasOwnProperty(n)&&st[n].value===i){s=n;break}}else for(const n in Dt)if(Dt.hasOwnProperty(n)&&Dt[n]===i){s=n;break}return s||i}const mt={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},gt=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function bt(t){let e=t;if("string"==typeof t&&(e=t.codePointAt(0)),(e<119808||e>120831)&&(e<8448||e>8527))return{char:t};for(const i in mt)if(mt.hasOwnProperty(i)&&mt[i]===e){e=i;break}for(let i=0;i<gt.length;i++)if(e>=gt[i].start&&e<gt[i].start+gt[i].len)return{char:String.fromCodePoint(e-gt[i].start+gt[i].offset),variant:gt[i].variant,style:gt[i].style};return{char:t}}function yt(t,e){if("text"===t)return String.fromCodePoint(e);let i;if(pt[e])return pt[e];const s=bt(e);return s.style||s.variant?(i=s.char,s.variant&&(i="\\"+s.variant+"{"+i+"}"),"bold"===s.style?i="\\mathbf{"+i+"}":"italic"===s.style?i="\\mathit{"+i+"}":"bolditalic"===s.style&&(i="\\mathbf{\\mathit{"+i+"}}"),"\\mathord{"+i+"}"):ft(t,e)}const vt="ams",Ct="mord",xt="mord",_t="mbin",Pt="mrel",St="mopen",wt="mclose",Et="spacing";function kt(t,e){let i=t.match(/=(.+)/),s="{}",n="auto",r=null;return i&&(s=i[1]),(i=t.match(/:([^=]+)/))&&(n=i[1].trim()),(i=t.match(/^([^:=]+)/))&&(r=i[1].trim()),{optional:e,type:n,defaultValue:s,placeholder:r}}function At(t){if(!t||0===t.length)return[];let e=[],i=t.split("]");if("["===i[0].charAt(0)){e.push(kt(i[0].slice(1),!0));for(let t=1;t<=i.length;t++)e=e.concat(At(i[t]))}else if("{"===(i=t.split("}"))[0].charAt(0)){e.push(kt(i[0].slice(1),!1));for(let t=1;t<=i.length;t++)e=e.concat(At(i[t]))}return e}function Tt(t){return t.map(t=>t.body).join("")}function Mt(t,e,i,s){"string"==typeof t&&(t=[t]),i||(i={});const n=At(e),r={category:it,params:n,parser:s,mathstyle:"displaystyle",tabular:i.tabular||!0,colFormat:i.colFormat||[]};for(const o of t)rt[o]=r}function Ot(t,e,i,s){"string"==typeof t&&(t=[t]),i||(i={});const n={category:it,baseFontFamily:i.fontFamily,params:At(e),allowedInText:!!i.allowedInText,infix:!!i.infix,parse:s};for(const r of t)nt[r]=n}it="Environments",Mt("math","",{frequency:0},function(){return{mathstyle:"textstyle"}}),Mt("displaymath","",{frequency:8},function(){return{mathstyle:"displaystyle"}}),Mt("array","{columns:colspec}",{frequency:at},function(t,e){return{colFormat:e[0],mathstyle:"textstyle"}}),Mt("eqnarray","",{},function(){return{}}),Mt("equation","",{},function(){return{colFormat:[{align:"c"}]}}),Mt("subequations","",{},function(){return{colFormat:[{align:"c"}]}}),Mt("multline","",{},function(){return{firstRowFormat:[{align:"l"}],colFormat:[{align:"c"}],lastRowFormat:[{align:"r"}]}}),Mt(["align","aligned"],"",{},function(t,e,i){let s=0;for(const o of i)s=Math.max(s,o.length);const n=[{gap:0},{align:"r"},{gap:0},{align:"l"}];let r=2;for(;r<s;)n.push({gap:1}),n.push({align:"r"}),n.push({gap:0}),n.push({align:"l"}),r+=2;return n.push({gap:0}),{colFormat:n,jot:.3}}),Mt("split","",{},function(){return{}}),Mt(["gather","gathered"],"",{},function(){return{colFormat:[{gap:.25},{align:"c"},{gap:0}],jot:.3}}),Mt(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","smallmatrix*"],"[columns:colspec]",{},function(t,e){const i={mathstyle:"textstyle"};switch(t){case"pmatrix":case"pmatrix*":i.lFence="(",i.rFence=")";break;case"bmatrix":case"bmatrix*":i.lFence="[",i.rFence="]";break;case"Bmatrix":case"Bmatrix*":i.lFence="\\lbrace",i.rFence="\\rbrace";break;case"vmatrix":case"vmatrix*":i.lFence="\\vert",i.rFence="\\vert";break;case"Vmatrix":case"Vmatrix*":i.lFence="\\Vert",i.rFence="\\Vert";break;case"smallmatrix":case"smallmatrix*":i.mathstyle="scriptstyle";break;case"matrix":case"matrix*":i.lFence=".",i.rFence="."}return i.colFormat=e[0]||[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],i}),Mt("cases","",{},function(){return{arraystretch:1.2,lFence:"\\lbrace",rFence:".",colFormat:[{align:"l"},{gap:1},{align:"l"}]}}),Mt("theorem","",{},function(){return{}}),Mt("center","",{},function(){return{colFormat:[{align:"c"}]}}),it="",function(t){for(let e=0;e<"0123456789/@.".length;e++){const t="0123456789/@.".charAt(e);dt(t,"",xt,t)}}(),ut(65,90),ut(97,122),it="Trigonometry",Ot(["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(lt,"\\cos","\\sin","\\tan"),ct("UNCOMMON","\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc"),ct("UNCOMMON","\\arsinh","\\arccosh","\\arctanh","\\arcsech","\\arccsch"),ct("UNCOMMON","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"),it="Functions",Ot(["\\deg","\\dim","\\exp","\\hom","\\ker","\\lb","\\lg","\\ln","\\log"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(lt,"\\ln","\\log","\\exp"),ct(292,"\\hom"),ct(at,"\\dim"),ct(at,"\\ker","\\deg"),Ot(["\\lim","\\mod"],"",null,function(t){return{type:"mop",limits:"limits",symbol:!1,body:t.slice(1),baseFontFamily:"cmr"}}),Ot(["\\det","\\max","\\min"],"",null,function(t){return{type:"mop",limits:"limits",symbol:!1,isFunction:!0,body:t.slice(1),baseFontFamily:"cmr"}}),ct(lt,"\\lim"),ct(at,"\\det"),ct(at,"\\mod"),ct(at,"\\min"),ct(at,"\\max"),it="Decoration",Ot("\\rule","[raise:dimen]{width:dimen}{thickness:dimen}",null,function(t,e){return{type:"rule",shift:e[0],width:e[1],height:e[2]}}),Ot("\\color","{:color}",{allowedInText:!0},(t,e)=>({color:e[0]})),Ot("\\textcolor","{:color}{content:auto*}",{allowedInText:!0},(t,e)=>({color:e[0]})),ct(3,"\\textcolor"),Ot("\\overline","{:auto}",null,function(t,e){return{type:"line",position:"overline",skipBoundary:!0,body:e[0]}}),ct(at,"\\overline"),Ot("\\underline","{:auto}",null,function(t,e){return{type:"line",position:"underline",skipBoundary:!0,body:e[0]}}),ct(at,"\\underline"),Ot("\\overset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1]}}),ct(at,"\\overset"),Ot("\\underset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",underscript:e[0],skipBoundary:!0,body:e[1]}}),ct(at,"\\underset"),Ot(["\\stackrel","\\stackbin"],"{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1],mathtype:"\\stackrel"===t?"mrel":"mbin"}}),ct(at,"\\stackrel"),ct(0,"\\stackbin"),Ot("\\rlap","{:auto}",null,function(t,e){return{type:"overlap",align:"right",skipBoundary:!0,body:e[0]}}),ct(270,"\\rlap"),Ot("\\llap","{:auto}",null,function(t,e){return{type:"overlap",align:"left",skipBoundary:!0,body:e[0]}}),ct(18,"\\llap"),Ot("\\mathrlap","{:auto}",null,function(t,e){return{type:"overlap",mode:"math",align:"right",skipBoundary:!0,body:e[0]}}),ct(ot,"\\mathrlap"),Ot("\\mathllap","{:auto}",null,function(t,e){return{type:"overlap",mode:"math",align:"left",skipBoundary:!0,body:e[0]}}),ct(ot,"\\mathllap"),Ot("\\boxed","{content:math}",null,function(t,e){return{type:"box",framecolor:"black",skipBoundary:!0,body:e[0]}}),ct(1236,"\\boxed"),Ot("\\colorbox","{background-color:color}{content:auto}",{allowedInText:!0},function(t,e){return{type:"box",backgroundcolor:e[0],skipBoundary:!0,body:e[1]}}),ct(ot,"\\colorbox"),Ot("\\fcolorbox","{frame-color:color}{background-color:color}{content:auto}",{allowedInText:!0},function(t,e){return{type:"box",framecolor:e[0],backgroundcolor:e[1],skipBoundary:!0,body:e[2]}}),ct(ot,"\\fcolorbox"),Ot("\\bbox","[:bbox]{body:auto}",{allowedInText:!0},function(t,e){return e[0]?{type:"box",padding:e[0].padding,border:e[0].border,backgroundcolor:e[0].backgroundcolor,skipBoundary:!0,body:e[1]}:{type:"box",skipBoundary:!0,body:e[1]}}),ct(ot,"\\bbox"),Ot("\\enclose","{notation:string}[style:string]{body:auto}",null,function(t,e){let i=e[0]||[];const s={type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",captureSelection:!0,body:e[2]};if(e[1]){const t=e[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=e.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(t)s.strokeWidth=E.toPx(t[1],"px"),isFinite(s.strokeWidth)||(s.strokeWidth=1),s.strokeStyle=t[2],s.strokeColor=t[3];else{const t=e.match(/\s*([a-z]*)\s*=\s*"(.*)"/);t&&("mathbackground"===t[1]?s.backgroundcolor=t[2]:"mathcolor"===t[1]?s.strokeColor=t[2]:"padding"===t[1]?s.padding=E.toPx(t[2],"px"):"shadow"===t[1]&&(s.shadow=t[2]))}}"dashed"===s.strokeStyle?s.svgStrokeStyle="5,5":"dotted"===s.strokeStyle&&(s.svgStrokeStyle="1,5")}s.borderStyle=s.strokeWidth+"px "+s.strokeStyle+" "+s.strokeColor,i=i.toString().split(/[, ]/).filter(t=>t.length>0).map(t=>t.toLowerCase()),s.notation={};for(const n of i)s.notation[n]=!0;return s.notation.updiagonalarrow&&(s.notation.updiagonalstrike=!1),s.notation.box&&(s.notation.left=!1,s.notation.right=!1,s.notation.bottom=!1,s.notation.top=!1),s}),ct(ot,"\\enclose"),Ot("\\cancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0},body:e[0]}}),Ot("\\bcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{downdiagonalstrike:!0},body:e[0]}}),Ot("\\xcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0,downdiagonalstrike:!0},body:e[0]}}),ct(ot,"\\cancel","\\bcancel","\\xcancel"),it="Styling",Ot(["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],"",{allowedInText:!0},function(t,e){return{fontSize:{tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[t.slice(1)]}}),Ot("\\fontseries","{:text}",{allowedInText:!0},(t,e)=>({fontSeries:Tt(e[0])})),Ot("\\bf","",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ot("\\bm","{:math*}",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ot("\\bold","",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"b"})),Ot(["\\mathbf","\\boldsymbol"],"{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"b",fontShape:"n"})),Ot("\\bfseries","",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ot("\\textbf","{:text*}",{allowedInText:!0},(t,e)=>({fontSeries:"b"})),Ot("\\mathmd","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"m",fontShape:"n"})),Ot("\\mdseries","",{allowedInText:!0},(t,e)=>({fontSeries:"m"})),Ot("\\textmd","{:math*}",{allowedInText:!0},(t,e)=>({fontSeries:"m"})),Ot("\\fontshape","{:text}",{allowedInText:!0},(t,e)=>({fontShape:Tt(e[0])})),Ot("\\it","",{allowedInText:!0},(t,e)=>({fontShape:"it"})),Ot("\\mathit","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontSeries:"m",fontShape:"it"})),Ot("\\upshape","",{allowedInText:!0},(t,e)=>({fontShape:"n"})),Ot("\\textup","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"n"})),Ot("\\textit","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"it"})),Ot("\\slshape","",{allowedInText:!0},(t,e)=>({fontShape:"sl"})),Ot("\\textsl","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"sl"})),Ot("\\scshape","",{allowedInText:!0},(t,e)=>({mode:"text",fontShape:"sc"})),Ot("\\textsc","{:text*}",{allowedInText:!0},(t,e)=>({fontShape:"sc"})),Ot("\\fontfamily","{:text}",{allowedInText:!0},(t,e)=>({fontFamily:Tt(e[0])})),Ot("\\mathrm","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",fontFamily:"cmr",fontSeries:"m",fontShape:"n"})),Ot("\\rmfamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmr"})),Ot("\\textrm","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmr"})),Ot("\\mathsf","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cmss",fontSeries:"m",fontShape:"n"})),Ot("\\sffamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmss"})),Ot("\\textsf","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmss"})),Ot("\\mathtt","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cmtt",fontSeries:"m",fontShape:"n"})),Ot("\\ttfamily","",{allowedInText:!0},(t,e)=>({fontFamily:"cmtt"})),Ot("\\texttt","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmtt"})),Ot(["\\Bbb","\\mathbb"],"{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"bb"})),Ot(["\\frak","\\mathfrak"],"{:math*}",{allowedInText:!0},(t,e)=>({baseFontFamily:"frak"})),Ot("\\mathcal","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"cal",fontSeries:"m",fontShape:"n"})),Ot("\\mathscr","{:math*}",{allowedInText:!0},(t,e)=>({mode:"math",baseFontFamily:"scr",fontSeries:"m",fontShape:"n"})),ct(lt,"\\mathbb"),ct(1081,"\\Bbb"),ct(0,"\\mathcal"),ct(at,"\\mathfrak"),ct(271,"\\frak"),ct(at,"\\mathscr"),ct("UNCOMMON","\\mathsf"),ct(at,"\\mathtt"),ct(at,"\\boldsymbol"),Ot("\\textnormal","{:text*}",{allowedInText:!0},(t,e)=>({fontFamily:"cmr",fontShape:"n",fontSeries:"n"})),Ot("\\mbox","{:text*}",null,(t,e)=>({fontFamily:"cmr"})),Ot("\\text","{:text*}",{allowedInText:!0},(t,e)=>({})),Ot("\\class","{name:text}{content:auto*}",{allowedInText:!0},(t,e)=>({cssClass:Tt(e[0])})),Ot("\\cssId","{id:text}{content:auto}",{allowedInText:!0},(t,e)=>({cssId:Tt(e[0]),body:e[1],type:"group"})),Ot("\\em","",{allowedInText:!0},(t,e)=>({cssClass:"ML__emph",type:"group"})),Ot("\\emph","{:auto}",{allowedInText:!0},(t,e)=>({cssClass:"ML__emph",body:e[0],type:"group",skipBoundary:!0})),ct(at,"\\textrm"),ct(at,"\\textit"),ct(at,"\\textsf"),ct(at,"\\texttt"),ct(433,"\\textnormal"),ct(at,"\\textbf"),ct(421,"\\textup"),ct(819,"\\emph"),ct(49,"\\em"),it="Operators",Ot("\\sqrt","[index:auto]{radicand:auto}",null,function(t,e){return{type:"surd",body:e[1],index:e[0]}}),ct(lt,"\\sqrt"),it="Fractions",Ot(["\\frac","\\dfrac","\\tfrac","\\cfrac","\\binom","\\dbinom","\\tbinom"],"{numerator}{denominator}",null,function(t,e){const i={type:"genfrac",numer:e[0],denom:e[1],mathstyle:"auto"};switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":case"\\cfrac":i.hasBarLine=!0;break;case"\\\\atopfrac":i.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i.hasBarLine=!1,i.leftDelim="(",i.rightDelim=")"}switch(t){case"\\dfrac":case"\\dbinom":i.mathstyle="displaystyle";break;case"\\tfrac":case"\\tbinom":i.mathstyle="textstyle"}return"\\cfrac"===t&&(i.continuousFraction=!0),i}),Ot(["\\over","\\atop","\\choose"],"",{infix:!0},function(t,e){const i=e[0],s=e[1];let n=!1,r=null,o=null;switch(t){case"\\atop":break;case"\\over":n=!0;break;case"\\choose":n=!1,r="(",o=")";break;default:throw new Error("Unrecognized genfrac command")}return{type:"genfrac",numer:i,denom:s,hasBarLine:n,leftDelim:r,rightDelim:o,mathstyle:"auto"}}),ct(21,"\\over"),ct(12,"\\atop"),ct(1968,"\\choose"),Ot(["\\overwithdelims","\\atopwithdelims"],"{left-delim:delim}{right-delim:delim}",{infix:!0},function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],hasBarLine:!1,leftDelim:e[2],rightDelim:e[3],mathstyle:"auto"}}),ct(15,"\\overwithdelims"),ct(at,"\\atopwithdelims"),it="Fractions",Ot("\\pdiff","{numerator}{denominator}",null,function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],numerPrefix:"\u2202",denomPrefix:"\u2202",hasBarLine:!0,leftDelim:null,rightDelim:null,mathstyle:"auto"}}),it="Quantifiers",dt("\\forall","",xt,"\u2200",lt),dt("\\exists","",xt,"\u2203",lt),dt("\\nexists",vt,xt,"\u2204",lt),dt("\\mid","",Pt,"\u2223",at),dt("\\top","",xt,"\u22a4","RARE"),dt("\\bot","",xt,"\u22a5","RARE"),it="Variable Sized Symbols",Ot(["\\sum","\\prod","\\bigcup","\\bigcap","\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\\intop"],"",null,function(t){return{type:"mop",limits:"auto",symbol:!0,baseFontFamily:"cmr",body:{coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[t.slice(1)]}}),Ot(["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!0,body:{int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11"}[t.slice(1)]}}),ct(lt,"\\sum","\\prod","\\bigcap","\\bigcup","\\int"),ct(at,"\\bigoplus","\\smallint","\\iint","\\oint"),ct("RARE","\\bigwedge","\\bigvee"),ct(756,"\\coprod"),ct(723,"\\bigsqcup"),ct(1241,"\\bigotimes"),ct(150,"\\bigodot"),ct(174,"\\biguplus"),ct(878,"\\iiint"),ct(97,"\\intop"),it="Various",dt("\\sharp","",xt,"\u266f",at),dt("\\flat","",xt,"\u266d",590),dt("\\natural","",xt,"\u266e",278),dt("\\#","",xt,"#","RARE"),dt("\\&","",xt,"&","RARE"),dt("\\clubsuit","",xt,"\u2663",172),dt("\\heartsuit","",xt,"\u2661","ARCANE"),dt("\\spadesuit","",xt,"\u2660","ARCANE"),dt("\\diamondsuit","",xt,"\u2662",ot),dt("\\differencedelta","",Pt,"\u2206",at),it="Letters and Letter Like Forms",Ot("\\unicode","{charcode:number}",null,function(t,e){let i=parseInt(e[0]);return isFinite(i)||(i=10067),{type:"mord",body:String.fromCodePoint(i)}}),dt("\\backslash","",xt,"\\"),dt("?","",xt,"?"),dt("!","",xt,"!"),dt("\\nabla","",xt,"\u2207",lt),dt("\\partial","",xt,"\u2202",lt),dt("\\ell","",xt,"\u2113",at),dt("\\imaginaryI","",xt,"i"),dt("\\imaginaryJ","",xt,"j"),Ot(["\\Re","\\Im"],"",null,function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:{"\\Re":"\u211c","\\Im":"\u2111"}[t],baseFontFamily:"frak"}}),dt("\\hbar","",xt,"\u210f",at),dt("\\hslash",vt,xt,"\u210f",at),dt("\\differentialD","cmr",xt,"d"),dt("\\rd","cmr",xt,"d"),dt("\\capitalDifferentialD","cmr",xt,"D"),dt("\\rD","cmr",xt,"D"),dt("\\exponentialE","cmr",xt,"e"),dt("\\Finv",vt,xt,"\u2132",3),dt("\\Game",vt,xt,"\u2141",1),dt("\\wp","",xt,"\u2118",1306),dt("\\eth",vt,xt,"\xf0",77),dt("\\mho",vt,xt,"\u2127",138),dt("\\Bbbk",vt,xt,"k"),dt("\\doubleStruckCapitalN","bb",xt,"N"),dt("\\N","bb",xt,"N"),dt("\\doubleStruckCapitalR","bb",xt,"R"),dt("\\R","bb",xt,"R"),dt("\\doubleStruckCapitalQ","bb",xt,"Q"),dt("\\Q","bb",xt,"Q"),dt("\\doubleStruckCapitalC","bb",xt,"C"),dt("\\C","bb",xt,"C"),dt("\\doubleStruckCapitalZ","bb",xt,"Z"),dt("\\Z","bb",xt,"Z"),dt("\\doubleStruckCapitalP","bb",xt,"P"),dt("\\P","bb",xt,"P"),dt("\\scriptCapitalE","scr",xt,"E"),dt("\\scriptCapitalH","scr",xt,"H"),dt("\\scriptCapitalL","scr",xt,"L"),dt("\\gothicCapitalC","frak",xt,"C"),dt("\\gothicCapitalH","frak",xt,"H"),dt("\\gothicCapitalI","frak",xt,"I"),dt("\\gothicCapitalR","frak",xt,"R"),dt("\\pounds","",xt,"\xa3",509),dt("\\yen",vt,xt,"\xa5",57),dt("\\euro","",xt,"\u20ac",4),it="Crosses",dt("\\textdagger","",_t,"\u2020"),dt("\\dagger","",_t,"\u2020",at),dt("\\dag","",_t,"\u2020",at),dt("\\ddag","",_t,"\u2021",500),dt("\\textdaggerdbl","",_t,"\u2021"),dt("\\ddagger","",_t,"\u2021",353),dt("\\maltese",vt,xt,"\u2720",24),it="Arrows",dt("\\longrightarrow","",Pt,"\u27f6",lt),dt("\\rightarrow","",Pt,"\u2192",lt),dt("\\Longrightarrow","",Pt,"\u27f9",lt),dt("\\Rightarrow","",Pt,"\u21d2",lt),dt("\\longmapsto","",Pt,"\u27fc",at),dt("\\mapsto","",Pt,"\u21a6",at),dt("\\Longleftrightarrow","",Pt,"\u27fa",at),dt("\\rightleftarrows",vt,Pt,"\u21c4",at),dt("\\leftarrow","",Pt,"\u2190",at),dt("\\curvearrowleft",vt,Pt,"\u21b6",at),dt("\\uparrow","",Pt,"\u2191",at),dt("\\downarrow","",Pt,"\u2193",at),dt("\\hookrightarrow","",Pt,"\u21aa",at),dt("\\rightharpoonup","",Pt,"\u21c0",at),dt("\\rightleftharpoons","",Pt,"\u21cc",at),dt("\\Leftarrow","",Pt,"\u21d0",1695),dt("\\longleftrightarrow","",Pt,"\u27f7",1599),dt("\\longleftarrow","",Pt,"\u27f5",878),dt("\\Longleftarrow","",Pt,"\u27f8",296),dt("\\searrow","",Pt,"\u2198",1609),dt("\\nearrow","",Pt,"\u2197",1301),dt("\\swarrow","",Pt,"\u2199",167),dt("\\nwarrow","",Pt,"\u2196",108),dt("\\Uparrow","",Pt,"\u21d1",257),dt("\\Downarrow","",Pt,"\u21d3",556),dt("\\updownarrow","",Pt,"\u2195",192),dt("\\Updownarrow","",Pt,"\u21d5",161),dt("\\hookleftarrow","",Pt,"\u21a9",115),dt("\\leftharpoonup","",Pt,"\u21bc",93),dt("\\leftharpoondown","",Pt,"\u21bd",42),dt("\\rightharpoondown","",Pt,"\u21c1",80),dt("\\leftrightarrows",vt,Pt,"\u21c6",765),dt("\\dashrightarrow",vt,Pt,"\u21e2",311),dt("\\dashleftarrow",vt,Pt,"\u21e0",5),dt("\\leftleftarrows",vt,Pt,"\u21c7",8),dt("\\Lleftarrow",vt,Pt,"\u21da",7),dt("\\twoheadleftarrow",vt,Pt,"\u219e",32),dt("\\leftarrowtail",vt,Pt,"\u21a2",25),dt("\\looparrowleft",vt,Pt,"\u21ab",6),dt("\\leftrightharpoons",vt,Pt,"\u21cb",205),dt("\\circlearrowleft",vt,Pt,"\u21ba",105),dt("\\Lsh",vt,Pt,"\u21b0",11),dt("\\upuparrows",vt,Pt,"\u21c8",15),dt("\\downharpoonleft",vt,Pt,"\u21c3",21),dt("\\multimap",vt,Pt,"\u22b8",108),dt("\\leftrightsquigarrow",vt,Pt,"\u21ad",31),dt("\\twoheadrightarrow",vt,Pt,"\u21a0",835),dt("\\rightarrowtail",vt,Pt,"\u21a3",195),dt("\\looparrowright",vt,Pt,"\u21ac",37),dt("\\curvearrowright",vt,Pt,"\u21b7",209),dt("\\circlearrowright",vt,Pt,"\u21bb",63),dt("\\Rsh",vt,Pt,"\u21b1",18),dt("\\downdownarrows",vt,Pt,"\u21ca",6),dt("\\upharpoonright",vt,Pt,"\u21be",579),dt("\\downharpoonright",vt,Pt,"\u21c2",39),dt("\\rightsquigarrow",vt,Pt,"\u21dd",674),dt("\\leadsto",vt,Pt,"\u21dd",709),dt("\\Rrightarrow",vt,Pt,"\u21db",62),dt("\\restriction",vt,Pt,"\u21be",29),dt("\\upharpoonleft",vt,Pt,"\u21bf",ot),dt("\\rightrightarrows",vt,Pt,"\u21c9",ot),it="Negated Arrows",dt("\\nrightarrow",vt,Pt,"\u219b",324),dt("\\nRightarrow",vt,Pt,"\u21cf",107),dt("\\nleftrightarrow",vt,Pt,"\u21ae",36),dt("\\nLeftrightarrow",vt,Pt,"\u21ce",20),dt("\\nleftarrow",vt,Pt,"\u219a",7),dt("\\nLeftarrow",vt,Pt,"\u21cd",5),it="Negated Relations",dt("\\nless",vt,Pt,"\u226e",146),dt("\\nleqslant",vt,Pt,"\ue010",58),dt("\\lneq",vt,Pt,"\u2a87",54),dt("\\lneqq",vt,Pt,"\u2268",36),dt("\\nleqq",vt,Pt,"\ue011",18),dt("\\unlhd",vt,_t,"\u22b4",253),dt("\\unrhd",vt,_t,"\u22b5",66),dt("\\lvertneqq",vt,Pt,"\ue00c",6),dt("\\lnsim",vt,Pt,"\u22e6",4),dt("\\lnapprox",vt,Pt,"\u2a89",ot),dt("\\nprec",vt,Pt,"\u2280",71),dt("\\npreceq",vt,Pt,"\u22e0",57),dt("\\precnsim",vt,Pt,"\u22e8",4),dt("\\precnapprox",vt,Pt,"\u2ab9",2),dt("\\nsim",vt,Pt,"\u2241",40),dt("\\nshortmid",vt,Pt,"\ue006",1),dt("\\nmid",vt,Pt,"\u2224",417),dt("\\nvdash",vt,Pt,"\u22ac",266),dt("\\nvDash",vt,Pt,"\u22ad",405),dt("\\ngtr",vt,Pt,"\u226f",90),dt("\\ngeqslant",vt,Pt,"\ue00f",23),dt("\\ngeqq",vt,Pt,"\ue00e",12),dt("\\gneq",vt,Pt,"\u2a88",29),dt("\\gneqq",vt,Pt,"\u2269",35),dt("\\gvertneqq",vt,Pt,"\ue00d",6),dt("\\gnsim",vt,Pt,"\u22e7",3),dt("\\gnapprox",vt,Pt,"\u2a8a",ot),dt("\\nsucc",vt,Pt,"\u2281",44),dt("\\nsucceq",vt,Pt,"\u22e1",ot),dt("\\succnsim",vt,Pt,"\u22e9",4),dt("\\succnapprox",vt,Pt,"\u2aba",ot),dt("\\ncong",vt,Pt,"\u2246",128),dt("\\nshortparallel",vt,Pt,"\ue007",6),dt("\\nparallel",vt,Pt,"\u2226",54),dt("\\nVDash",vt,Pt,"\u22af",5),dt("\\nsupseteqq",vt,Pt,"\ue018",1),dt("\\supsetneq",vt,Pt,"\u228b",286),dt("\\varsupsetneq",vt,Pt,"\ue01b",2),dt("\\supsetneqq",vt,Pt,"\u2acc",49),dt("\\varsupsetneqq",vt,Pt,"\ue019",3),dt("\\nVdash",vt,Pt,"\u22ae",179),dt("\\precneqq",vt,Pt,"\u2ab5",11),dt("\\succneqq",vt,Pt,"\u2ab6",3),dt("\\nsubseteqq",vt,Pt,"\ue016",16),it="Various",dt("\\checkmark",vt,xt,"\u2713",1025),dt("\\diagup",vt,xt,"\u2571",440),dt("\\diagdown",vt,xt,"\u2572",175),dt("\\measuredangle",vt,xt,"\u2221",271),dt("\\sphericalangle",vt,xt,"\u2222",156),dt("\\backprime",vt,xt,"\u2035",104),dt("\\backdoubleprime",vt,xt,"\u2036",ot),it="Shapes",dt("\\ast","",_t,"\u2217",lt),dt("\\star","",_t,"\u22c6",at),dt("\\diamond","",_t,"\u22c4",1356),dt("\\Diamond",vt,xt,"\u25ca",695),dt("\\lozenge",vt,xt,"\u25ca",422),dt("\\blacklozenge",vt,xt,"\u29eb",344),dt("\\bigstar",vt,xt,"\u2605",168),it="Hebrew",dt("\\aleph","",xt,"\u2135",1381),dt("\\beth",vt,xt,"\u2136",54),dt("\\daleth",vt,xt,"\u2138",43),dt("\\gimel",vt,xt,"\u2137",36),it="Fences",dt("\\lbrace","",St,"{",lt),dt("\\rbrace","",wt,"}",lt),dt("\\langle","",St,"\u27e8",at),dt("\\rangle","",wt,"\u27e9",at),dt("\\lfloor","",St,"\u230a",at),dt("\\rfloor","",wt,"\u230b",at),dt("\\lceil","",St,"\u2308",at),dt("\\rceil","",wt,"\u2309",at),dt("\\vert","",xt,"\u2223",lt),dt("\\mvert","",Pt,"\u2223"),dt("\\lvert","",St,"\u2223",496),dt("\\rvert","",wt,"\u2223",496),dt("\\|","",xt,"\u2225"),dt("\\Vert","",xt,"\u2225",lt),dt("\\mVert","",xt,"\u2225"),dt("\\lVert","",St,"\u2225",287),dt("\\rVert","",wt,"\u2225",ot),dt("\\lbrack","",St,"[",574),dt("\\rbrack","",wt,"]",213),dt("\\{","",St,"{"),dt("\\}","",wt,"}"),dt("(","",St,"("),dt(")","",wt,")"),dt("[","",St,"["),dt("]","",wt,"]"),dt("\\ulcorner",vt,St,"\u250c",296),dt("\\urcorner",vt,wt,"\u2510",310),dt("\\llcorner",vt,St,"\u2514",137),dt("\\lrcorner",vt,wt,"\u2518",199),dt("\\lgroup","",St,"\u27ee",24),dt("\\rgroup","",wt,"\u27ef",24),dt("\\lmoustache","",St,"\u23b0",ot),dt("\\rmoustache","",wt,"\u23b1",ot),Ot(["\\middle"],"{:delim}",null,function(t,e){return{type:"delim",delim:e[0]}}),it="Sizing";const Nt={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};function Lt(t){let e="",i=!0;for(const s of t)"string"==typeof s.body?e+=s.body:i=!1;return i?e:""}Ot(["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],"{:delim}",null,function(t,e){return{type:"sizeddelim",size:Nt[t].size,cls:Nt[t].mclass,delim:e[0]}}),it="Relations",dt("=","",Pt,"=",lt),dt("\\ne","",Pt,"\u2260",lt),dt("\\neq","",Pt,"\u2260",at),dt("<","",Pt,"<",lt),dt("\\lt","",Pt,"<",at),dt(">","",Pt,">",lt),dt("\\gt","",Pt,">",at),dt("\\le","",Pt,"\u2264",at),dt("\\ge","",Pt,"\u2265",at),dt("\\leqslant",vt,Pt,"\u2a7d",lt),dt("\\geqslant",vt,Pt,"\u2a7e",lt),dt("\\leq","",Pt,"\u2264",at),dt("\\geq","",Pt,"\u2265",at),dt("\\ll","",Pt,"\u226a"),dt("\\gg","",Pt,"\u226b",at),dt("\\coloneq","",Pt,"\u2254",5),dt("\\measeq","",Pt,"\u225d"),dt("\\eqdef","",Pt,"\u225e"),dt("\\questeq","",Pt,"\u225f"),dt(":","",Pt,":"),dt("\\cong","",Pt,"\u2245",at),dt("\\equiv","",Pt,"\u2261",at),dt("\\prec","",Pt,"\u227a",at),dt("\\preceq","",Pt,"\u2aaf",at),dt("\\succ","",Pt,"\u227b",at),dt("\\succeq","",Pt,"\u2ab0",1916),dt("\\perp","",Pt,"\u22a5",at),dt("\\parallel","",Pt,"\u2225",at),dt("\\propto","",Pt,"\u221d",at),dt("\\Colon","",Pt,"\u2237"),dt("\\smile","",Pt,"\u2323",at),dt("\\frown","",Pt,"\u2322",at),dt("\\sim","",Pt,"\u223c",at),dt("\\gtrsim",vt,Pt,"\u2273",at),dt("\\approx","",Pt,"\u2248",lt),dt("\\approxeq",vt,Pt,"\u224a",147),dt("\\thickapprox",vt,Pt,"\u2248",377),dt("\\lessapprox",vt,Pt,"\u2a85",146),dt("\\gtrapprox",vt,Pt,"\u2a86",95),dt("\\precapprox",vt,Pt,"\u2ab7",50),dt("\\succapprox",vt,Pt,"\u2ab8",ot),dt("\\thicksim",vt,Pt,"\u223c",779),dt("\\succsim",vt,Pt,"\u227f",251),dt("\\precsim",vt,Pt,"\u227e",104),dt("\\backsim",vt,Pt,"\u223d",251),dt("\\eqsim",vt,Pt,"\u2242",62),dt("\\backsimeq",vt,Pt,"\u22cd",91),dt("\\simeq","",Pt,"\u2243",ot),dt("\\lesssim",vt,Pt,"\u2272",ot),dt("\\nleq",vt,Pt,"\u2270",369),dt("\\ngeq",vt,Pt,"\u2271",164),dt("\\smallsmile",vt,Pt,"\u2323",31),dt("\\smallfrown",vt,Pt,"\u2322",71),dt("\\bowtie","",Pt,"\u22c8",558),dt("\\asymp","",Pt,"\u224d",755),dt("\\sqsubseteq","",Pt,"\u2291",1255),dt("\\sqsupseteq","",Pt,"\u2292",183),dt("\\leqq",vt,Pt,"\u2266",1356),dt("\\eqslantless",vt,Pt,"\u2a95",15),dt("\\lll",vt,Pt,"\u22d8",157),dt("\\lessgtr",vt,Pt,"\u2276",281),dt("\\lesseqgtr",vt,Pt,"\u22da",134),dt("\\lesseqqgtr",vt,Pt,"\u2a8b",ot),dt("\\risingdotseq",vt,Pt,"\u2253",8),dt("\\fallingdotseq",vt,Pt,"\u2252",99),dt("\\subseteqq",vt,Pt,"\u2ac5",82),dt("\\Subset",vt,Pt,"\u22d0"),dt("\\sqsubset",vt,Pt,"\u228f",309),dt("\\preccurlyeq",vt,Pt,"\u227c",549),dt("\\curlyeqprec",vt,Pt,"\u22de",14),dt("\\vDash",vt,Pt,"\u22a8",646),dt("\\Vvdash",vt,Pt,"\u22aa",20),dt("\\bumpeq",vt,Pt,"\u224f",13),dt("\\Bumpeq",vt,Pt,"\u224e",12),dt("\\geqq",vt,Pt,"\u2267",972),dt("\\eqslantgtr",vt,Pt,"\u2a96",13),dt("\\ggg",vt,Pt,"\u22d9",127),dt("\\gtrless",vt,Pt,"\u2277",417),dt("\\gtreqless",vt,Pt,"\u22db",190),dt("\\gtreqqless",vt,Pt,"\u2a8c",91),dt("\\supseteqq",vt,Pt,"\u2ac6",6),dt("\\Supset",vt,Pt,"\u22d1",34),dt("\\sqsupset",vt,Pt,"\u2290",71),dt("\\succcurlyeq",vt,Pt,"\u227d",442),dt("\\curlyeqsucc",vt,Pt,"\u22df",10),dt("\\Vdash",vt,Pt,"\u22a9",276),dt("\\shortmid",vt,Pt,"\u2223",67),dt("\\shortparallel",vt,Pt,"\u2225",17),dt("\\between",vt,Pt,"\u226c",110),dt("\\pitchfork",vt,Pt,"\u22d4",66),dt("\\varpropto",vt,Pt,"\u221d",203),dt("\\backepsilon",vt,Pt,"\u220d",176),dt("\\llless",vt,Pt,"\u22d8",ot),dt("\\gggtr",vt,Pt,"\u22d9",ot),dt("\\lhd",vt,_t,"\u22b2",447),dt("\\rhd",vt,_t,"\u22b3",338),dt("\\Join","",Pt,"\u22c8",35),dt("\\doteq","",Pt,"\u2250",1450),dt("\\doteqdot",vt,Pt,"\u2251",60),dt("\\Doteq",vt,Pt,"\u2251",ot),dt("\\eqcirc",vt,Pt,"\u2256",6),dt("\\circeq",vt,Pt,"\u2257",31),dt("\\lessdot",vt,_t,"\u22d6",88),dt("\\gtrdot",vt,_t,"\u22d7",45),dt("\\~","",Pt,"~"),it="Logic",dt("\\leftrightarrow","",Pt,"\u2194",lt),dt("\\Leftrightarrow","",Pt,"\u21d4",lt),dt("\\to","",Pt,"\u2192",lt),dt("\\models","",Pt,"\u22a8",at),dt("\\vdash","",Pt,"\u22a2",at),dt("\\therefore",vt,Pt,"\u2234",1129),dt("\\because",vt,Pt,"\u2235",388),dt("\\implies","",Pt,"\u27f9",1858),dt("\\gets","",Pt,"\u2190",150),dt("\\dashv","",Pt,"\u22a3",299),dt("\\impliedby","",Pt,"\u27f8",ot),dt("\\biconditional","",Pt,"\u27f7",ot),dt("\\roundimplies","",Pt,"\u2970",ot),it="Operators",dt("+","",_t,"+",lt),dt("-","",_t,"\u2212",lt),dt("\u2212","",_t,"\u2212",lt),dt("\\pm","",_t,"\xb1",at),dt("\\mp","",_t,"\u2213",at),dt("*","",_t,"\u2217",at),dt("\\times","",_t,"\xd7",at),dt("\\div","",_t,"\xf7",at),dt("\\surd","",xt,"\u221a",at),dt("\\divides","",_t,"\u2223",ot),dt("\\ltimes",vt,_t,"\u22c9",576),dt("\\rtimes",vt,_t,"\u22ca",946),dt("\\leftthreetimes",vt,_t,"\u22cb",34),dt("\\rightthreetimes",vt,_t,"\u22cc",14),dt("\\intercal",vt,_t,"\u22ba",478),dt("\\dotplus",vt,_t,"\u2214",81),dt("\\centerdot",vt,_t,"\u22c5",271),dt("\\doublebarwedge",vt,_t,"\u2a5e",5),dt("\\divideontimes",vt,_t,"\u22c7",51),dt("\\cdot","",_t,"\u22c5",ot),it="Others",dt("\\infty","",xt,"\u221e",lt),dt("\\prime","",Ct,"\u2032",lt),dt("\\doubleprime","",xt,"\u2033"),dt("\\angle","",xt,"\u2220",at),dt("`","",xt,"\u2018"),dt("\\$","",xt,"$"),dt("\\%","",xt,"%"),dt("\\_","",xt,"_"),it="Greek",dt("\\alpha","",Ct,"\u03b1",at),dt("\\beta","",Ct,"\u03b2",at),dt("\\gamma","",Ct,"\u03b3",at),dt("\\delta","",Ct,"\u03b4",at),dt("\\epsilon","",Ct,"\u03f5",at),dt("\\varepsilon","",Ct,"\u03b5"),dt("\\zeta","",Ct,"\u03b6",at),dt("\\eta","",Ct,"\u03b7",at),dt("\\theta","",Ct,"\u03b8",at),dt("\\vartheta","",Ct,"\u03d1",at),dt("\\iota","",Ct,"\u03b9",at),dt("\\kappa","",Ct,"\u03ba",at),dt("\\varkappa",vt,Ct,"\u03f0",at),dt("\\lambda","",Ct,"\u03bb",at),dt("\\mu","",Ct,"\u03bc",at),dt("\\nu","",Ct,"\u03bd",at),dt("\\xi","",Ct,"\u03be",at),dt("\\omicron","",Ct,"o"),dt("\\pi","",Ct,"\u03c0",at),dt("\\varpi","",Ct,"\u03d6",at),dt("\\rho","",Ct,"\u03c1",at),dt("\\varrho","",Ct,"\u03f1",at),dt("\\sigma","",Ct,"\u03c3",at),dt("\\varsigma","",Ct,"\u03c2",at),dt("\\tau","",Ct,"\u03c4",at),dt("\\phi","",Ct,"\u03d5",at),dt("\\varphi","",Ct,"\u03c6",at),dt("\\upsilon","",Ct,"\u03c5",at),dt("\\chi","",Ct,"\u03c7",at),dt("\\psi","",Ct,"\u03c8",at),dt("\\omega","",Ct,"\u03c9",at),dt("\\Gamma","",Ct,"\u0393",at),dt("\\Delta","",Ct,"\u0394",at),dt("\\Theta","",Ct,"\u0398",at),dt("\\Lambda","",Ct,"\u039b",at),dt("\\Xi","",Ct,"\u039e",at),dt("\\Pi","",Ct,"\u03a0",at),dt("\\Sigma","",Ct,"\u03a3",at),dt("\\Upsilon","",Ct,"\u03a5",at),dt("\\Phi","",Ct,"\u03a6",at),dt("\\Psi","",Ct,"\u03a8",at),dt("\\Omega","",Ct,"\u03a9",at),dt("\\digamma",vt,Ct,"\u03dd",248),it="Others",dt("\\emptyset","",xt,"\u2205",lt),dt("\\varnothing",vt,xt,"\u2205",lt),it="Set Operators",dt("\\cap","",_t,"\u2229",lt),dt("\\cup","",_t,"\u222a",lt),dt("\\setminus","",_t,"\u2216",at),dt("\\smallsetminus",vt,_t,"\u2216",254),dt("\\complement",vt,xt,"\u2201",200),it="Set Relations",dt("\\in","",Pt,"\u2208",lt),dt("\\notin","",Pt,"\u2209",lt),dt("\\not","",Pt,"\u0338",at),dt("\\ni","",Pt,"\u220b",at),dt("\\owns","",Pt,"\u220b",18),dt("\\subset","",Pt,"\u2282",lt),dt("\\supset","",Pt,"\u2283",lt),dt("\\subseteq","",Pt,"\u2286",lt),dt("\\supseteq","",Pt,"\u2287",lt),dt("\\subsetneq",vt,Pt,"\u228a",1945),dt("\\varsubsetneq",vt,Pt,"\ue01a",198),dt("\\subsetneqq",vt,Pt,"\u2acb",314),dt("\\varsubsetneqq",vt,Pt,"\ue017",55),dt("\\nsubset",vt,Pt,"\u2284",ot),dt("\\nsupset",vt,Pt,"\u2285",ot),dt("\\nsubseteq",vt,Pt,"\u2288",950),dt("\\nsupseteq",vt,Pt,"\u2289",49),it="Spacing",dt("\\ ","",Et,"\xa0"),dt("~","",Et,"\xa0"),dt("\\space","",Et,"\xa0"),dt("\\!","",Et,null),dt("\\,","",Et,null),dt("\\:","",Et,null),dt("\\;","",Et,null),dt("\\enskip","",Et,null),dt("\\enspace","",Et,null,672),dt("\\quad","",Et,null,at),dt("\\qquad","",Et,null,at),Ot(["\\hspace","\\hspace*"],"{width:skip}",{allowedInText:!0},function(t,e){return{type:"spacing",width:e[0]||0}}),Ot(["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner"],"{:auto}",null,function(t,e){const i={type:{"\\mathop":"mop","\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t],body:Lt(e[0])||e[0],captureSelection:!0,baseFontFamily:"\\mathop"===t?"math":""};return"\\mathop"===t&&(i.limits="nolimits",i.isFunction=!0),i}),Ot(["\\operatorname","\\operatorname*"],"{operator:string}",null,function(t,e){const i={type:"mop",skipBoundary:!0,body:e[0],isFunction:!0,baseFontFamily:"cmr"};return"\\operatorname"===t?i.limits="nolimits":"\\operatorname*"===t&&(i.limits="limits"),i}),it="Punctuation",dt("\\colon","","mpunct",":",at),dt("\\cdotp","","mpunct","\u22c5",at),dt("\\ldots","","minner","\u2026",at),dt("\\cdots","","minner","\u22ef",at),dt("\\ddots","","minner","\u22f1",at),dt("\\mathellipsis","","minner","\u2026",91),dt("\\vdots","",xt,"\u22ee",at),dt("\\ldotp","","mpunct",".",18),dt(",","","mpunct",","),dt(";","","mpunct",";"),it="Logical Operators",dt("\\wedge","",_t,"\u2227",lt),dt("\\vee","",_t,"\u2228",lt),dt("\\lnot","",xt,"\xac",at),dt("\\neg","",xt,"\xac",lt),dt("\\land","",_t,"\u2227",659),dt("\\lor","",_t,"\u2228",364),dt("\\barwedge",vt,_t,"\u22bc",21),dt("\\veebar",vt,_t,"\u22bb",43),dt("\\nor",vt,_t,"\u22bb",7),dt("\\curlywedge",vt,_t,"\u22cf",58),dt("\\curlyvee",vt,_t,"\u22ce",57),it="Boxes",dt("\\square",vt,xt,"\u25a1",at),dt("\\Box",vt,xt,"\u25a1",at),dt("\\blacksquare",vt,xt,"\u25a0",1679),dt("\\boxminus",vt,_t,"\u229f",79),dt("\\boxplus",vt,_t,"\u229e",276),dt("\\boxtimes",vt,_t,"\u22a0",457),dt("\\boxdot",vt,_t,"\u22a1",120),it="Circles",dt("\\circ","",_t,"\u2218",lt),dt("\\bigcirc","",_t,"\u25ef",903),dt("\\bullet","",_t,"\u2219",at),dt("\\circleddash",vt,_t,"\u229d",at),dt("\\circledast",vt,_t,"\u229b",339),dt("\\oplus","",_t,"\u2295",at),dt("\\ominus","",_t,"\u2296",1568),dt("\\otimes","",_t,"\u2297",at),dt("\\odot","",_t,"\u2299",at),dt("\\circledcirc",vt,_t,"\u229a",93),dt("\\oslash","",_t,"\u2298",497),dt("\\circledS",vt,xt,"\u24c8",31),dt("\\circledR",vt,xt,"\xae",1329),it="Triangles",dt("\\triangle","",xt,"\u25b3",at),dt("\\triangleq",vt,Pt,"\u225c",at),dt("\\bigtriangleup","",_t,"\u25b3",1773),dt("\\vartriangle",vt,Pt,"\u25b3",762),dt("\\triangledown",vt,xt,"\u25bd",520),dt("\\bigtriangledown","",_t,"\u25bd",661),dt("\\triangleleft","",_t,"\u25c3",534),dt("\\vartriangleleft",vt,Pt,"\u22b2",281),dt("\\trianglelefteq",vt,Pt,"\u22b4",176),dt("\\ntriangleleft",vt,Pt,"\u22ea",13),dt("\\ntrianglelefteq",vt,Pt,"\u22ec",22),dt("\\triangleright","",_t,"\u25b9",516),dt("\\vartriangleright",vt,Pt,"\u22b3",209),dt("\\trianglerighteq",vt,Pt,"\u22b5",45),dt("\\ntriangleright",vt,Pt,"\u22eb",15),dt("\\ntrianglerighteq",vt,Pt,"\u22ed",6),dt("\\blacktriangle",vt,xt,"\u25b2",360),dt("\\blacktriangledown",vt,xt,"\u25bc",159),dt("\\blacktriangleleft",vt,Pt,"\u25c0",101),dt("\\blacktriangleright",vt,Pt,"\u25b6",271),it="Others",dt("\\/","",Ct,"/"),dt("|","","textord","\u2223"),it="Big Operators",dt("\\sqcup","",_t,"\u2294",1717),dt("\\sqcap","",_t,"\u2293",735),dt("\\uplus","",_t,"\u228e",597),dt("\\wr","",_t,"\u2240",286),dt("\\Cap",vt,_t,"\u22d2",2),dt("\\Cup",vt,_t,"\u22d3",2),dt("\\doublecap",vt,_t,"\u22d2",1),dt("\\doublecup",vt,_t,"\u22d3",1),dt("\\amalg","",_t,"\u2a3f",ot),dt("\\And","",_t,"&"),it="Accents",Ot(["\\acute","\\grave","\\dot","\\ddot","\\mathring","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec"],"{body:auto}",null,function(t,e){return{type:"accent",accent:{"\\acute":"\u02ca","\\grave":"\u02cb","\\dot":"\u02d9","\\ddot":"\xa8","\\mathring":"\u02da","\\tilde":"~","\\bar":"\u02c9","\\breve":"\u02d8","\\check":"\u02c7","\\hat":"^","\\vec":"\u20d7"}[t],limits:"accent",skipBoundary:!0,body:e[0]}}),ct(at,"\\bar","\\ddot","\\acute","\\tilde","\\check"),ct(1548,"\\breve"),ct(735,"\\grave"),ct(lt,"\\vec"),it="Letters and Letter Like Forms",dt("\\imath","",xt,"\u0131"),dt("\\jmath","",xt,"\u0237"),it="Others",dt("\\degree","",xt,"\xb0",46),it="Others",dt("'","",xt,"\u2032"),dt('"',"",xt,"\u201d"),it="Others",Ot("\\^","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[e[0]]||"^",baseFontFamily:"cmr"}}),Ot("\\`","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[e[0]]||"`",baseFontFamily:"cmr"}}),Ot("\\'","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[e[0]]||"^",baseFontFamily:"cmr"}}),Ot("\\~","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[e[0]]||"\xb4",baseFontFamily:"cmr"}}),Ot("\\c","{:string}",{allowedInText:!0},function(t,e){return{type:"mord",limits:"nolimits",symbol:!0,isFunction:!1,body:e[0]&&{c:"\xe7",C:"\xc7"}[e[0]]||"",baseFontFamily:"cmr"}});const Dt={"\\#":"#","\\&":"&","\\$":"$","\\%":"%","\\_":"_","\\euro":"\u20ac","\\maltese":"\u2720","\\{":"{","\\}":"}","\\nobreakspace":"\xa0","\\ldots":"\u2026","\\textellipsis":"\u2026","\\backslash":"\\","`":"\u2018","'":"\u2019","``":"\u201c","''":"\u201d","\\degree":"\xb0","\\textasciicircum":"^","\\textasciitilde":"~","\\textasteriskcentered":"*","\\textbackslash":"\\","\\textbraceleft":"{","\\textbraceright":"}","\\textbullet":"\u2022","\\textdollar":"$","\\textsterling":"\xa3","\u2013":"\u2013","\u2014":"\u2014","\u2018":"\u2018","\u2019":"\u2019","\u201c":"\u201c","\u201d":"\u201d",'"':"\u201d","\\ss":"\xdf","\\ae":"\xe6","\\oe":"\u0153","\\AE":"\xc6","\\OE":"\u0152","\\O":"\xd8","\\i":"\u0131","\\j":"\u0237","\\aa":"\xe5","\\AA":"\xc5"},jt="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xe4\xf6\xfc\xdf\xc4\xd6\xdc\u1e9e\xe0\xe8\xe9\xec\xed\xee\xf2\xf3\xf9\xfa\xc0\xc8\xc9\xcc\xcd\xce\xd2\xd3\xd9\xda\xe1\xe9\xed\xf1\xf3\xfa\xfc\xc1\xc9\xcd\xd1\xd3\xda\xdc]/:new RegExp("\\p{Letter}","u"),It="undefined"!=typeof navigator&&/firefox|edge/i.test(navigator.userAgent)?/[0-9a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xe4\xf6\xfc\xdf\xc4\xd6\xdc\u1e9e\xe0\xe8\xe9\xec\xed\xee\xf2\xf3\xf9\xfa\xc0\xc8\xc9\xcc\xcd\xce\xd2\xd3\xd9\xda\xe1\xe9\xed\xf1\xf3\xfa\xfc\xc1\xc9\xcd\xd1\xd3\xda\xdc]/:new RegExp("[0-9\\p{Letter}]","u");var Rt={matchCodepoint:ft,commandAllowed:function(t,e){return!(!nt[e]||"text"===t&&!nt[e].allowedInText)||!!{text:Dt,math:st}[t][e]},unicodeToMathVariant:bt,mathVariantToUnicode:function(t,e,i){if(!/[A-Za-z0-9]/.test(t))return t;if(!e&&!i)return t;const s=t.codePointAt(0);for(let n=0;n<gt.length;n++)if((!e||gt[n].variant===e)&&(!i||gt[n].style===i)&&s>=gt[n].offset&&s<gt[n].offset+gt[n].len){const t=gt[n].start+s-gt[n].offset;return String.fromCodePoint(mt[t]||t)}return t},unicodeStringToLatex:function(t,e){let i="";for(const s of e)i+=yt(t,s.codePointAt(0));return i},getInfo:function(t,e,i){if(0===t.length)return null;let s=null;if("\\"===t.charAt(0)){if(s=nt[t])return"math"===e||s.allowedInText?s:null;if(s||("math"===e?s=st[t]:Dt[t]&&(s={value:Dt[t]})),!s){const e=t.slice(1);if(i&&i[e]){let t=i[e];"object"==typeof t&&(t=t.def);let n=0;for(/(^|[^\\])#1/.test(t)&&(n=1),/(^|[^\\])#2/.test(t)&&(n=2),/(^|[^\\])#3/.test(t)&&(n=3),/(^|[^\\])#4/.test(t)&&(n=4),/(^|[^\\])#5/.test(t)&&(n=5),/(^|[^\\])#6/.test(t)&&(n=6),/(^|[^\\])#7/.test(t)&&(n=7),/(^|[^\\])#8/.test(t)&&(n=8),/(^|[^\\])#9/.test(t)&&(n=9),s={type:"group",allowedInText:!1,params:[],infix:!1};n>=1;)s.params.push({optional:!1,type:"math",defaultValue:null,placeholder:null}),n-=1}}}else"math"===e?s=st[t]:Dt[t]&&(s={value:Dt[t]});return!s||"mord"!==s.type||"f"!==s.value&&"g"!==s.value&&"h"!==s.value||(s.isFunction=!0),s},getValue:function(t,e){return"math"===t?st[e]&&st[e].value?st[e].value:e:Dt[e]?Dt[e]:e},getEnvironmentInfo:function(t){let e=rt[t];return e||(e={params:"",parser:null,mathstyle:"displaystyle",tabular:!0,colFormat:[],lFence:".",rFence:"."}),e},suggest:function(t){if(t.length<=1)return[];const e=[];for(const i in nt)nt.hasOwnProperty(i)&&i.startsWith(t)&&!nt[i].infix&&e.push({match:i,frequency:nt[i].frequency});for(const i in st)st.hasOwnProperty(i)&&i.startsWith(t)&&e.push({match:i,frequency:st[i].frequency});return e.sort((t,e)=>t.frequency===e.frequency?t.match.length-e.match.length:(e.frequency||0)-(t.frequency||0)),e},FREQUENCY_VALUE:ht,TEXT_SYMBOLS:Dt,MATH_SYMBOLS:st,ENVIRONMENTS:rt,RIGHT_DELIM:{"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},FUNCTIONS:nt,MACROS:{iff:"\\;\u27fa\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"},COMMAND_MODE_CHARACTERS:/[a-zA-Z0-9!@*()-=+{}[\]\\';:?\/.,~<>`|'$%#&^_" ]/,LETTER:jt,LETTER_AND_DIGITS:It};const Bt=et.makeSymbol,Ft=et.makeSpan,Yt=et.makeVlist;function zt(t,e,i,s,n,r){const o=Bt("Size"+i+"-Regular",Rt.getValue("math",e)),a=et.makeStyleWrap(t,Ft(o,"delimsizing size"+i),n.mathstyle,B.TEXT,r);return s&&a.setTop((1-n.mathstyle.sizeMultiplier)*n.mathstyle.metrics.axisHeight),a.setStyle("color",n.color),"number"==typeof n.opacity&&a.setStyle("opacity",n.opacity),a}function Xt(t,e){let i="";return"Size1-Regular"===e?i=" delim-size1":"Size4-Regular"===e&&(i=" delim-size4"),Ft(Bt(e,Rt.getValue("math",t)),"delimsizinginner"+i)}function Ut(t,e,i,s,n,r){let o,a,l,h;o=l=h=Rt.getValue("math",e),a=null;let c="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?l=o=h="\u2223":"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?l=o=h="\u2225":"\\uparrow"===e?l=h="\u23d0":"\\Uparrow"===e?l=h="\u2016":"\\downarrow"===e?o=l="\u23d0":"\\Downarrow"===e?o=l="\u2016":"\\updownarrow"===e?(o="\u2191",l="\u23d0",h="\u2193"):"\\Updownarrow"===e?(o="\u21d1",l="\u2016",h="\u21d3"):"["===e||"\\lbrack"===e?(o="\u23a1",l="\u23a2",h="\u23a3",c="Size4-Regular"):"]"===e||"\\rbrack"===e?(o="\u23a4",l="\u23a5",h="\u23a6",c="Size4-Regular"):"\\lfloor"===e?(l=o="\u23a2",h="\u23a3",c="Size4-Regular"):"\\lceil"===e?(o="\u23a1",l=h="\u23a2",c="Size4-Regular"):"\\rfloor"===e?(l=o="\u23a5",h="\u23a6",c="Size4-Regular"):"\\rceil"===e?(o="\u23a4",l=h="\u23a5",c="Size4-Regular"):"("===e?(o="\u239b",l="\u239c",h="\u239d",c="Size4-Regular"):")"===e?(o="\u239e",l="\u239f",h="\u23a0",c="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(o="\u23a7",a="\u23a8",h="\u23a9",l="\u23aa",c="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="\u23ab",a="\u23ac",h="\u23ad",l="\u23aa",c="Size4-Regular"):"\\lgroup"===e?(o="\u23a7",h="\u23a9",l="\u23aa",c="Size4-Regular"):"\\rgroup"===e?(o="\u23ab",h="\u23ad",l="\u23aa",c="Size4-Regular"):"\\lmoustache"===e?(o="\u23a7",h="\u23ad",l="\u23aa",c="Size4-Regular"):"\\rmoustache"===e?(o="\u23ab",h="\u23a9",l="\u23aa",c="Size4-Regular"):"\\surd"===e?(o="\ue001",h="\u23b7",l="\ue000",c="Size4-Regular"):"\\ulcorner"===e?(o="\u250c",l=h=" "):"\\urcorner"===e?(o="\u2510",l=h=" "):"\\llcorner"===e?(h="\u2514",l=o=" "):"\\lrcorner"===e&&(o="\u2518",l=o=" ");const d=E.getCharacterMetrics(Rt.getValue("math",o),c),u=d.height+d.depth,p=E.getCharacterMetrics(Rt.getValue("math",l),c),f=p.height+p.depth,m=E.getCharacterMetrics(Rt.getValue("math",h),c),g=m.height+m.depth;let b=0,y=1;if(null!==a){const t=E.getCharacterMetrics(Rt.getValue("math",a),c);b=t.height+t.depth,y=2}const v=u+g+b,C=Math.ceil((i-v)/(y*f));let x=n.mathstyle.metrics.axisHeight;s&&(x*=n.mathstyle.sizeMultiplier);const _=(v+C*y*f)/2-x,P=[];if(P.push(Xt(h,c)),null===a)for(let w=0;w<C;w++)P.push(Xt(l,c));else{for(let t=0;t<C;t++)P.push(Xt(l,c));P.push(Xt(a,c));for(let t=0;t<C;t++)P.push(Xt(l,c))}P.push(Xt(o,c));const S=Yt(n,P,"bottom",_);return S.setStyle("color",n.color),"number"==typeof n.opacity&&S.setStyle("opacity",n.opacity),et.makeStyleWrap(t,Ft(S,"delimsizing mult"),n.mathstyle,B.TEXT,r)}const Gt=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],Ht=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],qt=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Jt=[0,1.2,1.8,2.4,3],Vt=[{type:"small",mathstyle:B.SCRIPTSCRIPT},{type:"small",mathstyle:B.SCRIPT},{type:"small",mathstyle:B.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],$t=[{type:"small",mathstyle:B.SCRIPTSCRIPT},{type:"small",mathstyle:B.SCRIPT},{type:"small",mathstyle:B.TEXT},{type:"stack"}],Wt=[{type:"small",mathstyle:B.SCRIPTSCRIPT},{type:"small",mathstyle:B.SCRIPT},{type:"small",mathstyle:B.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function Kt(t,e,i,s,n,r){if(!e||0===e.length||"."===e)return Zt(t,n,t);let o;"<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),o=qt.includes(e)?Vt:Gt.includes(e)?Wt:$t;const a=function(t,e,i,s){for(let r=Math.min(2,3-s.mathstyle.size);r<i.length&&"stack"!==i[r].type;r++){const s=E.getCharacterMetrics(t,"small"===(n=i[r]).type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":"Size4-Regular");if(s.defaultMetrics)return{type:"small",mathstyle:B.SCRIPT};let o=s.height+s.depth;if("small"===i[r].type&&(o*=i[r].mathstyle.sizeMultiplier),o>e)return i[r]}var n;return i[i.length-1]}(Rt.getValue("math",e),i,o,n);return"small"===a.type?function(t,e,i,s,n,r){const o=Bt("AMS-Regular",Rt.getValue("math",e)),a=et.makeStyleWrap(t,o,n.mathstyle,i,r);return s&&a.setTop((1-n.mathstyle.sizeMultiplier/i.sizeMultiplier)*n.mathstyle.metrics.axisHeight),a.setStyle("color",n.color),"number"==typeof n.opacity&&a.setStyle("opacity",n.opacity),a}(t,e,a.mathstyle,s,n,r):"large"===a.type?zt(t,e,a.size,s,n,r):Ut(t,e,i,s,n,r)}function Zt(t,e,i){return et.makeSpanOfType(t,"","sizing"+e.mathstyle.adjustTo(B.TEXT)+" nulldelimiter "+(i||""))}var Qt={makeSizedDelim:function(t,e,i,s,n){return"."===e?Zt(t,s,n):("<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),Gt.includes(e)||qt.includes(e)?zt(t,e,i,!1,s,n):Ht.includes(e)?Ut(t,e,Jt[i],!1,s,n):null)},makeCustomSizedDelim:Kt,makeLeftRightDelim:function(t,e,i,s,n,r){if("."===e)return Zt(t,n,r);const o=n.mathstyle.metrics.axisHeight*n.mathstyle.sizeMultiplier,a=5/E.METRICS.ptPerEm;let l=s+o,h=i-o,c=901*(h=Math.max(l,h))/500;return l=2*h-a,Kt(t,e,c=Math.max(c,l),!0,n,r)}};const te=et.makeSpan,ee=et.makeOrd,ie=et.makeInner,se=et.makeHlist,ne=et.makeVlist,re=/\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5/,oe=/^([A-Za-z]|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5)$/,ae={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49};class le{constructor(t,e,i,s){this.mode=t,this.type=e,this.body=i,this.applyStyle(s)}getStyle(){return{color:this.phantom?"transparent":this.color,backgroundColor:this.phantom?"transparent":this.backgroundColor,fontFamily:this.baseFontFamily||this.fontFamily||this.autoFontFamily,fontShape:this.fontShape,fontSeries:this.fontSeries,fontSize:this.fontSize,cssId:this.cssId,cssClass:this.cssClass}}applyStyle(t){if(Object.assign(this,t),"none"===this.fontFamily&&(this.fontFamily=""),"auto"===this.fontShape&&(this.fontShape=""),"auto"===this.fontSeries&&(this.fontSeries=""),"none"===this.color&&(this.color=""),"none"===this.backgroundColor&&(this.backgroundColor=""),"auto"===this.fontSize&&(this.fontSize=""),this.fontSize&&(this.maxFontSize=ae[this.fontSize]),"math"===this.mode){const t="string"==typeof this.body?this.body:"";this.autoFontFamily="cmr",oe.test(t)?this.autoFontFamily="math":/\\imath|\\jmath|\\pounds/.test(t)?this.autoFontFamily="mainit":re.test(t)||"math"!==this.baseFontFamily||(this.autoFontFamily="cmr")}else"text"===this.mode&&("root"!==this.type&&(this.type=""),delete this.baseFontFamily,delete this.autoFontFamily)}getInitialBaseElement(){let t=this;return Array.isArray(this.body)&&this.body.length>0&&("first"!==this.body[0].type?t=this.body[0].getInitialBaseElement():this.body[1]&&(t=this.body[1].getInitialBaseElement())),t}getFinalBaseElement(){return Array.isArray(this.body)&&this.body.length>0?this.body[this.body.length-1].getFinalBaseElement():this}isCharacterBox(){const t=this.getInitialBaseElement();return/minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(t.type)}forEach(t){if(t(this),Array.isArray(this.body))for(const e of this.body)e&&e.forEach(t);else this.body&&"object"==typeof this.body&&t(this.body);if(this.superscript)for(const e of this.superscript)e&&e.forEach(t);if(this.subscript)for(const e of this.subscript)e&&e.forEach(t);if(this.overscript)for(const e of this.overscript)e&&e.forEach(t);if(this.underscript)for(const e of this.underscript)e&&e.forEach(t);if(this.numer)for(const e of this.numer)e&&e.forEach(t);if(this.denom)for(const e of this.denom)e&&e.forEach(t);if(this.index)for(const e of this.index)e&&e.forEach(t);if(this.array)for(const e of this.array)for(const i of e)for(const e of i)e.forEach(t)}filter(t){let e=[];t(this)&&e.push(this);for(const i of["body","superscript","subscript","overscript","underscript","numer","denom","index"])if(Array.isArray(this[i]))for(const s of this[i])s&&(e=e.concat(s.filter(t)));if(Array.isArray(this.array))for(const i of this.array)for(const s of i)s&&(e=e.concat(s.filter(t)));return e}decomposeGroup(t){const e=t.clone({mathstyle:this.mathstyle}),i=ee(ue(e,this.body));return this.cssId&&(i.cssId=this.cssId),i.applyStyle({backgroundColor:this.backgroundColor,cssClass:this.cssClass}),i}decomposeArray(t){let e=this.colFormat;e&&0===e.length&&(e=[{align:"l"}]),e||(e=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]);const i=[];let s=0;for(const _ of e)_.align&&s++;for(const _ of this.array){let t=0;for(;t<_.length;){const e=[],n=Math.min(_.length,t+s);for(;t<n;)e.push(_[t++]);i.push(e)}}1===i[i.length-1].length&&0===i[i.length-1][0].length&&i.pop();const n=B.toMathstyle(this.mathstyle)||t.mathstyle,r=(this.arraystretch||1)*P.baselineskip,o=.7*r,a=.3*r;let l=0,h=0;const c=[],d=i.length;for(let _=0;_<d;++_){const e=i[_];h=Math.max(h,e.length);let s=o,n=a;const r=[];for(let i=0;i<e.length;++i){const o=ue(t.clone({mathstyle:this.mathstyle}),e[i])||[],a=[ee(null)].concat(o);n=Math.max(n,et.depth(a)),s=Math.max(s,et.height(a)),r.push(a)}let u=_===d-1?0:this.jot||0;this.rowGaps&&this.rowGaps[_]&&(u=this.rowGaps[_])>0&&(n<(u+=a)&&(n=u),u=0),r.height=s,r.depth=n,r.pos=l+=s,l+=n+u,c.push(r)}const u=l/2+n.metrics.axisHeight,p=[];for(let _=0;_<h;_++){const e=[];for(const t of c){const i=t[_];i&&(i.depth=t.depth,i.height=t.height,e.push(i),e.push(t.pos-u))}e.length>0&&p.push(ne(t,e,"individualShift"))}const f=[];let m=!1,g=!1,b=0,y=!this.lFence;for(const _ of e){if(_.align&&b>=p.length)break;if(_.align&&b<p.length)m?f.push(he(2*P.arraycolsep)):(g||y)&&f.push(he(P.arraycolsep)),f.push(te(p[b],"col-align-"+_.align)),b++,m=!0,g=!1,y=!1;else if(void 0!==_.gap)f.push("number"==typeof _.gap?he(_.gap):ce(t,c,u,_.gap)),m=!1,g=!1,y=!1;else if(_.rule){const e=te(null,"vertical-separator");e.setStyle("height",l,"em"),e.setStyle("margin-top",3*t.mathstyle.metrics.axisHeight-u,"em"),e.setStyle("vertical-align","top");let i=0;g?i=P.doubleRuleSep-P.arrayrulewidth:m&&(i=P.arraycolsep-P.arrayrulewidth),e.setLeft(i,"em"),f.push(e),m=!1,g=!0,y=!1}}if(m&&!this.rFence&&f.push(he(P.arraycolsep)),!(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence))return ee(f,"mtable");const v=te(f,"mtable"),C=et.height(v),x=et.depth(v);return ee([this.bind(t,Qt.makeLeftRightDelim("mopen",this.lFence,C,x,t)),v,this.bind(t,Qt.makeLeftRightDelim("mclose",this.rFence,C,x,t))])}decomposeGenfrac(t){const e="auto"===this.mathstyle?t.mathstyle:B.toMathstyle(this.mathstyle),i=t.clone({mathstyle:e});let s=[];this.numerPrefix&&s.push(ee(this.numerPrefix));const n=this.continuousFraction?e:e.fracNum();s=s.concat(ue(i.clone({mathstyle:n}),this.numer));const r=se(s,t.mathstyle.adjustTo(n));let o=[];this.denomPrefix&&o.push(ee(this.denomPrefix));const a=this.continuousFraction?e:e.fracDen();o=o.concat(ue(i.clone({mathstyle:a}),this.denom));const l=se(o,t.mathstyle.adjustTo(a)),h=this.hasBarLine?P.defaultRuleThickness/e.sizeMultiplier:0;let c,d,u;e.size===B.DISPLAY.size?(c=e.metrics.num1,d=h>0?3*h:7*P.defaultRuleThickness,u=e.metrics.denom1):(h>0?(c=e.metrics.num2,d=h):(c=e.metrics.num3,d=3*P.defaultRuleThickness),u=e.metrics.denom2);const p=r?r.depth:0,f=l?l.height:0;let m;if(0===h){const t=c-p-(f-u);t<d&&(c+=.5*(d-t),u+=.5*(d-t)),m=ne(i,[r,-c,l,u],"individualShift")}else{const t=e.metrics.axisHeight;c-p-(t+.5*h)<d&&(c+=d-(c-p-(t+.5*h))),t-.5*h-(f-u)<d&&(u+=d-(t-.5*h-(f-u)));const s=te(null," frac-line");s.applyStyle(this.getStyle()),s.height=h;const n=[];r&&(n.push(r),n.push(-c)),n.push(s),n.push(h/2-t),l&&(n.push(l),n.push(u)),m=ne(i,n,"individualShift")}m.classes+=" mfrac",m.height*=e.sizeMultiplier/t.mathstyle.sizeMultiplier,m.depth*=e.sizeMultiplier/t.mathstyle.sizeMultiplier;const g=e.size===B.DISPLAY.size?e.metrics.delim1:e.metrics.delim2,b=Qt.makeCustomSizedDelim("mopen",this.leftDelim,g,!0,t.clone({mathstyle:e})),y=Qt.makeCustomSizedDelim("mclose",this.rightDelim,g,!0,t.clone({mathstyle:e}));return b.applyStyle(this.getStyle()),y.applyStyle(this.getStyle()),ee([b,m,y],t.parentSize!==t.size?"sizing reset-"+t.parentSize+" "+t.size:"")}decomposeLeftright(t){if(!this.body)return this.leftDelim?new le("math","mopen",this.leftDelim).decompose(t):this.rightDelim?new le("math","mclose",this.rightDelim).decompose(t):null;const e=t.clone(),i=ue(e,this.body),s=e.mathstyle;let n=0,r=0,o=[];if(n=et.height(i)*s.sizeMultiplier,r=et.depth(i)*s.sizeMultiplier,this.leftDelim&&(o.push(Qt.makeLeftRightDelim("mopen",this.leftDelim,n,r,e)),o[o.length-1].applyStyle(this.getStyle())),i){for(let t=0;t<i.length;t++)if(i[t].delim){const s=i[t].caret,o=/ML__selected/.test(i[t].classes);i[t]=Qt.makeLeftRightDelim("minner",i[t].delim,n,r,e),i[t].caret=s,i[t].selected(o)}o=o.concat(i)}if(this.rightDelim){let t=this.rightDelim;"?"===t&&(t=(t={"(":")","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"}[this.leftDelim])||this.leftDelim,e.opacity=.5),o.push(Qt.makeLeftRightDelim("mclose",t,n,r,e)),o[o.length-1].applyStyle(this.getStyle())}return this.inner?ie(o,s.cls()):o}decomposeSurd(t){const e=t.mathstyle,i=ue(t.cramp(),this.body),s=P.defaultRuleThickness/e.sizeMultiplier;let n=s;e.id<B.TEXT.id&&(n=e.metrics.xHeight);let r=s+n/4;const o=Math.max(2*n,(et.height(i)+et.depth(i))*e.sizeMultiplier)+(r+s),a=te(Qt.makeCustomSizedDelim("","\\surd",o,!1,t),"sqrt-sign");a.applyStyle(this.getStyle());const l=a.height+a.depth-s;l>et.height(i)+et.depth(i)+r&&(r=(r+l-(et.height(i)+et.depth(i)))/2),a.setTop(a.height-et.height(i)-(r+s));const h=te(null,t.mathstyle.adjustTo(B.TEXT)+" sqrt-line");h.applyStyle(this.getStyle()),h.height=s;const c=ne(t,[i,r,h,s]);if(!this.index)return ee([a,c],"sqrt");const d=t.clone({mathstyle:B.SCRIPTSCRIPT}),u=te(ue(d,this.index),e.adjustTo(B.SCRIPTSCRIPT)),p=Math.max(a.height,c.height),f=Math.max(a.depth,c.depth),m=ne(t,[u],"shift",-.6*(p-f));return ee([te(m,"root"),a,c],"sqrt")}decomposeAccent(t){const e=t.mathstyle;let i=ue(t.cramp(),this.body);(this.superscript||this.subscript)&&(i=this.attachSupsub(t,ee(i),"mord"));let s=0;Array.isArray(this.body)&&1===this.body.length&&this.body[0].isCharacterBox()&&(s=et.skew(i));const n=Math.min(et.height(i),e.metrics.xHeight),r=et.makeSymbol("Main-Regular",this.accent,"math");r.italic=0;const o="\u20d7"===this.accent?" accent-vec":"";let a=te(te(r),"accent-body"+o);return(a=ne(t,[i,-n,a])).children[1].setLeft(2*s),ee(a,"accent")}decomposeLine(t){const e=t.mathstyle,i=ue(t.cramp(),this.body),s=P.defaultRuleThickness/e.sizeMultiplier,n=te(null,t.mathstyle.adjustTo(B.TEXT)+" "+this.position+"-line");let r;if(n.height=s,n.maxFontSize=1,"overline"===this.position)r=ne(t,[i,3*s,n,s]);else{const e=te(i);r=ne(t,[s,n,3*s,e],"top",et.height(e))}return ee(r,this.position)}decomposeOverunder(t){const e=ue(t,this.body),i=t.clone({mathstyle:"scriptstyle"}),s=this.overscript?te(ue(i,this.overscript),t.mathstyle.adjustTo(i.mathstyle)):null,n=this.underscript?te(ue(i,this.underscript),t.mathstyle.adjustTo(i.mathstyle)):null;return de(t,e,0,0,s,n,this.mathtype||"mrel")}decomposeOverlap(t){const e=te(ue(t,this.body),"inner");return ee([e,te(null,"fix")],"left"===this.align?"llap":"rlap")}decomposeRule(t){const e=t.mathstyle,i=ee("","rule");let s=this.shift&&!isNaN(this.shift)?this.shift:0;s/=e.sizeMultiplier;const n=this.width/e.sizeMultiplier,r=this.height/e.sizeMultiplier;return i.setStyle("border-right-width",n,"em"),i.setStyle("border-top-width",r,"em"),i.setStyle("margin-top",-(r-s),"em"),i.setStyle("border-color",t.color),i.width=n,i.height=r+s,i.depth=-s,i}decomposeOp(t){const e=t.mathstyle;let i,s=!1;e.size===B.DISPLAY.size&&"string"==typeof this.body&&"\\smallint"!==this.body&&(s=!0);let n=0,r=0;if(this.symbol?((i=et.makeSymbol(s?"Size2-Regular":"Size1-Regular",this.body,"op-symbol "+(s?"large-op":"small-op"))).type="mop",n=(i.height-i.depth)/2-e.metrics.axisHeight*e.sizeMultiplier,r=i.italic,this.bind(t,i)):Array.isArray(this.body)?(i=et.makeOp(ue(t,this.body)),this.bind(t,i)):i=this.makeSpan(t,this.body),this.superscript||this.subscript){const s=this.limits||"auto";return this.alwaysHandleSupSub||"limits"===s||"auto"===s&&e.size===B.DISPLAY.size?this.attachLimits(t,i,n,r):this.attachSupsub(t,i,"mop")}return this.symbol&&i.setTop(n),i}decomposeBox(t){const e=ee(ue(t,this.body)),i=te();i.setStyle("position","absolute");const s="number"==typeof this.padding?this.padding:P.fboxsep;i.setStyle("height",e.height+e.depth+2*s,"em"),i.setStyle("width",0!==s?"calc(100% + "+2*s+"em)":"100%"),i.setStyle("top",-s,"em"),i.setStyle("left",-s,"em"),i.setStyle("z-index","-1"),this.backgroundcolor&&i.setStyle("background-color",this.backgroundcolor),this.framecolor&&i.setStyle("border",P.fboxrule+"em solid "+this.framecolor),this.border&&i.setStyle("border",this.border),e.setStyle("display","inline-block"),e.setStyle("height",e.height+e.depth,"em"),e.setStyle("vertical-align",-e.depth+s,"em");const n=te([i,e]);return n.setStyle("position","relative"),n.setStyle("vertical-align",-s+e.depth,"em"),n.height=e.height+s,n.depth=e.depth+s,n.setLeft(s),n.setRight(s),n}decomposeEnclose(t){const e=ee(ue(t,this.body)),i="auto"===this.padding?.2:this.padding;e.setStyle("padding",i,"em"),e.setStyle("display","inline-block"),e.setStyle("height",e.height+e.depth,"em"),e.setStyle("left",-i,"em"),this.backgroundcolor&&"transparent"!==this.backgroundcolor&&e.setStyle("background-color",this.backgroundcolor);let s="";if(this.notation.box&&e.setStyle("border",this.borderStyle),this.notation.actuarial&&(e.setStyle("border-top",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(e.setStyle("border-bottom",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(e.setStyle("border-radius",(et.height(e)+et.depth(e))/2,"em"),e.setStyle("border",this.borderStyle)),this.notation.circle&&(e.setStyle("border-radius","50%"),e.setStyle("border",this.borderStyle)),this.notation.top&&e.setStyle("border-top",this.borderStyle),this.notation.left&&e.setStyle("border-left",this.borderStyle),this.notation.right&&e.setStyle("border-right",this.borderStyle),this.notation.bottom&&e.setStyle("border-bottom",this.borderStyle),this.notation.horizontalstrike&&(s+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.verticalstrike&&(s+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.updiagonalstrike&&(s+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.downdiagonalstrike&&(s+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),s){let t;return"none"!==this.shadow&&(t="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),et.makeSVG(e,s,t)}return e}decompose(t,e){let i=null;if(!this.type||/mord|minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(this.type)?(i=this.makeSpan(t,"string"==typeof this.body?this.body:ue(t,this.body))).type=this.type:"group"===this.type||"root"===this.type?i=this.decomposeGroup(t):"array"===this.type?i=this.decomposeArray(t):"genfrac"===this.type?i=this.decomposeGenfrac(t):"surd"===this.type?i=this.decomposeSurd(t):"accent"===this.type?i=this.decomposeAccent(t):"leftright"===this.type?i=this.decomposeLeftright(t):"delim"===this.type?(i=te(null,"")).delim=this.delim:"sizeddelim"===this.type?i=this.bind(t,Qt.makeSizedDelim(this.cls,this.delim,this.size,t)):"line"===this.type?i=this.decomposeLine(t):"overunder"===this.type?i=this.decomposeOverunder(t):"overlap"===this.type?i=this.decomposeOverlap(t):"rule"===this.type?i=this.decomposeRule(t):"styling"===this.type||("msubsup"===this.type?(i=ee("\u200b"),e&&(i.height=e[0].height,i.depth=e[0].depth)):"mop"===this.type?i=this.decomposeOp(t):"space"===this.type?i=this.makeSpan(t," "):"spacing"===this.type?"\u200b"===this.body?i=this.makeSpan(t,"\u200b"):"\xa0"===this.body?i=this.makeSpan(t,"math"===this.mode?" ":"\xa0"):this.width?(i=te("\u200b","mspace "),this.width>0?i.setWidth(this.width):i.setStyle("margin-left",this.width,"em")):i=te("\u200b","mspace "+({qquad:"qquad",quad:"quad",enspace:"enspace",";":"thickspace",":":"mediumspace",",":"thinspace","!":"negativethinspace"}[this.body]||"quad")):"mathstyle"===this.type?t.setMathstyle(this.mathstyle):"box"===this.type?i=this.decomposeBox(t):"enclose"===this.type?i=this.decomposeEnclose(t):"command"===this.type||"error"===this.type?((i=this.makeSpan(t,this.body)).classes="",this.error&&(i.classes+=" ML__error"),this.suggestion&&(i.classes+=" ML__suggestion")):"placeholder"===this.type?i=this.makeSpan(t,"\u2b1a"):"first"===this.type&&(i=this.makeSpan(t,"\u200b"))),!i)return i;if(this.caret&&"styling"!==this.type&&"msubsup"!==this.type&&"command"!==this.type&&"placeholder"!==this.type&&"first"!==this.type&&(Array.isArray(i)?i[i.length-1].caret=this.caret:i.caret=this.caret),!this.limits&&(this.superscript||this.subscript))if(Array.isArray(i)){const e=i[i.length-1];i[i.length-1]=this.attachSupsub(t,e,e.type)}else i=[this.attachSupsub(t,i,i.type)];return Array.isArray(i)?i:[i]}attachSupsub(t,e,i){if(!this.superscript&&!this.subscript)return e;const s=t.mathstyle;let n=null,r=null;if(this.superscript){const e=ue(t.sup(),this.superscript);n=te(e,s.adjustTo(s.sup()))}if(this.subscript){const e=ue(t.sub(),this.subscript);r=te(e,s.adjustTo(s.sub()))}let o,a=0,l=0;this.isCharacterBox()||(a=et.height(e)-s.metrics.supDrop,l=et.depth(e)+s.metrics.subDrop),o=s===B.DISPLAY?s.metrics.sup1:s.cramped?s.metrics.sup3:s.metrics.sup2;const h=.5/P.ptPerEm/(B.TEXT.sizeMultiplier*s.sizeMultiplier);let c=null;if(r&&n){a=Math.max(a,o,n.depth+.25*s.metrics.xHeight),l=Math.max(l,s.metrics.sub2);const i=P.defaultRuleThickness;if(a-et.depth(n)-(et.height(r)-l)<4*i){l=4*i-(a-n.depth)+et.height(r);const t=.8*s.metrics.xHeight-(a-et.depth(n));t>0&&(a+=t,l-=t)}c=ne(t,[r,l,n,-a],"individualShift"),this.symbol&&c.children[0].setLeft(-et.italic(e))}else r&&!n?(l=Math.max(l,s.metrics.sub1,et.height(r)-.8*s.metrics.xHeight),(c=ne(t,[r],"shift",l)).children[0].setRight(h),this.isCharacterBox()&&c.children[0].setLeft(-et.italic(e))):!r&&n&&(a=Math.max(a,o,n.depth+.25*s.metrics.xHeight),(c=ne(t,[n],"shift",-a)).children[0].setRight(h));const d=te(c,"msubsup");return this.caret&&(d.caret=this.caret),et.makeSpanOfType(i,[e,d])}attachLimits(t,e,i,s){const n=this.superscript?te(ue(t.sup(),this.superscript),t.mathstyle.adjustTo(t.mathstyle.sup())):null,r=this.subscript?te(ue(t.sub(),this.subscript),t.mathstyle.adjustTo(t.mathstyle.sub())):null;return de(t,e,i,s,n,r,"mop")}bind(t,e){return"first"!==this.type&&"\u200b"!==this.body&&(this.id=function(t){let e;return"boolean"==typeof t.generateID&&t.generateID?e=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36):"boolean"!=typeof t.generateID&&(t.generateID.overrideID?e=t.generateID.overrideID:(e=t.generateID.seed.toString(36),t.generateID.seed+=1)),e}(t),this.id&&(e.attributes||(e.attributes={}),e.attributes["data-atom-id"]=this.id)),e}makeSpan(t,e){const i=et.makeSpanOfType("textord"===this.type?"mord":this.type,e),s=this.getStyle();i.applyStyle(s);const n=s&&s.fontSize?s.fontSize:"size5";return n!==t.parentSize?(i.classes+=" sizing reset-"+t.parentSize,i.classes+=" "+n):t.parentSize!==t.size&&(i.classes+=" sizing reset-"+t.parentSize,i.classes+=" "+t.size),i.maxFontSize=Math.max(i.maxFontSize,t.sizeMultiplier||1),"text"===this.mode&&(i.classes+=" ML__text"),t.mathstyle.isTight()&&(i.isTight=!0),"math"!==this.mode&&(i.italic=0),i.setRight(i.italic),"number"==typeof t.opacity&&i.setStyle("opacity",t.opacity),this.bind(t,i),this.caret&&(this.superscript||this.subscript||(i.caret=this.caret,t.mathstyle.isTight()&&(i.isTight=!0))),i}}function he(t){const e=te("\u200b","arraycolsep");return e.setWidth(t,"em"),e}function ce(t,e,i,s){const n=[];for(const r of e){const e=te(ue(t,s));e.depth=r.depth,e.height=r.height,n.push(e),n.push(r.pos-i)}return ne(t,n,"individualShift")}function de(t,e,i,s,n,r,o){if(!n&&!r)return e;e=te(e);let a=0,l=0;n&&(a=Math.max(P.bigOpSpacing1,P.bigOpSpacing3-n.depth)),r&&(l=Math.max(P.bigOpSpacing2,P.bigOpSpacing4-r.height));let h=null;if(r&&n){const o=P.bigOpSpacing5+et.height(r)+et.depth(r)+l+et.depth(e)+i;(h=ne(t,[P.bigOpSpacing5,r,l,e,a,n,P.bigOpSpacing5],"bottom",o)).children[0].setLeft(-s),h.children[2].setLeft(s)}else if(r&&!n){const n=et.height(e)-i;(h=ne(t,[P.bigOpSpacing5,r,l,e],"top",n)).children[0].setLeft(-s)}else if(!r&&n){const r=et.depth(e)+i;(h=ne(t,[e,a,n,P.bigOpSpacing5],"bottom",r)).children[1].setLeft(s)}return et.makeSpanOfType(o,h,"op-limits")}function ue(t,e){t instanceof Y.Context||(t=new Y.Context(t));const i=!t.generateID||!t.generateID.groupNumbers;let s=[];if(Array.isArray(e)){if(0===e.length)return s;if(1===e.length)(s=e[0].decompose(t))&&i&&e[0].isSelected&&s.forEach(t=>t.selected(!0));else{let n="none",r=e[1].type,o=[],a=null,l=null;for(let h=0;h<e.length;h++){"mbin"===e[h].type&&(/first|none|mrel|mpunct|mopen|mbin|mop/.test(n)||/none|mrel|mpunct|mclose/.test(r))&&(e[h].type="mord"),"\u200b"===e[h].body&&(e[h].superscript||e[h].subscript)||(l=null),t.generateID.groupNumbers&&a&&"mord"===e[h].type&&/[0-9,.]/.test(e[h].latex)&&(t.generateID.overrideID=a);const c=e[h].decompose(t,l);if(t.generateID&&(t.generateID.overrideID=null),c){const n=[].concat.apply([],c);l=n,t.generateID&&t.generateID.groupNumbers&&("mord"===e[h].type&&/[0-9,.]/.test(e[h].latex)&&(a||(a=e[h].id)),("mord"!==e[h].type||/[0-9,.]/.test(e[h].latex)||e[h].superscript||e[h].subscript)&&a&&(a=null)),i&&e[h].isSelected?(o=o.concat(n)).forEach(t=>t.selected(!0)):(o.length>0&&(s=[...s,...o],o=[]),s=s.concat(n))}n=e[h].getFinalBaseElement().type,r=e[h+1]?e[h+1].getInitialBaseElement().type:"none"}o.length>0&&(s=[...s,...o],o=[])}}else e&&(s=e.decompose(t))&&i&&e.isSelected&&s.forEach(t=>t.selected(!0));if(!s||0===s.length)return null;if(t.mathstyle!==t.parentMathstyle){const e=t.mathstyle.sizeMultiplier/t.parentMathstyle.sizeMultiplier;for(const t of s)t.height*=e,t.depth*=e}if(t.size!==t.parentSize){const e=ae[t.size]/ae[t.parentSize];for(const t of s)t.height*=e,t.depth*=e}return s}var pe={MathAtom:le,decompose:ue,makeRoot:function(t,e){const i=new le(t=t||"math","root",e||[]);return 0!==i.body.length&&"first"===i.body[0].type||i.body.unshift(new le("","first")),i},GREEK_REGEX:re};const fe={m0:"#3f3d99",m1:"#993d71",m2:"#998b3d",m3:"#3d9956",m4:"#3d5a99",m5:"#993d90",m6:"#996d3d",m7:"#43993d",m8:"#3d7999",m9:"#843d99"},me={apricot:"#FBB982",aquamarine:"#00B5BE",bittersweet:"#C04F17",black:"#221E1F",blue:"#2D2F92",bluegreen:"#00B3B8",blueviolet:"#473992",brickred:"#B6321C",brown:"#792500",burntorange:"#F7921D",cadetblue:"#74729A",carnationpink:"#F282B4",cerulean:"#00A2E3",cornflowerblue:"#41B0E4",cyan:"#00AEEF",dandelion:"#FDBC42",darkorchid:"#A4538A",emerald:"#00A99D",forestgreen:"#009B55",fuchsia:"#8C368C",goldenrod:"#FFDF42",gray:"#949698",green:"#00A64F",greenyellow:"#DFE674",junglegreen:"#00A99A",lavender:"#F49EC4",limegreen:"#8DC73E",magenta:"#EC008C",mahogany:"#A9341F",maroon:"#AF3235",melon:"#F89E7B",midnightblue:"#006795",mulberry:"#A93C93",navyblue:"#006EB8",olivegreen:"#3C8031",orange:"#F58137",orangered:"#ED135A",orchid:"#AF72B0",peach:"#F7965A",periwinkle:"#7977B8",pinegreen:"#008B72",plum:"#92268F",processblue:"#00B0F0",purple:"#99479B",rawsienna:"#974006",red:"#ED1B23",redorange:"#F26035",redviolet:"#A1246B",rhodamine:"#EF559F",royalblue:"#0071BC",royalpurple:"#613F99",rubinered:"#ED017D",salmon:"#F69289",seagreen:"#3FBC9D",sepia:"#671800",skyblue:"#46C5DD",springgreen:"#C6DC67",tan:"#DA9D76",tealblue:"#00AEB3",thistle:"#D883B7",turquoise:"#00B4CE",violet:"#58429B",violetred:"#EF58A0",white:"#FFFFFF",wildstrawberry:"#EE2967",yellow:"#FFF200",yellowgreen:"#98CC70",yelloworange:"#FAA21A"};var ge={stringToColor:function(t){const e=t.toLowerCase().split("!");let i,s,n,r=255,o=255,a=255,l=-1;const h=e.length>0&&"-"===e[0].charAt(0);h&&(e[0]=e[0].slice(1));for(let c=0;c<e.length;c++){i=r,s=o,n=a;let t=e[c].match(/([a-z0-9]*)/);t&&(t=t[1]);let h=me[t]||fe[t];h||(h=e[c]);let d=h.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(d&&d[1]&&d[2]&&d[3])r=Math.max(0,Math.min(255,parseInt(d[1],16))),o=Math.max(0,Math.min(255,parseInt(d[2],16))),a=Math.max(0,Math.min(255,parseInt(d[3],16)));else if((d=h.match(/^#([0-9a-f]{3})$/i))&&d[1]){const t=parseInt(d[1][0],16),e=parseInt(d[1][1],16),i=parseInt(d[1][2],16);r=Math.max(0,Math.min(255,16*t+t)),o=Math.max(0,Math.min(255,16*e+e)),a=Math.max(0,Math.min(255,16*i+i))}else{if(!((d=h.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))&&d[1]&&d[2]&&d[3]))return null;r=Math.max(0,Math.min(255,parseInt(d[1]))),o=Math.max(0,Math.min(255,parseInt(d[2]))),a=Math.max(0,Math.min(255,parseInt(d[3])))}l>=0&&(r=(1-l)*r+l*i,o=(1-l)*o+l*s,a=(1-l)*a+l*n,l=-1),c+1<e.length&&(l=Math.max(0,Math.min(100,parseInt(e[++c])))/100)}return l>=0&&(r=l*r+(1-l)*i,o=l*o+(1-l)*s,a=l*a+(1-l)*n),h&&(r=255-r,o=255-o,a=255-a),"#"+("00"+Math.round(r).toString(16)).slice(-2)+("00"+Math.round(o).toString(16)).slice(-2)+("00"+Math.round(a).toString(16)).slice(-2)},colorToString:function(t){let e=t.toUpperCase();for(const i in me)if(me[i]===e){e=i;break}for(const i in fe)if(fe[i]===e){e=i;break}return e},AREA_COLORS:["#d35d60","#7293cb","#e1974d","#84bb5d","#9066a7","#aD6a58","#f5a4ce","#fff590","#212121","#818787","#d4d5d2","#ffffff"],LINE_COLORS:["#cc2428","#3769b1","#da7e30","#409852","#6b4c9a","#922426","#e7298a","#ffe907","#000000","#525055","#adafaa","#ffffff"]};const be=pe.MathAtom;class ye{constructor(t,e,i){this.tokens=t,this.index=0,this.args=e,this.macros=i,this.mathList=[],this.style={},this.parseMode="math",this.tabularMode=!1,this.endCount=0}swapMathList(t){const e=this.mathList;return this.mathList=t||[],e}swapParseMode(t){const e=this.parseMode;return this.parseMode=t,e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:null}peek(t){const e=this.index+(t||0);return e<this.tokens.length?this.tokens[e]:null}lastMathAtom(){const t=0===this.mathList.length?"none":this.mathList[this.mathList.length-1].type;if("mop"!==t&&"msubsup"!==t){const t=new be(this.parseMode,"msubsup","\u200b");t.attributes={"aria-hidden":!0},this.mathList.push(t)}return this.mathList[this.mathList.length-1]}hasToken(t){const e=this.index;return e<this.tokens.length&&this.tokens[e].type===t}hasLiteral(t){const e=this.index;return e<this.tokens.length&&"literal"===this.tokens[e].type&&(!t||this.tokens[e].value===t)}hasLiteralPattern(t){return this.hasToken("literal")&&t.test(this.tokens[this.index].value)}hasCommand(t){const e=this.index;return e<this.tokens.length&&"command"===this.tokens[e].type&&this.tokens[e].value===t}hasInfixCommand(){const t=this.index;if(t<this.tokens.length&&"command"===this.tokens[t].type){const e=Rt.getInfo("\\"+this.tokens[t].value,this.parseMode,this.macros);return e&&e.infix}return!1}hasColumnSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"literal"===this.tokens[t].type&&"&"===this.tokens[t].value}hasRowSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&"command"===this.tokens[t].type&&("\\"===this.tokens[t].value||"cr"===this.tokens[t].value)}parseColumnSeparator(){return!!this.hasColumnSeparator()&&(this.index++,!0)}placeholder(){if(this.args&&"string"==typeof this.args["?"])return ve(v.tokenize(this.args["?"]),this.parseMode,null,this.macros);const t=new be(this.parseMode,"placeholder","?",this.style);return t.captureSelection=!0,[t]}hasImplicitCommand(t){if(this.index<this.tokens.length){const e=this.tokens[this.index];if("command"===e.type)return t.includes(e.value)}return!1}parseRowSeparator(){return!!this.hasRowSeparator()&&(this.index++,!0)}parseToken(t){return!!this.hasToken(t)&&(this.index++,!0)}skipWhitespace(){let t=!1;for(;this.hasToken("space");)this.index++,t=!0;return t}skipUntilToken(t){for(;!this.end()&&!this.parseToken(t);)this.get()}parseCommand(t){return!!this.hasCommand(t)&&(this.index++,!0)}parseLiteral(t){return!!this.hasLiteral(t)&&(this.index++,!0)}parseFiller(){let t=!1,e=!1;do{const i=this.skipWhitespace(),s=this.parseCommand("relax");t=t||i||s,e=!i&&!s}while(!e);return t}parseKeyword(t){const e=this.index;let i=this.end(),s="";for(;!i;){const e=this.get();"literal"===e.type&&(s+=e.value),i=this.end()||"literal"!==e.type||s.length>=t.length}const n=t.toUpperCase()===s.toUpperCase();return n||(this.index=e),n}scanString(){let t="",e=this.end();for(;!e;){if(this.hasLiteral("]"))e=!0;else if(this.hasToken("literal"))t+=this.get().value;else if(this.skipWhitespace())t+=" ";else if(this.hasToken("command")){const e=this.get();t+="space"===e.value?"\xa0":e.value}else e=!0;e=e||this.end()}return t}scanColor(){return ge.stringToColor(this.scanString())}scanNumber(t){const e=this.parseLiteral("-");e||this.parseLiteral("+"),this.skipWhitespace(),t=!!t;let i=10,s=/[0-9]/;this.parseLiteral("'")?(i=8,s=/[0-7]/,t=!0):(this.parseLiteral('"')||this.parseLiteral("x"))&&(i=16,s=/[0-9A-F]/,t=!0);let n="";for(;this.hasLiteralPattern(s);)n+=this.get().value;if(!t&&(this.parseLiteral(".")||this.parseLiteral(",")))for(n+=".";this.hasLiteralPattern(s);)n+=this.get().value;const r=t?parseInt(n,i):parseFloat(n);return e?-r:r}scanDimen(){const t=this.scanNumber(!1);return this.skipWhitespace(),this.parseKeyword("pt")?E.toEm(t,"pt"):this.parseKeyword("mm")?E.toEm(t,"mm"):this.parseKeyword("cm")?E.toEm(t,"cm"):this.parseKeyword("ex")?E.toEm(t,"ex"):this.parseKeyword("px")?E.toEm(t,"px"):this.parseKeyword("em")?E.toEm(t,"em"):this.parseKeyword("bp")?E.toEm(t,"bp"):this.parseKeyword("dd")?E.toEm(t,"dd"):this.parseKeyword("pc")?E.toEm(t,"pc"):this.parseKeyword("in")?E.toEm(t,"in"):this.parseKeyword("mu")?E.toEm(t,"mu"):E.toEm(t,"pt")}scanSkip(){const t=this.scanDimen();return this.skipWhitespace(),this.parseKeyword("plus")&&this.scanDimen(),this.skipWhitespace(),this.parseKeyword("minus")&&this.scanDimen(),t}scanColspec(){this.skipWhitespace();const t=[];for(;!this.end()&&!this.hasToken("}")&&!this.hasLiteral("]");)if(this.hasLiteral()){const e=this.get().value;if("lcr".includes(e))t.push({align:e});else if("|"===e)t.push({rule:!0});else if("@"===e){if(this.parseToken("{")){const e=this.swapParseMode("math");t.push({gap:this.scanImplicitGroup(t=>"}"===t.type)}),this.swapParseMode(e)}this.parseToken("}")}}return t}scanModeSet(){let t;if(this.parseCommand("(")&&(t=")"),!t&&this.parseCommand("[")&&(t="]"),!t)return null;const e=this.swapParseMode("math"),i=new be("math","group");return i.mathstyle=")"===t?"textstyle":"displaystyle",i.body=this.scanImplicitGroup(e=>"command"===e.type&&e.value===t),this.parseCommand(t),this.swapParseMode(e),i.body&&0!==i.body.length?i:null}scanModeShift(){if(!this.hasToken("$")&&!this.hasToken("$$"))return null;const t=this.get().type,e=new be("math","group");e.mathstyle="$"===t?"textstyle":"displaystyle",e.latexOpen="textstyle"===e.mathstyle?"$":"$$",e.latexClose=e.latexOpen;const i=this.swapParseMode("math");return e.body=this.scanImplicitGroup(e=>e.type===t),this.parseToken(t),this.swapParseMode(i),e.body&&0!==e.body.length?e:null}scanEnvironment(){if(!this.parseCommand("begin"))return null;const t=this.scanArg("string"),e=Rt.getEnvironmentInfo(t),i=[];if(e&&e.params)for(const u of e.params)if(u.optional){const t=this.scanOptionalArg(u.type);i.push(t)}else i.push(this.scanArg(u.type));const s=this.parseMode,n=this.tabularMode,r=this.swapMathList([]);this.tabularMode=e.tabular;const o=[],a=[];let l=[],h=!1;do{if(!(h=this.end())&&this.parseCommand("end")&&(h=this.scanArg("string")===t),!h)if(this.parseColumnSeparator())l.push(this.swapMathList([]));else if(this.parseRowSeparator()){l.push(this.swapMathList([]));let t=0;this.skipWhitespace(),this.parseLiteral("[")&&(t=this.scanDimen(),this.skipWhitespace(),this.parseLiteral("]")),a.push(t||0),o.push(l),l=[]}else this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!h);l.push(this.swapMathList([])),l.length>0&&o.push(l);const c=this.swapMathList(r);if(this.parseMode=s,this.tabularMode=n,!e.tabular&&0===c.length)return null;if(e.tabular&&0===o.length)return null;const d=new be(this.parseMode,"array",c,e.parser?e.parser(t,i,o):{});return d.array=o,d.rowGaps=a,d.env={...e},d.env.name=t,d}scanImplicitGroup(t){const e=this.style;t||(t=(t=>"}"===t.type||"literal"===t.type&&"&"===t.value||"command"===t.type&&/^(end|cr|\\)$/.test(t.value)));let i=null,s=null;const n=this.swapMathList([]);for(;!this.end()&&!t(this.peek());)if(this.hasImplicitCommand(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"])){this.parseMode="math";const t=new be("math","mathstyle");t.mathstyle=this.get().value,this.mathList.push(t)}else this.hasInfixCommand()&&!i?(i=this.get(),s=this.swapMathList([])):this.parseAtom();let r;if(i){const t=this.swapMathList(n),e=Rt.getInfo("\\"+i.value,"math",this.macros);r=e?[new be(this.parseMode,e.type,e.value||i.value,e.parse?e.parse("\\"+i.value,[s,t]):null)]:[new be(this.parseMode,"mop",i.value)]}else r=this.swapMathList(n);return this.style=e,r}scanGroup(){if(!this.parseToken("{"))return null;const t=new be(this.parseMode,"group");return t.body=this.scanImplicitGroup(t=>"}"===t.type),this.parseToken("}"),t.latexOpen="{",t.latexClose="}",t}scanSmartFence(){if(this.skipWhitespace(),!this.parseLiteral("("))return null;const t=new be(this.parseMode,"leftright");t.leftDelim="(",t.inner=!1;const e=this.swapMathList([]);let i=1;for(;!this.end()&&0!==i;)this.hasLiteral("(")&&(i+=1),this.hasLiteral(")")&&(i-=1),0!==i&&this.parseAtom();return 0===i&&this.parseLiteral(")"),t.rightDelim=0===i?")":"?",t.body=this.swapMathList(e),t}scanDelim(){this.skipWhitespace();const t=this.get();if(!t)return null;let e=".";"command"===t.type?e="\\"+t.value:"literal"===t.type&&(e=t.value);const i=Rt.getInfo(e,"math",this.macros);return i?"mopen"===i.type||"mclose"===i.type?e:/^(\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(e)?e:null:null}scanLeftRight(){if(this.parseCommand("right")||this.parseCommand("mright")){const t=new be(this.parseMode,"leftright");return t.rightDelim=this.scanDelim()||".",t}const t=this.style;let e="right";if(!this.parseCommand("left")){if(!this.parseCommand("mleft"))return null;e="mright"}const i=this.scanDelim()||".",s=this.swapMathList([]);for(;!this.end()&&!this.parseCommand(e);)this.parseAtom();this.style=t;const n=this.scanDelim(),r=new be(this.parseMode,"leftright");return r.leftDelim=i,r.rightDelim=n,r.inner="right"===e,r.body=this.swapMathList(s),r}parseSupSub(){if("math"!==this.parseMode)return!1;let t=!1;for(;this.hasLiteral("^")||this.hasLiteral("_")||this.hasLiteral("'");){let e;if(this.hasLiteral("^")?e="superscript":this.hasLiteral("_")&&(e="subscript"),this.parseLiteral("^")||this.parseLiteral("_")){const i=this.scanArg();if(i){const s=this.lastMathAtom();s[e]=s[e]||[],s[e]=s[e].concat(i),t=!0}}else if(this.parseLiteral("'")){const e=this.lastMathAtom();e.superscript=e.superscript||[],e.superscript.push(new be(e.parseMode,"mord","\u2032")),t=!0}}return t}parseLimits(){if(this.parseCommand("limits")){const t=this.lastMathAtom();return t.limits="limits",t.explicitLimits=!0,!0}if(this.parseCommand("nolimits")){const t=this.lastMathAtom();return t.limits="nolimits",t.explicitLimits=!0,!0}return!1}scanOptionalArg(t){if(t=t&&"auto"!==t?t:this.parseMode,this.skipWhitespace(),!this.parseLiteral("["))return null;const e=this.parseMode;this.parseMode=t;const i=this.swapMathList();let s;for(;!this.end()&&!this.parseLiteral("]");)if("string"===t)s=this.scanString();else if("number"===t)s=this.scanNumber();else if("dimen"===t)s=this.scanDimen();else if("skip"===t)s=this.scanSkip();else if("colspec"===t)s=this.scanColspec();else if("color"===t)s=this.scanColor()||"#ffffff";else if("bbox"===t){const t=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=ge.stringToColor(e);if(t)(s=s||{}).backgroundcolor=t;else{const t=e.match(/^\s*([0-9.]+)\s*([a-z][a-z])/);if(t)(s=s||{}).padding=E.toEm(t[1],t[2]);else{const t=e.match(/^\s*border\s*:\s*(.*)/);t&&((s=s||{}).border=t[1])}}}}else this.mathList=this.mathList.concat(this.scanImplicitGroup(t=>"literal"===t.type&&"]"===t.value));this.parseMode=e;const n=this.swapMathList(i);return s||n}scanArg(t){let e;if(t=t&&"auto"!==t?t:this.parseMode,this.parseFiller(),!this.parseToken("{")){if("delim"===t)return this.scanDelim()||".";if(/^(math|text)$/.test(t)){const e=this.parseMode;this.parseMode=t;const i=this.scanToken();return this.parseMode=e,Array.isArray(i)?i:i?[i]:null}}if(this.hasToken("#")){const t=this.get();return this.skipUntilToken("}"),"?"===t.value?this.placeholder():this.args?void 0===this.args[t.value]&&void 0!==this.args["?"]?this.placeholder():this.args[t.value]||null:null}const i=this.parseMode;this.parseMode=t;const s=this.swapMathList([]);if("string"===t)e=this.scanString(),this.skipUntilToken("}");else if("number"===t)e=this.scanNumber(),this.skipUntilToken("}");else if("dimen"===t)e=this.scanDimen(),this.skipUntilToken("}");else if("skip"===t)e=this.scanSkip(),this.skipUntilToken("}");else if("colspec"===t)e=this.scanColspec(),this.skipUntilToken("}");else if("color"===t)e=this.scanColor()||"#ffffff",this.skipUntilToken("}");else if("delim"===t)e=this.scanDelim()||".",this.skipUntilToken("}");else do{this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!this.parseToken("}")&&!this.end());this.parseMode=i;const n=this.swapMathList(s);return e||n}scanToken(){const t=this.get();if(!t)return null;let e=null;if("space"===t.type)"text"===this.parseMode&&(e=new be("text",""," ",this.style));else if("placeholder"===t.type)(e=new be(this.parseMode,"placeholder",t.value)).captureSelection=!0;else if("command"===t.type){if("placeholder"===t.value)(e=new be(this.parseMode,"placeholder",this.scanArg("string"),this.style)).captureSelection=!0;else if("char"===t.value){let t=Math.floor(this.scanNumber(!0));(!isFinite(t)||t<0||t>1114111)&&(t=10067),(e=new be(this.parseMode,"math"===this.parseMode?"mord":"",String.fromCodePoint(t))).latex='{\\char"'+("000000"+t.toString(16)).toUpperCase().substr(-6)+"}"}else if("hskip"===t.value||"kern"===t.value){const i=this.scanSkip();isFinite(i)&&((e=new be(this.parseMode,"spacing",null,this.style)).width=i),e.latex="\\"+t.value}else if(!(e=this.scanMacro(t.value))){const i=Rt.getInfo("\\"+t.value,this.parseMode,this.macros),s=[];let n="",r="";if(i&&i.params)for(const t of i.params)if(t.optional){const e=this.scanOptionalArg(t.type);s.push(e)}else if(t.type.endsWith("*"))r=t.type.slice(0,-1);else{const e=this.scanArg(t.type);if(e&&1===e.length&&"placeholder"===e[0].type&&t.placeholder&&(e[0].value=t.placeholder),e)s.push(e);else if(t.placeholder){const e=new be(this.parseMode,"placeholder",t.placeholder);e.captureSelection=!0,s.push([e])}else s.push(this.placeholder());"math"!==t.type&&"string"==typeof e&&(n+=e)}if(i&&!i.infix){if(i.parse){const n=i.parse("\\"+t.value,s);if(n.type)e=new be(this.parseMode,i.type,r?this.scanArg(r):null,{...this.style,...n});else{const t=this.parseMode;if(n.mode&&(this.parseMode=n.mode,delete n.mode),r){const t=this.style;this.style={...this.style,...n},e=this.scanArg(r),this.style=t}else this.style={...this.style,...n};this.parseMode=t}}else{const s={...this.style};i.baseFontFamily&&(s.baseFontFamily=i.baseFontFamily),e=new be(this.parseMode,i.type||"mop",i.value||t.value,s),i.skipBoundary&&(e.skipBoundary=!0)}if(e&&!/^(llap|rlap|class|cssId)$/.test(t.value)&&(e.latex="\\"+t.value,n&&(e.latex+="{"+n+"}"),e.isFunction&&this.smartFence)){const t=this.scanSmartFence();t&&(e=[e,t])}}i||((e=new be(this.parseMode,"error","\\"+t.value)).latex="\\"+t.value)}}else if("literal"===t.type){const i=Rt.getInfo(t.value,this.parseMode,this.macros);if(i){const s={...this.style};i.baseFontFamily&&(s.baseFontFamily=i.baseFontFamily),e=new be(this.parseMode,i.type,i.value||t.value,s),i.isFunction&&(e.isFunction=!0)}else e=new be(this.parseMode,"math"===this.parseMode?"mord":"",t.value,this.style);if(e.latex=Rt.matchCodepoint(this.parseMode,t.value.codePointAt(0)),i&&i.isFunction&&this.smartFence){const t=this.scanSmartFence();t&&(e=[e,t])}}else if("#"===t.type)if("?"===t.value)e=this.placeholder();else if(this.args)if(e=this.args[t.value]||null,Array.isArray(e)&&1===e.length)e=e[0];else if(Array.isArray(e)){const t=new be(this.parseMode,"group");t.body=e,e=t}else e=this.placeholder();return e}scanMacro(t){if(!this.macros||!this.macros[t])return null;const e={};let i,s=0;"string"==typeof this.macros[t]?(/(^|[^\\])#1/.test(i=this.macros[t])&&(s=1),/(^|[^\\])#2/.test(i)&&(s=2),/(^|[^\\])#3/.test(i)&&(s=3),/(^|[^\\])#4/.test(i)&&(s=4),/(^|[^\\])#5/.test(i)&&(s=5),/(^|[^\\])#6/.test(i)&&(s=6),/(^|[^\\])#7/.test(i)&&(s=7),/(^|[^\\])#8/.test(i)&&(s=8),/(^|[^\\])#9/.test(i)&&(s=9)):(i=this.macros[t].def,s=this.macros[t].args||0);for(let o=1;o<=s;o++)e[o]=this.scanArg();this.args&&"string"==typeof this.args["?"]&&(e["?"]=this.args["?"]);const n=new be(this.parseMode,"group",ve(v.tokenize(i),this.parseMode,e,this.macros));n.captureSelection=!0,n.latex="\\"+t;let r="";for(let o=1;o<=s;o++){if(r+="{",Array.isArray(e[o]))for(let t=0;t<e[o].length;t++)r+=e[o][t].latex;r+="}"}return n.latex+=r||"",n}parseAtom(){let t=this.scanEnvironment()||this.scanModeShift()||this.scanModeSet()||this.scanGroup()||this.scanLeftRight();return!(t||!this.parseSupSub()&&!this.parseLimits())||(t||(t=this.scanToken()),Array.isArray(t)?this.mathList=this.mathList.concat(t):t&&this.mathList.push(t),null!==t)}}function ve(t,e,i,s,n){let r=[];const o=new ye(t,i,s);for(o.parseMode=e||"math",n&&(o.smartFence=!0);!o.end();)r=r.concat(o.scanImplicitGroup());return r}var Ce={Parser:ye,parseTokens:ve};function xe(t,e){let i="";for(const s of t)i+=s.relation+":"+s.offset+"/";return e&&(i+="#"+e),i}function _e(t){const e={path:[],extent:0},i=t.split("#");i.length>1&&(e.extent=parseInt(i[1]));const s=i[0].split("/");for(const n of s){const t=n.match(/([^:]*):(.*)/);t&&e.path.push({relation:t[1],offset:parseInt(t[2])})}return e}var Pe={pathFromString:_e,pathToString:xe,pathDistance:function(t,e){let i=-1,s=!1;for(;!s;)s=(s=(i+=1)>=t.length||i>=e.length)||!(t[i].relation===e[i].relation&&t[i].offset===e[i].offset);return i===t.length&&i===e.length?0:i+1===t.length&&i+1===e.length&&t[i].relation===e[i].relation?1:2},pathCommonAncestor:function(t,e){const i=[],s=Math.min(t.length-1,e.length-1);let n=0;for(;n<=s&&t[n].relation===e[n].relation&&t[n].offset===e[n].offset;)i.push(t[n]),n+=1;return i},clone:function(t){return _e(xe(t)).path}};const Se={Left:"moveToPreviousChar",Right:"moveToNextChar",Up:"moveUp",Down:"moveDown","Shift-Left":"extendToPreviousChar","Shift-Right":"extendToNextChar","Shift-Up":"extendUp","Shift-Down":"extendDown",Backspace:"deletePreviousChar","Alt-Del":"deletePreviousChar",Del:"deleteNextChar","Alt-Backspace":"deleteNextChar","Alt-Left":"moveToPreviousWord","Alt-Right":"moveToNextWord","Alt-Shift-Left":"extendToPreviousWord","Alt-Shift-Right":"extendToNextWord","Ctrl-Left":"moveToGroupStart","Ctrl-Right":"moveToGroupEnd","Ctrl-Shift-Left":"extendToGroupStart","Ctrl-Shift-Right":"extendToGroupEnd","math:Spacebar":"moveAfterParent","math:Shift-Spacebar":"moveBeforeParent",Home:"moveToMathFieldStart","mac:Meta-Left":"moveToMathFieldStart","Shift-Home":"extendToMathFieldStart","mac:Meta-Shift-Left":"extendToMathFieldStart",End:"moveToMathFieldEnd","mac:Meta-Right":"moveToMathFieldEnd","Shift-End":"extendToMathFieldEnd","mac:Meta-Shift-Right":"extendToMathFieldEnd",PageUp:"moveToGroupStart",PageDown:"moveToGroupEnd","math:Tab":"moveToNextPlaceholder","math:F8":"moveToNextPlaceholder","math:Shift-Tab":"moveToPreviousPlaceholder","math:Shift-F8":"moveToPreviousPlaceholder","text:Tab":"moveToNextPlaceholder","text:F8":"moveToNextPlaceholder","text:Shift-Tab":"moveToPreviousPlaceholder","text:Shift-F8":"moveToPreviousPlaceholder","math:Esc":["switch-mode","command"],"math:Backslash":["switch-mode","command"],"math:IntlBackslash":["switch-mode","command"],"math:Alt-Equal":["apply-style",{mode:"text"}],"text:Alt-Equal":["apply-style",{mode:"math"}],"command:Esc":["complete",{discard:!0}],"command:Tab":["complete",{acceptSuggestion:!0}],"command:Return":"complete","command:Enter":"complete","command:Shift-Esc":["complete",{discard:!0}],"command:Down":"nextSuggestion","ios:command:Tab":"nextSuggestion","command:Up":"previousSuggestion","!mac:Ctrl-KeyA":"selectAll","mac:Meta-KeyA":"selectAll",Cut:"cut",Copy:"copy",Paste:"paste",Clear:"delete","!mac:Ctrl-KeyZ":"undo","mac:Meta-KeyZ":"undo",Undo:"undo","!mac:Ctrl-KeyY":"redo","mac:Meta-Shift-KeyY":"redo","!mac:Ctrl-Shift-KeyZ":"redo","mac:Meta-Shift-KeyZ":"redo",Redo:"redo",EraseEof:"deleteToGroupEnd","mac:Ctrl-KeyB":"moveToPreviousChar","mac:Ctrl-KeyF":"moveToNextChar","mac:Ctrl-KeyP":"moveUp","mac:Ctrl-KeyN":"moveDown","mac:Ctrl-KeyA":"moveToMathFieldStart","mac:Ctrl-KeyE":"moveToMathFieldEnd","mac:Ctrl-Shift-KeyB":"extendToPreviousChar","mac:Ctrl-Shift-KeyF":"extendToNextChar","mac:Ctrl-Shift-KeyP":"extendUp","mac:Ctrl-Shift-KeyN":"extendDown","mac:Ctrl-Shift-KeyA":"extendToMathFieldStart","mac:Ctrl-Shift-KeyE":"extendToMathFieldEnd","mac:Ctrl-Alt-KeyB":"moveToPreviousWord","mac:Ctrl-Alt-KeyF":"moveToNextWord","mac:Ctrl-Shift-Alt-KeyB":"extendToPreviousWord","mac:Ctrl-Shift-Alt-KeyF":"extendToNextWord","mac:Ctrl-KeyH":"deletePreviousChar","mac:Ctrl-KeyD":"deleteNextChar","mac:Ctrl-KeyL":"scrollIntoView","mac:Ctrl-KeyT":"transpose","math:Shift-Quote":["switch-mode","text","","\u201c"],"text:Shift-Quote":["switch-mode","math","\u201d",""],"math:Ctrl-Digit2":["insert","\\sqrt{#0}"],"math:Ctrl-Digit5":"moveToOpposite","math:Ctrl-Digit6":"moveToSuperscript","math:Ctrl-Minus":"moveToSubscript","math:Alt-BracketLeft":["insert","\\left\\lbrack #0 \\right\\rbrack"],"math:Alt-Shift-BracketLeft":["insert","\\left\\lbrace #0 \\right\\rbrace"],"math:Return":"addRowAfter","math:Enter":"addRowAfter","math:Ctrl-Comma":"addColumnAfter","math:Alt-KeyQ":["insert","\\theta"],"math:Alt-KeyP":["insert","\\pi"],"math:Alt-KeyV":["insert","\\sqrt{#0}"],"math:Alt-KeyW":["insert","\\sum_{i=#?}^{#?}"],"math:Alt-KeyB":["insert","\\int_{#?}^{#?}"],"math:Alt-KeyU":["insert","\\cup"],"math:Alt-KeyN":["insert","\\cap"],"math:Alt-KeyO":["insert","\\emptyset"],"math:Alt-KeyD":["insert","\\differentialD"],"math:Alt-Shift-KeyO":["insert","\\varnothing"],"math:Alt-Shift-KeyD":["insert","\\partial"],"math:Alt-Shift-KeyP":["insert","\\prod_{i=#?}^{#?}"],"math:Alt-Shift-KeyU":["insert","\\bigcup"],"math:Alt-Shift-KeyN":["insert","\\bigcap"],"math:Alt-Shift-KeyA":["insert","\\forall"],"math:Alt-Shift-KeyE":["insert","\\exists"],"math:Alt-Digit5":["insert","\\infty"],"math:Alt-Digit6":["insert","\\wedge"],"math:Alt-Shift-Digit6":["insert","\\vee"],"math:Alt-Digit9":["insert","("],"math:Alt-Digit0":["insert",")"],"math:Alt-Shift-Backslash":["insert","|"],"math:Alt-Backslash":["insert","\\backslash"],"math:Slash":["insert","\\frac{#@}{#?}"],"math:Alt-Slash":["insert","\\frac{#?}{#@}"],"math:NumpadDivide":["insert","\\frac{#@}{#?}"],"math:Alt-NumpadDivide":["insert","\\frac{#?}{#@}"],"math:Shift-Backquote":["insert","\\~"],"math:Alt-Shift-Slash":["insert","\\/"],"Alt-Shift-KeyK":"toggleKeystrokeCaption","Alt-Space":"toggleVirtualKeyboard","mac:Ctrl-Meta-Up":["speak","parent",{withHighlighting:!1}],"!mac:Ctrl-Alt-Up":["speak","parent",{withHighlighting:!1}],"mac:Ctrl-Meta-Down":["speak","group",{withHighlighting:!1}],"!mac:Ctrl-Alt-Down":["speak","group",{withHighlighting:!1}],"mac:Ctrl-Meta-Left":["speak","left",{withHighlighting:!1}],"!mac:Ctrl-Alt-Left":["speak","left",{withHighlighting:!1}],"mac:Ctrl-Meta-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Right":["speak","right",{withHighlighting:!1}],"!mac:Ctrl-Alt-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Period":["speak","selection",{withHighlighting:!1}],"mac:Ctrl-Meta-Shift-Up":["speak","parent",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Up":["speak","parent",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Down":["speak","group",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Down":["speak","group",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Left":["speak","left",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Left":["speak","left",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Right":["speak","right",{withHighlighting:!0}],"!mac:Ctrl-Alt-Shift-Period":["speak","selection",{withHighlighting:!0}],"mac:Ctrl-Meta-Shift-Period":["speak","selection",{withHighlighting:!0}]},we={"\\theta":"Alt-KeyQ","\\sqrt":["Alt-KeyV","Ctrl-Digit2"],"\\pi":"Alt-KeyP","\\prod":"Alt-Shift-KeyP","\\sum":"Alt-KeyW","\\int":"Alt-KeyB","\\cup":"Alt-KeyU","\\cap":"Alt-KeyN","\\bigcup":"Alt-Shift-KeyU","\\bigcap":"Alt-Shift-KeyN","\\forall":"Alt-Shift-KeyA","\\exists":"Alt-Shift-KeyE","\\infty":"Alt-Digit5","\\wedge":"Alt-Digit5","\\vee":"Alt-Shift-Digit6","\\differentialD":"Alt-keyD","\\partial":"Alt-Shift-KeyD","\\frac":"Slash","\\emptyset":"Alt-KeyO","\\varnothing":"Alt-Shift-KeyO","\\~":"~"},Ee={"''":{mode:"math",value:"^{\\doubleprime}"},alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:{mode:"math",value:"\\pi"},"pi ":{mode:"text",value:"\\pi "},"\u03c0":"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:{mode:"math",value:"\\nabla"},grad:{mode:"math",value:"\\nabla"},del:{mode:"math",value:"\\partial"},"\u221e":"\\infty",oo:{mode:"math",after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":{mode:"math",value:"\\sum"},sum:{mode:"math",value:"\\sum_{#?}^{#?}"},prod:{mode:"math",value:"\\prod_{#?}^{#?}"},sqrt:{mode:"math",value:"\\sqrt"},"\u2206":{mode:"math",value:"\\differentialD"},"\u2202":{mode:"math",value:"\\differentialD"},sin:{mode:"math",value:"\\sin"},cos:{mode:"math",value:"\\cos"},tan:{mode:"math",value:"\\tan"},tanh:{mode:"math",value:"\\tanh"},log:{mode:"math",value:"\\log"},ln:{mode:"math",value:"\\ln"},exp:{mode:"math",value:"\\exp"},lim:{mode:"math",value:"\\lim_{#?}"},dx:"\\differentialD x",dy:"\\differentialD y",dt:"\\differentialD t",AA:{mode:"math",value:"\\forall"},EE:{mode:"math",value:"\\exists"},"!EE":{mode:"math",value:"\\nexists"},"&&":{mode:"math",value:"\\land"},xin:{mode:"math",after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{mode:"math",after:"nothing+letter+closefence",value:"\\in"},"!in":{mode:"math",value:"\\notin"},NN:"\\N",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",PP:"\\P",xx:"\\times","+-":"\\pm","!=":"\\ne",">=":"\\ge","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},"eta ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta "},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},"mu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu "},nu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"nu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu "},"\xb5":"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","\u03a9":"\\omega",forall:"\\forall",exists:{mode:"math",value:"\\exists"},"!exists":{mode:"math",value:"\\nexists"},":.":{mode:"math",value:"\\therefore"},liminf:"\\operatorname*{lim~inf}_{#?}",limsup:"\\operatorname*{lim~sup}_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:{mode:"math",value:"\\mod"},max:{mode:"math",value:"\\max"},min:{mode:"math",value:"\\min"},erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:{mode:"math",value:"\\operatorname{bessel}"},mean:{mode:"math",value:"\\operatorname{mean}"},median:{mode:"math",value:"\\operatorname{median}"},fft:{mode:"math",value:"\\operatorname{fft}"},lcm:{mode:"math",value:"\\operatorname{lcm}"},gcd:{mode:"math",value:"\\operatorname{gcd}"},randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:{mode:"math",value:"\\operatorname{Re}"},Im:{mode:"math",value:"\\operatorname{Im}"},mm:{mode:"math",after:"nothing+digit",value:"\\operatorname{mm}"},cm:{mode:"math",after:"nothing+digit",value:"\\operatorname{cm}"},km:{mode:"math",after:"nothing+digit",value:"\\operatorname{km}"},kg:{mode:"math",after:"nothing+digit",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function ke(t,e,i){if(!i)return i;if("string"==typeof i)return i;if("string"==typeof i.mode&&i.mode!==t)return null;if(!e)return i?i.value:void 0;let s=!1,n=!1,r=!1,o=!1,a=!1,l=!1,h=!1,c=!1,d=!1,u=!1,p=!1,f=!1,m=!1,g=!1,b=e[e.length-1],y=e.length-1;for(;b&&/msubsup|placeholder/.test(b.type);)b=e[y-=1];return s=!b||"first"===b.type,b&&(n=!(m="text"===b.mode)&&"mord"===b.type&&Rt.LETTER.test(b.body),r=!m&&"mord"===b.type&&/[0-9]+$/.test(b.body),o=!m&&b.isFunction,a="genfrac"===b.type,l="surd"===b.type,h="mbin"===b.type,c="mrel"===b.type,d="mpunct"===b.type||"minner"===b.type,u=b.array,p="mopen"===b.type,f="mclose"===b.type||"leftright"===b.type,g="space"===b.type),void 0!==i.after?/nothing/.test(i.after)&&s||/letter/.test(i.after)&&n||/digit/.test(i.after)&&r||/function/.test(i.after)&&o||/frac/.test(i.after)&&a||/surd/.test(i.after)&&l||/binop/.test(i.after)&&h||/relop/.test(i.after)&&c||/punct/.test(i.after)&&d||/array/.test(i.after)&&u||/openfence/.test(i.after)&&p||/closefence/.test(i.after)&&f||/text/.test(i.after)&&m||/space/.test(i.after)&&g?i.value:null:i.value}function Ae(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}function Te(t){let e=t;return Array.isArray(e)&&e.length>0&&(e=e[0]+"("+e.slice(1).join("")+")"),e}function Me(t,e){let i="";Array.isArray(t)||(t=[t]);for(const s of t){let t;const n=s.match(/(^[^:]*):/),r=n?n[1]:"";if(r===Ae("mac")||r===Ae("win")||r===Ae("ios")||r===Ae("android")||r===Ae("chromeos")||r===Ae("other")){const e=s.match(/:([^:]*)$/);t=e?e[1]:s}else if(!["mac","!mac","win","!win","ios","!ios","android","!android","chromeos","!chromeos","other","!other"].includes(r)){const e=s.match(/:([^:]*)$/);t=e?e[1]:s}if(t){const s="mac"===Ae("mac")||"ios"===Ae("ios"),n=t.length>1?t.split("-"):[t];let r="";for(const t of n)!s&&r.length>0&&(r+='<span class="ML__shortcut-join">+</span>'),"Key"===t.substr(0,3)?r+=t.substr(3,1):"Digit"===t.substr(0,5)?r+=t.substr(5,1):r+={Meta:s?"\u2318":"command",Shift:s?"\u21e7":"shift",Alt:s?"\u2325":"alt",Ctrl:s?"\u2303":"control","\n":s?"\u23ce":"return",Return:s?"\u23ce":"return",Enter:s?"\u2324":"enter",Tab:s?"\u21e5":"tab",Esc:"esc",Backspace:s?"\u232b":"backspace",Del:s?"\u2326":"del",PageUp:s?"\u21de":"page up",PageDown:s?"\u21df":"page down",Home:s?"\u2912":"home",End:s?"\u2913":"end",Spacebar:"space",Semicolon:";",Period:".",Comma:",",Minus:"-",Equal:"=",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\",IntlBackslash:"\\",Backquote:"`",Slash:"/",NumpadMultiply:"* &#128290;",NumpadDivide:"/ &#128290;",NumpadSubtract:"- &#128290;",NumpadAdd:"+ &#128290;",NumpadDecimal:". &#128290;",NumpadComma:", &#128290;",Help:"help",Left:"\u21e0",Up:"\u21e1",Right:"\u21e2",Down:"\u21e3"}[t]||t;i.length>0&&(i+=e||" or "),i+=r}}return i}var Oe={KEYBOARD_SHORTCUTS:Se,INLINE_SHORTCUTS:Ee,stringify:Me,startsWithString:function(t,e){const i=[];for(let s=0;s<=t.length-1;s++){const n=t.substring(s);e&&e.overrideDefaultInlineShortcuts||Object.keys(Ee).forEach(t=>{t.startsWith(n)&&!i.includes(t)&&i.push(t)});const r=e&&e.inlineShortcuts?e.inlineShortcuts:null;r&&Object.keys(r).forEach(t=>{t.startsWith(n)&&i.push(t)})}return i},forString:function(t,e,i,s){let n="";s&&s.overrideDefaultInlineShortcuts||(n=ke(t,e,Ee[i]));const r=s&&s.inlineShortcuts?s.inlineShortcuts:null;let o;return r&&(o=ke(t,e,r[i])),o||n},selectorForKeystroke:function(t,e){for(const i of[Ae("mac")+":"+t+":"+e,Ae("win")+":"+t+":"+e,Ae("ios")+":"+t+":"+e,Ae("android")+":"+t+":"+e,Ae("chromeos")+":"+t+":"+e,Ae("other")+":"+t+":"+e,Ae("mac")+":"+e,Ae("win")+":"+e,Ae("ios")+":"+e,Ae("android")+":"+e,Ae("chromeos")+":"+e,t+":"+e,e])if(Se[i])return Se[i];return""},forCommand:function(t){let e=[];if("string"==typeof t){const i=we[t];Array.isArray(i)?e=i.slice():i&&e.push(i)}t=Te(t);const i=new RegExp("^"+t.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(const s in Se)if(Se.hasOwnProperty(s)&&i.test(Te(Se[s]))){const t=s.match(/:([^:]*)$/);t&&e.push(t[1])}return Me(e)}};function Ne(t,e){this.root=pe.makeRoot(),this.path=[{relation:"body",offset:0}],this.extent=0,this.config=t?{...t}:{},this.target=e,this.suppressChangeNotifications=!1}function Le(t){const e=Object.assign(new Ne(t.config,t.target),t);return e.path=Pe.clone(t.path),e}function De(t,e){let i=0;for(let s=0;s<e.row;s++)for(let e=0;e<t[s].length;e++)i+=1;return i+e.col}function je(t,e){if("string"==typeof e){const t=e.match(/cell([0-9]*)$/);t&&(e=parseInt(t[1]))}const i={row:0,col:0};for(;e>0;)i.col+=1,(!t[i.row]||i.col>=t[i.row].length)&&(i.col=0,i.row+=1),e-=1;return i}function Ie(t,e){let i;return"object"!=typeof e&&(e=je(t,e)),Array.isArray(t[e.row])&&(i=t[e.row][e.col]||null),!i||0!==i.length&&"first"===i[0].type||i.unshift(Je()),i}function Re(t){let e=0,i=1;for(const s of t)e+=1,s.length>i&&(i=s.length);return e*i}function Be(t,e,i){if(!t)return[];e||(e=",");let s,n=[];for(let r of t)r&&r.length>0&&"first"===r[0].type&&(r=r.slice(1)),r&&r.length>0&&(s?n.push(s):s=new pe.MathAtom("math","mpunct",e,i),n=n.concat(r));return n}function Fe(t,e,i){const s={...e};if(s.row+=i,s.row<0){if(s.col+=i,s.row=t.length-1,s.col<0)return null;for(;s.row>=0&&!Ie(t,s);)s.row-=1;if(s.row<0)return null}else if(s.row>=t.length){for(s.col+=i,s.row=0;s.row<t.length&&!Ie(t,s);)s.row+=1;if(s.row>t.length-1)return null}return s}function Ye(t){return!!t&&("mord"===t.type&&/[0-9.]/.test(t.body)||"mpunct"===t.type&&","===t.body)}function ze(t,e){if(!t)return!1;if(Array.isArray(t)){for(const i of t)if(ze(i,e))return!0}else{if(t===e)return!0;if(["body","numer","denom","index","subscript","superscript","underscript","overscript"].some(function(i){return i===e||ze(t[i],e)}))return!0;if(t.array)for(let i=Re(t.array);i>=0;i--)if(ze(Ie(t.array,i),e))return!0}return!1}function Xe(t){if(t)return 1===t.length&&"leftright"===t[0].type&&"("===t[0].leftDelim&&(t=t[0].body),t}function Ue(t,e){return t?t.length<=1?t:(e&&"ASCIIMath"===e.format||(t=t.replace(/\\\\([^\s\n])/g,"\\$1")),e&&"ASCIIMath"===e.format||!/\\/.test(t)?Ge(t=(t=(t=(t=(t=(t=t.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),e):t):""}function Ge(t,e){if(!t)return"";let i,s=!1;if(s||"^"!==t[0]&&"_"!==t[0]||(i=He(t.substr(1),{...e,noWrap:!0}),t=t[0]+"{"+i.match+"}",t+=Ge(i.rest,e),s=!0),s||(i=t.match(/^(sqrt|\u221a)(.*)/))&&(t="\\sqrt{"+(i=He(i[2],{...e,noWrap:!0})).match+"}",t+=Ge(i.rest,e),s=!0),s||(i=t.match(/^(\\cbrt|\u221b)(.*)/))&&(t="\\sqrt[3]{"+(i=He(i[2],{...e,noWrap:!0})).match+"}",t+=Ge(i.rest,e),s=!0),s||(i=t.match(/^abs(.*)/))&&(t="\\left|"+(i=He(i[1],{...e,noWrap:!0})).match+"\\right|",t+=Ge(i.rest,e),s=!0),s||(i=t.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/))&&(t="\\text{"+i[1]+"}",t+=Ge(i[2],e),s=!0),s||(i=t.match(/^([^a-zA-Z({[_^\\\s"]+)(.*)/))&&(t=qe(i[1],e),t+=Ge(i[2],e),s=!0),!s&&/^(f|g|h)[^a-zA-Z]/.test(t)&&(i=He(t.substring(1),e),t=t[0],t+=i.match,t+=Ge(i.rest,e),s=!0),s||(i=t.match(/^([a-zA-Z]+)(.*)/))&&(t=qe(i[1],e),t+=Ge(i[2],e),s=!0),!s)if((i=He(t,{...e,noWrap:!0})).match&&"/"===i.rest[0]){const n=He(i.rest.substr(1),{...e,noWrap:!0});n.match&&(t="\\frac{"+i.match+"}{"+n.match+"}"+Ge(n.rest,e)),s=!0}else i.match&&/^(\(|\{|\[)$/.test(t[0])?(t="\\left"+t[0]+i.match+"\\right"+{"(":")","{":"}","[":"]"}[t[0]]+Ge(i.rest,e),s=!0):i.match&&(t=i.match,t+=Ge(i.rest,e),s=!0);return s||(i=t.match(/^(\s+)(.*)$/))&&(t=" "+Ge(i[2],e),s=!0),t}function He(t,e){let i="",s=t=t.trim();const n=t.charAt(0),r={"(":")","{":"}","[":"]"}[n];if(r){let o=1,a=1;for(;a<t.length&&o>0;)t[a]===n&&o++,t[a]===r&&o--,a++;0===o?(i=e.noWrap&&"("===n&&")"===r?Ge(t.substring(1,a-1),e):"\\mleft"+n+Ge(t.substring(1,a-1),e)+"\\mright"+r,s=t.substring(a)):(i=t.substring(1,a),s="")}else{let n=t.match(/^([a-zA-Z]+)/);if(n){let i=Oe.forString("math",null,t,e);if(i)return{match:i=(i=i.replace("_{#?}","")).replace("^{#?}",""),rest:t.substring(i.length)}}if(n=t.match(/^([a-zA-Z])/))return{match:n[1],rest:t.substring(1)};if(n=t.match(/^(-)?\d+(\.\d*)?/))return{match:n[0],rest:t.substring(n[0].length)};/^\\(left|right)/.test(t)||(n=t.match(/^(\\[a-zA-Z]+)/))&&(s=t.substring(n[1].length),i=n[1])}return{match:i,rest:s}}function qe(t,e){let i=Oe.forString("math",null,t,e);return i?(i=(i=i.replace("_{#?}","")).replace("^{#?}",""),i+=" "):i=t,i}function Je(){return new pe.MathAtom("","first")}Ne.prototype._announce=function(t,e,i){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this.target,t,e,i)},Ne.prototype.filter=function(t,e){e=e<0?-1:1;const i=[],s=new Ne;s.path=Pe.clone(this.path),s.extent=this.extent,s.root=this.root,e>=0?s.collapseForward():(s.collapseBackward(),s.move(1));const n=s.anchor();do{t.bind(s)(s.path,s.anchor())&&i.push(s.toString()),e>=0?s.next({iterateAll:!0}):s.previous({iterateAll:!0})}while(n!==s.anchor());return i},Ne.prototype.forEach=function(t){this.root.forEach(t)},Ne.prototype.forEachSelected=function(t,e){(e=e||{}).recursive=void 0!==e.recursive&&e.recursive;const i=this.siblings(),s=this.startOffset()+1,n=this.endOffset()+1;if(e.recursive)for(let r=s;r<n;r++)i[r]&&"first"!==i[r].type&&i[r].forEach(t);else for(let r=s;r<n;r++)i[r]&&"first"!==i[r].type&&t(i[r])},Ne.prototype.toString=function(){return Pe.pathToString(this.path,this.extent)},Ne.prototype.adjustPlaceholder=function(){const t=this.siblings();if(t&&t.length<=1){let e;const i=this.relation();if("numer"===i?e="numerator":"denom"===i?e="denominator":"surd"===this.parent().type&&"body"===i?e="radicand":"overunder"===this.parent().type&&"body"===i?e="base":"underscript"!==i&&"overscript"!==i||(e="annotation"),e){const e=[new pe.MathAtom("math","placeholder","\u2b1a",this.anchorStyle())];Array.prototype.splice.apply(t,[1,0].concat(e))}}},Ne.prototype.selectionWillChange=function(){"function"!=typeof this.config.onSelectionWillChange||this.suppressChangeNotifications||this.config.onSelectionWillChange(this.target)},Ne.prototype.selectionDidChange=function(){"function"!=typeof this.config.onSelectionDidChange||this.suppressChangeNotifications||this.config.onSelectionDidChange(this.target)},Ne.prototype.contentWillChange=function(){"function"!=typeof this.config.onContentWillChange||this.suppressChangeNotifications||this.config.onContentWillChange(this.target)},Ne.prototype.contentDidChange=function(){"function"!=typeof this.config.onContentDidChange||this.suppressChangeNotifications||this.config.onContentDidChange(this.target)},Ne.prototype.setPath=function(t,e){if("string"==typeof t)t=Pe.pathFromString(t);else if(Array.isArray(t)){const i=Pe.clone(t),s=this.path;this.path=i,0===e&&"placeholder"===this.anchor().type&&(i[i.length-1].offset=0,e=1),t={path:i,extent:e||0},this.path=s}const i=0!==Pe.pathDistance(this.path,t.path),s=t.extent!==this.extent;return(i||s)&&(i&&this.adjustPlaceholder(),this.selectionWillChange(),this.path=Pe.clone(t.path),this.siblings().length<this.anchorOffset()?(this.path=[{relation:"body",offset:0}],this.extent=0):this.setExtent(t.extent),this.selectionDidChange()),i||s},Ne.prototype.wordBoundary=function(t,e){e=e<0?-1:1;const i=new Ne;i.path=Pe.clone(t),i.root=this.root;let s=0;for(;i.sibling(s)&&"text"===i.sibling(s).mode&&Rt.LETTER_AND_DIGITS.test(i.sibling(s).body);)s+=e;return i.sibling(s)||(s-=e),i.path[i.path.length-1].offset+=s,i.path},Ne.prototype.wordBoundaryOffset=function(t,e){e=e<0?-1:1;const i=this.siblings();if(!i[t])return t;if("text"!==i[t].mode)return t;let s;if(Rt.LETTER_AND_DIGITS.test(i[t].body)){let n,r=t;do{n="text"===i[r].mode&&Rt.LETTER_AND_DIGITS.test(i[r].body),r+=e}while(i[r]&&n);s=i[r]?r-2*e:r-e}else if(/\s/.test(i[t].body)){let n=t;for(;i[n]&&"text"===i[n].mode&&/\s/.test(i[n].body);)n+=e;if(i[n]){let t=!0;do{t="text"===i[n].mode&&!/\s/.test(i[n].body),n+=e}while(i[n]&&t);s=i[n]?n-2*e:n-e}else s=n-e}else{let n=t;for(;i[n]&&"text"===i[n].mode&&!/\s/.test(i[n].body);)n+=e;s=i[n]?n:n-e;let r=!0;for(;i[n]&&r;)(r="text"===i[n].mode&&/\s/.test(i[n].body))&&(s=n),n+=e;s=i[n]?n-2*e:n-e}return s-(e>0?0:1)},Ne.prototype.setRange=function(t,e,i){i=i||{};const s=Pe.pathDistance(t,e);if(0===s)return i.extendToWordBoundary?(t=this.wordBoundary(t,-1),e=this.wordBoundary(e,1),this.setRange(t,e)):this.setPath(Pe.clone(t),0);if(1===s){const s=e[e.length-1].offset-t[t.length-1].offset;return i.extendToWordBoundary?(t=this.wordBoundary(t,s<0?1:-1),e=this.wordBoundary(e,s<0?-1:1),this.setRange(t,e)):this.setPath(Pe.clone(t),s)}let n=Pe.pathCommonAncestor(t,e);const r=n.length;if(t.length===r||e.length===r||t[r].relation!==e[r].relation)return this.setPath(n,-1);n.push(t[r]),n=Pe.clone(n);let o=e[r].offset-t[r].offset+1;return o<=0?e.length>r+1?(n[r].relation=e[r].relation,n[r].offset=e[r].offset,n[n.length-1].offset-=1,o=2-o):(n[r].relation=e[r].relation,n[r].offset=e[r].offset,o=1-o):e.length<=t.length?n[n.length-1].offset-=1:e.length>t.length&&(n[r].offset-=1),this.setPath(n,o)},Ne.prototype.ancestor=function(t){if(t>this.path.length)return null;let e=this.root;for(let i=0;i<this.path.length-t;i++){const t=this.path[i];if(e.array)e=Ie(e.array,t.relation)[t.offset];else{if(!e[t.relation])return null;{0!==e[t.relation].length&&"first"===e[t.relation][0].type||e[t.relation].unshift(Je());const i=Math.min(t.offset,e[t.relation].length-1);e=e[t.relation][i]}}}return e},Ne.prototype.anchor=function(){if(this.parent().array)return Ie(this.parent().array,this.relation())[this.anchorOffset()];const t=this.siblings();return t[Math.min(t.length-1,this.anchorOffset())]},Ne.prototype.parent=function(){return this.ancestor(1)},Ne.prototype.relation=function(){return this.path.length>0?this.path[this.path.length-1].relation:""},Ne.prototype.anchorOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset:0},Ne.prototype.focusOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset+this.extent:0},Ne.prototype.startOffset=function(){return Math.min(this.focusOffset(),this.anchorOffset())},Ne.prototype.endOffset=function(){return Math.max(this.focusOffset(),this.anchorOffset())},Ne.prototype.insertFirstAtom=function(){this.siblings()},Ne.prototype.siblings=function(){if(0===this.path.length)return[];let t;return this.parent().array?t=Ie(this.parent().array,this.relation()):"string"==typeof(t=this.parent()[this.relation()]||[])&&(t=[]),0!==t.length&&"first"===t[0].type||t.unshift(Je()),t},Ne.prototype.sibling=function(t){return this.siblings()[this.startOffset()+t]},Ne.prototype.isCollapsed=function(){return 0===this.extent},Ne.prototype.setExtent=function(t){this.extent=t},Ne.prototype.collapseForward=function(){return 0!==this.extent&&(this.setSelection(this.endOffset()),!0)},Ne.prototype.collapseBackward=function(){return 0!==this.extent&&(this.setSelection(this.startOffset()),!0)},Ne.prototype.selectGroup_=function(){const t=this.siblings();if("text"===this.anchorMode()){let e=this.startOffset(),i=this.endOffset();for(;t[e]&&"text"===t[e].mode&&Rt.LETTER_AND_DIGITS.test(t[e].body);)e-=1;for(;t[i]&&"text"===t[i].mode&&Rt.LETTER_AND_DIGITS.test(t[i].body);)i+=1;if(e>=(i-=1))return void this.setSelection(this.endOffset()-1,1);this.setSelection(e,i-e)}else if("mord"===this.sibling(0).type&&/[0-9,.]/.test(this.sibling(0).body)){let e=this.startOffset(),i=this.endOffset();for(;Ye(t[e]);)e-=1;for(;Ye(t[i]);)i+=1;this.setSelection(e,(i-=1)-e)}else this.setSelection(0,"end")},Ne.prototype.selectAll_=function(){this.path=[{relation:"body",offset:0}],this.setSelection(0,"end")},Ne.prototype.deleteAll_=function(){this.selectAll_(),this.delete_()},Ne.prototype.contains=function(t){if(this.isCollapsed())return!1;const e=this.siblings(),i=this.startOffset(),s=this.endOffset();for(let n=i;n<s;n++)if(ze(e[n],t))return!0;return!1},Ne.prototype.getSelectedAtoms=function(){if(this.isCollapsed())return null;const t=[],e=this.siblings(),i=this.startOffset()+1,s=this.endOffset()+1;for(let n=i;n<s;n++)e[n]&&"first"!==e[n].type&&t.push(e[n]);return t},Ne.prototype.commandOffsets=function(){const t=this.siblings();if(t.length<=1)return null;let e=Math.min(this.endOffset(),t.length-1);if("command"!==t[e].type)return null;for(;e>0&&"command"===t[e].type;)e-=1;let i=this.startOffset()+1;for(;i<=t.length-1&&"command"===t[i].type;)i+=1;return i>e?{start:e+1,end:i}:null},Ne.prototype.extractCommandStringAroundInsertionPoint=function(t){let e="";const i=this.commandOffsets();if(i){const s=t?this.anchorOffset()+1:i.end,n=this.siblings();for(let t=i.start;t<s;t++)e+=n[t].body||""}return e},Ne.prototype.decorateCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){const i=this.siblings();for(let s=e.start;s<e.end;s++)i[s].error=t}},Ne.prototype.commitCommandStringBeforeInsertionPoint=function(){const t=this.commandOffsets();if(t){const e=this.siblings(),i=this.anchorOffset()+1;for(let s=t.start;s<i;s++)e[s]&&(e[s].suggestion=!1)}},Ne.prototype.spliceCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){if(this.contentWillChange(),t){Array.prototype.splice.apply(this.siblings(),[e.start,e.end-e.start].concat(t));let i=[];for(const e of t)i=i.concat(e.filter(t=>"placeholder"===t.type));this.setExtent(0),this.path[this.path.length-1].offset=e.start-1,0!==i.length&&this.leap(1,!1)||this.setSelection(e.start+t.length-1)}else this.siblings().splice(e.start,e.end-e.start),this.setSelection(e.start-1,0);this.contentDidChange()}},Ne.prototype.extractArgBeforeInsertionPoint=function(){const t=this.siblings();if(t.length<=1)return[];const e=[];let i=this.startOffset();if("text"===t[i].mode)for(;i>=1&&"text"===t[i].mode;)e.unshift(t[i]),i--;else for(;i>=1&&/mord|surd|msubsup|leftright|mop/.test(t[i].type);)e.unshift(t[i]),i--;return e},Ne.prototype.setSelection=function(t,e,i){t=t||0,e=e||0;const s=this.path[this.path.length-1].relation;i||(i=s);const n=this.parent();if(!n&&"body"!==i)return!1;const r=i.startsWith("cell");if(!r&&!n[i]||r&&!n.array)return!1;const o=i!==s;this.path[this.path.length-1].relation=i;const a=this.siblings().length;this.path[this.path.length-1].relation=s;const l=this.extent;"end"===e?e=a-t-1:"start"===e&&(e=-t),this.setExtent(e);const h=this.extent!==l;return this.setExtent(l),t<0&&(t=a+t),t=Math.max(0,Math.min(t,a-1)),(o||this.path[this.path.length-1].offset!==t||h)&&(o&&this.adjustPlaceholder(),this.selectionWillChange(),this.path[this.path.length-1].relation=i,this.path[this.path.length-1].offset=t,this.setExtent(e),this.selectionDidChange()),!0},Ne.prototype.next=function(t){t=t||{};const e={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(this.anchorOffset()===this.siblings().length-1){this.adjustPlaceholder();let i=e[this.relation()];const s=this.parent();for(;i&&!s[i];)i=e[i];if(i)return void this.setSelection(0,0,i);if(this.parent().array){const t=Re(this.parent().array);let e=parseInt(this.relation().match(/cell([0-9]*)$/)[1])+1;for(;e<t;){if(Ie(this.parent().array,e)&&this.setSelection(0,0,"cell"+e))return void this.selectionDidChange();e+=1}}if(1===this.path.length)(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf(this,"forward"))&&(this.path[0].offset=0);else{const e=!t.iterateAll&&this.parent().skipBoundary;this.path.pop(),e&&this.next(t)}return void this.selectionDidChange()}this.setSelection(this.anchorOffset()+1);const i=this.anchor();if(i&&!i.captureSelection){let s;if(i.array){let t=0;s="";const e=Re(i.array);for(;!s&&t<e;)Ie(i.array,t)&&(s="cell"+t.toString()),t+=1;return this.path.push({relation:s,offset:0}),void this.setSelection(0,0,s)}for(s="body";s;){if(Array.isArray(i[s]))return this.path.push({relation:s,offset:0}),this.insertFirstAtom(),void(!t.iterateAll&&i.skipBoundary&&this.next(t));s=e[s]}}},Ne.prototype.previous=function(t){const e={numer:"body",denom:"numer",index:"denom",overscript:"index",underscript:"overscript",subscript:"underscript",superscript:"subscript"};if(!(t=t||{}).iterateAll&&1===this.anchorOffset()&&this.parent()&&this.parent().skipBoundary&&this.setSelection(0),this.anchorOffset()<1){let t=e[this.relation()];for(;t&&!this.setSelection(-1,0,t);)t=e[t];const i=this.parent()?this.parent().type:"none";if("body"!==t||"msubsup"!==i&&"mop"!==i||(t=null),t)return;if(this.adjustPlaceholder(),this.selectionWillChange(),this.relation().startsWith("cell")){let t=parseInt(this.relation().match(/cell([0-9]*)$/)[1])-1;for(;t>=0;){if(Ie(this.parent().array,t)&&this.setSelection(-1,0,"cell"+t))return void this.selectionDidChange();t-=1}}return 1===this.path.length?(this.suppressChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf.bind(this)(-1))&&(this.path[0].offset=this.root.body.length-1):(this.path.pop(),this.setSelection(this.anchorOffset()-1)),void this.selectionDidChange()}const i=this.anchor();if(!i.captureSelection){let t;if(i.array){t="";const e=Re(i.array);let s=e-1;for(;!t&&s<e;)Ie(i.array,s)&&(t="cell"+s.toString()),s-=1;return this.path.push({relation:t,offset:Ie(i.array,s+=1).length-1}),void this.setSelection(-1,0,t)}for(t="superscript";t;){if(Array.isArray(i[t]))return this.path.push({relation:t,offset:i[t].length-1}),void this.setSelection(-1,0,t);t=e[t]}}this.setSelection(this.anchorOffset()-1),!t.iterateAll&&this.sibling(0)&&this.sibling(0).skipBoundary&&this.previous(t)},Ne.prototype.move=function(t,e){const i=(e=e||{extend:!1}).extend||!1;if(this.removeSuggestion(),i)this.extend(t,e);else{const e=Le(this);if(t>0)for(this.collapseForward()&&t--;t>0;)this.next(),t--;else if(t<0)for(this.collapseBackward()&&t++;0!==t;)this.previous(),t++;this._announce("move",e)}},Ne.prototype.up=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseBackward();const i=this.relation();if("denom"===i)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"numer"),this._announce("moveUp");else if(this.parent().array){let e=je(this.parent().array,i);(e=Fe(this.parent().array,e,-1))&&Ie(e)?(this.path[this.path.length-1].relation="cell"+De(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveUp")):this.move(-1,t)}else this._announce("line")},Ne.prototype.down=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseForward();const i=this.relation();if("numer"===i)e?(this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange()):this.setSelection(this.anchorOffset(),0,"denom"),this._announce("moveDown");else if(this.parent().array){let e=je(this.parent().array,i);(e=Fe(this.parent().array,e,1))&&Ie(e)?(this.path[this.path.length-1].relation="cell"+De(this.parent().array,e),this.setSelection(this.anchorOffset()),this._announce("moveDown")):this.move(1,t)}else this._announce("line")},Ne.prototype.extend=function(t){let e=this.path[this.path.length-1].offset,i=0;const s=Le(this),n=e+(i=this.extent+t);if(n<0&&0!==i){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.setExtent(-1),this.selectionDidChange(),void this._announce("move",s);e=this.path[this.path.length-1].offset,i=this.extent}else if(n>=this.siblings().length){if(this.path.length>1)return this.selectionWillChange(),this.path.pop(),this.path[this.path.length-1].offset-=1,this.setExtent(1),this.selectionDidChange(),void this._announce("move",s);this.isCollapsed()&&(e-=1),i-=1}this.setSelection(e,i),this._announce("move",s)},Ne.prototype.skip=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const s=Le(this),n=this.siblings(),r=this.focusOffset();let o=r+t;if(i&&(o=Math.min(Math.max(0,o),n.length-1)),o<0||o>=n.length)this.move(t,e);else{if(n[o]&&"text"===n[o].mode){if((o=this.wordBoundaryOffset(o,t))<0&&!i)return void this.setSelection(0);if(o>n.length)return this.setSelection(n.length-1),void this.move(t,e)}else{const e=n[o]?n[o].type:"";if("mopen"===e&&t>0||"mclose"===e&&t<0){let i="mopen"===e?1:-1;for(o+=t>0?1:-1;o>=0&&o<n.length&&0!==i;)"mopen"===n[o].type?i+=1:"mclose"===n[o].type&&(i-=1),o+=t;0!==i&&(o=r+t),t>0&&(o-=1)}else{for(;n[o]&&"math"===n[o].mode&&n[o].type===e;)o+=t;o-=t>0?1:0}}if(i){const t=this.anchorOffset();this.setSelection(t,o-t)}else this.setSelection(o);this._announce("move",s)}},Ne.prototype.jump=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const s=this.siblings();let n=this.focusOffset();t>0&&(n=Math.min(n+1,s.length-1));const r=t<0?0:s.length-1;i?this.extend(r-n):this.move(r-n)},Ne.prototype.jumpToMathFieldBoundary=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=(t=t||1)<0?-1:1;const s=Le(this),n=[{relation:"body",offset:this.path[0].offset}];let r;i?t<0?n[0].offset>0&&(r=-n[0].offset):n[0].offset<this.siblings().length-1&&(r=this.siblings().length-1-n[0].offset):(n[0].offset=t<0?0:this.root.body.length-1,r=0),this.setPath(n,r),this._announce("move",s)},Ne.prototype.leap=function(t,e){t=(t=t||1)<0?-1:1,e=e||!0;const i=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;const s=Le(this),n=this.extent;this.move(t),"placeholder"===this.anchor().type&&this.move(t);const r=this.filter((t,e)=>"placeholder"===e.type||t.length>1&&1===this.siblings().length,t);if(0===r.length){if(this.setPath(s,n),e)if(this.config.onTabOutOf)this.config.onTabOutOf(this.target,t>0?"forward":"backward");else if(document.activeElement){const e=Array.prototype.filter.call(document.querySelectorAll('a[href]:not([disabled]),\n                    button:not([disabled]),\n                    textarea:not([disabled]),\n                    input[type=text]:not([disabled]),\n                    select:not([disabled]),\n                    [contentEditable="true"],\n                    [tabindex]:not([disabled]):not([tabindex="-1"])'),t=>(t.offsetWidth>0||t.offsetHeight>0)&&!t.contains(document.activeElement)||t===document.activeElement);let i=e.indexOf(document.activeElement)+t;i<0&&(i=e.length-1),i>=e.length&&(i=0),e[i].focus()}return!1}return this.selectionWillChange(),this.setPath(r[0]),"placeholder"===this.anchor().type&&this.setExtent(-1),this._announce("move",s),this.selectionDidChange(),this.suppressChangeNotifications=i,!0},Ne.prototype.anchorMode=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t){if("commandliteral"===t.type||"command"===t.type)return"command";e=t.mode}let i=1,s=this.ancestor(i);for(;!e&&s;)s&&(e=s.mode),s=this.ancestor(i+=1);return e},Ne.prototype.anchorStyle=function(){const t=this.isCollapsed()?this.anchor():this.sibling(1);let e;if(t&&"first"!==t.type){if("commandliteral"===t.type||"command"===t.type)return{};e={color:t.color,backgroundColor:t.backgroundColor,fontFamily:t.fontFamily,fontShape:t.fontShape,fontSeries:t.fontSeries,fontSize:t.fontSize}}let i=1,s=this.ancestor(i);for(;!e&&s;)s&&(e={color:s.color,backgroundColor:s.backgroundColor,fontFamily:s.fontFamily,fontShape:s.fontShape,fontSeries:s.fontSeries,fontSize:s.fontSize}),s=this.ancestor(i+=1);return e},Ne.prototype.simplifyParen=function(t){if(t&&this.config.removeExtraneousParentheses){for(let e=0;t[e];e++)if("leftright"===t[e].type&&"("===t[e].leftDelim&&Array.isArray(t[e].body)){let i=0,s=0,n=0;for(let r=0;t[e].body;r++)"genfrac"===t[e].body[r].type&&(i++,s=r),"first"!==t[e].body[r].type&&n++;0===n&&1===i&&(t[e]=t[e].body[s])}t.forEach(t=>{if("genfrac"===t.type&&(this.simplifyParen(t.numer),this.simplifyParen(t.denom),t.numer=Xe(t.numer),t.denom=Xe(t.denom)),t.superscript&&(this.simplifyParen(t.superscript),t.superscript=Xe(t.superscript)),t.subscript&&(this.simplifyParen(t.subscript),t.subscript=Xe(t.subscript)),t.underscript&&(this.simplifyParen(t.underscript),t.underscript=Xe(t.underscript)),t.overscript&&(this.simplifyParen(t.overscript),t.overscript=Xe(t.overscript)),t.index&&(this.simplifyParen(t.index),t.index=Xe(t.index)),"surd"===t.type?(this.simplifyParen(t.body),t.body=Xe(t.body)):t.body&&Array.isArray(t.body)&&this.simplifyParen(t.body),t.array)for(let e=Re(t.array);e>=0;e--)this.simplifyParen(Ie(t.array,e))})}},Ne.prototype.insert=function(t,e){if((e=e||{}).smartFence&&this._insertSmartFence(t,e.style))return;const i=this.suppressChangeNotifications;e.suppressChangeNotifications&&(this.suppressChangeNotifications=!0),this.contentWillChange();const s=this.suppressChangeNotifications;this.suppressChangeNotifications=!0,e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),e.macros=e.macros||this.config.macros;const n=e.mode||this.anchorMode();let r;const o=[this.getSelectedAtoms()];void 0!==e.placeholder&&(o["?"]=e.placeholder),"replaceSelection"!==e.insertionMode||this.isCollapsed()?"replaceAll"===e.insertionMode?(this.root.body.splice(1),this.path=[{relation:"body",offset:0}],this.extent=0):"insertBefore"===e.insertionMode?this.collapseBackward():"insertAfter"===e.insertionMode&&this.collapseForward():this.delete_();const a=this.siblings(),l=this.startOffset();if(l+1<a.length&&a[l+1]&&"placeholder"===a[l+1].type?this.delete_(1):l>0&&a[l]&&"placeholder"===a[l].type&&this.delete_(-1),"math"===n&&"ASCIIMath"===e.format)t=Ue(t,{...this.config,format:"ASCIIMath"}),r=Ce.parseTokens(v.tokenize(t),"math",null,e.macros,!1),this.simplifyParen(r);else if("text"!==n&&"auto"===e.format)if("command"===n){r=[];for(const e of t)Rt.COMMAND_MODE_CHARACTERS.test(e)&&r.push(new pe.MathAtom("command","command",e))}else"\x1b"===t?r=[new pe.MathAtom("command","command","\\")]:(t=Ue(t,this.config),o[0]?t=t.replace(/(^|[^\\])#@/g,"$1#0"):/(^|[^\\])#@/.test(t)?(t=t.replace(/(^|[^\\])#@/g,"$1#0"),o[0]=this.extractArgBeforeInsertionPoint(),this._deleteAtoms(-o[0].length),Array.isArray(o[0])&&0===o[0].length&&(o[0]=void 0)):t=t.replace(/(^|[^\\])#@/g,"$1#?"),r=Ce.parseTokens(v.tokenize(t),n,o,e.macros,e.smartFence),this.simplifyParen(r));else"latex"===e.format?r=Ce.parseTokens(v.tokenize(t),n,o,e.macros,e.smartFence):"text"!==n&&"text"!==e.format||(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),r=Ce.parseTokens(v.tokenize(t),"text",o,e.macros,!1));!function t(e,i){e&&i&&(Array.isArray(e)?e.forEach(e=>t(e,i)):"object"==typeof e&&(e.color||e.backgroundColor||e.fontFamily||e.fontShape||e.fontSeries||e.fontSize||(e.applyStyle(i),t(e.body,i),t(e.numer,i),t(e.denom,i),t(e.index,i),t(e.overscript,i),t(e.underscript,i),t(e.subscript,i),t(e.superscript,i))))}(r,e.style);const h=this.parent();if(this.config.removeExtraneousParentheses&&h&&"leftright"===h.type&&"("===h.leftDelim&&r&&1===r.length&&"genfrac"===r[0].type?(this.path.pop(),this.siblings()[this.anchorOffset()]=r[0]):Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(r)),this.insertFirstAtom(),this.suppressChangeNotifications=s,"placeholder"===e.selectionMode){let t=[];for(const e of r)t=t.concat(e.filter(t=>"placeholder"===t.type));0!==t.length&&this.leap(1,!1)?this._announce("move"):this.setSelection(this.anchorOffset()+r.length)}else"before"===e.selectionMode||("after"===e.selectionMode?this.setSelection(this.anchorOffset()+r.length):"item"===e.selectionMode&&this.setSelection(this.anchorOffset(),r.length));this.contentDidChange(),this.suppressChangeNotifications=i},Ne.prototype._insertSmartFence=function(t,e){const i=this.parent();if("leftright"===i.type&&"|"!==i.leftDelim&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(t))return this.insert("\\,\\middle"+t+"\\, ",{mode:"math",format:"latex",style:e}),!0;"{"!==t&&"\\{"!==t||(t="\\lbrace"),"}"!==t&&"\\}"!==t||(t="\\rbrace"),"["!==t&&"\\["!==t||(t="\\lbrack"),"]"!==t&&"\\]"!==t||(t="\\rbrack");const s=Rt.RIGHT_DELIM[t];if(s&&("leftright"!==i.type||"|"!==i.leftDelim)){let i="";const n=this.isCollapsed()||"placeholder"===this.anchor().type;i=this.sibling(0).isFunction?"\\mleft"+t+"\\mright":"\\left"+t+"\\right",i+=n?"?":s;let r=[];return n&&(r=this.siblings().splice(this.anchorOffset()+1,this.siblings().length)),this.insert(i,{mode:"math",format:"latex",style:e}),n&&(this.sibling(0).body=r,this.move(-1)),!0}let n;for(const r in Rt.RIGHT_DELIM)Rt.RIGHT_DELIM.hasOwnProperty(r)&&t===Rt.RIGHT_DELIM[r]&&(n=r);if(n){if(i&&"leftright"===i.type&&this.endOffset()===this.siblings().length-1)return this.contentWillChange(),i.rightDelim=t,this.move(1),this.contentDidChange(),!0;const s=this.siblings();let n;for(n=this.endOffset();n>=0&&("leftright"!==s[n].type||"?"!==s[n].rightDelim);n--);if(n>=0)return this.contentWillChange(),s[n].rightDelim=t,s[n].body=s[n].body.concat(s.slice(n+1,this.endOffset()+1)),s.splice(n+1,this.endOffset()-n),this.setSelection(n),this.contentDidChange(),!0;if(i&&"leftright"===i.type&&"?"===i.rightDelim){this.contentWillChange(),i.rightDelim=t;const e=s.slice(this.endOffset()+1);return s.splice(this.endOffset()+1),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.endOffset()+1,0].concat(e)),this.contentDidChange(),!0}const r=this.ancestor(2);return r&&"leftright"===r.type&&"?"===r.rightDelim&&this.endOffset()===s.length-1?(this.move(1),this._insertSmartFence(t,e)):(this.insert(t,{mode:"math",format:"latex",style:e}),!0)}return!1},Ne.prototype.positionInsertionPointAfterCommitedCommand=function(){const t=this.siblings(),e=this.commandOffsets();let i=e.start;for(;i<e.end&&!t[i].suggestion;)i++;this.setSelection(i-1)},Ne.prototype.removeSuggestion=function(){const t=this.siblings();for(let e=t.length-1;e>=0;e--)t[e].suggestion&&t.splice(e,1)},Ne.prototype.insertSuggestion=function(t,e){this.removeSuggestion();const i=[],s=t.substr(e);for(const n of s){const t=new pe.MathAtom("command","command",n);t.suggestion=!0,i.push(t)}Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(i))},Ne.prototype._deleteAtoms=function(t){t>0?this.siblings().splice(this.anchorOffset()+1,t):(this.siblings().splice(this.anchorOffset()+t+1,-t),this.setSelection(this.anchorOffset()+t))},Ne.prototype.delete=function(t){if(0===(t=t||0))this.delete_(0);else if(t>0)for(;t>0;)this.delete_(1),t--;else for(;t<0;)this.delete_(-1),t++},Ne.prototype.delete_=function(t){this.contentWillChange();const e=this.suppressChangeNotifications;if(this.suppressChangeNotifications=!0,t=(t=t||0)<0?-1:t>0?1:t,this.removeSuggestion(),this.parent().array&&t<0&&0===this.startOffset()){const t=this.parent().array;if(function(t){const e={col:0,row:0};for(;e.row<t.length&&!Ie(t,e);)e.row+=1;return Ie(t,e)?"cell"+De(t,e):""}(t)===this.relation()){const e=function(t,e,i){e||(e=[";",","]);let s,n=[];for(const r of t)s?n.push(s):s=new pe.MathAtom("math","mpunct",e[0],void 0),n=n.concat(Be(r,e[1]));return n}(t);this.path.pop(),this.siblings().splice(this.anchorOffset(),1,...e),this.setSelection(this.anchorOffset()-1,e.length)}else{const e=je(t,this.relation());if(0===e.col){const i=Fe(t,e,-1);i.col=t[i.row].length-1,this.path[this.path.length-1].relation="cell"+De(t,i);const s=t[i.row][i.col].length,n=Be(t[e.row]);t[i.row][i.col]=t[i.row][i.col].concat(n),this.setSelection(s-1,n.length),function(t,e){t.splice(e,1)}(t,e.row)}else 0===function(t,e){let i=0;const s={col:e,row:0};for(;s.row<t.length;){const e=Ie(t,s);if(e&&e.length>0){let t=e.length;"first"===e[0].type&&(t-=1),t>0&&(i+=1)}s.row+=1}return i}(t,e.col)&&(function(t,e){let i=0;for(;i<t.length;)t[i][e]&&t[i].splice(e,1),i+=1}(t,e.col),e.col-=1,this.path[this.path.length-1].relation="cell"+De(t,e),this.setSelection(t[e.row][e.col].length-1,0))}return this.suppressChangeNotifications=e,void this.contentDidChange()}const i=this.siblings();if(this.isCollapsed()){const e=this.anchorOffset();if(t<0)if(0!==e){const t=this.sibling(0);"leftright"===t.type?(t.rightDelim="?",this.move(-1)):!t.captureSelection&&/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(t.type)?this.move(-1):(this._announce("delete",null,i.slice(e,e+1)),i.splice(e,1),this.setSelection(e-1))}else{const t=this.relation();if("superscript"===t||"subscript"===t){const e=this.parent()[t].filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.parent()[t]=null,this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(e)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: "+t)}else if("denom"===t){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: denominator")}else if("body"===t){const t=this.siblings().filter(t=>"placeholder"!==t.type);this.path.length>1&&(t.shift(),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(t)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: root"))}else this.move(-1),this.delete(-1)}else if(t>0)if(e!==i.length-1)/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(this.sibling(1).type)?this.move(1):(this._announce("delete",null,i.slice(e+1,e+2)),i.splice(e+1,1));else if("numer"===this.relation()){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: numerator")}else this.move(1),this.delete(1)}else{const t=this.startOffset()+1,e=this.endOffset()+1;this._announce("deleted",null,i.slice(t,e)),i.splice(t,e-t),this.setSelection(t-1)}this.suppressChangeNotifications=e,this.contentDidChange()},Ne.prototype.moveToNextPlaceholder_=function(){this.leap(1)},Ne.prototype.moveToPreviousPlaceholder_=function(){this.leap(-1)},Ne.prototype.moveToNextChar_=function(){this.move(1)},Ne.prototype.moveToPreviousChar_=function(){this.move(-1)},Ne.prototype.moveUp_=function(){this.up()},Ne.prototype.moveDown_=function(){this.down()},Ne.prototype.moveToNextWord_=function(){this.skip(1)},Ne.prototype.moveToPreviousWord_=function(){this.skip(-1)},Ne.prototype.moveToGroupStart_=function(){this.setSelection(0)},Ne.prototype.moveToGroupEnd_=function(){this.setSelection(-1)},Ne.prototype.moveToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1)},Ne.prototype.moveToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1)},Ne.prototype.deleteNextChar_=function(){this.delete_(1)},Ne.prototype.deletePreviousChar_=function(){this.delete_(-1)},Ne.prototype.deleteNextWord_=function(){this.extendToNextBoundary(),this.delete_()},Ne.prototype.deletePreviousWord_=function(){this.extendToPreviousBoundary(),this.delete_()},Ne.prototype.deleteToGroupStart_=function(){this.extendToGroupStart(),this.delete_()},Ne.prototype.deleteToGroupEnd_=function(){this.extendToMathFieldStart(),this.delete_()},Ne.prototype.deleteToMathFieldEnd_=function(){this.extendToMathFieldEnd(),this.delete_()},Ne.prototype.transpose_=function(){},Ne.prototype.extendToNextChar_=function(){this.extend(1)},Ne.prototype.extendToPreviousChar_=function(){this.extend(-1)},Ne.prototype.extendToNextWord_=function(){this.skip(1,{extend:!0})},Ne.prototype.extendToPreviousWord_=function(){this.skip(-1,{extend:!0})},Ne.prototype.extendUp_=function(){this.up({extend:!0})},Ne.prototype.extendDown_=function(){this.down({extend:!0})},Ne.prototype.extendToNextBoundary_=function(){this.skip(1,{extend:!0})},Ne.prototype.extendToPreviousBoundary_=function(){this.skip(-1,{extend:!0})},Ne.prototype.extendToGroupStart_=function(){this.setExtent(-this.anchorOffset())},Ne.prototype.extendToGroupEnd_=function(){this.setExtent(this.siblings().length-this.anchorOffset())},Ne.prototype.extendToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1,{extend:!0})},Ne.prototype.extendToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1,{extend:!0})},Ne.prototype.moveToSuperscript_=function(){if(this.collapseForward(),!this.anchor().superscript)if(this.anchor().subscript)this.anchor().superscript=[Je()];else{const t=this.sibling(1);t&&t.superscript?this.path[this.path.length-1].offset+=1:t&&t.subscript?(this.path[this.path.length-1].offset+=1,this.anchor().superscript=[Je()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new pe.MathAtom(this.parent().anchorMode,"msubsup","\u200b",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().superscript=[Je()])}this.path.push({relation:"superscript",offset:0}),this.selectGroup_()},Ne.prototype.moveToSubscript_=function(){if(this.collapseForward(),!this.anchor().subscript)if(this.anchor().superscript)this.anchor().subscript=[Je()];else{const t=this.sibling(1);t&&t.subscript?this.path[this.path.length-1].offset+=1:t&&t.superscript?(this.path[this.path.length-1].offset+=1,this.anchor().subscript=[Je()]):("limits"!==this.anchor().limits&&(this.siblings().splice(this.anchorOffset()+1,0,new pe.MathAtom(this.parent().anchorMode,"msubsup","\u200b",this.anchorStyle())),this.path[this.path.length-1].offset+=1),this.anchor().subscript=[Je()])}this.path.push({relation:"subscript",offset:0}),this.selectGroup_()},Ne.prototype.moveToOpposite_=function(){const t={superscript:"subscript",subscript:"superscript",denom:"numer",numer:"denom"}[this.relation()];t||this.moveToSuperscript_(),this.parent()[t]||(this.parent()[t]=[Je()]),this.setSelection(0,"end",t)},Ne.prototype.moveBeforeParent_=function(){this.path.length>1?(this.path.pop(),this.setSelection(this.anchorOffset()-1)):this._announce("plonk")},Ne.prototype.moveAfterParent_=function(){if(this.path.length>1){const t=Le(this);this.path.pop(),this.setExtent(0),this._announce("move",t)}else this._announce("plonk")},Ne.prototype._addCell=function(t){const e=this.parent();if(e&&"array"===e.type&&Array.isArray(e.array)){const i=this.relation();if(e.array){const s=je(e.array,i);"after row"===t||"before row"===t?(s.col=0,s.row=s.row+("after row"===t?1:0),e.array.splice(s.row,0,[[]])):(s.col+="after column"===t?1:0,e.array[s.row].splice(s.col,0,[]));const n=De(e.array,s);this.path.pop(),this.path.push({relation:"cell"+n.toString(),offset:0}),this.insertFirstAtom()}}},Ne.prototype.convertParentToArray=function(){const t=this.parent();if("leftright"===t.type){t.type="array";const e={"(":"pmatrix","\\lbrack":"bmatrix","\\lbrace":"cases"}[t.leftDelim]||"matrix",i=Rt.getEnvironmentInfo(e),s=[[t.body]];i.parser&&Object.assign(t,i.parser(e,[],s)),t.tabularMode=i.tabular,t.parseMode=this.anchorMode(),t.env={...i},t.env.name=e,t.array=s,t.rowGaps=[0],delete t.body,this.path[this.path.length-1].relation="cell0"}},Ne.prototype.addRowAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after row"),this.contentDidChange()},Ne.prototype.addRowBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before row"),this.contentDidChange()},Ne.prototype.addColumnAfter_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("after column"),this.contentDidChange()},Ne.prototype.addColumnBefore_=function(){this.contentWillChange(),this.convertParentToArray(),this._addCell("before column"),this.contentDidChange()},Ne.prototype._applyStyle=function(t){if(this.isCollapsed())return;const e=this;function i(t,i){let s=!0;return e.forEachSelected(e=>{s=s&&e[t]===i},{recursive:!0}),s}t.color&&i("color",t.color)&&(t.color="none"),t.backgroundColor&&i("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none"),t.fontFamily&&i("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.series&&(t.fontSeries=t.series),t.fontSeries&&i("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.shape&&(t.fontShape=t.shape),t.fontShape&&i("fontShape",t.fontShape)&&(t.fontShape="auto"),t.size&&(t.fontSize=t.size),t.fontSize&&i("fontSize",t.fontSize)&&(t.fontSize="size5"),this.contentWillChange(),this.forEachSelected(e=>e.applyStyle(t),{recursive:!0}),this.contentDidChange()};var Ve={EditableMathlist:Ne,parseMathString:Ue};const $e={"#":"#","|":"|","[":"BracketLeft","]":"BracketRight","-":"Minus","+":"Plus","=":"Equal","/":"Slash","\\":"Backslash"},We={Space:"Spacebar"," ":"Spacebar",Escape:"Esc",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},Ke={q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",0:"Digit0","!":"Shift-Digit1","@":"Shift-Digit2","#":"Shift-Digit3",$:"Shift-Digit4","%":"Shift-Digit5","^":"Shift-Digit6","&":"Shift-Digit7","*":"Shift-Digit8","(":"Shift-Digit9",")":"Shift-Digit0","-":"Minus",_:"Shift-Minus","/":"Slash","\\":"Backslash","|":"Shift-Backslash","?":"Shift-Slash"," ":"Spacebar"};function Ze(t){let e,i=!0;"Unidentified"===t.key&&t.target&&(e=Ke[t.target.value]||t.target.value),!e&&t.code&&(e=We[t.code]||t.code),e||($e[t.key]?(e=$e[t.key],i=!1):e=We[t.key],e||(e=Ke[t.key.toLowerCase()]||t.key));const s=[];return t.ctrlKey&&s.push("Ctrl"),t.metaKey&&s.push("Meta"),i&&t.altKey&&s.push("Alt"),i&&t.shiftKey&&s.push("Shift"),0===s.length?e:(s.push(e),s.join("-"))}function Qe(t,e){let i,s=null,n=null,r=!1,o=!1;function a(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),t()})}function l(){if(function(t){return t.selectionStart!==t.selectionEnd}(t))return;const i=t.value;t.value="",i.length>0&&e.typedText(i)}const h=t||e.container;h.addEventListener("keydown",function(i){if("function"==typeof e.allowDeadKey&&e.allowDeadKey()||"Dead"!==i.key&&"Unidentified"!==i.key&&229!==i.keyCode)o=!1;else{o=!0,r=!1;const i=e.blur,s=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=i,e.focus=s}return!(!r&&"CapsLock"!==i.code&&!/(Control|Meta|Alt|Shift)(Right|Left)/.test(i.code))||(s=i,n=null,e.keystroke(Ze(i),i))},!0),h.addEventListener("keypress",function(t){r||(s&&n&&e.keystroke(Ze(s),s),n=t,a(l))},!0),h.addEventListener("keyup",function(){r||!s||n||l()},!0),h.addEventListener("paste",function(){t.focus();const i=t.value;t.value="",i.length>0&&e.paste(i)},!0),h.addEventListener("copy",function(t){e.copy&&e.copy(t)},!0),h.addEventListener("cut",function(t){e.cut&&e.cut(t)},!0),h.addEventListener("blur",function(){s=null,n=null,e.blur&&e.blur()},!0),h.addEventListener("focus",function(){e.focus&&e.focus()},!0),h.addEventListener("compositionstart",()=>{r=!0},!0),h.addEventListener("compositionend",()=>{r=!1,a(l)},!0),h.addEventListener("input",()=>{if(o){const i=e.blur,s=e.focus;e.blur=null,e.focus=null,t.blur(),t.focus(),e.blur=i,e.focus=s,o=!1,r=!1,a(l)}else r||a(l)})}var ti={delegateKeyboardEvents:Qe,select:Qe.select,keyboardEventToString:Ze,eventToChar:function(t){if(!t)return"";let e;return"Unidentified"===t.key&&t.target&&(e=t.target.value),/^(Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e=e||t.key||t.code)&&(e=""),e},charToEvent:function(t){return{key:t,metaKey:!1,ctrlKey:!1,altKey:!1,shiftKey:!1}}},ei={UndoManager:class{constructor(t){this.mathlist=t,this.maximumDepth=1e3,this.record=!1,this.canCoalesce=!1,this.reset()}reset(){this.stack=[],this.index=-1}startRecording(){this.record=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(t){this.canUndo()&&(t&&"function"==typeof t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"undo"),this.restore(this.stack[this.index-1],t),this.index-=1,t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"undo"),this.canCoalesce=!1)}redo(t){this.canRedo()&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"redo"),this.index+=1,this.restore(this.stack[this.index],t),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"redo"),this.canCoalesce=!1)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(t){this.record&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"snapshot"),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push({latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"snapshot"),this.canCoalesce=!1)}snapshotAndCoalesce(t){this.canCoalesce&&this.pop(),this.snapshot(t),this.canCoalesce=!0}save(){return{latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}}restore(t,e){const i=this.mathlist.suppressChangeNotifications;void 0!==e.suppressChangeNotifications&&(this.mathlist.suppressChangeNotifications=e.suppressChangeNotifications),this.mathlist.insert(t?t.latex:"",{mode:"math",insertionMode:"replaceAll",selectionMode:"after",format:"latex",...e}),this.mathlist.setPath(t?t.selection:[{relation:"body",offset:0}]),this.mathlist.suppressChangeNotifications=i}}};const ii={"\\mathrm":"\\mathrm{x=+3.14, x\\in A}","\\mathbf":"\\mathbf{x=+3.14, x\\in A}","\\bf":"\\bf{x=+3.14, x\\in A}","\\bm":"\\bm{x=+3.14, x\\in A}","\\bold":"\\bold{x=+3.14, x\\in A}","\\mathit":"\\mathbb{x=+3.14}","\\mathbb":"\\mathbb{ABCD}","\\Bbb":"\\mathbb{ABCD}","\\frak":"\\frak{ABCD}","\\mathfrak":"\\mathfrak{ABCD}","\\mathscr":"\\mathscr{ABCD}","\\mathsf":"\\mathsf{ABab01}","\\mathtt":"\\mathtt{x=+3.14, x\\in A}","\\mathcal":"\\mathcal{ABCD}","\\boldsymbol":"\\boldsymbol{ABab01+=}","\\text":"\\text{ABC abc}","\\textrm":"\\textrm{ABC abc}","\\textnormal":"\\textnormal{ABC abc}","\\textit":"\\textit{ABC abc}","\\textbf":"\\textbf{ABC abc}","\\texttt":"\\texttt{ABC abc}","\\textsf":"\\textsf{ABC abc}","\\textcolor":"{\\textcolor{m0}A}{\\textcolor{m1}B}{\\textcolor{m2}C }{\\textcolor{m3}a}{\\textcolor{m4}b}{\\textcolor{m5}c}{\\textcolor{m6}8}","\\color":"{\\color{m0}A}{\\color{m1}B}{\\color{m2}C}{\\color{m3}a}{\\color{m4}b}{\\color{m5}c}{\\color{m6}8}","\\underline":'\\underline{\\unicode{"2B1A}}',"\\overline":'\\overline{\\unicode{"2B1A}}',"\\vec":'\\vec{\\unicode{"25CC}}',"\\check":'\\check{\\unicode{"25CC}}',"\\acute":'\\acute{\\unicode{"25CC}}',"\\breve":'\\breve{\\unicode{"25CC}}',"\\tilde":'\\tilde{\\unicode{"25CC}}',"\\hat":'\\hat{\\unicode{"25CC}}',"\\ddot":'\\ddot{\\unicode{"25CC}}',"\\dot":'\\dot{\\unicode{"25CC}}',"\\bar":'\\bar{\\unicode{"25CC}}',"\\!":'\\unicode{"203A}\\!\\unicode{"2039}',"\\,":'\\unicode{"203A}\\,\\unicode{"2039}',"\\:":'\\unicode{"203A}\\:\\unicode{"2039}',"\\;":'\\unicode{"203A}\\;\\unicode{"2039}',"\\quad":'\\unicode{"203A}\\quad\\unicode{"2039}',"\\qquad":'\\unicode{"203A}\\qquad\\unicode{"2039}',"\\enskip":'\\unicode{"203A}\\enskip\\unicode{"2039}',"\\space":'\\unicode{"203A}\\space\\unicode{"2039}',"\\frac":'\\frac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dfrac":'\\dfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\cfrac":'\\cfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tfrac":'\\tfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dbinom":'\\dbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tbinom":'\\tbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\binom":'\\binom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\pdiff":'\\pdiff{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\in":"n\\in\\N","\\notin":"n\\notin\\N","\\not":"B \\not A","\\ni":"N\\in n","\\owns":"N\\owns n","\\subset":"A\\subset B","\\supset":"B\\supset A","\\subseteq":"A\\subseteq B","\\supseteq":"B\\supseteq A","\\nsubseteq":"A\\nsubseteq B","\\nsupseteq":"B\\nsupseteq A","\\subsetneq":"A\\subsetneq B","\\supsetneq":"B\\supsetneq A","\\varsubsetneq":"A\\varsubsetneq B","\\varsupsetneq":"B\\varsupsetneq A","\\nsubseteqq":"A\\varsupsetneq B","\\subsetneqq":"A\\subsetneqq B","\\varsubsetneqq":"A\\varsubsetneqq B","\\nsubset":"A\\nsubset B","\\nsupset":"B\\nsupset A","\\complement":"A^\\complement","\\bigcup":'\\bigcup_{\\unicode{"2B1A}}',"\\bigcap":'\\bigcap_{\\unicode{"2B1A}}',"\\sqrt":'\\sqrt{\\unicode{"2B1A}}',"\\prod":'\\prod_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\sum":'\\sum_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\int":'\\int_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\stackrel":'\\stackrel{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\stackbin":'\\stackbin{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\underset":'\\underset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\overset":'\\overset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\prime":'\\unicode{"2B1A}^{\\prime}',"\\boxed":'\\boxed{\\unicode{"2B1A}}',"\\colorbox":'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}',"\\bbox":'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}',"\\enclose":'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{23+45}',"\\fcolorbox":'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}',"\\ ":'\\char"2423',"\\top":"{\\color{red}P}\\top","\\bot":"{\\color{#0F0}P}\\bot","\\mid":"P(p\\mid q)","\\rlap":"\\rlap{x}o","\\llap":"o\\llap{/}"},si={"\\text":"roman text","\\textrm":"roman text","\\textnormal":"roman text","\\textit":"italic text","\\textbf":"bold text","\\texttt":"monospaced text","\\textsf":"sans-serif text","\\mathrm":["roman","(upright)"],"\\mathbf":"bold","\\bf":"bold","\\bold":"bold","\\mathit":"italic","\\mathbb":"blackboard","\\Bbb":"blackboard","\\mathscr":"script","\\mathtt":["typewriter","(monospaced)"],"\\mathsf":"sans-serif","\\mathcal":"caligraphic","\\frak":["fraktur","(gothic)"],"\\mathfrak":["fraktur","(gothic)"],"\\textcolor":"text color","\\color":"color","\\forall":"for all","\\exists":"there exists","\\nexists":"there does not exist","\\frac":"fraction","\\dfrac":"display fraction","\\cfrac":"continuous fraction","\\tfrac":"text fraction","\\binom":"binomial coefficient","\\dbinom":"display binomial coefficient","\\tbinom":"text binomial coefficient","\\pdiff":"partial differential","\\vec":"vector","\\check":"caron","\\acute":"acute","\\breve":"breve","\\tilde":"tilde","\\dot":"dot","\\hat":["hat","circumflex"],"\\ddot":"double dot","\\bar":"bar","\\prime":"prime","\\doubleprime":"double prime","\\varnothing":"empty set","\\emptyset":"empty set","\\subseteq":"subset of or <br>equal to","\\supseteq":"superset of or <br>equal to","\\supset":"superset of","\\subset":"subset of","\\partial":"partial derivative","\\bigcup":"union","\\bigcap":"intersection","\\approx":"approximately equal to","\\notin":"not an element of","\\in":["element of","included in"],"\\infty":"infinity","\\land":"logical and","\\sqrt":"square root","\\prod":"product","\\sum":"summation","\\amalg":["amalgamation","coproduct","free product","disjoint union"],"\\cup":"union with","\\cap":"intersection with","\\int":"integral","\\iint":"surface integral","\\oint":"curve integral","\\iiint":"volume integral","\\iff":"if and only if","\\ln":"natural logarithm","\\boldsymbol":"bold","\\setminus":"set subtraction","\\stackrel":"relation with symbol above","\\stackbin":"operator with symbol above","\\underset":"symbol with annotation below","\\overset":"symbol with annotation above","\\hslash":["h-bar","Planck constant"],"\\gtrsim":"greater than or <br>similar to","\\propto":"proportional to","\\equiv":"equivalent to","\\!":["negative thin space","(-3 mu)"],"\\ ":["space","(6 mu)"],"\\,":["thin space","(3 mu)"],"\\:":["medium space","(4 mu)"],"\\;":["thick space","(5 mu)"],"\\quad":["1 em space","(18 mu)"],"\\qquad":["2 em space","(36 mu)"],"\\enskip":["&#189; em space","(9 mu)"],"\\mp":"minus or plus","\\pm":"plus or minus","\\Im":"Imaginary part of","\\Re":"Real part of","\\gothicCapitalR":"Real part of","\\gothicCapitalI":"Imaginary part part of","\\differentialD":"differential d","\\aleph":["aleph","infinite cardinal",'<a target="_blank" href="https://en.wikipedia.org/wiki/Cardinal_number">Wikipedia <big>&#x203A;</big></a>'],"\\beth":["beth","beth number",'<a target="_blank" href="https://en.wikipedia.org/wiki/Beth_number">Wikipedia <big>&#x203A;</big></a>'],"\\gimel":["gimel","gimel function",'<a target="_blank" href="https://en.wikipedia.org/wiki/Gimel_function">Wikipedia <big>&#x203A;</big></a>'],"\\O":"empty set","\\N":"set of <br>natural numbers","\\Z":"set of <br>integers","\\Q":"set of <br>rational numbers","\\C":"set of <br>complex numbers","\\R":"set of <br>real numbers","\\P":"set of <br>prime numbers","\\lesseqqgtr":"less than, equal to or<br> greater than","\\gnapprox":"greater than and <br>not approximately","\\lnapprox":"lesser than and <br>not approximately","\\j":"dotless j","\\i":"dotless i","\\cdot":"centered dot","\\lmoustache":"left moustache","\\rmoustache":"right moustache","\\nabla":["nabla","del","differential vector operator"],"\\square":["square","d\u2019Alembert operator",'<a target="_blank" href="https://en.wikipedia.org/wiki/D%27Alembert_operator">Wikipedia <big>&#x203A;</big></a>'],"\\blacksquare":["black square","end of proof","tombstone","Halmos symbol"],"\\Box":"end of proof","\\colon":["such that","ratio"],"\\coloneq":["is defined by","is assigned"],"\\Colon":["is defined by","as"],"\\_":["underbar","underscore"],"\\ll":"much less than","\\gg":"much greater than","\\doteq":"approximately equal to","\\Doteq":"approximately equal to","\\doteqdot":"approximately equal to","\\cong":["isomorphism of","(for algebras, modules...)"],"\\det":["determinant of","(of a matrix)"],"\\dotplus":"Cartesian product algebra","\\otimes":["tensor product","(of algebras)","Kronecker product","(of matrices)"],"\\oplus":["direct sum","(of modules)"],"\\lb":"base-2 logarithm","\\lg":"base-10 logarithm","\\wp":["Weierstrass P",'<a target="_blank" href="https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions">Wikipedia <big>&#x203A;</big></a>'],"\\wr":["wreath product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Wreath_product">Wikipedia <big>&#x203A;</big></a>'],"\\top":["tautology","Proposition P is universally true"],"\\bot":["contradiction","Proposition P is contradictory"],"\\mid":["probability","of event A given B"],"\\mho":["Siemens","electrical conductance in SI unit",'<a target="_blank" href="https://en.wikipedia.org/wiki/Siemens_(unit)">Wikipedia <big>&#x203A;</big></a>'],"\\Longrightarrow":"implies","\\Longleftrightarrow":"if, and only if,","\\prec":"precedes","\\preceq":"precedes or is equal to","\\succ":"succeedes","\\succeq":"succeedes or is equal to","\\perp":["is perpendicular to","is independent of"],"\\models":["entails","double-turnstyle, models","is a semantic consequence of",'<a target="_blank" href="https://en.wikipedia.org/wiki/Double_turnstile">Wikipedia <big>&#x203A;</big></a>'],"\\vdash":["satisfies","turnstyle, assertion sign","syntactic inference",'<a target="_blank" href="https://en.wikipedia.org/wiki/Turnstile_(symbol)">Wikipedia <big>&#x203A;</big></a>'],"\\implies":["implies","logical consequence"],"\\impliedby":["implied by","logical consequence"],"\\surd":["surd","root of","checkmark"],"\\ltimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rtimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\leftthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rightthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\divideontimes":["divide on times"],"\\curlywedge":"nor","\\curlyvee":"nand","\\simeq":"is group isomorphic with","\\vartriangleleft":["is a normal subgroup of","is an ideal ring of"],"\\circ":["circle","ring","function composition"],"\\rlap":["overlap right","\\rlap{x}o"],"\\llap":["overlap left","o\\llap{/}"],"\\colorbox":["color box","\\colorbox{#fbc0bd}{...}"],"\\ast":["asterisk","reflexive closure (as a superscript)"],"\\bullet":"bullet","\\lim":"limit"};function ni(t){let e=si[t]||"";return Array.isArray(e)&&(e=e.join("<br>")),e}function ri(t,e){t.popover.innerHTML=e;const i=t._getCaretPosition();i&&(t.popover.style.left=i.x-t.popover.offsetWidth/2+"px",t.popover.style.top=i.y+5+"px"),t.popover.classList.add("is-visible")}function oi(t){t.popover.classList.remove("is-visible")}var ai={getNote:ni,SAMPLES:ii,NOTES:si,showPopoverWithLatex:function(t,e,i){if(!e||0===e.length)return void oi(t);const s=e,n=function(t,e){const i=Ce.parseTokens(v.tokenize(t),"math",null,e.config.macros),s=pe.decompose({mathstyle:"displaystyle",macros:e.config.macros},i),n=et.makeSpan(s,"ML__base"),r=et.makeSpan("","ML__strut");r.setStyle("height",n.height,"em");const o=et.makeSpan("","ML__strut--bottom");return o.setStyle("height",n.height+n.depth,"em"),o.setStyle("vertical-align",-n.depth,"em"),et.makeSpan([r,o,n],"ML__mathlive").toMarkup()}(ii[s]||e,t),r=ni(s),o=Oe.forCommand(s);let a=i?'<div class="ML__popover__prev-shortcut" role="button" aria-label="Previous suggestion"><span><span>&#x25B2;</span></span></div>':"";a+='<span class="ML__popover__content" role="button">',a+='<div class="ML__popover__command">'+n+"</div>",r&&(a+='<div class="ML__popover__note">'+r+"</div>"),o&&(a+='<div class="ML__popover__shortcut">'+o+"</div>"),a+="</span>",ri(t,a+=i?'<div class="ML__popover__next-shortcut" role="button" aria-label="Next suggestion"><span><span>&#x25BC;</span></span></div>':"");let l=t.popover.getElementsByClassName("ML__popover__content");l&&l.length>0&&t._attachButtonHandlers(l[0],["complete",{acceptSuggestion:!0}]),(l=t.popover.getElementsByClassName("ML__popover__prev-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"previousSuggestion"),(l=t.popover.getElementsByClassName("ML__popover__next-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"nextSuggestion")},showPopover:ri,hidePopover:oi,updatePopoverPosition:function t(e,i){if(e.popover.classList.contains("is-visible"))if(i&&i.deferred)window.requestAnimationFrame(()=>t(e));else if(e.mathlist.anchor()&&"command"===e.mathlist.anchor().type){const t=e._getCaretPosition();t&&(e.popover.style.left=t.x-e.popover.offsetWidth/2+"px",e.popover.style.top=t.y+5+"px")}else oi(e)}};function li(t,e,i){let s="";if(Array.isArray(e)&&e.length>0){if("first"===e[0].type&&0===(e=e.slice(1)).length)return"";s=function t(e,i,s,n){if(0===s.length)return"";if(0===i.length)return s.map(t=>t.toLatex(n)).join("");let r="",o="",a="";const l=i[0],h=function(t,e,i){let s=0;for(;t[s]&&("mop"===t[s].type||t[s][e]===i);)s++;return s}(s,l,s[0][l]);if("text"===s[0].mode){if("fontShape"===l&&s[0].fontShape)"it"===s[0].fontShape?(o="\\textit{",a="}"):"sl"===s[0].fontShape?(o="\\textsl{",a="}"):"sc"===s[0].fontShape?(o="\\textsc{",a="}"):"n"===s[0].fontShape?(o="\\textup{",a="}"):(o="\\text{\\fontshape{"+s[0].fontShape+"}",a="}");else if("fontSeries"===l&&s[0].fontSeries)"b"===s[0].fontSeries?(o="\\textbf{",a="}"):"l"===s[0].fontSeries?(o="\\textlf{",a="}"):"m"===s[0].fontSeries?(o="\\textmd{",a="}"):(o="\\text{\\fontseries{"+s[0].fontSeries+"}",a="}");else if("mode"===l){let t=!0;for(let e=0;e<h;e++)if(!s[e].fontSeries&&!s[e].fontShape&&!s[e].fontFamily){t=!1;break}t||(o="\\text{",a="}")}else if("fontSize"===l&&s[0].fontSize)o="{\\"+({size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[s[0].fontSize]||"")+" ",a="}";else if("fontFamily"===l&&s[0].fontFamily){const t={cmr:"textrm",cmtt:"texttt",cmss:"textsf"}[s[0].fontFamily]||"";t?(o="\\"+t+"{",a="}"):(o+="{\\fontfamily{"+s[0].fontFamily+"}",a="}")}}else if("math"===s[0].mode)if("fontSeries"===l)"b"===s[0].fontSeries?(o="\\mathbf{",a="}"):s[0].fontSeries&&"n"!==s[0].fontSeries&&(o="{\\fontSeries{"+s[0].fontSeries+"}",a="}");else if("fontShape"===l)"it"===s[0].fontShape?(o="\\mathit{",a="}"):"n"===s[0].fontShape?(o="{\\upshape ",a="}"):s[0].fontShape&&"n"!==s[0].fontShape&&(o="{\\fontShape{"+s[0].fontShape+"}",a="}");else if("fontSize"===l&&s[0].fontSize)o="{\\"+({size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[s[0].fontSize]||"")+" ",a="}";else if("fontFamily"===l&&s[0].fontFamily&&!/^(math|main|mainrm)$/.test(s[0].fontFamily)){const t={cal:"mathcal",frak:"mathfrak",bb:"mathbb",scr:"mathscr",cmr:"mathrm",cmtt:"mathtt",cmss:"mathsf"}[s[0].fontFamily]||"";t?(o="\\"+t+"{",a="}"):(o+="{\\fontfamily{"+s[0].fontFamily+"}",a="}")}return"color"!==l||!s[0].color||"none"===s[0].color||e&&e.color===s[0].color||(o="\\textcolor{"+ge.colorToString(s[0].color)+"}{",a="}"),"backgroundColor"!==l||!s[0].backgroundColor||"none"===s[0].backgroundColor||e&&e.backgroundColor===s[0].backgroundColor||(o="\\colorbox{"+ge.colorToString(s[0].backgroundColor)+"}{",a="}"),r+=o,r+=t(e,i.slice(1),s.slice(0,h),n),(r+=a)+t(e,i,s.slice(h),n)}(t,["mode","fontShape","fontSeries","fontSize","color","backgroundColor","fontFamily"],e,i)}else"number"==typeof e||"boolean"==typeof e?s=e.toString():"string"==typeof e?s=e.replace(/\s/g,"~"):e&&"function"==typeof e.toLatex&&(s=e.toLatex(i));return s}function hi(t){const e=hi.locale.substring(0,2);let i="";return hi.strings[hi.locale]&&(i=hi.strings[hi.locale][t]),!i&&hi.strings[e]&&(i=hi.strings[e][t]),i||(i=hi.strings.en[t]),i||(i=t),i}pe.MathAtom.prototype.toLatex=function(t){t=void 0!==t&&t;let e,i="",s=0,n=0;const r=this.latex?this.latex.match(/^(\\[^{\s0-9]+)/):null,o=r?r[1]:null;switch(this.type){case"group":i+=this.latexOpen||(this.cssId||this.cssClass?"":"{"),this.cssId&&(i+="\\cssId{"+this.cssId+"}{"),"ML__emph"===this.cssClass?i+="\\emph{"+li(this,this.body,t)+"}":(this.cssClass&&(i+="\\class{"+this.cssClass+"}{"),i+=t?li(this,this.body,!0):this.latex||li(this,this.body,!1),this.cssClass&&(i+="}")),this.cssId&&(i+="}"),i+=this.latexClose||(this.cssId||this.cssClass?"":"}");break;case"array":if(i+="\\begin{"+this.env.name+"}","array"===this.env.name){if(i+="{",this.colFormat)for(n=0;n<this.colFormat.length;n++)this.colFormat[n].align?i+=this.colFormat[n].align:this.colFormat[n].rule&&(i+="|");i+="}"}for(s=0;s<this.array.length;s++){for(e=0;e<this.array[s].length;e++)e>0&&(i+=" & "),i+=li(this,this.array[s][e],t);s<this.array.length-1&&(i+=" \\\\ ")}i+="\\end{"+this.env.name+"}";break;case"root":i=li(this,this.body,t);break;case"genfrac":/^(choose|atop|over)$/.test(this.body)?(i+="{",i+=li(this,this.numer,t),i+="\\"+this.body+" ",i+=li(this,this.denom,t),i+="}"):(i+=o,i+=`{${li(this,this.numer,t)}}{${li(this,this.denom,t)}}`);break;case"surd":i+="\\sqrt",this.index&&(i+="[",i+=li(this,this.index,t),i+="]"),i+=`{${li(this,this.body,t)}}`;break;case"leftright":this.inner?(i+="\\left"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=li(this,this.body,t),i+="\\right"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(i+=" ")):(i+="\\mleft"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=li(this,this.body,t),i+="\\mright"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(i+=" "));break;case"delim":case"sizeddelim":i+=o+"{"+this.delim+"}";break;case"rule":i+=o,this.shift&&(i+=`[${li(this,this.shift,t)}em]`),i+=`{${li(this,this.width,t)}em}{${li(this,this.height,t)}em}`;break;case"line":case"overlap":case"accent":i+=`${o}{${li(this,this.body,t)}}`;break;case"overunder":i+=`${o}{${li(this,this.overscript||this.underscript,t)}}{${li(parent,this.body,t)}}`;break;case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":case"":/^\\(mathbin|mathrel|mathopen|mathclose|mathpunct|mathord|mathinner)/.test(o)?i+=o+"{"+li(this,this.body,t)+"}":'\\char"'===o?i+=this.latex+" ":"\\unicode"===o?(i+='\\unicode{"',i+=("000000"+this.body.charCodeAt(0).toString(16)).toUpperCase().substr(-6),i+="}"):(this.latex||"string"==typeof this.body)&&(this.latex&&"\\"===this.latex[0]?(i+=this.latex,/[a-zA-Z0-9]$/.test(this.latex)&&(i+=" ")):i+=o||("\u200b"!==this.body?this.latex||this.body:""));break;case"mop":"\u200b"!==this.body&&("\\mathop"===o?i+=o+"{"+li(this,this.body,t)+"}":"\\operatorname"===o?i+=o+"{"+this.body+"}":this.latex&&"\\"===this.latex[0]?(i+=this.latex,/[a-zA-Z0-9]$/.test(this.latex)&&(i+=" ")):i+=o||("\u200b"!==this.body?this.latex||this.body:"")),this.explicitLimits&&("limits"===this.limits&&(i+="\\limits "),"nolimits"===this.limits&&(i+="\\nolimits "));break;case"box":if("\\bbox"===o){if(i+=o,isFinite(this.padding)||void 0!==this.border||void 0!==this.backgroundcolor){const t=[];isFinite(this.padding)&&t.push(Math.floor(100*this.padding)/100+"em"),this.border&&t.push("border:"+this.border),this.backgroundcolor&&t.push(ge.colorToString(this.backgroundcolor)),i+=`[${t.join(",")}]`}i+=`{${li(this,this.body,t)}}`}else"\\boxed"===o?i+=`\\boxed{${li(this,this.body,t)}}`:(i+=o,this.framecolor&&(i+=`{${ge.colorToString(this.framecolor)}}`),this.backgroundcolor&&(i+=`{${ge.colorToString(this.backgroundcolor)}}`),i+=`{${li(this,this.body,t)}}`);break;case"spacing":i+=o,"\\hspace"===o||"\\hspace*"===o?(i+="{",i+=this.width?this.width+"em":"0em",i+="}"):(i+=" ",this.width&&(i+=this.width+"em "));break;case"enclose":if(i+=o,"\\enclose"===o){i+="{";let t="";for(const s in this.notation)this.notation.hasOwnProperty(s)&&this.notation[s]&&(i+=t+s,t=" ");i+="}";let e="";t="",this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(e+=t+'mathbackground="'+ge.colorToString(this.backgroundcolor)+'"',t=","),this.shadow&&"auto"!==this.shadow&&(e+=t+'shadow="'+this.shadow+'"',t=","),1!==this.strokeWidth||"solid"!==this.strokeStyle?(e+=t+this.borderStyle,t=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(e+=t+'mathcolor="'+ge.colorToString(this.strokeColor)+'"',t=","),e&&(i+=`[${e}]`)}i+=`{${li(this,this.body,t)}}`;break;case"mathstyle":i+="\\"+this.mathstyle+" ";break;case"space":i+=this.latex;break;case"placeholder":i+="\\placeholder{"+(this.value||"")+"}";break;case"first":case"command":case"msubsup":break;case"error":i+=this.latex}if(this.superscript){let e=li(this,this.superscript,t);1===e.length?("\u2032"===e?e="\\prime ":"\u2033"===e&&(e="\\doubleprime "),i+="^"+e):i+="^{"+e+"}"}if(this.subscript){const e=li(this,this.subscript,t);i+=1===e.length?"_"+e:"_{"+e+"}"}return i},hi.merge=function(t,e){if(t&&e){const i=hi._locale;hi.locale=t,hi.strings[t]={...hi.strings[t],...e},hi.locale=i}else if(t&&!e){e=t;for(const t in e)e.hasOwnProperty(t)&&hi.merge(t,e[t])}},Object.defineProperty(hi,"locale",{set(t){hi._locale=t},get:()=>(hi._locale||(hi._locale="undefined"==typeof navigator?"en":navigator.language.slice(0,5)),hi._locale)}),hi.strings={en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Symbols and Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo"},ar:{"keyboard.tooltip.functions":"\u0645\u0647\u0627\u0645","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.command":"\u062d\u0627\u0644\u0629 \u062a\u0644\u0642\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0644\u0627\u062a\u0643","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.roman":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"Symbole und r\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"S\xedmbolos y letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer"},fa:{"keyboard.tooltip.functions":"\u062a\u0648\u0627\u0628\u0639","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u06cc\u0648\u0646\u0627\u0646\u06cc","keyboard.tooltip.command":"\u062d\u0627\u0644\u062a \u062f\u0633\u062a\u0648\u0631 \u0644\u0627\u062a\u06a9","keyboard.tooltip.numeric":"\u0639\u062f\u062f\u06cc","keyboard.tooltip.roman":"\u0639\u0644\u0627\u0626\u0645 \u0648 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646","tooltip.copy to clipboard":"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e\u0628\u0648\u0631\u062f","tooltip.redo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0628\u0639\u062f","tooltip.toggle virtual keyboard":"\u0646\u0645\u0627\u06cc\u0634/\u0646\u0647\u0641\u062a\u0646 \u06a9\u06cc\u0628\u0648\u0631\u062f \u0645\u062c\u0627\u0632\u06cc","tooltip.undo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0642\u0628\u0644"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.roman":"Lettres et symboles romains","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Simboli e lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare"},ja:{"keyboard.tooltip.functions":"\u95a2\u6570","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.command":"LaTeX\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.roman":"\u8a18\u53f7\u3068\u30ed\u30fc\u30de\u5b57","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece\u0144 LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Symbole i litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij"},ru:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 LaTeX","keyboard.tooltip.numeric":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439","keyboard.tooltip.roman":"\u0421\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u0440\u0438\u043c\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","tooltip.copy to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","tooltip.redo":"\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0440\u0430\u0441\u0441\u0442\u0435\u0433\u0438\u0432\u0430\u0442\u044c"}};const ci={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman","symbols"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},command:{tooltip:"keyboard.tooltip.command",command:"enterCommandMode",label:"<svg><use xlink:href='#svg-command' /></svg>",layers:["lower-command","upper-command","symbols-command"]},style:{tooltip:"keyboard.tooltip.style",layer:"style",label:"<b>b</b><i>i</i>\u{1d539}"}},di={"\\varphi ":{label:"&Phi;",insert:"\\Phi "},"\\varsigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\epsilon ":{label:"&#x0190;",insert:'{\\char"0190}'},"\\rho ":{label:"&#x3A1",insert:'{\\char"3A1}'},"\\tau ":{label:"&#x3A4;",insert:'{\\char"3A4}'},"\\upsilon ":{label:"&Upsilon;",insert:"\\Upsilon "},"\\theta ":{label:"&Theta;",insert:"\\Theta "},"\\iota ":{label:"&Iota;",insert:'{\\char"399}'},"\\omicron ":{label:"&#x039F;",insert:'{\\char"39F}'},"\\pi ":{label:"&Pi;",insert:"\\Pi "},"\\alpha ":{label:"&Alpha;",insert:'{\\char"391}'},"\\sigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\delta ":{label:"&Delta;",insert:"\\Delta "},"\\phi ":{label:"&#x03a6;",insert:"\\Phi "},"\\gamma ":{label:"&Gamma;",insert:"\\Gamma "},"\\eta ":{label:"&Eta;",insert:'{\\char"397}'},"\\xi ":{label:"&Xi;",insert:"\\Xi "},"\\kappa ":{label:"&Kappa;",insert:'{\\char"39A}'},"\\lambda ":{label:"&Lambda;",insert:"\\Lambda "},"\\zeta ":{label:"&Zeta;",insert:'{\\char"396}'},"\\chi ":{label:"&Chi;",insert:'{\\char"3A7}'},"\\psi ":{label:"&Psi;",insert:"\\Psi "},"\\omega ":{label:"&Omega;",insert:"\\Omega "},"\\beta ":{label:"&Beta;",insert:'{\\char"392}'},"\\nu ":{label:"&Nu;",insert:'{\\char"39D}'},"\\mu ":{label:"&Mu;",insert:'{\\char"39C}'}},ui={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",classes:"box"},{latex:"\\cdots",aside:"center ellipsis",classes:"box"},{latex:"\\ldotp",aside:"low dot",classes:"box"},{latex:"\\ldots",aside:"low ellipsis",classes:"box"},{latex:"\\vdots",aside:"",classes:"box"},{latex:"\\ddots",aside:"",classes:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",classes:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",classes:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\nless","\\nleq","\\precsim","\\lesssim","\\lessgtr","\\prec","\\preccurlyeq","\\lessdot","\\nprec"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\ngtr","\\ngeq","\\succsim","\\gtrsim","\\gtrless","\\succ","\\succcurlyeq","\\gtrdot","\\nsucc"],set:["\\in","\\owns","\\subset","\\nsubset","\\supset","\\nsupset"],"!set":["\\notin","\\backepsilon"],subset:[],supset:[],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",classes:"small"},{latex:"\\int",classes:"small"},{latex:"\\smallint",classes:"small"},{latex:"\\iint",classes:"small"},{latex:"\\iiint",classes:"small"},{latex:"\\oint",classes:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",classes:"small"},{latex:"\\frac{\\partial}{\\partial x}",classes:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\N",aside:"set of natural numbers"}],p:[{latex:"\\P",aside:"set of primes"}],q:[{latex:"\\Q",aside:"set of rational numbers"}],r:[{latex:"\\R",aside:"set of real numbers"}],z:[{latex:"\\Z",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",classes:"small"},{latex:"g(#?)",classes:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"\u2153 em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"\xbd em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>',command:'"deleteAll"'}],"->|":[]};let pi={};const fi={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-key='ee' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-key='ii' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='#@^{2}'><span><i>x</i>&thinsp;\xb2</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\int_0^\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;\u2260</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;\u2260</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\bar{#@}' data-latex='\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\lvert #@ \\rvert ' data-latex='\\lvert #? \\rvert' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-roman'>abc</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\char\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-command":"\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-command":"\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","symbols-command":"\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\cos'></li>\n                <li class='fnbutton' data-insert='\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\tan'></li>\n                <li class='fnbutton' data-insert='\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='\\log_{#?}'></li>\n                <li class='fnbutton' data-insert='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\tiny \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?} ' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='_{#?} ' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#?} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function mi(t,e,i){t=t.replace(/(^|[^\\])#@/g,"$1#?");const s=Ce.parseTokens(v.tokenize(t),"math",e,i.config.macros),n=pe.decompose({mathstyle:"displaystyle",macros:i.config.macros},s),r=et.makeSpan(n,"ML__base"),o=et.makeSpan("","ML__strut");o.setStyle("height",r.height,"em");const a=et.makeSpan("","ML__strut--bottom");return a.setStyle("height",r.height+r.depth,"em"),a.setStyle("vertical-align",-r.depth,"em"),et.makeSpan([o,a,r],"ML__mathlive").toMarkup()}function gi(t,e,i){let s="<div class='left'>";const n=e.replace(/\s+/g," ").split(" ");if(n.length>1){const e=Object.assign({},ci,t.config.customVirtualKeyboards||{});for(const t of n){if(!e[t])break;s+="<div class='",s+=t===i?"selected ":e[t].command?"action ":"layer-switch ",s+=(e[t].classes||"")+"'",e[t].tooltip&&(s+="data-tooltip='"+hi(e[t].tooltip)+"' ",s+="data-placement='top' data-delay='1s'"),t!==i&&(e[t].command&&(s+="data-command='\""+e[t].command+"\"'"),e[t].layer&&(s+="data-layer='"+e[t].layer+"'")),s+=">"+e[t].label+"</div>"}}return s+="</div>","<div class='keyboard-toolbar' role='toolbar'>"+(s+=`\n        <div class='right'>\n            <div class='action'\n                data-command='"copyToClipboard"'\n                data-tooltip='${hi("tooltip.copy to clipboard")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"undo"'\n                data-tooltip='${hi("tooltip.undo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"redo"'\n                data-tooltip='${hi("tooltip.redo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    `)+"</div>"}function bi(t,e,i){for(let s=0;s<e.length;++s){const n=e[s];n.getAttribute("data-latex")?n.innerHTML=mi(n.getAttribute("data-latex").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):""===n.innerHTML&&n.getAttribute("data-insert")?n.innerHTML=mi(n.getAttribute("data-insert").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):n.getAttribute("data-content")&&(n.innerHTML=n.getAttribute("data-content").replace(/&quot;/g,'"')),n.getAttribute("data-aside")&&(n.innerHTML+="<aside>"+n.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),n.getAttribute("data-classes")&&n.classList.add(n.getAttribute("data-classes"));let r,o=n.getAttribute("data-insert");if(o&&(o=o.replace(/&quot;/g,'"')),o&&di[o]&&(n.setAttribute("data-shifted",di[o].label),n.setAttribute("data-shifted-command",JSON.stringify(["insertAndUnshiftKeyboardLayer",di[o].insert]))),r=n.getAttribute("data-command")?JSON.parse(n.getAttribute("data-command")):n.getAttribute("data-insert")?["insert",n.getAttribute("data-insert"),{focus:!0,feedback:!0,mode:"math",format:"latex",resetStyle:!0}]:n.getAttribute("data-latex")?["insert",n.getAttribute("data-latex"),{focus:!0,feedback:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",n.getAttribute("data-key")||n.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}],i&&(r=[i,r]),n.getAttribute("data-alt-keys")){const t=pi[n.getAttribute("data-alt-keys")];t&&(r={default:r,pressAndHoldStart:["showAlternateKeys",n.getAttribute("data-alt-keys"),t],pressAndHoldEnd:"hideAlternateKeys"})}t._attachButtonHandlers(n,r)}}function yi(t,e){const i={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},s=i[t.config.virtualKeyboardLayout]?i[t.config.virtualKeyboardLayout]:i.qwerty;let n,r=e,o=(r=r.replace(/<arrows\/>/g,"\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>")).match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;o;){n="";const t=o[2].match(/[a-zA-Z][a-zA-Z0-9-]*=(['"])(.*?)\1/g),e={};for(const i of t){const t=i.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['"])(.*?)\2/);e[t[1]]=t[3]}let a=s[e.name];if(a||(a=i.qwerty[e.name]),a)for(const i of a){let t=e.class||"";t&&(t=" "+t),"~"===i?(n+="<li class='action font-glyph bottom right ",n+=a.length-(a.match(/ /g)||[]).length/2==10?"w10":"w15",n+='\' data-shifted=\'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deletePreviousChar"]\'\n                        >&#x232b;</li>'):" "===i?n+="<li class='separator w5'></li>":"^"===i?n+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+e["shift-layer"]+"'>&#x21e7;</li>":"/"===i?n+="<li class='keycap"+t+"' data-alt-keys='/' data-insert='\\frac{#0}{#?}'>&divide;</li>":"*"===i?n+="<li class='keycap"+t+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===i?n+="<li class='keycap"+t+"' data-alt-keys='*' data-key='-' data-alt-keys='-'>&#x2212;</li>":/tt/.test(t)?n+="<li class='keycap"+t+"' data-alt-keys='"+i+'\' data-command=\'["typedText","'+i+'",{"commandMode":true, "focus":true, "feedback":true}]\'>'+i+"</li>":n+="<li class='keycap"+t+"' data-alt-keys='"+i+"'>"+i+"</li>"}o=(r=r.replace(new RegExp(o[1]+o[2]+o[3]),n)).match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return r}var vi={make:function(t,e){let i='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n            <symbol id="svg-command" viewBox="0 0 640 512">\n                <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n            </symbol>\n\n            <symbol id="svg-undo" viewBox="0 0 512 512">\n                <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n            </symbol>\n            <symbol id="svg-redo" viewBox="0 0 512 512">\n                <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-arrow-left" viewBox="0 0 192 512">\n                <path d="M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"/>\n            </symbol>\n            <symbol id="svg-arrow-right" viewBox="0 0 192 512">\n                    <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"/>\n            </symbol>\n            <symbol id="svg-tab" viewBox="0 0 448 512">\n                    <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-copy" viewBox="0 0 448 512">\n                <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>\n            </symbol>\n            <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n                <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n            </symbol>\n            <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n                <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n            </symbol>\n            <symbol id="svg-trash" viewBox="0 0 448 512">\n                <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n            </symbol>\n        </svg>\n        ';ui["foreground-color"]=[];for(const d of ge.LINE_COLORS)ui["foreground-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+d+'"></span>',command:'["applyStyle",{"color":"'+d+'"}]'});ui["background-color"]=[];for(const d of ge.AREA_COLORS)ui["background-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+d+'"></span>',command:'["applyStyle",{"backgroundColor":"'+d+'"}]'});pi={},pi=Object.assign({},ui);for(const d in pi)pi.hasOwnProperty(d)&&(pi[d]=pi[d].slice());const s="abcdefghijklmnopqrstuvwxyz";for(let d=0;d<26;d++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[d];pi[t]||(pi[t]=[]),pi[t].unshift({latex:"\\mathbb{"+t+"}",aside:"blackboard",insert:"\\mathbb{"+t+"}"}),pi[t].unshift({latex:"\\mathbf{"+t+"}",aside:"bold",insert:"\\mathbf{"+t+"}"}),pi[t].unshift({latex:"\\mathsf{"+t+"}",aside:"sans",insert:"\\mathsf{"+t+"}"}),pi[t].unshift({latex:"\\mathtt{"+t+"}",aside:"monospace",insert:"\\mathtt{"+t+"}"}),pi[t].unshift({latex:"\\mathcal{"+t+"}",aside:"script",insert:"\\mathcal{"+t+"}"}),pi[t].unshift({latex:"\\mathfrak{"+t+"}",aside:"fraktur",insert:"\\mathfrak{"+t+"}"}),pi[t].unshift({latex:"\\mathbb{"+s[d]+"}",aside:"blackboard",insert:"\\mathbb{"+s[d]+"}"}),pi[t].unshift({latex:"\\mathbf{"+s[d]+"}",aside:"bold",insert:"\\mathbf{"+s[d]+"}"}),pi[t].unshift({latex:"\\mathsf{"+s[d]+"}",aside:"sans",insert:"\\mathsf{"+s[d]+"}"}),pi[t].unshift({latex:"\\mathcal{"+s[d]+"}",aside:"script",insert:"\\mathcal{"+s[d]+"}"}),pi[t].unshift({latex:"\\mathfrak{"+s[d]+"}",aside:"fraktur",insert:"\\mathfrak{"+s[d]+"}"})}for(let d=0;d<=26;d++){const t=s[d];pi[t]||(pi[t]=[]),pi[t].unshift({latex:"\\mathsf{"+t+"}",aside:"sans",insert:"\\mathbb{"+t+"}"}),pi[t].unshift({latex:"\\mathbf{"+t+"}",aside:"bold",insert:"\\mathbf{"+t+"}"}),pi[t].unshift({latex:"\\mathtt{"+t+"}",aside:"monospace",insert:"\\mathtt{"+t+"}"}),pi[t].unshift({latex:"\\mathfrak{"+t+"}",aside:"fraktur",insert:"\\mathfrak{"+t+"}"})}for(let d=0;d<10;d++){const t="0123456789"[d];pi[t]||(pi[t]=[]),pi[t].unshift({latex:"\\mathbf{"+t+"}",aside:"bold",insert:"\\mathbf{"+t+"}"}),pi[t].unshift({latex:"\\mathsf{"+t+"}",aside:"sans",insert:"\\mathsf{"+t+"}"}),pi[t].unshift({latex:"\\mathtt{"+t+"}",aside:"monospace",insert:"\\mathtt{"+t+"}"}),pi[t].unshift({latex:"\\mathcal{"+t+"}",aside:"script",insert:"\\mathcal{"+t+"}"}),pi[t].unshift({latex:"\\mathfrak{"+t+"}",aside:"fraktur",insert:"\\mathfrak{"+t+"}"})}let n=t.config.virtualKeyboards;n||(n="all"),n=n.replace(/\ball\b/i,"numeric roman greek functions command");const r=Object.assign({},fi,t.config.customVirtualKeyboardLayers||{}),o=Object.assign({},ci,t.config.customVirtualKeyboards||{}),a=n.replace(/\s+/g," ").split(" ");for(const d of a){if(!o[d])break;let e=o[d].layers||[];o[d].layer&&e.push(o[d].layer),e=Array.from(new Set(e));for(const s of e){if(!r[s])break;if("object"==typeof r[s]){let t="";if(r[s].styles&&(t+=`<style>${r[s].styles}</style>`),r[s].backdrop&&(t+=`<div class='${r[s].backdrop}'>`),r[s].container&&(t+=`<div class='${r[s].container}'>`),r[s].rows){t+="<div class='rows'>";for(const e of r[s].rows){t+="<ul>";for(const i of e)t+="<li",i.class&&(t+=` class="${i.class}"`),i.key&&(t+=` data-key="${i.key}"`),i.command&&("string"==typeof i.command?t+=` data-command='"${i.command}"'`:(t+=" data-command='",t+=JSON.stringify(i.command),t+="'")),i.insert&&(t+=` data-insert="${i.insert}"`),i.latex&&(t+=` data-latex="${i.latex}"`),i.aside&&(t+=` data-aside="${i.aside}"`),i.altKeys&&(t+=` data-alt-keys="${i.altKeys}"`),i.shifted&&(t+=` data-shifted="${i.shifted}"`),i.shiftedCommand&&(t+=` data-shifted-command="${i.shiftedCommand}"`),t+=`>${i.label?i.label:""}</li>`;t+="</ul>"}t+="</div>",r[s].container&&(t+="</div'>"),r[s].backdrop&&(t+="</div'>")}r[s]=t}i+="<div tabindex=\"-1\" class='keyboard-layer' id='"+s+"'>",i+=gi(t,n,d);const e="function"==typeof r[s]?r[s]():r[s];i+=yi(t,e),i+="</div>"}}const l=document.createElement("div");l.className="ML__keyboard",e?l.classList.add(e):t.config.virtualKeyboardTheme?l.classList.add(t.config.virtualKeyboardTheme):/android|cros/i.test(navigator.userAgent)&&l.classList.add("material"),l.innerHTML=i,bi(t,l.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton"));const h=l.getElementsByClassName("layer-switch");for(let d=0;d<h.length;++d)h[d].classList.contains("shift")?t._attachButtonHandlers(h[d],{pressed:["shiftKeyboardLayer","shift"],default:["switchKeyboardLayer",h[d].getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):t._attachButtonHandlers(h[d],{default:["switchKeyboardLayer",h[d].getAttribute("data-layer")]});const c=l.getElementsByClassName("keyboard-layer");return Array.from(c).forEach(t=>{t.addEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation()}),t.addEventListener("touchstart",t=>{t.preventDefault(),t.stopPropagation()})}),c[0].classList.add("is-visible"),window.addEventListener("mouseup",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("blur",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchend",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchcancel",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),l},makeKeycap:bi};const Ci={"\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega"},xi={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\langle":"(:","\\rangle":":)"},_i={"\\pm":"&PlusMinus;","\\times":"&times;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrace":"{","\\rbrace":"}","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function Pi(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Si(t,e){return t&&e.generateID?' extid="'+t+'"':""}function wi(t,e,i){let s=!1,n="",r="",o=-1,a=-1;const l=t.atoms[t.index];if(t.index<(e=e||t.atoms.length)&&("mord"===l.type||"textord"===l.type)&&"0123456789,.".indexOf(l.latex)<0&&(r=l.toMathML(i),l.superscript&&(o=t.index),l.subscript&&(a=t.index),t.index+=1),r.length>0){if(s=!0,Ei(t)&&(o=t.index,t.index+=1),ki(t)&&(a=t.index,t.index+=1),o>=0&&a>=0)n="<msubsup>"+r,n+=Ni(t.atoms[a].subscript,0,0,i).mathML,n+=Ni(t.atoms[o].superscript,0,0,i).mathML,n+="</msubsup>";else if(o>=0){if(n="<msup>"+r,Ei(t)){const e=Ni(t.atoms[o].superscript,0,0,i).mathML,s=Ni(t.atoms[o+1].superscript,0,0,i).mathML;n+="<mi>\u2032</mi>"!==e&&"<mi>&#x2032;</mi>"!==e||"<mi>\u2032</mi>"!==s&&"<mi>&#x2032;</mi>"!==s?"<mi>\u2032</mi>"===e||"<mi>&#x2032;</mi>"===e?"<mi>&#x2032;</mi>":e:"<mi>&#x2033;</mi>"}else n+=Ni(t.atoms[o].superscript,0,0,i).mathML;n+="</msup>"}else a>=0?(n="<msub>"+r,n+=Ni(t.atoms[a].subscript,0,0,i).mathML,n+="</msub>"):n=r;"mi"!==t.lastType&&"mn"!==t.lastType&&"fence"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(n)||(n="<mo>&InvisibleTimes;</mo>"+n),r.endsWith(">f</mi>")||r.endsWith(">g</mi>")?(n+="<mo> &ApplyFunction; </mo>",t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(n)?"mo":"mi",t.mathML+=n}return s}function Ei(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&"msubsup"===t.atoms[t.index].type}function ki(t){return t.index<t.atoms.length&&t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type}function Ai(t,e,i){let s=!1,n="",r=e.atoms[e.index-1];return!!r&&(r.superscript||r.subscript||(Ei(e)||ki(e))&&(r=e.atoms[e.index],e.index+=1),!!r&&(r.superscript&&r.subscript?(n="<msubsup>"+t,n+=Ni(r.subscript,0,0,i).mathML,n+=Ni(r.superscript,0,0,i).mathML,n+="</msubsup>"):r.superscript?(n="<msup>"+t,n+=Ni(r.superscript,0,0,i).mathML,n+="</msup>"):r.subscript&&(n="<msub>"+t,n+=Ni(r.subscript,0,0,i).mathML,n+="</msub>"),n.length>0&&(s=!0,e.mathML+=n,e.lastType=""),s))}function Ti(t,e,i){let s=!1;e=e||t.atoms.length;const n=t.index;let r="",o=function(t){let e=-1,i=t.index,s=!1,n=!1;for(;i<t.atoms.length&&!s&&!n;)n=!(s="mord"!==t.atoms[i].type||"0123456789,.".indexOf(t.atoms[i].latex)<0)&&t.atoms[i].superscript,i++;return n&&(e=i-1),e}(t);for(o>=0&&o<e&&(e=o);t.index<e&&"mord"===t.atoms[t.index].type&&"0123456789,.".indexOf(t.atoms[t.index].latex)>=0;)r+=t.atoms[t.index].latex,t.index+=1;return r.length>0&&(s=!0,r="<mn"+Si(t.atoms[n].id,i)+">"+r+"</mn>",o<0&&Ei(t)&&(o=t.index,t.index+=1),o>=0&&(r="<msup>"+r,r+=Ni(t.atoms[o].superscript,0,0,i).mathML,r+="</msup>"),t.mathML+=r,t.lastType="mn"),s}function Mi(t,e,i){let s=!1,n="",r="";if(t.index<(e=e||t.atoms.length)&&"mopen"===t.atoms[t.index].type){let o=!1,a=0;const l=t.index;let h=-1,c=l+1;for(;c<e&&!o;)"mopen"===t.atoms[c].type?a+=1:"mclose"===t.atoms[c].type&&(a-=1),-1===a&&(o=!0,h=c),c+=1;o&&(n="<mrow>",n+=Li(t.atoms[l],i),n+=Ni(t.atoms,l+1,h,i).mathML,n+=Li(t.atoms[h],i),n+="</mrow>","mi"!==t.lastType&&"mn"!==t.lastType&&"mfrac"!==t.lastType&&"fence"!==t.lastType||(n="<mo>&InvisibleTimes;</mo>"+n),t.index=h+1,Ai(n,t,i)&&(s=!0,t.lastType="",n=""),r="fence")}return n.length>0&&(s=!0,t.mathML+=n,t.lastType=r),s}function Oi(t,e,i){let s=!1,n="",r="";const o=t.atoms[t.index];if(t.index<(e=e||t.atoms.length)&&("mbin"===o.type||"mrel"===o.type))n+=t.atoms[t.index].toMathML(i),t.index+=1,r="mo";else if(t.index<e&&"mop"===o.type){if("limits"===o.limits&&(o.superscript||o.subscript)){const t=Li(o,i);o.superscript&&o.subscript?(n+=("nolimits"!==o.limits?"<munderover>":"<msubsup>")+t,n+=Ni(o.subscript,0,0,i).mathML,n+=Ni(o.superscript,0,0,i).mathML,n+="nolimits"!==o.limits?"</munderover>":"</msubsup>"):o.superscript?(n+=("nolimits"!==o.limits?"<mover>":"<msup>")+t,n+=Ni(o.superscript,0,0,i).mathML,n+="nolimits"!==o.limits?"</mover>":"</msup>"):(n+=("nolimits"!==o.limits?"<munder>":"<msub>")+t,n+=Ni(o.subscript,0,0,i).mathML,n+="nolimits"!==o.limits?"</munder>":"</msub>"),r="mo"}else{const e=Li(t.atoms[t.index],i);n+=e,t.index+=1,Ai(n,t,i)&&(s=!0,t.lastType="",n=""),t.index-=1,/^<mo>(.*)<\/mo>$/.test(e)?r="mo":(n+="<mo> &ApplyFunction; </mo>",r="applyfunction")}"mi"!==t.lastType&&"mn"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(n)||(n="<mo>&InvisibleTimes;</mo>"+n),t.index+=1}return n.length>0&&(s=!0,t.mathML+=n,t.lastType=r),s}function Ni(t,e,i,s){const n={atoms:t,index:e||0,mathML:"",lastType:""};if(i=i||(t?t.length:0),"number"==typeof t||"boolean"==typeof t)n.mathML=t.toString();else if("string"==typeof t)n.mathML=t;else if(t&&"function"==typeof t.toMathML)n.mathML=t.toMathML(s);else if(Array.isArray(t)){let t=0;for(;n.index<i;)if(Ti(n,i,s)||wi(n,i,s)||Oi(n,i,s)||Mi(n,i,s))t+=1;else if(n.index<i){let e=n.atoms[n.index].toMathML(s);"mn"===n.lastType&&e.length>0&&"genfrac"===n.atoms[n.index].type&&(e="<mo>&#x2064;</mo>"+e),n.lastType="genfrac"===n.atoms[n.index].type?"mfrac":"",e.length>0&&(n.mathML+=e,t+=1),n.index+=1}t>1&&(n.mathML="<mrow>"+n.mathML+"</mrow>")}return n}function Li(t,e){let i="";const s=function(t){if(!t)return"";if("string"==typeof t)return Pi(t);if(!Array.isArray(t)&&"string"==typeof t.body)return Pi(t.body);let e="";for(const i of t)"string"==typeof i.body&&(e+=i.body);return Pi(e)}(t.body);return s&&(i="<mo"+Si(t.id,e)+">"+s+"</mo>"),i}pe.MathAtom.prototype.toMathML=function(t){const e={"\\exponentialE":"&ExponentialE;","\\imaginaryI":"&ImaginaryI;","\\differentialD":"&DifferentialD;","\\capitalDifferentialD":"&CapitalDifferentialD;","\\alpha":"&alpha;","\\pi":"&pi;","\\infty":"&infin;","\\forall":"&forall;","\\nexists":"&nexists;","\\exists":"&exist;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."},i={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let s,n,r,o,a,l,h="",c="",d={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[this.fontFamily||this.font]||"";d&&(d=' mathvariant="'+d+'"');const u=this.latex?this.latex.trim():null;let p;switch(this.type){case"group":case"root":h=Ni(this.body,0,0,t).mathML;break;case"array":if((this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(h+="<mrow>",this.lFence&&"."!==this.lFence&&(h+="<mo>"+(_i[this.lFence]||this.lFence)+"</mo>")),h+="<mtable",this.colFormat){for(h+=' columnalign="',r=0;r<this.colFormat.length;r++)this.colFormat[r].align&&(h+={l:"left",c:"center",r:"right"}[this.colFormat[r].align]+" ");h+='"'}for(h+=">",n=0;n<this.array.length;n++){for(h+="<mtr>",s=0;s<this.array[n].length;s++)h+="<mtd>"+Ni(this.array[n][s],0,0,t).mathML+"</mtd>";h+="</mtr>"}h+="</mtable>",(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(this.rFence&&"."!==this.rFence&&(h+="<mo>"+(_i[this.lFence]||this.rFence)+"</mo>"),h+="</mrow>");break;case"genfrac":(this.leftDelim||this.rightDelim)&&(h+="<mrow>"),this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+Si(this.id,t)+">"+(_i[this.leftDelim]||this.leftDelim)+"</mo>"),this.hasBarLine?(h+="<mfrac>",h+=Ni(this.numer,0,0,t).mathML||"<mi>&nbsp;</mi>",h+=Ni(this.denom,0,0,t).mathML||"<mi>&nbsp;</mi>",h+="</mfrac>"):(h+="<mtable"+Si(this.id,t)+">",h+="<mtr>"+Ni(this.numer,0,0,t).mathML+"</mtr>",h+="<mtr>"+Ni(this.denom,0,0,t).mathML+"</mtr>",h+="</mtable>"),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+Si(this.id,t)+">"+(_i[this.rightDelim]||this.rightDelim)+"</mo>"),(this.leftDelim||this.rightDelim)&&(h+="</mrow>");break;case"surd":this.index?(h+="<mroot"+Si(this.id,t)+">",h+=Ni(this.body,0,0,t).mathML,h+=Ni(this.index,0,0,t).mathML,h+="</mroot>"):(h+="<msqrt"+Si(this.id,t)+">",h+=Ni(this.body,0,0,t).mathML,h+="</msqrt>");break;case"leftright":h="<mrow>",this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+Si(this.id,t)+">"+(_i[this.leftDelim]||this.leftDelim)+"</mo>"),this.body&&(h+=Ni(this.body,0,0,t).mathML),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+Si(this.id,t)+">"+(_i[this.rightDelim]||this.rightDelim)+"</mo>"),h+="</mrow>";break;case"sizeddelim":case"delim":h+='<mo separator="true"'+Si(this.id,t)+">"+(_i[this.delim]||this.delim)+"</mo>";break;case"accent":h+='<mover accent="true"'+Si(this.id,t)+">",h+=Ni(this.body,0,0,t).mathML,h+="<mo>"+(_i[u]||this.accent)+"</mo>",h+="</mover>";break;case"line":case"overlap":break;case"overunder":o=this.underscript,(a=this.overscript)&&o?l=this.body:a?(l=this.body,this.body[0]&&this.body[0].underscript?(o=this.body[0].underscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].underscript&&(o=this.body[1].underscript,l=this.body[1].body)):o&&(l=this.body,this.body[0]&&this.body[0].overscript?(a=this.body[0].overscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].overscript&&(a=this.body[1].overscript,l=this.body[1].body)),a&&o?(h+="<munderover"+d+Si(this.id,t)+">"+Ni(l,0,0,t).mathML,h+=Ni(o,0,0,t).mathML,h+=Ni(a,0,0,t).mathML,h+="</munderover>"):a?(h+="<mover"+d+Si(this.id,t)+">"+Ni(l,t).mathML,h+=Ni(a,0,0,t).mathML,h+="</mover>"):o&&(h+="<munder"+d+Si(this.id,t)+">"+Ni(l,t).mathML,h+=Ni(o,0,0,t).mathML,h+="</munder>");break;case"mord":h=e[u]||u||("string"==typeof this.body?this.body:""),(p=u?u.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?h="&#x"+p[1]+";":h.length>0&&"\\"===h.charAt(0)&&(h="string"==typeof this.body&&this.body.charCodeAt(0)>255?"&#x"+("000000"+this.body.charCodeAt(0).toString(16)).substr(-4)+";":"string"==typeof this.body?this.body.charAt(0):this.latex),h="<mi"+d+Si(this.id,t)+">"+Pi(h)+"</mi>";break;case"mbin":case"mrel":case"textord":case"minner":h=u&&e[u]?"<mi"+Si(this.id,t)+">"+e[u]+"</mi>":u&&_i[u]?"<mo"+Si(this.id,t)+">"+_i[u]+"</mo>":Li(this,t);break;case"mpunct":h='<mo separator="true"'+Si(this.id,t)+">"+(_i[u]||u)+"</mo>";break;case"mop":"\u200b"!==this.body&&(h="<mo"+Si(this.id,t)+">",h+="\\operatorname"===u?this.body:u||this.body,h+="</mo>");break;case"mathstyle":break;case"box":h='<menclose notation="box"',this.backgroundcolor&&(h+=' mathbackground="'+ge.stringToColor(this.backgroundcolor)+'"'),h+=Si(this.id,t)+">"+Ni(this.body,0,0,t).mathML+"</menclose>";break;case"spacing":h+='<mspace width="'+(i[u]||0)+'em"/>';break;case"enclose":h='<menclose notation="';for(const t in this.notation)this.notation.hasOwnProperty(t)&&this.notation[t]&&(h+=c+t,c=" ");h+=Si(this.id,t)+'">'+Ni(this.body,0,0,t).mathML+"</menclose>";break;case"space":h+="&nbsp;"}return h},pe.toMathML=function(t,e){return Ni(t,0,0,e).mathML};const Di={"\\imaginaryI":"\u2148","\\imaginaryJ":"\u2149","\\pi":"\u03c0","\\exponentialE":"\u212f","\ufe62":"+","\uff0b":"+","\u2212":"-","-":"-","\ufe63":"-","\uff0d":"-","\\times":"*","\\cdot":"*","\u2a09":"*","\ufe0f\u2716":"*","\ufe0f\xd7":"*",".":"*","\xf7":"/","\u2044":"/","\uff0f":"/","!":"factorial","\\mp":"minusplus","\\ne":"!=","\\coloneq":":=","\\questeq":"?=","\\approx":"approx","\\cong":"congruent","\\sim":"similar","\\equiv":"equiv","\\pm":"plusminus","\\land":"and","\\wedge":"and","\\lor":"or","\\vee":"or","\\oplus":"xor","\\veebar":"xor","\\lnot":"not","\\neg":"not","\\exists":"exists","\\nexists":"!exists","\\forall":"forAll","\\backepsilon":"suchThat","\\therefore":"therefore","\\because":"because","\\nabla":"nabla","\\circ":"circle","\\ominus":"ominus","\\odot":"odot","\\otimes":"otimes","\\zeta":"Zeta","\\Gamma":"Gamma","\\min":"min","\\max":"max","\\mod":"mod","\\lim":"lim","\\sum":"sum","\\prod":"prod","\\int":"integral","\\iint":"integral2","\\iiint":"integral3","\\Re":"Re","\\gothicCapitalR":"Re","\\Im":"Im","\\gothicCapitalI":"Im","\\binom":"nCr","\\partial":"partial","\\differentialD":"differentialD","\\capitalDifferentialD":"capitalDifferentialD","\\Finv":"Finv","\\Game":"Game","\\wp":"wp","\\ast":"ast","\\star":"star","\\asymp":"asymp","\\to":"to","\\gets":"gets","\\rightarrow":"shortLogicalImplies","\\leftarrow":"shortLogicalImpliedBy","\\leftrightarrow":"shortLogicalEquivalent","\\longrightarrow":"logicalImplies","\\longleftarrow":"logicalImpliedBy","\\longleftrightarrow":"logicalEquivalent","\\Rightarrow":"shortImplies","\\Leftarrow":"shortImpliedBy","\\Leftrightarrow":"shortEquivalent","\\implies":"implies","\\Longrightarrow":"implies","\\impliedby":"impliedBy","\\Longleftarrow":"impliedBy","\\iff":"equivalent","\\Longleftrightarrow":"equivalent"},ji={"+":"add","*":"multiply","-":"subtract","/":"divide","=":"equal",":=":"assign","!=":"ne","?=":"questeq",approx:"approx",congruent:"congruent",similar:"similar",equiv:"equiv","<":"lt",">":"gt","<=":"le",">=":"ge","\u2264":"le","\u2265":"ge",">>":"gg","<<":"ll","**":"pow","++":"increment","--":"decrement"},Ii={equal:"%0 = %1",ne:"%0 \\ne %1",questeq:"%0 \\questeq %1",approx:"%0 \\approx %1",congruent:"%0 \\cong %1",similar:"%0 \\sim %1",equiv:"%0 \\equiv %1",assign:"%0 := %1",lt:"%0 < %1",gt:"%0 > %1",le:"%0 \\le %1",ge:"%0 \\ge %1",sin:"\\sin%_%^ %0",cos:"\\cos%_%^ %0",tan:"\\tan%_%^ %0",cot:"\\cot%_%^ %0",sec:"\\sec%_%^ %0",csc:"\\csc%_%^ %0",sinh:"\\sinh %0",cosh:"\\cosh %0",tanh:"\\tanh %0",csch:"\\csch %0",sech:"\\sech %0",coth:"\\coth %0",arcsin:"\\arcsin %0",arccos:"\\arccos %0",arctan:"\\arctan %0",arccot:"\\arcctg %0",arcsec:"\\arcsec %0",arccsc:"\\arccsc %0",arsinh:"\\arsinh %0",arcosh:"\\arcosh %0",artanh:"\\artanh %0",arcsch:"\\arcsch %0",arsech:"\\arsech %0",arcoth:"\\arcoth %0",ln:"\\ln%_%^ %",log:"\\log%_%^ %",lg:"\\lg %",lb:"\\lb %",sum:"\\sum%_%^ %0",prod:"\\prod%_%^ %0",Zeta:"\\zeta%_%^ %",Gamma:"\\Gamma %",min:"\\min%_%^ %",max:"\\max%_%^ %",mod:"\\mod%_%^ %",lim:"\\lim%_%^ %",binom:"\\binom %",nabla:"\\nabla %",curl:"\\nabla\\times %0",div:"\\nabla\\cdot %0",floor:"\\lfloor %0 \\rfloor%_%^",ceil:"\\lceil %0 \\rceil%_%^",abs:"\\left| %0 \\right|%_%^",norm:"\\lVert %0 \\rVert%_%^",ucorner:"\\ulcorner %0 \\urcorner%_%^",lcorner:"\\llcorner %0 \\lrcorner%_%^",angle:"\\langle %0 \\rangle%_%^",group:"\\lgroup %0 \\rgroup%_%^",moustache:"\\lmoustache %0 \\rmoustache%_%^",brace:"\\lbrace %0 \\rbrace%_%^","sqrt[]":"\\sqrt[%^]{%0}",sqrt:"\\sqrt{%0}",lcm:"\\operatorname{lcm}%",gcd:"\\operatorname{gcd}%",erf:"\\operatorname{erf}%",erfc:"\\operatorname{erfc}%",randomReal:"\\operatorname{randomReal}%",randomInteger:"\\operatorname{randomInteger}%",and:"%0 \\land %1",or:"%0 \\lor %1",xor:"%0 \\oplus %1",not:"%0 \\lnot %1",circle:"%0 \\circ %1",ast:"%0 \\ast %1",star:"%0 \\star %1",asymp:"%0 \\asymp %1","/":"\\frac{%0}{%1}",Re:"\\Re{%0}",Im:"\\Im{%0}",factorial:"%0!",factorial2:"%0!!"},Ri={degree:880,nabla:740,curl:740,partial:740,differentialD:740,capitalDifferentialD:740,"**":720,odot:710,not:680,div:660,solidus:660,"/":660,setminus:650,"%":640,otimes:410,union:350,intersection:350,"*":390,ast:390,".":390,oplus:300,ominus:300,"+":275,"-":275,"+-":275,"-+":275,circle:265,circledast:265,circledcirc:265,star:265,"..":263,to:262,in:262,"|":261,congruent:265,equiv:260,"=":260,"!=":255,"?=":255,similar:250,approx:247,"<":245,">":243,">=":242,"\u2265":242,"<=":241,complement:240,subset:240,superset:240,elementof:240,"!elementof":240,exists:230,"!exists":230,forall:230,and:200,xor:195,or:190,suchThat:110,":":100,assign:80,":=":80,therefore:70,because:70,shortLogicalImplies:52,shortImplies:51,logicalImplies:50,implies:49,shortLogicalImpliedBy:48,shortImpliedBy:47,logicalImpliedBy:46,impliedBy:45,shortLogicalEquivalent:44,shortEquivalent:43,logicalEquivalent:42,equivalent:41,",":40,";":30};function Bi(t,e){return Array.isArray(t.arg)?t.arg[e]:void 0}function Fi(t){return t&&Ri[t]||-1}function Yi(t){return/=|=>/.test(t)?"right":"left"}function zi(t){if("f"===t||"g"===t)return!0;const e=Ii[t];return!!e&&!!/%[^01_^]?/.test(e)}function Xi(t){t=(t||"").trim();let e=Di[t];if(!e)if(/^\\[^{}]+$/.test(t)){const i=Rt.getInfo(t,"math",{});e=i&&i.value||t.slice(1)}else e=t;return e}function Ui(t){if(!t)return null;const e=Xi($i(t)),i=[Fi(e),Yi(e)];return i[0]<=0?null:i}function Gi(t){return null!==Ui(t)}const Hi={"\\lfloor\\rfloor":"floor","\\lceil\\rceil":"ceil","\\vert\\vert":"abs","\\lvert\\rvert":"abs","||":"abs","\\Vert\\Vert":"norm","\\lVert\\rVert":"norm","\\ulcorner\\urcorner":"ucorner","\\llcorner\\lrcorner":"lcorner","\\langle\\rangle":"angle","\\lgroup\\rgroup":"group","\\lmoustache\\rmoustache":"moustache","\\lbrace\\rbrace":"brace"},qi={"!":"factorial","\\dag":"dagger","\\dagger":"dagger","\\ddagger":"dagger2","\\maltese":"maltese","\\backprime":"backprime","\\backdoubleprime":"backprime2","\\prime":"prime","\\doubleprime":"prime2","\\$":"$","\\%":"%","\\_":"_","\\degree":"degree"},Ji={"+":"add","-":"add","*":"multiply","=":"equal",",":"list",";":"list2",and:"and",or:"or",xor:"xor",union:"union",shortLogicalEquivalent:"logicalEquivalent",logicalEquivalent:"logicalEquivalent",shortEquivalent:"equivalent",equivalent:"equivalent"},Vi={",":"list",";":"list2"};function $i(t){if(Array.isArray(t)){let e="";for(const i of t)e+=$i(i);return e}if(t.latex&&!/^\\math(op|bin|rel|open|punct|ord|inner)/.test(t.latex))return t.latex.trim();if("leftright"===t.type)return"";if("string"==typeof t.body)return t.body;if(Array.isArray(t.body)){let e="";for(const i of t.body)e+=$i(i);return e}return""}function Wi(t){return parseFloat(t.num)}function Ki(t){return"object"==typeof t&&void 0!==t.num}function Zi(t){let e=0;return Ki(t)&&(e="object"==typeof t.num?void 0!==t.num.re?fs(t.num.re):0:parseFloat(t.num)),e}function Qi(t){let e=0;return Ki(t)&&"object"==typeof t.num&&(e=void 0!==t.num.im?fs(t.num.im):0),e}function ts(t){return t&&void 0!==t.sup}function es(t,e,i){let s=!1;const n=t.atoms[t.index];return n&&n.type===e&&(s=void 0===i||$i(n)===i),s}function is(t,...e){const i={fn:t};if(e){const t=[];for(const i of e)i&&t.push(i);t.length>0&&(i.arg=t)}return i}function ss(t){return"number"==typeof t?{num:t.toString()}:"string"==typeof t?{num:t}:"object"==typeof t?{num:t}:void 0}function ns(t){if(Ki(t)){const e=Zi(t),i=Qi(t);return 0!==i?(0!==e&&(t.num.re=(-e).toString()),t.num.im=(-i).toString()):t.num=(-e).toString(),t}return is("negate",t)}function rs(t){const e=t.atoms[t.index+1];return e&&"msubsup"===e.type}function os(t,e){let i=t.atoms[t.index];return!i||void 0===i.superscript&&void 0===i.subscript?i=null:t.index+=1,i||((i=t.atoms[t.index+1])&&"msubsup"===i.type&&(i.superscript||i.subscript)?t.index+=2:i=null),i?(void 0!==i.subscript&&(t.ast.sub=ps(i.subscript,e)),void 0!==i.superscript&&("msubsup"===i.type?/['\u2032]|\\prime/.test($i(i.superscript))?(t.index+=1,(i=t.atoms[t.index+1])&&"msubsup"===i.type&&/['\u2032]|\\prime/.test($i(i.superscript))?t.ast.sup={sym:"\u2033"}:(t.ast.sup={sym:"\u2032"},t.index-=1)):/['\u2033]|\\doubleprime/.test($i(i.superscript))?t.ast.sup={sym:"\u2033"}:t.ast&&(t.ast.sup=ps(i.superscript,e)):t.ast.sup=ps(i.superscript,e))):t.index+=1,t}function as(t,e){const i=t.ast;if(hs(t,"!!"))return t.index+=1,t.ast=is("factorial2",i),as(t=os(t,e),e);if(hs(t,"++"))return t.index+=1,t.ast=is("increment",i),as(t=os(t,e),e);if(hs(t,"--"))return t.index+=1,t.ast=is("decrement",i),as(t=os(t,e),e);const s=t.atoms[t.index];return s&&s.latex&&qi[s.latex.trim()]&&(t.ast=is(qi[s.latex.trim()],i),t=as(t=os(t,e),e)),t}function ls(t,e,i,s){if(t.index=t.index||0,0===t.atoms.length||t.index>=t.atoms.length)return t.ast=void 0,t;const n=t.minPrec;t.minPrec=0;let r=t.atoms[t.index];if(e){if("mopen"===r.type&&$i(r)===e)t.index+=1,(r=(t=ds(t,s)).atoms[t.index])&&"mclose"===r.type&&$i(r)===i&&(rs(t)&&(t.ast={group:t.ast}),t=as(t=os(t,s),s));else if("textord"===r.type&&$i(r)===e)t.index+=1,(r=(t=ds(t,s)).atoms[t.index])&&"textord"===r.type&&$i(r)===i&&(t.index+=1,t=as(t=os(t,s),s));else if("\\lVert"===e&&"textord"===r.type&&"|"===r.latex){if((r=t.atoms[t.index+1])&&"textord"===r.type&&"|"===r.latex){t.index+=2,r=(t=ds(t,s)).atoms[t.index];const e=t.atoms[t.index+1];r&&"textord"===r.type&&"|"===r.latex&&e&&"textord"===e.type&&"|"===e.latex&&(t.index+=2,t=as(t=os(t,s),s))}}else if("sizeddelim"===r.type&&r.delim===e)t.index+=1,(r=(t=ds(t,s)).atoms[t.index])&&"sizeddelim"===r.type&&r.delim===i&&(t.index+=1,t=as(t=os(t,s),s));else{if("leftright"!==r.type||r.leftDelim!==e||"?"!==r.rightDelim&&r.rightDelim!==i)return;t.ast=ps(r.body,s),rs(t)&&(t.ast={group:t.ast}),t=as(t=os(t,s),s)}return t.minPrec=n,t}{let s=!0;if("mopen"===r.type?(e=r.latex.trim(),i=Rt.RIGHT_DELIM[e]):"sizeddelim"===r.type?i=Rt.RIGHT_DELIM[e=r.delim]:"leftright"===r.type?(s=!1,e=r.leftDelim,"?"===(i=r.rightDelim)&&(i=Rt.RIGHT_DELIM[e])):"textord"===r.type&&(e=r.latex.trim(),i=Rt.RIGHT_DELIM[e]),e&&i){if("|"===e&&"|"===i){const s=t.atoms[t.index+1];s&&"textord"===s.type&&"|"===s.latex&&(e="\\lVert",i="\\rVert")}if(t=ls(t,e,i))return s&&(t.index+=1),t.ast={fn:Hi[e+i]||e+i,arg:[t.ast]},t.minPrec=n,t}}}function hs(t,e){return t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)&&e===$i(t.atoms[t.index])+$i(t.atoms[t.index+1])}function cs(t){if(t.index=t.index||0,!(t.atoms.length<=1||t.index>=t.atoms.length-1)){if(!es(t,"textord","\\nabla")){const e=t.atoms[t.index].latex+t.atoms[t.index+1].latex,i=/^(>=|<=|>>|<<|:=|!=|\*\*|\+\+|--)$/.test(e)?e:"";return i&&(t.index+=1),i}return t.index+=1,es(t,"mbin","\\times")?(t.index+=1,t.ast="curl",t):es(t,"mbin","\\cdot")?(t.index+=1,t.ast="div",t):void(t.index-=1)}}function ds(t,e){if(t.index=t.index||0,t.ast=void 0,0===t.atoms.length||t.index>=t.atoms.length)return t;t.minPrec=t.minPrec||0;let i=function t(e,i){if(e.index=e.index||0,e.ast=void 0,0===e.atoms.length||e.index>=e.atoms.length)return e;let s=e.atoms[e.index];const n=Xi($i(s));if(cs(e))e.ast=is(e.ast,t(e,i).ast);else{if("root"===s.type)return e.index=0,e.atoms=s.body,t(e,i);if("mbin"===s.type&&"-"===n)e.index+=1,(e=t(e,i)).ast=ns(e.ast);else if("mbin"===s.type&&"+"===n)e.index+=1,(e=t(e,i)).ast=is("add",e.ast);else if("mord"===s.type&&/^[0-9.]$/.test(s.latex)){let n="",r=!1,o=/^[0-9.eEdD]$/;for(;e.index<e.atoms.length&&!r&&(es(e,"spacing")||(es(e,"mord")||es(e,"mpunct",",")||es(e,"mbin"))&&o.test(e.atoms[e.index].latex));)if("spacing"===e.atoms[e.index].type)e.index+=1;else if(void 0!==e.atoms[e.index].superscript||void 0!==e.atoms[e.index].subscript)r=!0;else{let t=e.atoms[e.index].latex;"d"===t||"D"===t?(t="e",o=/^[0-9+-.]$/):"e"===t||"E"===t?rs(e)?(t="",e.index-=1,r=!0):(t="E",o=/^[0-9+-.]$/):o===/^[0-9+-.]$/&&(o=/^[0-9]$/),n+=","===t?"":t,e.index+=1}if(e.ast=n?ss(n):void 0,(s=e.atoms[e.index])&&"genfrac"===s.type&&!isNaN(e.ast.num)){const s=e.ast;(e=t(e,i)).ast=is("add",s,e.ast)}if(s&&"group"===s.type&&s.latex&&s.latex.startsWith("\\nicefrac")){const s=e.ast;(e=t(e,i)).ast=is("add",s,e.ast)}s&&"msubsup"===s.type&&(e=os(e,i)),e=as(e,i)}else if("genfrac"===s.type||"surd"===s.type)e.ast=s.toAST(i),e=as(e=os(e,i),i);else if("mord"===s.type||"mbin"===s.type){if(zi(n)&&!Gi(s)){e.ast={fn:n};const s=(e=os(e,i)).ast,r=t(e,i).ast;r&&/^(list0|list|list2)$/.test(r.fn)?s.arg=s.arg?s.arg.arg:void 0:r&&(s.arg=[r]),e.ast=s}else e.ast=s.toAST(i),"\u2148"===e.ast.sym&&(e.ast=ss({im:"1"})),e=os(e);e=as(e,i)}else if("textord"===s.type){if(!Gi(s)&&!Rt.RIGHT_DELIM[s.latex?s.latex.trim():s.body])if(zi(n)){e.ast={fn:n};const s=(e=os(e,i)).ast;e.index+=1,s.arg=[t(e,i).ast],e.ast=s,e=as(e,i)}else e.ast=s.toAST(i),void 0===s.superscript&&(e.index+=1),e=as(e=os(e,i),i)}else if("mop"===s.type){if((/^\\(mathop|operatorname|operatorname\*)/.test(s.latex)||zi(n))&&!Gi(s))if(e.ast={fn:/^\\(mathop|operatorname|operatorname\*)/.test(s.latex)?s.body:n},ts((e=os(e,i)).ast)){const s={sin:"arcsin",cos:"arccos",tan:"arctan",cot:"arccot",sec:"arcsec",csc:"arccsc",sinh:"arsinh",cosh:"arcosh",tanh:"artanh",csch:"arcsch",sech:"arsech",coth:"arcoth"};if(-1===Wi(e.ast.sup)&&s[n])e.ast=is(s[n],t(e,i).ast);else{const s=e.ast;s.arg=[t(e,i).ast],e.ast=s}}else{const s=e.ast,n=t(e,i).ast;n&&/^(list0|list|list2)$/.test(n.fn)?s.arg=n.arg:n&&(s.arg=[n]),e.ast=s}}else if("array"===s.type)e.index+=1,e.ast=s.toAST(i);else if("group"===s.type)e.index+=1,e.ast=s.toAST(i);else{if("mclose"===s.type)return e;if("error"===s.type)return e.index+=1,e.ast={error:s.latex},e}}if(void 0===e.ast){const t=ls(e,"(",")",i)||ls(e,null,null,i);t?e=t:Gi(s)||("placeholder"===s.type?e.ast=ss(0):(e.ast={text:"?"},e.ast.error="Unexpected token '"+s.type+"'",s.latex?e.ast.latex=s.latex:s.body&&s.toLatex&&(e.ast.latex=s.toLatex())),e.index+=1)}if((s=e.atoms[e.index])&&("mord"===s.type||"surd"===s.type||"mop"===s.type||"mopen"===s.type||"sizeddelim"===s.type||"leftright"===s.type)){if("sizeddelim"===s.type)for(const t in Rt.RIGHT_DELIM)if(s.delim===Rt.RIGHT_DELIM[t])return e.index+=1,e;if(("mord"===s.type||"textord"===s.type||"mop"===s.type)&&Gi(s))return e;const n=e.ast;e.ast={},(e=t(e,i))&&e.ast&&n?zi(n.fn)&&void 0===n.arg||Array.isArray(n.arg)&&0===n.arg.length?e.ast="list2"===e.ast.fn||"list"===e.ast.fn?is(n.fn,e.ast.arg):is("multiply",n,e.ast):"multiply"===e.ast.fn?e.ast.arg.unshift(n):e.ast=0===Qi(n)&&0!==Zi(n)&&1===Qi(e.ast)&&0===Zi(e.ast)?ss({im:Zi(n).toString()}):is("multiply",n,e.ast):e.ast=n}return e}(t,e).ast,s=!1;const n=t.minPrec;for(;!s;){const r=t.atoms[t.index],o=cs(t);let a,l;if((s=!r||"text"===r.mode||!o&&!Gi(r))||([a,l]=o?[Fi(o),Yi(o)]:Ui(r),s=a<n),!s){const n=o||Xi($i(r));if(t.minPrec="left"===l?a+1:a,t.index+=1,"|"===n)if(void 0!==r.subscript||t.atoms[t.index]&&void 0!==t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type){t.ast={};const s=os(t,e).ast.sub;if(i=is("bind",i),s&&"equal"===s.fn&&i.arg)i.arg.push(Bi(s,0)),i.arg.push(Bi(s,1));else if(s&&i.arg&&("list"===s.fn||"list2"===s.fn)){let t={sym:"x"};for(let e=0;e<s.arg.length;e++)"equal"===s.arg[e].fn?(t=Bi(s.arg[e],0),i.arg.push(t),i.arg.push(Bi(s.arg[e],1))):(i.arg.push(t),i.arg.push(s.arg[e]))}else s&&(i.arg.push({sym:"x"}),i.arg.push(s))}else s=!0;else{const s=ds(t,e).ast;let r=Vi[n];r&&i&&i.fn!==r&&(i=is(r,i)),"-"===n?i&&i.arg&&"add"===i.fn?void 0!==s&&i.arg.push(ns(s)):i=i&&"subtract"===i.fn?is("add",Bi(i,0),ns(Bi(i,1)),ns(s)):!Ki(i)||ts(i)||!Ki(s)||ts(s)||void 0!==s.num.re&&"0"!==s.num.re||void 0===s.num.im?is("subtract",i,s):{num:{re:i.num,im:(-parseFloat(s.num.im)).toString()}}:"add"===(r=Ji[n])&&i&&"subtract"===i.fn?i=is("add",Bi(i,0),ns(Bi(i,1)),s):r&&i&&i.fn===r&&!ts(i)?void 0!==s&&(s.fn===r&&!ts(s)&&s.arg?i.arg=[...i.arg,...s.arg]:i.arg&&i.arg.push(s)):r&&s&&s.arg&&s.fn===r?(s.arg.unshift(i),i=s):i="multiply"===r&&Ki(i)&&!ts(i)&&s&&10===Wi(s)&&Ki(s.sup)?ss(Wi(i)*Math.pow(10,Wi(s.sup))):"add"===r&&Ki(i)&&!ts(i)&&s&&0!==Qi(s)&&!ts(s)?{num:{re:i.num,im:s.num.im}}:is(r||ji[n]||n,i,s)}}}return t.ast=i,t}function us(t){if(!t)return[];let e;if(Array.isArray(t)){e=[];for(const i of t){const t=us(i);e=e.concat(t)}}else{if("spacing"===t.type)return[];"first"===t.type||"box"===t.type?e=us(t.body):(t.body&&Array.isArray(t.body)&&(t.body=us(t.body)),t.superscript&&Array.isArray(t.superscript)&&(t.superscript=us(t.superscript)),t.subscript&&Array.isArray(t.subscript)&&(t.subscript=us(t.subscript)),t.index&&Array.isArray(t.index)&&(t.index=us(t.index)),t.denom&&Array.isArray(t.denom)&&(t.denom=us(t.denom)),t.numer&&Array.isArray(t.numer)&&(t.numer=us(t.numer)),t.array&&Array.isArray(t.array)&&(t.array=t.array.map(t=>t.map(t=>us(t)))),e=[t])}return e}function ps(t,e){return function(t,e){t.index=t.index||0,t.ast=void 0;const i=[];for(;t.atoms[t.index];)if("text"===t.atoms[t.index].mode){let e="";for(;t.atoms[t.index]&&"text"===t.atoms[t.index].mode;)e+=t.atoms[t.index].body,t.index+=1;i.push(e)}else{const s=ds(t,e).ast;if(!s)return;i.push(s)}return i.length>1?is("text",...i):i[0]||void 0}({atoms:us(t)},e)}function fs(t){return parseFloat(parseFloat(t).toPrecision(15))}pe.MathAtom.prototype.toAST=function(t){let e,i,s,n,r={},o="",a={bb:"double-struck",cal:"script",scr:"script",frak:"fraktur",cmrss:"sans-serif",cmrtt:"monospace"}[this.baseFontFamily||this.fontFamily],l="";"b"===this.fontSeries&&(l+="bold"),"it"===this.fontShape&&(l+="italic");const h=this.latex?this.latex.trim():null;switch(this.type){case"root":case"group":this.latex&&this.latex.startsWith("\\nicefrac")?(e=this.latex.slice(9).match(/({.*}|[^}])({.*}|[^}])/))?(i=1===e[1].length?e[1]:e[1].substr(1,e[1].length-2),i=Ce.parseTokens(v.tokenize(i),"math",null,t.macros),s=1===e[2].length?e[2]:e[2].substr(1,e[2].length-2),s=Ce.parseTokens(v.tokenize(s),"math",null,t.macros),r=is("divide",ps(i,t),ps(s,t))):r.fn="divide":r.group=ps(this.body,t);break;case"genfrac":r=is("divide",ps(this.numer,t),this.denom&&this.denom[0]&&"placeholder"===this.denom[0].type?ss(1):ps(this.denom,t));break;case"surd":r=this.index?is("pow",ps(this.body,t),is("divide",1,ps(this.index,t))):is("sqrt",ps(this.body,t));break;case"rule":break;case"line":case"overlap":case"accent":case"overunder":break;case"mord":case"textord":case"mbin":(e=h?h.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):void 0)?o=String.fromCodePoint(parseInt(e[1],16)):(o=Xi($i(this))).length>0&&"\\"===o.charAt(0)&&"string"==typeof this.body&&(o=this.body),(n=Rt.mathVariantToUnicode(o,a,l).replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"))!==o?(r={sym:n},a="normal"):r={sym:o};break;case"minner":case"mop":break;case"box":r=ps(this.body,t);break;case"enclose":break;case"array":if("cardinality"===this.env.name)r=is("card",ps(this.array,t));else if(/array|matrix|pmatrix|bmatrix/.test(this.env.name)){r={fn:"array",args:[]};for(const e of this.array)r.args.push(e.map(e=>ps(e,t)))}else if("cases"===this.env.name){r={fn:"cases",args:[]};for(const e of this.array)if(e[0]){const i=[];i.push(ps(e[0],t));let s=ps(e[1],t);s&&"text"===s.fn&&s.arg&&/^(if|when|for)$/i.test(s.arg[0].trim())&&(s=s.arg.filter(t=>"string"!=typeof t)),i.push(s||{}),r.args.push(i)}}break;case"spacing":case"space":case"mathstyle":break;default:r=void 0}return r&&a&&"normal"!==a&&(r.variant=a),r&&"string"==typeof this.cssClass&&(r.class=this.cssClass),r&&"string"==typeof this.cssId&&(r.id=this.cssId),r},pe.toAST=function(t,e){return ps(t,e)};const ms={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>'};function gs(t){let e=0;if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&(e+=1);return 1===e}function bs(t){let e="";if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&"string"==typeof i.body&&(e+=i.body);return e}function ys(t,e,i,s){e=e.split(" ");for(const n of e){const e=n.match(/(.*):(.*)/);if(e){const n=s||{};"active"===e[2]?n.passive=!1:n[e[2]]=!0,t.addEventListener(e[1],i,n)}else t.addEventListener(n,i,s)}}function vs(t,e,i,s){e=e.split(" ");for(const n of e){const e=n.match(/(.*):(.*)/);if(e){const n=s||{};"active"===e[2]?n.passive=!1:n[e[2]]=!0,t.removeEventListener(e[1],i,n)}else t.removeEventListener(n,i,s)}}function Cs(t,e){let i=document.getElementById(t);return i?i.setAttribute("data-refcount",parseInt(i.getAttribute("data-refcount"))+1):((i=document.createElement("div")).setAttribute("aria-hidden","true"),i.setAttribute("data-refcount","1"),i.className=e,i.id=t,document.body.appendChild(i)),i}function xs(t){if(!t)return null;const e=parseInt(t.getAttribute("data-refcount"));return e&&1!==e?t.setAttribute("data-refcount",e-1):t.remove(),t}function _s(t,e){this.$setConfig(e||{}),this.element=t,t.mathfield=this,this.originalContent=t.innerHTML;let i=this.element.textContent;i&&(i=i.trim());let s="";this.config.substituteTextArea?s+="string"==typeof this.config.substituteTextArea?this.config.substituteTextArea:"<span></span>":/android|ipad|ipod|iphone/i.test(navigator.userAgent)?s+="<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"0\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>":s+='<span class="ML__textarea"><textarea class="ML__textarea__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" aria-hidden="true" tabindex="0"></textarea></span>',s+='<span class="ML__fieldcontainer"><span class="ML__fieldcontainer__field"></span>',this.config.virtualKeyboardMode||(this.config.virtualKeyboardMode=window.matchMedia&&window.matchMedia("(any-pointer: coarse)").matches?"onfocus":"off"),"manual"===this.config.virtualKeyboardMode?(s+=`<button class="ML__virtual-keyboard-toggle" data-tooltip="${hi("tooltip.toggle virtual keyboard")}">`,s+=this.config.virtualKeyboardToggleGlyph?this.config.virtualKeyboardToggleGlyph:'<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',s+="</button>"):s+="<span ></span>",s+="</span>",this.element.innerHTML=s+='\n        <div class="sr-only">\n            <span aria-live="assertive" aria-atomic="true"></span>\n            <span></span>\n        </div>\n    ';let n=0;this.textarea="function"==typeof this.config.substituteTextArea?this.config.substituteTextArea():this.element.children[n++].firstElementChild,this.field=this.element.children[n].children[0],this.field.addEventListener("wheel",t=>{t.preventDefault(),t.stopPropagation();let e=void 0===t.deltaX?t.detail:-t.deltaX;isFinite(e)||(e=t.wheelDelta/10),this.field.scroll({top:0,left:this.field.scrollLeft-5*e})},{passive:!1}),this.virtualKeyboardToggleDOMNode=this.element.children[n++].children[1],this._attachButtonHandlers(this.virtualKeyboardToggleDOMNode,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.children[n].children[0],this.accessibleNode=this.element.children[n++].children[1],this.popover=Cs("mathlive-popover-panel","ML__popover"),this.keystrokeCaption=Cs("mathlive-keystroke-caption-panel","ML__keystroke-caption"),this.keystrokeCaptionVisible=!1,this.virtualKeyboardVisible=!1,this.keystrokeBuffer="",this.keystrokeBufferStates=[],this.keystrokeBufferResetTimer=null,this.suggestionIndex=0,this.mode=e.defaultMode||"math",this.smartModeSuppressed=!1,this.style={},this.blurred=!0,ys(this.element,"focus",this),ys(this.element,"blur",this),ys(this.textarea,"cut",this),ys(this.textarea,"copy",this),ys(this.textarea,"paste",this),ti.delegateKeyboardEvents(this.textarea,{container:this.element,allowDeadKey:()=>"text"===this.mode,typedText:this._onTypedText.bind(this),paste:this._onPaste.bind(this),keystroke:this._onKeystroke.bind(this),focus:this._onFocus.bind(this),blur:this._onBlur.bind(this)}),window.PointerEvent?ys(this.field,"pointerdown",this):ys(this.field,"touchstart:active mousedown",this),ys(window,"resize",this);const r={...e};r.onSelectionDidChange=_s.prototype._onSelectionDidChange.bind(this),r.onContentDidChange=_s.prototype._onContentDidChange.bind(this),r.onAnnounce=this.config.onAnnounce,r.smartFence=this.config.smartFence,r.macros=this.config.macros,r.removeExtraneousParentheses=this.config.removeExtraneousParentheses,this.mathlist=new Ve.EditableMathlist(r,this),this.undoManager=new ei.UndoManager(this.mathlist),i.length>0&&this.$latex(i),this.undoManager.startRecording(),this.undoManager.snapshot(this.config)}let Ps;pe.toSpeakableFragment=function(t,e){function i(t){return"<emphasis>"+t+"</emphasis>"}if(!t)return"";let s="";if(t.id&&"math"===e.speechMode&&(s+='<mark name="'+t.id.toString()+'"/>'),Array.isArray(t)){let n=!1;for(let r=0;r<t.length;r++)r<t.length-2&&"mopen"===t[r].type&&"mclose"===t[r+2].type&&"mord"===t[r+1].type?(s+=" of ",s+=i(pe.toSpeakableFragment(t[r+1],e)),r+=2):"mord"===t[r].type&&/[0123456789,.]/.test(t[r].latex)?n?s+=t[r].latex:(n=!0,s+=pe.toSpeakableFragment(t[r],e)):(n=!1,s+=pe.toSpeakableFragment(t[r],e))}else{let n="",r="",o="",a=!1;switch(t.type){case"group":case"root":s+=pe.toSpeakableFragment(t.body,e);break;case"genfrac":if(n=pe.toSpeakableFragment(t.numer,e),r=pe.toSpeakableFragment(t.denom,e),gs(t.numer)&&gs(t.denom)){const e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[bs(t.numer)+"/"+bs(t.denom)];e?s=e:s+=n+" over "+r}else s+=' the fraction <break time="150ms"/>'+n+', over <break time="150ms"/>'+r+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(o=pe.toSpeakableFragment(t.body,e),t.index){let i=pe.toSpeakableFragment(t.index,e);const n=(i=i.trim()).replace(/<mark([^\/]*)\/>/g,"");s+="3"===n?' the cube root of <break time="200ms"/>'+o+'. <break time="200ms"/> End cube root':"n"===n?' the nth root of <break time="200ms"/>'+o+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+i+', of <break time="200ms"/>'+o+'. <break time="200ms"/> End root'}else gs(t.body)?s+=" the square root of "+o+" , ":s+=' the square root of <break time="200ms"/>'+o+'. <break time="200ms"/> End square root';break;case"accent":break;case"leftright":s+=ms[t.leftDelim]||t.leftDelim,s+=pe.toSpeakableFragment(t.body,e),s+=ms[t.rightDelim]||t.rightDelim;break;case"line":case"rule":case"overunder":case"overlap":break;case"placeholder":s+="placeholder "+t.body;break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":{const i=t.latex?t.latex.trim():"";if("\\mathbin"===i||"\\mathrel"===i||"\\mathopen"===i||"\\mathclose"===i||"\\mathpunct"===i||"\\mathord"===i||"\\mathinner"===i){s=pe.toSpeakableFragment(t.body,e);break}let n=t.body,r=t.latex;if("delim"!==t.type&&"sizeddelim"!==t.type||(n=r=t.delim),"text"===e.speechMode)s+=n;else{if("mbin"===t.type&&(s+='<break time="150ms"/>'),n){const t=ms[n]||(r?ms[r.trim()]:"");s+=t?" "+t:(r?function(t){let e=ai.NOTES[t];return e||"\\"!==t.charAt(0)||(e=" "+t.replace("\\","")+" "),Array.isArray(e)&&(e=e[0]),e}(r.trim()):"")||function(t){let i="";return e.textToSpeechMarkup?/[a-z]/.test(t)?i+=' <say-as interpret-as="character">'+t+"</say-as>":/[A-Z]/.test(t)?i+="capital "+t.toLowerCase():i+=t:/[a-z]/.test(t)?i+=" '"+t.toUpperCase()+"'":/[A-Z]/.test(t)?i+=" 'capital "+t.toUpperCase()+"'":i+=t,i}(n)}else s+=pe.toSpeakableFragment(t.body,e);"mbin"===t.type&&(s+='<break time="150ms"/>')}break}case"mop":if("\u200b"!==t.body){const n=t.latex?t.latex.trim():"";if("\\sum"===n)if(t.superscript&&t.subscript){let i=pe.toSpeakableFragment(t.superscript,e);i=i.trim();let n=pe.toSpeakableFragment(t.subscript,e);s+=' the summation from <break time="200ms"/>'+(n=n.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else if(t.subscript){let i=pe.toSpeakableFragment(t.subscript,e);s+=' the summation from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else s+=" the summation of";else if("\\prod"===n)if(t.superscript&&t.subscript){let i=pe.toSpeakableFragment(t.superscript,e);i=i.trim();let n=pe.toSpeakableFragment(t.subscript,e);s+=' the product from <break time="200ms"/>'+(n=n.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else if(t.subscript){let i=pe.toSpeakableFragment(t.subscript,e);s+=' the product from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',a=!0}else s+=" the product  of ";else if("\\int"===n)if(t.superscript&&t.subscript){let n=pe.toSpeakableFragment(t.superscript,e);n=n.trim();let r=pe.toSpeakableFragment(t.subscript,e);s+=' the integral from <break time="200ms"/>'+i(r=r.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i(n)+' <break time="200ms"/> of ',a=!0}else s+=' the integral of <break time="200ms"/> ';else"string"==typeof t.body?s+=ms[t.body]||ms[t.latex.trim()]||" "+t.body:t.latex&&t.latex.length>0&&(s+="\\"===t.latex[0]?" "+t.latex.substr(1):" "+t.latex)}break;case"enclose":o=pe.toSpeakableFragment(t.body,e),gs(t.body)?s+=" crossed out "+o+" , ":s+=" crossed out "+o+". End cross out"}if(!a&&t.superscript){let i=pe.toSpeakableFragment(t.superscript,e);const n=(i=i.trim()).replace(/<[^>]*>/g,"");if(gs(t.superscript)){if("math"===e.speechMode){const e=function(t){if(t&&Array.isArray(t))for(const e of t)if("first"!==e.type&&e.id)return e.id.toString();return""}(t.superscript);e&&(s+='<mark name="'+e+'"/>')}"\u2032"===n?s+=" prime ":"2"===n?s+=" squared ":"3"===n?s+=" cubed ":isNaN(parseInt(n))?s+=" to the "+i+"; ":s+=' to the <say-as interpret-as="ordinal">'+n+"</say-as> power; "}else isNaN(parseInt(n))?s+=" raised to the "+i+"; ":s+=' raised to the <say-as interpret-as="ordinal">'+n+"</say-as> power; "}if(!a&&t.subscript){let i=pe.toSpeakableFragment(t.subscript,e);i=i.trim(),gs(t.subscript)?s+=" sub "+i:s+=" subscript "+i+". End subscript. "}}return s},pe.toSpeakableText=function(t,e){if(e||(e={textToSpeechMarkup:"",textToSpeechRules:"mathlive"}),e.speechMode="math",window.sre&&"sre"===e.textToSpeechRules){e.generateID=!0;const i=pe.toMathML(t,e);return i?(e.textToSpeechMarkup&&(e.textToSpeechRulesOptions=e.textToSpeechRulesOptions||{},e.textToSpeechRulesOptions.markup=e.textToSpeechMarkup,"ssml"===e.textToSpeechRulesOptions.markup&&(e.textToSpeechRulesOptions.markup="ssml_step"),e.textToSpeechRulesOptions.rate=e.speechEngineRate),e.textToSpeechRulesOptions&&window.sre.System.getInstance().setupEngine(e.textToSpeechRulesOptions),window.sre.System.getInstance().toSpeech(i)):""}let i=pe.toSpeakableFragment(t,e);if("ssml"===e.textToSpeechMarkup){let t="";e.speechEngineRate&&(t='<prosody rate="'+e.speechEngineRate+'">'),i='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+t+"<p><s>"+i+"</s></p>"+(t?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else i="mac"===e.textToSpeechMarkup&&"mac"===function(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}("mac")?i.replace(/<mark([^\/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="([0-9]*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):i.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return i},_s.prototype.handleEvent=function(t){switch(t.type){case"focus":this._onFocus(t);break;case"blur":this._onBlur(t);break;case"touchstart":case"mousedown":case"pointerdown":this._onPointerDown(t);break;case"resize":this._resizeTimer&&window.cancelAnimationFrame(this._resizeTimer),this._resizeTimer=window.requestAnimationFrame(()=>this._onResize());break;case"cut":this._onCut(t);break;case"copy":this._onCopy(t);break;case"paste":this._onPaste(t)}},_s.prototype.revertToOriginalContent=_s.prototype.$revertToOriginalContent=function(){this.element.innerHTML=this.originalContent,this.element.mathfield=null,delete this.accessibleNode,delete this.ariaLiveText,delete this.field,vs(this.textarea,"cut",this),vs(this.textarea,"copy",this),vs(this.textarea,"paste",this),this.textarea.remove(),delete this.textarea,this.virtualKeyboardToggleDOMNode.remove(),delete this.virtualKeyboardToggleDOMNode,xs(this.popover),xs(this.keystrokeCaption),xs(this.virtualKeyboard),xs(document.getElementById("mathlive-alternate-keys-panel")),vs(this.element,"pointerdown",this),vs(this.element,"touchstart:active mousedown",this),vs(this.element,"focus",this),vs(this.element,"blur",this),vs(window,"resize",this)},_s.prototype._resetKeystrokeBuffer=function(){this.keystrokeBuffer="",this.keystrokeBufferStates=[],clearTimeout(this.keystrokeBufferResetTimer)},_s.prototype._getCaretPosition=function(){const t=function t(e){if(e.classList.contains("ML__caret")||e.classList.contains("ML__text-caret")||e.classList.contains("ML__command-caret"))return e;let i;return Array.from(e.children).forEach(function(e){i=i||t(e)}),i}(this.field);if(t){const e=t.getBoundingClientRect();return{x:e.right+window.scrollX,y:e.bottom+window.scrollY}}return null},_s.prototype._getSelectionBounds=function(){const t=this.field.querySelectorAll(".ML__selected");if(t&&t.length>0){const e={top:1/0,bottom:-1/0,left:1/0,right:-1/0};t.forEach(t=>{const i=t.getBoundingClientRect();i.left<e.left&&(e.left=i.left),i.right>e.right&&(e.right=i.right),i.bottom>e.bottom&&(e.bottom=i.bottom),i.top<e.top&&(e.top=i.top)});const i=this.field.getBoundingClientRect(),s=e.right-e.left,n=e.bottom-e.top;return e.left=Math.ceil(e.left-i.left+this.field.scrollLeft),e.right=e.left+s,e.top=Math.ceil(e.top-i.top),e.bottom=e.top+n,e}return null},_s.prototype._pathFromPoint=function(t,e,i){let s;(i=i||{}).bias=i.bias||0;const n=function t(e,i,s){let n={element:null},r=!0;if(e.getAttribute("data-atom-id")){n.element=e;const t=e.getBoundingClientRect(),o=Math.max(t.left-i,i-t.right),a=Math.max(t.top-s,s-t.bottom);n.distance=o*o+a*a,r=i>=t.left&&i<=t.right}else n.distance=Number.POSITIVE_INFINITY;return r&&e.children&&Array.from(e.children).forEach(function(e){const r=t(e,i,s);r.element&&r.distance<=n.distance&&(n=r)}),n}(this.field,t,e).element,r=n?n.getAttribute("data-atom-id"):null;if(r){const e=this.mathlist.filter(function(t,e){return e.captureSelection?e.filter(t=>t.id===r).length>0:e.id===r});if(e&&e.length>0)if(s=Pe.pathFromString(e[0]).path,0===i.bias){const e=n.getBoundingClientRect();t<e.left+e.width/2&&!n.classList.contains("ML__placeholder")&&(s[s.length-1].offset=Math.max(0,s[s.length-1].offset-1))}else i.bias<0&&(s[s.length-1].offset=Math.min(this.mathlist.siblings().length-1,Math.max(0,s[s.length-1].offset+i.bias)))}return s};let Ss=0;function ws(t,e,i){const s=Object.assign({},t.config);return s.textToSpeechMarkup="",e+pe.toSpeakableText(i,s)}function Es(t,e,i,s){let n="";"plonk"===e?(t.plonkSound&&(t.plonkSound.load(),t.plonkSound.play().catch(t=>void 0)),t._resetKeystrokeBuffer()):"delete"===e?n=ws(t,"deleted: ",s):"focus"===e||/move/.test(e)?n=(t.mathlist.isCollapsed()?"":"selected: ")+t._nextAtomSpeechText(i):"replacement"===e?n=ws(t,"",t.mathlist.sibling(0)):"line"===e?(n=ws(t,"",t.mathlist.root),t.accessibleNode.innerHTML='<math xmlns="http://www.w3.org/1998/Math/MathML">'+pe.toMathML(t.mathlist.root,t.config)+"</math>",t.textarea.setAttribute("aria-label","after: "+n)):n=s?ws(t,e+" ",s):e;const r=/\u00a0/.test(t.ariaLiveText.textContent)?" \u202f ":" \xa0 ";t.ariaLiveText.textContent=n+r}_s.prototype._onPointerDown=function(t){const e=this;let i,s=!1,n=!1,r=!1;if(1!==t.buttons)return;function o(t){window.PointerEvent?(vs(e.field,"pointermove",c),vs(e.field,"pointerend pointerleave pointercancel",o),e.field.releasePointerCapture(t.pointerId)):(vs(e.field,"touchmove",c),vs(e.field,"touchend touchleave",o),vs(window,"mousemove",c),vs(window,"mouseup blur",o)),s=!1,clearInterval(h),e.element.querySelectorAll(".ML__scroller").forEach(t=>t.parentNode.removeChild(t)),t.preventDefault(),t.stopPropagation()}let a=!1,l=!1;const h=setInterval(()=>{a?e.field.scroll({top:0,left:e.field.scrollLeft-16}):l&&e.field.scroll({top:0,left:e.field.scrollLeft+16})},32);function c(t){const s=t.touches?t.touches[0].clientX:t.clientX,r=t.touches?t.touches[0].clientY:t.clientY,o="touch"===t.pointerType?20:5;if(Date.now()<p+500&&Math.abs(d-s)<o&&Math.abs(u-r)<o)return t.preventDefault(),void t.stopPropagation();const h=e.field.getBoundingClientRect();l=s>h.right,a=s<h.left;let c=i;window.PointerEvent?t.isPrimary||(c=e._pathFromPoint(t.clientX,t.clientY,{bias:0})):t.touches&&2===t.touches.length&&(c=e._pathFromPoint(t.touches[1].clientX,t.touches[1].clientY,{bias:0}));const f=e._pathFromPoint(s,r,{bias:s<=d?s===d?0:-1:1});f&&e.mathlist.setRange(c,f,{extendToWordBoundary:n})&&e._requestUpdate(),t.preventDefault(),t.stopPropagation()}const d=t.touches?t.touches[0].clientX:t.clientX,u=t.touches?t.touches[0].clientY:t.clientY,p=Date.now();Ps&&Math.abs(Ps.x-d)<5&&Math.abs(Ps.y-u)<5&&Date.now()<Ps.time+500?(Ss+=1,Ps.time=p):(Ps={x:d,y:u,time:p},Ss=1);const f=this.field.getBoundingClientRect();if(d>=f.left&&d<=f.right&&u>=f.top&&u<=f.bottom){let a=document.createElement("div");a.className="ML__scroller",this.element.appendChild(a),a.style.left=f.left-200+"px",(a=document.createElement("div")).className="ML__scroller",this.element.appendChild(a),a.style.left=f.right+"px",this.hasFocus()||(r=!0,this.textarea.focus&&this.textarea.focus()),this._resetKeystrokeBuffer(),this.smartModeSuppressed=!1,(i=this._pathFromPoint(d,u,{bias:0}))&&(t.shiftKey?(this.mathlist.setRange(this.mathlist.path,i),(i=Pe.clone(this.mathlist.path))[i.length-1].offset-=1):this.mathlist.setPath(i,0),r=!0,this.style={},3===t.detail||Ss>2?(o(t),3!==t.detail&&3!==Ss||this.mathlist.selectAll_()):s||(s=!0,window.PointerEvent?(ys(e.field,"pointermove",c),ys(e.field,"pointerend pointercancel pointerup",o),e.field.setPointerCapture(t.pointerId)):(ys(window,"blur",o),t.touches?(ys(t.target,"touchmove",c),ys(t.target,"touchend",o)):(ys(window,"mousemove",c),ys(window,"mouseup",o))),2!==t.detail&&2!==Ss||(n=!0,this.mathlist.selectGroup_())))}else Ps=null;r&&this._requestUpdate(),t.preventDefault()},_s.prototype._onSelectionDidChange=function(){this.mathlist.commitCommandStringBeforeInsertionPoint();let t="";this.mathlist.forEachSelected(e=>{t+=e.toLatex()}),t?(this.textarea.value=t,this.hasFocus()&&this.textarea.select&&this.textarea.select()):(this.textarea.value="",this.textarea.setAttribute("aria-label",""));{const t=this.mode;this.mode=this.mathlist.anchorMode()||this.config.defaultMode,this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}ai.updatePopoverPosition(this,{deferred:!0}),"function"==typeof this.config.onSelectionDidChange&&this.config.onSelectionDidChange(this)},_s.prototype._onContentDidChange=function(){this.undoManager.canRedo()?this.element.classList.add("can-redo"):this.element.classList.remove("can-redo"),this.undoManager.canUndo()?this.element.classList.add("can-undo"):this.element.classList.remove("can-undo"),"function"==typeof this.config.onContentDidChange&&this.config.onContentDidChange(this)},_s.prototype._nextAtomSpeechText=function(t){function e(t,e){return"body"===e.relation?{enclose:"cross out",leftright:"fence",surd:"square root",root:"math field"}[t.type]:{numer:"numerator",denom:"denominator",index:"index",body:"parent",subscript:"subscript",superscript:"superscript"}[e.relation]}const i=t?t.path:[],s=this.mathlist.path,n=s[s.length-1];let r="";for(;i.length>s.length;)r+="out of "+e(t.parent(),i[i.length-1])+"; ",i.pop();if(!this.mathlist.isCollapsed())return ws(this,"",this.mathlist.getSelectedAtoms());const o=e(this.mathlist.parent(),n);0===n.offset&&(r+=(o?"start of "+o:"unknown")+": ");const a=this.mathlist.sibling(Math.max(1,this.mathlist.extent));return a?r+=ws(this,"",a):0!==n.offset&&(r+=o?"end of "+o:"unknown"),r},_s.prototype._announce=function(t,e,i){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this,t,e,i)},_s.prototype._onFocus=function(){this.blurred&&(this.blurred=!1,this.textarea.focus&&this.textarea.focus(),"onfocus"===this.config.virtualKeyboardMode&&this.showVirtualKeyboard_(),ai.updatePopoverPosition(this),this.config.onFocus&&this.config.onFocus(this),this._requestUpdate())},_s.prototype._onBlur=function(){this.blurred||(this.blurred=!0,this.ariaLiveText.textContent="","onfocus"===this.config.virtualKeyboardMode&&this.hideVirtualKeyboard_(),ai.updatePopoverPosition(this),this._requestUpdate(),this.config.onBlur&&this.config.onBlur(this))},_s.prototype._onResize=function(){this.element.classList.remove("ML__isNarrowWidth","ML__isWideWidth","ML__isExtendedWidth"),window.innerWidth>=1024?this.element.classList.add("ML__isExtendedWidth"):window.innerWidth>=768?this.element.classList.add("ML__isWideWidth"):this.element.classList.add("ML__isNarrowWidth"),ai.updatePopoverPosition(this)},_s.prototype.toggleKeystrokeCaption_=function(){this.keystrokeCaptionVisible=!this.keystrokeCaptionVisible,this.keystrokeCaption.innerHTML="",this.keystrokeCaptionVisible||(this.keystrokeCaption.style.visibility="hidden")},_s.prototype._showKeystroke=function(t){const e=this.keystrokeCaption;if(e&&this.keystrokeCaptionVisible){const i=this.element.getBoundingClientRect();e.style.left=i.left+"px",e.style.top=i.top-64+"px",e.innerHTML="<span>"+(Oe.stringify(t)||t)+"</span>"+e.innerHTML,e.style.visibility="visible",setTimeout(function(){e.childNodes.length>0&&e.removeChild(e.childNodes[e.childNodes.length-1]),0===e.childNodes.length&&(e.style.visibility="hidden")},3e3)}},_s.prototype.perform=_s.prototype.$perform=function(t){if(!t)return!1;let e,i=!1,s=[],n=!1;return Array.isArray(t)?(e=t[0],s=t.slice(1)):e=t,e=e.replace(/-\w/g,t=>t[1].toUpperCase()),"function"==typeof this.mathlist[e+="_"]?(/^(delete|transpose|add)/.test(e)&&this._resetKeystrokeBuffer(),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&(this.undoManager.pop(),this.undoManager.snapshot(this.config)),this.mathlist[e](...s),/^(delete|transpose|add)/.test(e)&&"command"!==this.mode&&this.undoManager.snapshot(this.config),n=!0,i=!0):"function"==typeof this[e]&&(n=this[e](...s),i=!0),this.mathlist.isCollapsed()&&!/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(e)||(this._resetKeystrokeBuffer(),this.style={}),n&&this._requestUpdate(),i},_s.prototype.performWithFeedback_=function(t){return this.focus(),this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),"moveToNextPlaceholder"===(t=t.replace(/-\w/g,t=>t[1].toUpperCase()))||"moveToPreviousPlaceholder"===t||"complete"===t?this.returnKeypressSound?(this.returnKeypressSound.load(),this.returnKeypressSound.play().catch(t=>void 0)):this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)):"deletePreviousChar"!==t&&"deleteNextChar"!==t&&"deletePreviousWord"!==t&&"deleteNextWord"!==t&&"deleteToGroupStart"!==t&&"deleteToGroupEnd"!==t&&"deleteToMathFieldStart"!==t&&"deleteToMathFieldEnd"!==t||!this.deleteKeypressSound?this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)):(this.deleteKeypressSound.load(),this.deleteKeypressSound.play().catch(t=>void 0)),this.perform(t)},_s.prototype.convertLastAtomsToText_=function(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0);let i=0,s=!1;for(this.mathlist.contentWillChange();!s;){const n=this.mathlist.sibling(i);(s=0===t||!n||"math"!==n.mode||!(/mord|textord|mpunct/.test(n.type)||"mop"===n.type&&/[a-zA-Z]+/.test(n.body))||n.superscript||n.subscript||e&&!e(n))||(n.applyStyle({mode:"text"}),n.latex=n.body),i-=1,t-=1}this.mathlist.contentDidChange()},_s.prototype.convertLastAtomsToMath_=function(t,e){"function"==typeof t&&(e=t,t=1/0),void 0===t&&(t=1/0),this.mathlist.contentWillChange();let i=0,s=!1;for(;!s;){const n=this.mathlist.sibling(i);(s=0===t||!n||"text"!==n.mode||" "===n.body||e&&!e(n))||n.applyStyle({mode:"math",type:"mord"}),i-=1,t-=1}this.removeIsolatedSpace_(),this.mathlist.contentDidChange()},_s.prototype.removeIsolatedSpace_=function(){let t=0;for(;this.mathlist.sibling(t)&&"math"===this.mathlist.sibling(t).mode;)t-=1;if(this.mathlist.sibling(t)&&"text"===this.mathlist.sibling(t).mode&&" "===this.mathlist.sibling(t).body&&(!this.mathlist.sibling(t-1)||"math"===this.mathlist.sibling(t-1).mode)){this.mathlist.contentWillChange(),this.mathlist.siblings().splice(t-1,1),this.mathlist.contentDidChange();const e=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0,this.mathlist.setSelection(this.mathlist.anchorOffset()-1),this.mathlist.suppressChangeNotifications=e}},_s.prototype.getTextBeforeAnchor_=function(){let t="",e=0,i=!1;for(;!i;){const s=this.mathlist.sibling(e);(i=!(s&&("text"===s.mode&&!s.type||"math"===s.mode&&/mord|textord|mpunct/.test(s.type))))||(t=s.body+t),e-=1}return t},_s.prototype.smartMode_=function(t,e){if(this.smartModeSuppressed)return!1;if(this.mathlist.endOffset()<this.mathlist.siblings().length-1)return!1;if(!e||e.ctrlKey||e.metaKey)return!1;const i=ti.eventToChar(e);if(i.length>1)return!1;if(!this.mathlist.isCollapsed())return!("text"!==this.mode||!/[\/_^]/.test(i));const s=this.getTextBeforeAnchor_()+i;if("text"===this.mode){if("Esc"===t||/[\/\\]/.test(i))return!0;if(/[\^_]/.test(i))return/(^|\s)[a-zA-Z][^_]$/.test(s)&&this.convertLastAtomsToMath_(1),!0;const e={")":"(","}":"{","]":"["}[i];if(e&&this.mathlist.parent()&&"leftright"===this.mathlist.parent().type&&this.mathlist.parent().leftDelim===e)return!0;if(/(^|[^a-zA-Z])(a|I)[ ]$/.test(s))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(i))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z][ ]$/.test(s))return this.convertLastAtomsToMath_(1),!1;if(/[^0-9]\.[^0-9\s]$/.test(s)){this.convertLastAtomsToMath_(1);const t=this.mathlist.sibling(0);return t.body="\u22c5",t.autoFontFamily="cmr",t.latex="\\cdot",!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(s))return this.convertLastAtomsToMath_(1),!0;if(/\.[0-9]$/.test(s))return this.convertLastAtomsToMath_(1),!0;if(/[(][0-9+\-.]$/.test(s))return this.convertLastAtomsToMath_(1),!0;if(/[(][a-z][,;]$/.test(s))return this.convertLastAtomsToMath_(2),!0;if(/[0-9+\-=><*|]$/.test(i))return this.removeIsolatedSpace_(),!0}else{if("Spacebar"===t)return this.convertLastAtomsToText_(t=>/[a-z][:,;.]$/.test(t.body)),!0;if(/[a-zA-Z]{3,}$/.test(s)&&!/(dxd|abc|xyz|uvw)$/.test(s))return this.convertLastAtomsToText_(t=>/[a-zA-Z:,;.]/.test(t.body)),!0;if(/(^|\W)(if|If)$/i.test(s))return this.convertLastAtomsToText_(1),!0;if(/\?|\./.test(i))return!0}return!1},_s.prototype._onKeystroke=function(t,e){if(this._showKeystroke(t),clearTimeout(this.keystrokeBufferResetTimer),this.config.onKeystroke&&!this.config.onKeystroke(this,t,e))return e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let i,s,n,r=!1;if("command"!==this.mode&&(!e||!e.ctrlKey&&!e.metaKey)){const t=ti.eventToChar(e);if("Backspace"!==t)if(!t||t.length>1)this._resetKeystrokeBuffer();else{const e=this.keystrokeBuffer+t;let n=0;for(;!i&&n<e.length;){let t;if(this.keystrokeBufferStates[n]){const e=new Ve.EditableMathlist;e.root=pe.makeRoot("math",Ce.parseTokens(v.tokenize(this.keystrokeBufferStates[n].latex),this.config.default,null,this.config.macros)),e.setPath(this.keystrokeBufferStates[n].selection),t=e.siblings()}else t=this.mathlist.siblings();i=Oe.forString(this.mode,t,e.slice(n),this.config),n+=1}s=n-1,this.keystrokeBuffer+=t,this.keystrokeBufferStates.push(this.undoManager.save()),Oe.startsWithString(e,this.config).length<=1?r=!0:this.config.inlineShortcutTimeout&&(this.keystrokeBufferResetTimer=setTimeout(()=>{this._resetKeystrokeBuffer()},this.config.inlineShortcutTimeout))}}if(this.config.smartMode){const s=this.mode;i?this.mode="math":this.smartMode_(t,e)&&(this.mode={math:"text",text:"math"}[this.mode],n=""),this.mode!==s&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}if(i||n||(n=Oe.selectorForKeystroke(this.mode,t)),!i&&!n)return!0;this.mathlist.decorateCommandStringAroundInsertionPoint(!1);const o=this.mathlist.parent();if("moveAfterParent"===n&&o&&"leftright"===o.type&&this.mathlist.endOffset()===this.mathlist.siblings().length-1&&this.config.smartFence&&this.mathlist._insertSmartFence(".")&&(n="",this._requestUpdate()),"math"===this.mode&&"Spacebar"===t&&!i){const t=this.mathlist.sibling(1),e=this.mathlist.sibling(-1);(t&&"text"===t.mode||e&&"text"===e.mode)&&this.mathlist.insert(" ",{mode:"text"})}if((n&&!this.perform(n)||i)&&i){if(!/^(\\{|\\}|\\[|\\]|\\@|\\#|\\$|\\%|\\^|\\_|\\backslash)$/.test(i)){const t={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(ti.eventToChar(e),{suppressChangeNotifications:!0,mode:this.mode,style:t});const i=this.mode;this.undoManager.snapshotAndCoalesce(this.config),this.undoManager.restore(this.keystrokeBufferStates[s],{...this.config,suppressChangeNotifications:!0}),this.mode=i}this.mathlist.contentWillChange();const t=this.mathlist.suppressChangeNotifications;this.mathlist.suppressChangeNotifications=!0;const n={...this.mathlist.anchorStyle(),...this.style};this.mathlist.insert(i,{format:"latex",mode:this.mode,style:n,smartFence:!0}),this.removeIsolatedSpace_(),i.endsWith(" ")&&(this.mode="text",this.mathlist.insert(" ",{mode:"text",style:n})),this.mathlist.suppressChangeNotifications=t,this.mathlist.contentDidChange(),this.undoManager.snapshot(this.config),this._requestUpdate(),this._announce("replacement"),r&&this._resetKeystrokeBuffer()}return this.scrollIntoView(),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1},_s.prototype._onTypedText=function(t,e){if((e=e||{}).focus&&this.focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0))),e.commandMode&&"command"!==this.mode&&this.switchMode_("command"),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),e.simulateKeystroke){const e=t.charAt(0),i=ti.charToEvent(e);if(!this.$keystroke(ti.keyboardEventToString(i),i))return}let i="",s=!1;if(this.pasteInProgress)this.pasteInProgress=!1,this.mathlist.insert(t,{smartFence:this.config.smartFence,mode:"math"});else{const e={...this.mathlist.anchorStyle(),...this.style},n=g.splitGraphemes(t);for(const t of n)if("command"===this.mode){this.mathlist.removeSuggestion(),this.suggestionIndex=0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(),n=Rt.suggest(e+t);s=n.length>1,0===n.length?(this.mathlist.insert(t,{mode:"command"}),/^\\[a-zA-Z\\*]+$/.test(e+t)&&this.mathlist.decorateCommandStringAroundInsertionPoint(!0),ai.hidePopover(this)):(this.mathlist.insert(t,{mode:"command"}),n[0].match!==e+t&&this.mathlist.insertSuggestion(n[0].match,-n[0].match.length+e.length+1),i=n[0].match)}else if("math"===this.mode){const i={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[t];if(i){if("moveToSuperscript"===i){if(this._superscriptDepth()>=this.config.scriptDepth[1])return void this._announce("plonk")}else if("moveToSubscript"===i&&this._subscriptDepth()>=this.config.scriptDepth[0])return void this._announce("plonk");this.perform(i)}else this.config.smartSuperscript&&"superscript"===this.mathlist.relation()&&/[0-9]/.test(t)&&0===this.mathlist.siblings().filter(t=>"first"!==t.type).length?(this.mathlist.insert(t,{mode:"math",style:e}),this.mathlist.moveAfterParent_()):this.mathlist.insert(t,{mode:"math",style:e,smartFence:!0})}else"text"===this.mode&&this.mathlist.insert(t,{mode:"text",style:e})}"command"!==this.mode&&this.undoManager.snapshotAndCoalesce(this.config),this._requestUpdate(),this.scrollIntoView(),ai.showPopoverWithLatex(this,i,s)},_s.prototype._hash=function(){let t=0;const e=this.mathlist.root.toLatex(!1);for(let i=0;i<e.length;i++)t=31*t+e.charCodeAt(i),t|=0;return Math.abs(t)},_s.prototype._requestUpdate=function(){this.dirty||(this.dirty=!0,requestAnimationFrame(t=>this._render()))},_s.prototype._render=function(t){t=t||{},this.dirty=!1,window.mathlive||(window.mathlive={}),this.mathlist.anchor()||(this.mathlist.path=[{relation:"body",offset:0}]),this.mathlist.forEach(t=>{t.caret="",t.isSelected=!1});const e=this.hasFocus();this.mathlist.isCollapsed()?this.mathlist.anchor().caret=e?this.mode:"":this.mathlist.forEachSelected(t=>{t.isSelected=!0});const i=pe.decompose({mathstyle:"displaystyle",generateID:{seed:this._hash(),groupNumbers:t.forHighlighting},macros:this.config.macros},this.mathlist.root),s=et.makeSpan(i,"ML__base");s.attributes={translate:"no","aria-hidden":"true"};const n=et.makeSpan("","ML__strut");n.setStyle("height",s.height,"em");const r=[n];if(0!==s.depth){const t=et.makeSpan("","ML__strut--bottom");t.setStyle("height",s.height+s.depth,"em"),t.setStyle("vertical-align",-s.depth,"em"),r.push(t)}r.push(s);const o=et.makeSpan(r,"ML__mathlive");this.field.innerHTML=o.toMarkup(0,this.config.horizontalSpacingScale),this.field.classList.toggle("ML__focused",e),this.accessibleNode.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+pe.toMathML(this.mathlist.root,this.config)+"</math>";const a=this._getSelectionBounds();if(a){const t=document.createElement("div");t.classList.add("ML__selection"),t.style.position="absolute",t.style.left=a.left+"px",t.style.top=a.top+"px",t.style.width=Math.ceil(a.right-a.left)+"px",t.style.height=Math.ceil(a.bottom-a.top-1)+"px",this.field.insertBefore(t,this.field.childNodes[0])}},_s.prototype._onPaste=function(){return this.pasteInProgress=!0,!0},_s.prototype._onCut=function(){return setTimeout((function(){this.clearSelection(),this._requestUpdate()}).bind(this),0),!0},_s.prototype._onCopy=function(t){this.mathlist.isCollapsed()?(t.clipboardData.setData("text/plain",this.$text("latex-expanded")),t.clipboardData.setData("application/json",this.$text("json")),t.clipboardData.setData("application/xml",this.$text("mathML"))):(t.clipboardData.setData("text/plain",this.$selectedText("latex-expanded")),t.clipboardData.setData("application/json",this.$selectedText("json")),t.clipboardData.setData("application/xml",this.$selectedText("mathML"))),t.preventDefault()},_s.prototype.formatMathlist=function(t,e){let i="";if("latex"===(e=e||"latex")||"latex-expanded"===e)i=t.toLatex("latex-expanded"===e);else if("mathML"===e)i=t.toMathML(this.config);else if("spoken"===e)i=pe.toSpeakableText(t,this.config);else if("spoken-text"===e){const e=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="",i=pe.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=e}else if("spoken-ssml"===e){const e=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="ssml",i=pe.toSpeakableText(t,this.config),this.config.textToSpeechMarkup=e}else if("json"===e){const e=pe.toAST(t,this.config);i=JSON.stringify(e)}else"ASCIIMath"===e&&(i=function t(e,i){if(!e)return"";if(Array.isArray(e)){let s="";if(0===e.length)return"";if("first"===e[0].type&&e.shift(),"text"===e[0].mode){let n=0;for(s='"';e[n]&&"text"===e[n].mode;)s+=e[n].body,n++;s+='"'+t(e.slice(n),i)}else{let n=0;for(;e[n]&&"math"===e[n].mode;)s+=t(e[n],i),n++;s+=t(e.slice(n),i)}return s.trim()}let s="";const n=e.latex?e.latex.trim():null;let r;switch(e.type){case"group":case"root":s=t(e.body,i);break;case"array":break;case"genfrac":(e.leftDelim||e.rightDelim)&&(s+="."!==e.leftDelim&&e.leftDelim?e.leftDelim:"{:"),e.hasBarLine?(s+="(",s+=t(e.numer,i),s+=")/(",s+=t(e.denom,i),s+=")"):(s+="("+t(e.numer,i)+"),",s+="("+t(e.denom,i)+")"),(e.leftDelim||e.rightDelim)&&(s+="."!==e.rightDelim&&e.rightDelim?e.rightDelim:"{:");break;case"surd":s+=e.index?"root("+t(e.index,i)+")("+t(e.body,i)+")":"sqrt("+t(e.body,i)+")";break;case"leftright":s+="."!==e.leftDelim&&e.leftDelim?e.leftDelim:"{:",s+=t(e.body,i),s+="."!==e.rightDelim&&e.rightDelim?e.rightDelim:"{:";break;case"sizeddelim":case"delim":case"accent":break;case"line":case"overlap":case"overunder":break;case"mord":"\\"===(s=Ci[n]||n||("string"==typeof e.body?e.body:""))[0]&&(s+=""),(r=n?n.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?s=String.fromCharCode(parseInt("0x"+r[1])):s.length>0&&"\\"===s.charAt(0)&&(s="string"==typeof e.body?e.body.charAt(0):e.latex);break;case"mbin":case"mrel":case"textord":case"minner":s=n&&Ci[n]?Ci[n]:n&&xi[n]?xi[n]:e.body;break;case"mopen":case"mclose":s+=e.body;break;case"mpunct":s=xi[n]||n;break;case"mop":"\u200b"!==e.body&&(s="",s+="\\operatorname"===n?e.body:e.body||n,s+=" ");break;case"mathstyle":case"box":case"spacing":case"enclose":break;case"space":s=" "}if(e.subscript){s+="_";const n=t(e.subscript,i);n.length>1&&!/^(-)?\d+(\.\d*)?$/.test(n)?s+="("+n+")":s+=n}if(e.superscript){s+="^";const n=t(e.superscript,i);n.length>1&&!/^(-)?\d+(\.\d*)?$/.test(n)?s+="("+n+")":s+=n}return s}(t,this.config));return i},_s.prototype.text=_s.prototype.$text=function(t){return this.formatMathlist(this.mathlist.root,t)},_s.prototype.selectedText=_s.prototype.$selectedText=function(t){const e=this.mathlist.getSelectedAtoms();if(!e)return"";const i=pe.makeRoot("math",e);return this.formatMathlist(i,t)},_s.prototype.selectionIsCollapsed=_s.prototype.$selectionIsCollapsed=function(){return this.mathlist.isCollapsed()},_s.prototype.selectionDepth=_s.prototype.$selectionDepth=function(){return this.mathlist.path.length},_s.prototype._superscriptDepth=function(){let t=0,e=0,i=this.mathlist.ancestor(e),s=!1;for(;i;)(i.superscript||i.subscript)&&(t+=1),i.superscript?s=!0:i.subscript&&(s=!1),i=this.mathlist.ancestor(e+=1);return s?t:0},_s.prototype._subscriptDepth=function(){let t=0,e=0,i=this.mathlist.ancestor(e),s=!1;for(;i;)(i.superscript||i.subscript)&&(t+=1),i.superscript?s=!1:i.subscript&&(s=!0),i=this.mathlist.ancestor(e+=1);return s?t:0},_s.prototype.selectionAtStart=_s.prototype.$selectionAtStart=function(){return 0===this.mathlist.startOffset()},_s.prototype.selectionAtEnd=_s.prototype.$selectionAtEnd=function(){return this.mathlist.endOffset()>=this.mathlist.siblings().length-1},_s.prototype.groupIsSelected=function(){return 0===this.mathlist.startOffset()&&this.mathlist.endOffset()>=this.mathlist.siblings().length-1},_s.prototype.latex=_s.prototype.$latex=function(t,e){return t?(t!==this.mathlist.root.toLatex()&&(e=e||{},this.mathlist.insert(t,Object.assign({},this.config,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:e.suppressChangeNotifications})),this.undoManager.snapshot(this.config),this._requestUpdate()),t):this.mathlist.root.toLatex()},_s.prototype.el=_s.prototype.$el=function(){return this.element},_s.prototype.undo_=_s.prototype.undo=function(){return this.complete_(),this.undoManager.undo(this.config),!0},_s.prototype.redo_=_s.prototype.redo=function(){return this.complete_(),this.undoManager.redo(this.config),!0},_s.prototype.scrollIntoView_=_s.prototype.scrollIntoView=function(){this.dirty&&this._render();let t=this._getCaretPosition();const e=this.field.getBoundingClientRect();if(!t){const i=this._getSelectionBounds();i&&(t={x:i.right+e.left-this.field.scrollLeft,y:i.top+e.top-this.field.scrollTop})}if(t){const i=t.x-window.scrollX;i<e.left?this.field.scroll({top:0,left:i-e.left+this.field.scrollLeft-20,behavior:"smooth"}):i>e.right&&this.field.scroll({top:0,left:i-e.right+this.field.scrollLeft+20,behavior:"smooth"})}},_s.prototype.scrollToStart_=_s.prototype.scrollToStart=function(){this.field.scroll(0,0)},_s.prototype.scrollToEnd_=_s.prototype.scrollToEnd=function(){const t=this.field.getBoundingClientRect();this.field.scroll(t.left-window.scrollX,0)},_s.prototype.enterCommandMode_=function(){this.switchMode_("command")},_s.prototype.copyToClipboard_=function(){return this.focus(),this.mathlist.isCollapsed()&&this.select(),document.execCommand("copy"),!1},_s.prototype.cutToClipboard_=function(){return this.focus(),document.execCommand("cut"),!0},_s.prototype.pasteFromClipboard_=function(){return this.focus(),document.execCommand("paste"),!0},_s.prototype.insert_=_s.prototype.insert=_s.prototype.$insert=function(t,e){if("string"==typeof t&&t.length>0){if((e=e||{}).focus&&this.focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play())),"\\\\"===t)this.mathlist.addRowAfter_();else if("&"===t)this.mathlist.addColumnAfter_();else{const i=this.style;this.mathlist.insert(t,{mode:this.mode,style:this.mathlist.anchorStyle(),...e}),e.resetStyle&&(this.style=i)}return this.undoManager.snapshot(this.config),this._requestUpdate(),!0}return!1},_s.prototype.switchMode_=function(t,e,i){this._resetKeystrokeBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(t),e&&this.insert(e,{format:"latex",mode:{math:"text",text:"math"}[t]}),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),"command"===t?(this.mathlist.removeSuggestion(),ai.hidePopover(this),this.suggestionIndex=0,this.virtualKeyboardVisible&&this.switchKeyboardLayer_("lower-command"),this.mathlist.insert("\x1b",{mode:"math"})):this.mode=t,i&&this.insert(i,{format:"latex",mode:t}),"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode),this._requestUpdate()},_s.prototype.complete_=function(t){if(t=t||{},ai.hidePopover(this),t.discard)return this.mathlist.spliceCommandStringAroundInsertionPoint(null),this.switchMode_("math"),!0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(!t.acceptSuggestion);if(e){if("\\("===e||"\\)"===e)this.mathlist.spliceCommandStringAroundInsertionPoint([]),this.mathlist.insert(e.slice(1),{mode:this.mode});else{const t="math";if(Rt.commandAllowed(t,e)){const i=Ce.parseTokens(v.tokenize(e),t,null,this.config.macros);this.mathlist.spliceCommandStringAroundInsertionPoint(i)}else{const i=Ce.parseTokens(v.tokenize(e),t,null,this.config.macros);i?this.mathlist.spliceCommandStringAroundInsertionPoint(i):this.mathlist.decorateCommandStringAroundInsertionPoint(!0)}}return this.undoManager.snapshot(this.config),this._announce("replacement"),!0}return!1},_s.prototype._updateSuggestion=function(){this.mathlist.positionInsertionPointAfterCommitedCommand(),this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Rt.suggest(t);if(0===e.length)ai.hidePopover(this),this.mathlist.decorateCommandStringAroundInsertionPoint(!0);else{const i=this.suggestionIndex%e.length,s=t.length-e[i].match.length;0!==s&&this.mathlist.insertSuggestion(e[i].match,s),ai.showPopoverWithLatex(this,e[i].match,e.length>1)}this._requestUpdate()},_s.prototype.nextSuggestion_=function(){return this.suggestionIndex+=1,this._updateSuggestion(),!1},_s.prototype.previousSuggestion_=function(){if(this.suggestionIndex-=1,this.suggestionIndex<0){this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Rt.suggest(t);this.suggestionIndex=e.length-1}return this._updateSuggestion(),!1},_s.prototype._attachButtonHandlers=function(t,e){const i=this;let s,n,r,o,a;"object"==typeof e&&(e.default||e.pressed)?(e.default&&t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e.default)),e.alt&&t.setAttribute("data-"+this.config.namespace+"command-alt",JSON.stringify(e.alt)),e.altshift&&t.setAttribute("data-"+this.config.namespace+"command-altshift",JSON.stringify(e.altshift)),e.shift&&t.setAttribute("data-"+this.config.namespace+"command-shift",JSON.stringify(e.shift)),e.pressed&&t.setAttribute("data-"+this.config.namespace+"command-pressed",JSON.stringify(e.pressed)),e.pressAndHoldStart&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldStart",JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldEnd",JSON.stringify(e.pressAndHoldEnd))):t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e)),ys(t,"mousedown touchstart:passive",function(e){if("mousedown"!==e.type||1===e.buttons){e.stopPropagation(),e.preventDefault(),t.classList.add("pressed"),s=Date.now(),"touchstart"===e.type&&(r=e.changedTouches[0].identifier);const o=t.getAttribute("data-"+i.config.namespace+"command-pressed");o&&i.perform(JSON.parse(o));const l=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldStart");l&&(n=t,a&&clearTimeout(a),a=window.setTimeout(function(){t.classList.contains("pressed")&&i.perform(JSON.parse(l))},300))}}),ys(t,"mouseleave touchcancel",function(){t.classList.remove("pressed")}),ys(t,"touchmove:passive",function(t){t.preventDefault();for(let e=0;e<t.changedTouches.length;e++)if(t.changedTouches[e].identifier===r){const i=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);i!==o&&o&&(o.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),o=null),i&&(o=i,i.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}}),ys(t,"mouseenter",function(e){1===e.buttons&&t.classList.add("pressed")}),ys(t,"mouseup touchend click",function(e){if(o){e.stopPropagation(),e.preventDefault();const t=o;return o=null,void t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(t.classList.remove("pressed"),t.classList.add("active"),"click"===e.type&&0!==e.detail)return e.stopPropagation(),void e.preventDefault();window.setTimeout(function(){t.classList.remove("active")},150);let r=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldEnd");const a=Date.now();(t!==n||a<s+300)&&(r=void 0),!r&&e.altKey&&e.shiftKey&&(r=t.getAttribute("data-"+i.config.namespace+"command-altshift")),!r&&e.altKey&&(r=t.getAttribute("data-"+i.config.namespace+"command-alt")),!r&&e.shiftKey&&(r=t.getAttribute("data-"+i.config.namespace+"command-shift")),r||(r=t.getAttribute("data-"+i.config.namespace+"command")),r&&i.perform(JSON.parse(r)),e.stopPropagation(),e.preventDefault()})},_s.prototype._makeButton=function(t,e,i,s){const n=document.createElement("span");return n.innerHTML=t,e&&n.classList.add([].slice.call(e.split(" "))),i&&n.setAttribute("aria-label",i),this._attachButtonHandlers(n,s),n},_s.prototype.showAlternateKeys_=function(t,e){const i=Cs("mathlive-alternate-keys-panel","ML__keyboard alternate-keys");this.virtualKeyboard.classList.contains("material")&&i.classList.add("material"),i.style.width=e.length>=7?"286px":4===e.length||2===e.length?"146px":1===e.length?"86px":"146px",i.style.height="auto";let s="";for(const r of e)s+="<li","string"==typeof r?s+=' data-latex="'+r.replace(/"/g,"&quot;")+'"':(r.latex&&(s+=' data-latex="'+r.latex.replace(/"/g,"&quot;")+'"'),r.content&&(s+=' data-content="'+r.content.replace(/"/g,"&quot;")+'"'),r.insert&&(s+=' data-insert="'+r.insert.replace(/"/g,"&quot;")+'"'),r.command&&(s+=" data-command='"+r.command.replace(/"/g,"&quot;")+"'"),r.aside&&(s+=' data-aside="'+r.aside.replace(/"/g,"&quot;")+'"'),r.classes&&(s+=' data-classes="'+r.classes+'"')),s+=">",s+=r.label||"",s+="</li>";i.innerHTML=s="<ul>"+s+"</ul>",vi.makeKeycap(this,i.getElementsByTagName("li"),"performAlternateKeys");const n=this.virtualKeyboard.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+t+'"]').getBoundingClientRect();if(n){n.top-i.clientHeight<0&&(i.style.width="auto",i.style.height=e.length<=6?"56px":e.length<=12?"108px":"205px");const t=(n.top-i.clientHeight+5).toString()+"px",s=Math.max(0,Math.min(window.innerWidth-i.offsetWidth,(n.left+n.right-i.offsetWidth)/2))+"px";i.style.transform="translate("+s+","+t+")",i.classList.add("is-visible")}return!1},_s.prototype.hideAlternateKeys_=function(){const t=document.getElementById("mathlive-alternate-keys-panel");return t&&(t.classList.remove("is-visible"),t.innerHTML="",xs(t)),!1},_s.prototype.performAlternateKeys_=function(t){return this.hideAlternateKeys_(),this.perform(t)},_s.prototype.switchKeyboardLayer_=function(t){if("off"!==this.config.virtualKeyboardMode){"lower-command"!==t&&"upper-command"!==t&&"symbols-command"!==t&&this.complete_(),this.showVirtualKeyboard_(),this.hideAlternateKeys_(),this.unshiftKeyboardLayer_();const e=this.virtualKeyboard.getElementsByClassName("keyboard-layer");let i=!1;for(let s=0;s<e.length;s++)if(e[s].id===t){i=!0;break}if(i)for(let s=0;s<e.length;s++)e[s].id===t?e[s].classList.add("is-visible"):e[s].classList.remove("is-visible");this.focus()}return!0},_s.prototype.shiftKeyboardLayer_=function(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e];let s=i.getAttribute("data-shifted");if(s||/^[a-z]$/.test(i.innerHTML)){i.setAttribute("data-unshifted-content",i.innerHTML),s||(s=i.innerHTML.toUpperCase()),i.innerHTML=s;const t=i.getAttribute("data-"+this.config.namespace+"command");if(t){i.setAttribute("data-unshifted-command",t);const e=i.getAttribute("data-shifted-command");if(e)i.setAttribute("data-"+this.config.namespace+"command",e);else{const e=JSON.parse(t);Array.isArray(e)&&(e[1]=e[1].toUpperCase()),i.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e))}}}}return!1},_s.prototype.unshiftKeyboardLayer_=function(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e],s=i.getAttribute("data-unshifted-content");s&&(i.innerHTML=s);const n=i.getAttribute("data-unshifted-command");n&&i.setAttribute("data-"+this.config.namespace+"command",n)}return!1},_s.prototype.insertAndUnshiftKeyboardLayer_=function(t){return this.insert_(t),this.unshiftKeyboardLayer_(),!0},_s.prototype.toggleVirtualKeyboardAlt_=function(){let t=!1;return this.virtualKeyboard&&(t=this.virtualKeyboard.classList.contains("material"),this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(t?"":"material"),!1},_s.prototype.toggleVirtualKeyboardShift_=function(){this.config.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[this.config.virtualKeyboardLayout];let t=this.virtualKeyboard?this.virtualKeyboard.querySelector("div.keyboard-layer.is-visible"):null;return t=t?t.id:"",this.virtualKeyboard&&(this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(),t&&this.switchKeyboardLayer_(t),!1},_s.prototype.showVirtualKeyboard_=function(t){return this.virtualKeyboardVisible=!1,this.toggleVirtualKeyboard_(t),!1},_s.prototype.hideVirtualKeyboard_=function(){return this.virtualKeyboardVisible=!0,this.toggleVirtualKeyboard_(),!1},_s.prototype.toggleVirtualKeyboard_=function(t){if(this.virtualKeyboardVisible=!this.virtualKeyboardVisible,this.virtualKeyboardVisible){this.virtualKeyboard?this.virtualKeyboard.classList.add("is-visible"):(this.virtualKeyboard=vi.make(this,t),ys(this.virtualKeyboard,"touchstart:passive mousedown",function(){e.focus()}),document.body.appendChild(this.virtualKeyboard));const e=this;window.setTimeout(function(){e.virtualKeyboard.classList.add("is-visible")},1)}else this.virtualKeyboard&&this.virtualKeyboard.classList.remove("is-visible");return"function"==typeof this.config.onVirtualKeyboardToggle&&this.config.onVirtualKeyboardToggle(this,this.virtualKeyboardVisible,this.virtualKeyboard),!1},_s.prototype.$applyStyle=_s.prototype.applyStyle_=function(t){if(this._resetKeystrokeBuffer(),(t=function(t){const e={};return"string"==typeof t.mode&&(e.mode=t.mode.toLowerCase()),"string"==typeof t.color&&(e.color=t.color),"string"==typeof t.backgroundColor&&(e.backgroundColor=t.backgroundColor),"string"==typeof t.fontFamily&&(e.fontFamily=t.fontFamily),"string"==typeof t.series&&(e.fontSeries=t.series),"string"==typeof t.fontSeries&&(e.fontSeries=t.fontSeries.toLowerCase()),e.fontSeries&&(e.fontSeries={bold:"b",medium:"m",normal:"mn"}[e.fontSeries]||e.fontSeries),"string"==typeof t.shape&&(e.fontShape=t.shape),"string"==typeof t.fontShape&&(e.fontShape=t.fontShape.toLowerCase()),e.fontShape&&(e.fontShape={italic:"it",up:"n",upright:"n",normal:"n"}[e.fontShape]||e.fontShape),"string"==typeof t.size?e.fontSize=t.size:"number"==typeof t.size&&(e.fontSize="size"+Math.min(0,Math.max(10,t.size))),"string"==typeof t.fontSize&&(e.fontSize=t.fontSize.toLowerCase()),e.fontSize&&(e.fontSize={tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normal:"size5",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[e.fontSize]||e.fontSize),e}(t)).mode){if(this.mathlist.isCollapsed())this.switchMode_(t.mode);else{const t=this.mode,e="math"===(this.mathlist.anchorMode()||this.config.default)?"text":"math";let i=this.$selectedText("ASCIIMath");if("math"===e&&/^"[^"]+"$/.test(i)&&(i=i.slice(1,-1)),this.insert(i,{mode:e,selectionMode:"item",format:"text"===e?"text":"ASCIIMath"}),this.mode=e,this.groupIsSelected()){const t=this.mathlist.parent();!t||"group"!==t.type&&"root"!==t.type||(t.mode=e)}this.mode!==t&&"function"==typeof this.config.onModeChange&&this.config.onModeChange(this,this.mode)}delete t.mode}return this.mathlist.isCollapsed()?(this.style.fontSeries&&t.fontSeries===this.style.fontSeries&&(t.fontSeries="auto"),t.fontShape&&t.fontShape===this.style.fontShape&&(t.fontShape="auto"),t.color&&t.color===this.style.color&&(t.color="none"),t.backgroundColor&&t.backgroundColor===this.style.backgroundColor&&(t.backgroundColor="none"),t.fontSize&&t.fontSize===this.style.fontSize&&(t.fontSize="auto"),this.style={...this.style,...t}):(this.mathlist._applyStyle(t),this.undoManager.snapshot(this.config)),!0},_s.prototype.hasFocus=_s.prototype.$hasFocus=function(){return document.hasFocus()&&document.activeElement===this.textarea},_s.prototype.focus=_s.prototype.$focus=function(){this.hasFocus()||(this.textarea.focus&&this.textarea.focus(),this._announce("line"))},_s.prototype.blur=_s.prototype.$blur=function(){this.hasFocus()&&this.textarea.blur&&this.textarea.blur()},_s.prototype.select=_s.prototype.$select=function(){this.mathlist.selectAll_()},_s.prototype.clearSelection=_s.prototype.$clearSelection=function(){this.mathlist.delete_()},_s.prototype.keystroke=_s.prototype.$keystroke=function(t,e){return this._onKeystroke(t,e)},_s.prototype.typedText=_s.prototype.$typedText=function(t){this._onTypedText(t)},_s.prototype.typedText_=function(t,e){return this._onTypedText(t,e)},_s.prototype.setConfig=_s.prototype.$setConfig=function(t){if(this.config||(this.config={smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,overrideDefaultInlineShortcuts:!1,virtualKeyboard:"",virtualKeyboardLayout:"qwerty",namespace:""}),this.config={...this.config,...t},!Array.isArray(this.config.scriptDepth)){const t=parseInt(this.config.scriptDepth);this.config.scriptDepth=[t,t]}if(void 0===this.config.removeExtraneousParentheses&&(this.config.removeExtraneousParentheses=!0),this.config.onAnnounce=t.onAnnounce||Es,this.config.macros=Object.assign({},Rt.MACROS,this.config.macros),!/^[a-z]*[-]?$/.test(this.config.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(this.config.namespace)||(this.config.namespace+="-"),hi.locale=this.config.locale||hi.locale,hi.merge(this.config.strings),this.config.virtualKeyboardLayout=t.virtualKeyboardLayout||{fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[hi.locale.substring(0,2)]||"qwerty",this.keypressSound=void 0,this.spacebarKeypressSound=void 0,this.returnKeypressSound=void 0,this.deleteKeypressSound=void 0,this.config.keypressSound&&("string"==typeof this.config.keypressSound?(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound):(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound.default,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound,this.config.keypressSound.spacebar&&(this.spacebarKeypressSound=new Audio,this.spacebarKeypressSound.preload="none",this.spacebarKeypressSound.src=this.config.keypressSound.spacebar,this.spacebarKeypressSound.volume=.5),this.config.keypressSound.return&&(this.returnKeypressSound=new Audio,this.returnKeypressSound.preload="none",this.returnKeypressSound.src=this.config.keypressSound.return,this.returnKeypressSound.volume=.5),this.config.keypressSound.delete&&(this.deleteKeypressSound=new Audio,this.deleteKeypressSound.preload="none",this.deleteKeypressSound.src=this.config.keypressSound.delete,this.deleteKeypressSound.volume=.5))),this.config.plonkSound&&(this.plonkSound=new Audio,this.plonkSound.preload="none",this.plonkSound.src=this.config.plonkSound,this.plonkSound.volume=.5)},_s.prototype.speak_=function(t,e){e=e||{withHighlighting:!1};const i=function(t,e){let i=null;switch(e){case"all":i=t.mathlist.root;break;case"selection":t.mathlist.isCollapsed()||(i=t.mathlist.getSelectedAtoms());break;case"left":{const e=t.mathlist.siblings(),s=t.mathlist.startOffset();if(s>=1){i=[];for(let t=1;t<=s;t++)i.push(e[t])}break}case"right":{const e=t.mathlist.siblings(),s=t.mathlist.endOffset()+1;if(s<=e.length-1){i=[];for(let t=s;t<=e.length-1;t++)i.push(e[t])}break}case"start":case"end":break;case"group":i=t.mathlist.siblings();break;case"parent":{const e=t.mathlist.parent();e&&"root"!==e.type&&(i=t.mathlist.parent());break}}return i}(this,t);if(null===i)return this.config.handleSpeak(function(t){let e="";switch(t){case"all":break;case"selection":e="no selection";break;case"left":e="at start";break;case"right":e="at end";break;case"group":break;case"parent":e="no parent"}return e}(t)),!1;const s=this.config;e.withHighlighting&&(s.textToSpeechMarkup=window.sre&&"sre"===s.textToSpeechRules?"ssml_step":"ssml");const n=pe.toSpeakableText(i,s);return e.withHighlighting?(window.mathlive.readAloudMathField=this,this._render({forHighlighting:!0}),this.config.handleReadAloud&&this.config.handleReadAloud(this.field,n,this.config)):this.config.handleSpeak&&this.config.handleSpeak(n,s),!1};var ks={MathField:_s};function As(t,e,i){let s=i,n=0;const r=t.length;for(;s<e.length;){const i=e[s];if(n<=0&&e.slice(s,s+r)===t)return s;"\\"===i?s++:"{"===i?n++:"}"===i&&n--,s++}return-1}function Ts(t,e,i,s){const n=[];for(let r=0;r<t.length;r++)if("text"===t[r].type){const o=t[r].data;let a,l=!0,h=0;-1!==(a=o.indexOf(e))&&((h=a)>0&&n.push({type:"text",data:o.slice(0,h)}),l=!1);let c=!1;for(;!c;){if(l){if(-1===(a=o.indexOf(e,h))){c=!0;break}h!==a&&n.push({type:"text",data:o.slice(h,a)}),h=a}else{if(-1===(a=As(i,o,h+e.length))){c=!0;break}n.push({type:"math",data:o.slice(h+e.length,a),rawData:o.slice(h,a+i.length),mathstyle:s}),h=a+i.length}l=!l}h<o.length&&n.push({type:"text",data:o.slice(h)})}else n.push(t[r]);return n}function Ms(t,e){let i=[{type:"text",data:t}];for(let s=0;s<e.inline.length;s++){const t=e.inline[s];i=Ts(i,t[0],t[1],"textstyle")}for(let s=0;s<e.display.length;s++){const t=e.display[s];i=Ts(i,t[0],t[1],"displaystyle")}return i}function Os(t,e,i,s){const n=function(t,e,i,s){let n=document.createElement("span");n.setAttribute("aria-hidden","true"),e.preserveOriginalContent&&(n.setAttribute("data-"+e.namespace+"original-content",t),i&&n.setAttribute("data-"+e.namespace+"original-mathstyle",i));try{n.innerHTML=e.renderToMarkup(t,i||"displaystyle","html",e.macros)}catch(e){if(!s)return null;n=document.createTextNode(t)}return n}(t,i,e,s);if(n&&/\b(mathml|speakable-text)\b/i.test(i.renderAccessibleContent)){const e=document.createDocumentFragment();if(/\bmathml\b/i.test(i.renderAccessibleContent)&&i.renderToMathML&&e.appendChild(function(t,e){const i=document.createElement("span");try{i.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+e.renderToMathML(t,e)+"</math>"}catch(e){i.textContent=t}return i.className="sr-only",i}(t,i)),/\bspeakable-text\b/i.test(i.renderAccessibleContent)&&i.renderToSpeakableText){const s=document.createElement("span");s.innerHTML=i.renderToSpeakableText(t,i),s.className="sr-only",e.appendChild(s)}return e.appendChild(n),e}return n}function Ns(t,e){let i=null;if(e.TeX.processEnvironments&&/^\s*\\begin/.test(t))(i=document.createDocumentFragment()).appendChild(Os(t,void 0,e,!0));else{const s=Ms(t,e.TeX.delimiters);if(1===s.length&&"text"===s[0].type)return null;i=document.createDocumentFragment();for(let t=0;t<s.length;t++)i.appendChild("text"===s[t].type?document.createTextNode(s[t].data):Os(s[t].data,s[t].mathstyle,e,!0))}return i}const Ls={namespace:"",skipTags:["noscript","style","textarea","pre","code","annotation","annotation-xml"],processScriptType:"math/tex",ignoreClass:"tex2jax_ignore",processClass:"tex2jax_process",preserveOriginalContent:!0,renderAccessibleContent:"mathml",TeX:{disabled:!1,processEnvironments:!0,delimiters:{inline:[["\\(","\\)"]],display:[["$$","$$"],["\\[","\\]"]]}}};var Ds={renderMathInElement:function(t,e){try{if((e=Object.assign({},Ls,e)).ignoreClassPattern=new RegExp(e.ignoreClass),e.processClassPattern=new RegExp(e.processClass),e.processScriptTypePattern=new RegExp(e.processScriptType),e.macros=Rt.MACROS,e.namespace){if(!/^[a-z]+[-]?$/.test(e.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(e.namespace)||(e.namespace+="-")}!function t(e,i){const s=e.getAttribute("data-"+i.namespace+"original-content");if(s){const t=Os(s,e.getAttribute("data-"+i.namespace+"mathstyle"),i,!1);null!=t&&(e.textContent="",e.appendChild(t))}else{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){const t=e.childNodes[0].textContent;if(i.TeX.processEnvironments&&/^\s*\\begin/.test(t))return e.textContent="",void e.appendChild(Os(t,void 0,i,!0));const s=Ms(t,i.TeX.delimiters);if(1===s.length&&"math"===s[0].type)return e.textContent="",void e.appendChild(Os(s[0].data,s[0].mathstyle,i,!0));if(1===s.length&&"text"===s[0].type)return}for(let s=0;s<e.childNodes.length;s++){const n=e.childNodes[s];if(3===n.nodeType){const t=Ns(n.textContent,i);t&&(s+=t.childNodes.length-1,e.replaceChild(t,n))}else if(1===n.nodeType){const e=n.nodeName.toLowerCase();if("script"===e&&i.processScriptTypePattern.test(n.type)){let t="displaystyle";for(const i of n.type.split(";")){const e=i.split("=");"mode"===e[0].toLowerCase()&&(t="display"===e[1].toLoweCase()?"displaystyle":"textstyle")}const e=Os(n.textContent,t,i,!0);n.parentNode.replaceChild(e,n)}else(i.processClassPattern.test(n.className)||!i.skipTags.includes(e)&&!i.ignoreClassPattern.test(n.className))&&t(n,i)}}}}(t,e)}catch(t){Error}}};function js(t,e,i,s){e=e||"displaystyle";const n=v.tokenize(t),r=Ce.parseTokens(n,"math",null,s);if("mathlist"===i)return r;let o=pe.decompose({mathstyle:e},r);if(o=et.coalesce(o),"span"===i)return o;const a=et.makeSpan(o,"ML__base"),l=et.makeSpan("","ML__strut");l.setStyle("height",a.height,"em");const h=[l];if(0!==a.depth){const t=et.makeSpan("","ML__strut--bottom");t.setStyle("height",a.height+a.depth,"em"),t.setStyle("vertical-align",-a.depth,"em"),h.push(t)}return h.push(a),et.makeSpan(h,"ML__mathlive").toMarkup()}function Is(t,e){if(!pe.toMathML)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Rt.MACROS);const i=Ce.parseTokens(v.tokenize(t),"math",null,e.macros);return pe.toMathML(i,e)}function Rs(t,e){if(!pe.toSpeakableText)return"";(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Rt.MACROS);const i=Ce.parseTokens(v.tokenize(t),"math",null,e.macros);return pe.toSpeakableText(i,e)}function Bs(t,e){if(!e&&window&&window.mathlive&&(e=window.mathlive.config),(e=e||{}).speechEngine&&"local"!==e.speechEngine)"amazon"===e.speechEngine&&window&&window.AWS&&new window.AWS.Polly({apiVersion:"2016-06-10"}).synthesizeSpeech({OutputFormat:"mp3",VoiceId:e.speechEngineVoice||"Joanna",Text:t,TextType:"ssml"},function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),s=URL.createObjectURL(i);new Audio(s).play().catch(t=>void 0)}});else{const e=new SpeechSynthesisUtterance(t);window&&window.speechSynthesis.speak(e)}}function Fs(t,e,i){if(!window)return;if(!i&&window.mathlive&&(i=window.mathlive.config),"amazon"!==(i=i||{}).speechEngine)return void(i.handleSpeak&&i.handleSpeak(e));if(!window.AWS)return;const s=new window.AWS.Polly({apiVersion:"2016-06-10"}),n={OutputFormat:"json",VoiceId:i.speechEngineVoice||"Joanna",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};window.mathlive=window.mathlive||{},window.mathlive.readAloudElement=t;const r=i.onReadAloudStatus||window.mathlive.onReadAloudStatus;s.synthesizeSpeech(n,function(t,e){if(t);else if(e&&e.AudioStream){const t=new TextDecoder("utf-8").decode(new Uint8Array(e.AudioStream));window.mathlive.readAloudMarks=t.split("\n").map(t=>t?JSON.parse(t):{}),window.mathlive.readAloudTokens=[];for(const e of window.mathlive.readAloudMarks)e.value&&window.mathlive.readAloudTokens.push(e.value);window.mathlive.readAloudCurrentMark="",n.OutputFormat="mp3",n.SpeechMarkTypes=[],s.synthesizeSpeech(n,function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),s=URL.createObjectURL(i);window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudAudio=new Audio,window.mathlive.readAloudAudio.addEventListener("ended",()=>{r&&r(window.mathlive.readAloudMathField,"ended"),window.mathlive.readAloudMathField?(window.mathlive.readAloudMathField._render(),window.mathlive.readAloudElement=null,window.mathlive.readAloudMathField=null,window.mathlive.readAloudTokens=[],window.mathlive.readAloudMarks=[],window.mathlive.readAloudCurrentMark=""):function t(e){e.classList.remove("highlight"),e.children&&Array.from(e.children).forEach(e=>{t(e)})}(window.mathlive.readAloudElement)}),window.mathlive.readAloudAudio.addEventListener("timeupdate",()=>{let t="";const e=1e3*window.mathlive.readAloudAudio.currentTime+100;for(const i of window.mathlive.readAloudMarks)i.time<e&&(t=i.value);window.mathlive.readAloudCurrentMark!==t&&(window.mathlive.readAloudCurrentToken=t,t&&t===window.mathlive.readAloudFinalToken?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudCurrentMark=t,function t(e,i){i&&e.dataset.atomId!==i?(e.classList.remove("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e,i)})):(e.classList.add("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e)}))}(window.mathlive.readAloudElement,window.mathlive.readAloudCurrentMark)))})),window.mathlive.readAloudAudio.src=s,r&&r(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}})}})}function Ys(t){let e=t;if("string"==typeof t&&!(e=document.getElementById(t)))throw Error(`The element with ID "${t}" could not be found.`);return e}function zs(t,e){Ds&&((e=e||{}).renderToMarkup=e.renderToMarkup||js,e.renderToMathML=e.renderToMathML||Is,e.renderToSpeakableText=e.renderToSpeakableText||Rs,e.macros=e.macros||Rt.MACROS,Ds.renderMathInElement(Ys(t),e))}function Xs(t){if(t.namespace){if(!/^[a-z]+[-]?$/.test(t.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(t.namespace)||(t.namespace+="-")}}return{latexToMarkup:js,latexToMathML:Is,latexToSpeakableText:Rs,latexToAST:function(t,e){if(!pe.toAST)return{};(e=e||{}).macros=e.macros||{},Object.assign(e.macros,Rt.MACROS);const i=Ce.parseTokens(v.tokenize(t),"math",null,e.macros);return pe.toAST(i,e)},makeMathField:function(t,e){if(!ks)throw Error("The MathField module is not loaded.");return(e=e||{}).handleSpeak=e.handleSpeak||Bs,e.handleReadAloud=e.handleReadAloud||Fs,new ks.MathField(Ys(t),e)},renderMathInDocument:function(t){zs(document.body,t)},renderMathInElement:zs,revertToOriginalContent:function(t,e){(t=(t=Ys(t)).children[1])instanceof ks.MathField?t.revertToOriginalContent():(Xs(e=e||{}),t.innerHTML=t.getAttribute("data-"+(e.namespace||"")+"original-content"))},getOriginalContent:function(t,e){return(t=(t=Ys(t)).children[1])instanceof ks.MathField?t.originalContent:(Xs(e=e||{}),t.getAttribute("data-"+(e.namespace||"")+"original-content"))},readAloud:Fs,readAloudStatus:function(){return window?(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.paused?"paused":window.mathlive.readAloudAudio.ended?"ready":"playing":"ready"):"unavailable"},pauseReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"paused"),window.mathlive.readAloudAudio.pause()))},resumeReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()))},playReadAloud:function(t,e){if(window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio)){let i=0;if(window.mathlive.readAloudFinalToken=null,t){window.mathlive.readAloudMarks=window.mathlive.readAloudMarks||[];for(const e of window.mathlive.readAloudMarks)e.value===t&&(i=e.time/1e3);let s=window.mathlive.readAloudTokens.indexOf(t);s>=0&&(s+=e)<window.mathlive.readAloudTokens.length&&(window.mathlive.readAloudFinalToken=s)}window.mathlive.readAloudAudio.currentTime=i,window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}}}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).MathLive=factory(),function(t,e){"function"==typeof define&&define.amd?define("jsxgraphcore",[],e):"object"==typeof module&&module.exports?module.exports=e():t.returnExports=e()}(this,function(){var requirejs,require,define;return function(t){function e(t,e){return b.call(t,e)}function i(t,e){var i,s,n,r,o,a,l,h,c,d,u,p=e&&e.split("/"),f=m.map,g=f&&f["*"]||{};if(t){for(o=(t=t.split("/")).length-1,m.nodeIdCompat&&v.test(t[o])&&(t[o]=t[o].replace(v,"")),"."===t[0].charAt(0)&&p&&(t=p.slice(0,p.length-1).concat(t)),c=0;c<t.length;c++)if("."===(u=t[c]))t.splice(c,1),c-=1;else if(".."===u){if(0===c||1===c&&".."===t[2]||".."===t[c-1])continue;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((p||g)&&f){for(c=(i=t.split("/")).length;c>0;c-=1){if(s=i.slice(0,c).join("/"),p)for(d=p.length;d>0;d-=1)if((n=f[p.slice(0,d).join("/")])&&(n=n[s])){r=n,a=c;break}if(r)break;!l&&g&&g[s]&&(l=g[s],h=c)}!r&&l&&(r=l,a=h),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function s(e,i){return function(){var s=y.call(arguments,0);return"string"!=typeof s[0]&&1===s.length&&s.push(null),c.apply(t,s.concat([e,i]))}}function n(t){return function(e){p[t]=e}}function r(i){if(e(f,i)){var s=f[i];delete f[i],g[i]=!0,h.apply(t,s)}if(!e(p,i)&&!e(g,i))throw new Error("No "+i);return p[i]}function o(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function a(t){return t?o(t):[]}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var h,c,d,u,p={},f={},m={},g={},b=Object.prototype.hasOwnProperty,y=[].slice,v=/\.js$/;d=function(t,e){var s,n=o(t),a=n[0],l=e[1];return t=n[1],a&&(s=r(a=i(a,l))),a?t=s&&s.normalize?s.normalize(t,function(t){return function(e){return i(e,t)}}(l)):i(t,l):(t=(n=o(t=i(t,l)))[1],(a=n[0])&&(s=r(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:s}},u={require:function(t){return s(t)},exports:function(t){var e=p[t];return void 0!==e?e:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:l(t)}}},h=function(i,o,l,h){var c,m,b,y,v,C,x,_=[],P=typeof l;if(C=a(h=h||i),"undefined"===P||"function"===P){for(o=!o.length&&l.length?["require","exports","module"]:o,v=0;v<o.length;v+=1)if("require"===(m=(y=d(o[v],C)).f))_[v]=u.require(i);else if("exports"===m)_[v]=u.exports(i),x=!0;else if("module"===m)c=_[v]=u.module(i);else if(e(p,m)||e(f,m)||e(g,m))_[v]=r(m);else{if(!y.p)throw new Error(i+" missing "+m);y.p.load(y.n,s(h,!0),n(m),{}),_[v]=p[m]}b=l?l.apply(p[i],_):void 0,i&&(c&&c.exports!==t&&c.exports!==p[i]?p[i]=c.exports:b===t&&x||(p[i]=b))}else i&&(p[i]=l)},requirejs=require=c=function(e,i,s,n,o){if("string"==typeof e)return u[e]?u[e](i):r(d(e,a(i)).f);if(!e.splice){if((m=e).deps&&c(m.deps,m.callback),!i)return;i.splice?(e=i,i=s,s=null):e=t}return i=i||function(){},"function"==typeof s&&(s=n,n=o),n?h(t,e,i,s):setTimeout(function(){h(t,e,i,s)},4),c},c.config=function(t){return c(t)},requirejs._defined=p,(define=function(t,i,s){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");i.splice||(s=i,i=[]),e(p,t)||e(f,t)||(f[t]=[t,i,s])}).amd={jQuery:!0}}(),define("../node_modules/almond/almond",function(){}),define("jxg",[],function(){"use strict";var t={};return"object"!=typeof JXG||JXG.extend||(t=JXG),t.extend=function(t,e,i,s){var n;for(n in i=i||!1,s=s||!1,e)(!i||i&&e.hasOwnProperty(n))&&(t[s?n.toLowerCase():n]=e[n])},t.extend(t,{boards:{},readers:{},elements:{},registerElement:function(t,e){t=t.toLowerCase(),this.elements[t]=e},registerReader:function(t,e){var i,s;for(i=0;i<e.length;i++)s=e[i].toLowerCase(),"function"!=typeof this.readers[s]&&(this.readers[s]=t)},shortcut:function(t,e){return function(){return t[e].apply(this,arguments)}},getRef:function(e,i){return t.deprecated("JXG.getRef()","Board.select()"),e.select(i)},getReference:function(e,i){return t.deprecated("JXG.getReference()","Board.select()"),e.select(i)},getBoardByContainerId:function(t){var e;for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t)return JXG.boards[e];return null},deprecated:function(e,i){var s=e+" is deprecated.";i&&(s+=" Please use "+i+" instead."),t.warn(s)},warn:function(t){"object"==typeof window&&window.console&&console.warn?console.warn("WARNING:",t):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+t+"<br />")},debugInt:function(t){var e,i;for(e=0;e<arguments.length;e++)i=arguments[e],"object"==typeof window&&window.console&&console.log?console.log(i):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=i+"<br/>")},debugWST:function(e){var i=new Error;t.debugInt.apply(this,arguments),i&&i.stack&&(t.debugInt("stacktrace"),t.debugInt(i.stack.split("\n").slice(1).join("\n")))},debugLine:function(e){var i=new Error;t.debugInt.apply(this,arguments),i&&i.stack&&t.debugInt("Called from",i.stack.split("\n").slice(2,3).join("\n"))},debug:function(e){t.debugInt.apply(this,arguments)}}),t}),define("base/constants",["jxg"],function(t){"use strict";var e;return t.extend(t,e={version:"0.99.7",licenseText:"JSXGraph v0.99.7 Copyright (C) see http://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORELEMENT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_LABELMOVEMENT:34,GENTYPE_VECTOR:35,GENTYPE_NONREFLEXANGLE:36,GENTYPE_REFLEXANGLE:37,GENTYPE_PATH:38,GENTYPE_DERIVATIVE:39,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_VECTORCOPY:47,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_INTVAL:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78,GENTYPE_CTX_TYPE_I:79,GENTYPE_CTX_HASINNERPOINTS:80,GENTYPE_CTX_SNAPWIDTH:81,GENTYPE_CTX_SNAPTOGRID:82}),e}),define("utils/type",["jxg","base/constants"],function(t,e){"use strict";return t.extend(t,{isId:function(t,e){return"string"==typeof e&&!!t.objects[e]},isName:function(t,e){return"string"==typeof e&&!!t.elementsByName[e]},isGroup:function(t,e){return"string"==typeof e&&!!t.groups[e]},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t||"[Object Number]"===Object.prototype.toString.call(t)},isFunction:function(t){return"function"==typeof t},isArray:function(t){return Array.isArray?Array.isArray(t):null!==t&&"object"==typeof t&&"function"==typeof t.splice&&"function"==typeof t.join},isObject:function(t){return"object"==typeof t&&!this.isArray(t)},isPoint:function(t){return null!==t&&"object"==typeof t&&t.elementClass===e.OBJECT_CLASS_POINT},isPointType:function(t,e){var i,s;return!!this.isArray(e)||!!(this.isFunction(e)&&(i=e(),this.isArray(i)&&i.length>1))||(s=t.select(e),this.isPoint(s))},isTransformationOrArray:function(t){if(null!==t){if(this.isArray(t)&&t.length>0)return this.isTransformationOrArray(t[0]);if("object"==typeof t)return t.type===e.OBJECT_TYPE_TRANSFORMATION}return!1},exists:function(t){return!(null==t)},def:function(t,e){return this.exists(t)?t:e},str2Bool:function(t){return!this.exists(t)||("boolean"==typeof t?t:!!this.isString(t)&&"true"===t.toLowerCase())},createEvalFunction:function(e,i,s){var n,r=[];for(n=0;n<s;n++)r[n]=t.createFunction(i[n],e,"",!0);return function(t){return r[t]()}},createFunction:function(t,e,i,s){var n=null;return this.exists(s)&&!s||!this.isString(t)?this.isFunction(t)?n=t:this.isNumber(t)?n=function(){return t}:this.isString(t)&&(n=function(){return t}):n=e.jc.snippet(t,!0,i,!0),null!==n&&(n.origin=t),n},providePoints:function(t,e,i,s,n){var r,o,a,l,h,c=0,d=[];for(this.isArray(e)||(e=[e]),a=e.length,this.exists(n)&&(c=n.length),0===c&&(l=this.copyAttributes(i,t.options,s)),r=0;r<a;++r)if(c>0&&(o=Math.min(r,c-1),l=this.copyAttributes(i,t.options,s,n[o])),this.isArray(e[r])&&e[r].length>1?d.push(t.create("point",e[r],l)):this.isFunction(e[r])?(h=e[r](),this.isArray(h)&&h.length>1&&d.push(t.create("point",[e[r]],l))):d.push(t.select(e[r])),!this.isPoint(d[r]))return!1;return d},bind:function(t,e){return function(){return t.apply(e,arguments)}},evaluate:function(t){return this.isFunction(t)?t():t},indexOf:function(t,e,i){var s,n=this.exists(i);if(Array.indexOf&&!n)return t.indexOf(e);for(s=0;s<t.length;s++)if(n&&t[s][i]===e||!n&&t[s]===e)return s;return-1},eliminateDuplicates:function(t){var e,i=t.length,s=[],n={};for(e=0;e<i;e++)n[t[e]]=0;for(e in n)n.hasOwnProperty(e)&&s.push(e);return s},swap:function(t,e,i){var s;return s=t[e],t[e]=t[i],t[i]=s,t},uniqueArray:function(e){var i,s,n,r=[];if(0===e.length)return[];for(i=0;i<e.length;i++)if(n=this.isArray(e[i]),this.exists(e[i]))for(s=i+1;s<e.length;s++)n&&t.cmpArrays(e[i],e[s])?e[i]=[]:n||e[i]!==e[s]||(e[i]="");else e[i]="";for(s=0,i=0;i<e.length;i++)(n=this.isArray(e[i]))||""===e[i]?n&&0!==e[i].length&&(r[s]=e[i].slice(0),s++):(r[s]=e[i],s++);return e=r,r},isInArray:function(e,i){return t.indexOf(e,i)>-1},coordsArrayToMatrix:function(t,e){var i,s=[],n=[];for(i=0;i<t.length;i++)e?(s.push(t[i].usrCoords[1]),n.push(t[i].usrCoords[2])):n.push([t[i].usrCoords[1],t[i].usrCoords[2]]);return e&&(n=[s,n]),n},cmpArrays:function(t,e){var i;if(t===e)return!0;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(this.isArray(t[i])&&this.isArray(e[i])){if(!this.cmpArrays(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0},removeElementFromArray:function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]===e)return t.splice(i,1),t;return t},trunc:function(e,i){return i=t.def(i,0),this.toFixed(e,i)},_decimalAdjust:function(t,e,i){return void 0===i||0==+i?Math[t](e):(e=+e,i=+i,isNaN(e)||"number"!=typeof i||i%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[t](+(e[0]+"e"+(e[1]?+e[1]-i:-i)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+i:i))))},_round10:function(t,e){return this._decimalAdjust("round",t,e)},_floor10:function(t,e){return this._decimalAdjust("floor",t,e)},_ceil10:function(t,e){return this._decimalAdjust("ceil",t,e)},toFixed:function(t,e){return this._round10(t,-e).toFixed(e)},autoDigits:function(t){var e=Math.abs(t);return e>.1?this.toFixed(t,2):e>=.01?this.toFixed(t,4):e>=1e-4?this.toFixed(t,6):t},keys:function(t,e){var i,s=[];for(i in t)e?t.hasOwnProperty(i)&&s.push(i):s.push(i);return s},clone:function(t){var e={};return e.prototype=t,e},cloneAndCopy:function(t,e){var i,s=function(){};for(i in s.prototype=t,e)s[i]=e[i];return s},merge:function(t,e){var i,s;for(i in e)if(e.hasOwnProperty(i))if(this.isArray(e[i]))for(t[i]||(t[i]=[]),s=0;s<e[i].length;s++)t[i][s]="object"==typeof e[i][s]?this.merge(t[i][s],e[i][s]):e[i][s];else"object"==typeof e[i]?(t[i]||(t[i]={}),t[i]=this.merge(t[i],e[i])):t[i]=e[i];return t},deepCopy:function(t,e,i){var s,n,r,o;if(i=i||!1,"object"!=typeof t||null===t)return t;if(this.isArray(t))for(s=[],n=0;n<t.length;n++)s[n]="object"==typeof(r=t[n])?this.exists(r.board)?r.id:this.deepCopy(r):r;else{for(n in s={},t)t.hasOwnProperty(n)&&(s[o=i?n.toLowerCase():n]=null!==(r=t[n])&&"object"==typeof r?this.exists(r.board)?r.id:this.deepCopy(r):r);for(n in e)e.hasOwnProperty(n)&&(s[o=i?n.toLowerCase():n]="object"==typeof(r=e[n])?this.isArray(r)||!this.exists(s[o])?this.deepCopy(r):this.deepCopy(s[o],r,i):r)}return s},copyAttributes:function(e,i,s){var n,r,o,a,l;for(n=(o=arguments.length)<3||{circle:1,curve:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1}[s]?t.deepCopy(i.elements,null,!0):{},o<4&&this.exists(s)&&this.exists(i.layer[s])&&(n.layer=i.layer[s]),a=i,l=!0,r=2;r<o;r++){if(!this.exists(a[arguments[r]])){l=!1;break}a=a[arguments[r]]}for(l&&(n=t.deepCopy(n,a,!0)),a=e,l=!0,r=3;r<o;r++){if(!this.exists(a[arguments[r]])){l=!1;break}a=a[arguments[r]]}for(l&&this.extend(n,a,null,!0),a=i,l=!0,r=2;r<o;r++){if(!this.exists(a[arguments[r]])){l=!1;break}a=a[arguments[r]]}return l&&this.exists(a.label)&&(n.label=t.deepCopy(a.label,n.label)),n.label=t.deepCopy(i.label,n.label),n},copyPrototypeMethods:function(t,e,i){var s;for(s in t.prototype[i]=e.prototype.constructor,e.prototype)e.prototype.hasOwnProperty(s)&&(t.prototype[s]=e.prototype[s])},toJSON:function(e,i){var s,n,r,o;if(i=t.def(i,!1),JSON.stringify&&!i)try{return JSON.stringify(e)}catch(t){}switch(typeof e){case"object":if(e){if(s=[],this.isArray(e)){for(r=0;r<e.length;r++)s.push(t.toJSON(e[r],i));return"["+s.join(",")+"]"}for(n in e)if(e.hasOwnProperty(n)){try{o=t.toJSON(e[n],i)}catch(t){o=""}s.push(i?n+":"+o:'"'+n+'":'+o)}return"{"+s.join(",")+"} "}return"null";case"string":return"'"+e.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return e.toString()}return"0"},clearVisPropOld:function(t){return t.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",transitionduration:0,top:-1e5,visible:null},t},isInObject:function(t,e){var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1},escapeHTML:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(t){return t.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()},trimNumber:function(t){return"."!==(t=(t=t.replace(/^0+/,"")).replace(/0+$/,""))[t.length-1]&&","!==t[t.length-1]||(t=t.slice(0,-1)),"."!==t[0]&&","!==t[0]||(t="0"+t),t},filterElements:function(t,e){var i,s,n,r,o,a,l,h=t.length,c=[];if("function"!=typeof e&&"object"!=typeof e)return c;for(i=0;i<h;i++){if(l=!0,n=t[i],"object"==typeof e){for(s in e)if(e.hasOwnProperty(s)&&(r=s.toLowerCase(),o="function"==typeof n[s]?n[s]():n[s],a=n.visProp&&"function"==typeof n.visProp[r]?n.visProp[r]():n.visProp&&n.visProp[r],!(l="function"==typeof e[s]?e[s](o)||e[s](a):o===e[s]||a===e[s])))break}else"function"==typeof e&&(l=e(n));l&&c.push(n)}return c},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(t,e){return"function"==typeof html_sanitize&&e?html_sanitize(t,function(){},function(t){return t}):(t&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t)},evalSlider:function(t){return t&&t.type===e.OBJECT_TYPE_GLIDER&&"function"==typeof t.Value?t.Value():t}}),t}),define("utils/env",["jxg","utils/type"],function(t,e){"use strict";return t.extend(t,{touchProperty:"touches",isBrowser:"object"==typeof window&&"object"==typeof document,supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return this.isBrowser&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},supportsCanvas:function(){var e=!1;if(this.isNode())try{e=!!("object"==typeof module?module.require("canvas"):require("canvas"))}catch(t){}return e||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&("object"==typeof module&&!!module.exports||"object"==typeof global&&global.requirejsVars&&!global.requirejsVars.isBrowser)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return e.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return e.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z\.]*Safari/)>-1},isMetroApp:function(){return"object"==typeof window&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return e.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return e.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var t,e,i=3;if("object"!=typeof document)return 0;e=(t=document.createElement("div")).getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++i+"]><i></i><![endif]--\x3e"}while(e[0]);return i>4?i:void 0}(),getDimensions:function(t,i){var s,n,r,o,a,l,h,c,d,u=/\d+(\.\d*)?px/;if(!this.isBrowser||null===t)return{width:500,height:500};if(s=(i=i||document).getElementById(t),!e.exists(s))throw new Error("\nJSXGraph: HTML container element '"+t+"' not found.");return"none"!==(n=s.style.display)&&null!==n?s.clientWidth>0&&s.clientHeight>0?{width:s.clientWidth,height:s.clientHeight}:(d=window.getComputedStyle?window.getComputedStyle(s):s.style,{width:u.test(d.width)?parseFloat(d.width):0,height:u.test(d.height)?parseFloat(d.height):0}):(o=(r=s.style).visibility,a=r.position,l=r.display,r.visibility="hidden",r.position="absolute",r.display="block",h=s.clientWidth,c=s.clientHeight,r.display=l,r.position=a,r.visibility=o,{width:h,height:c})},addEvent:function(t,i,s,n){var r=function(){return s.apply(n,arguments)};r.origin=s,n["x_internal"+i]=n["x_internal"+i]||[],n["x_internal"+i].push(r),e.exists(t)&&e.exists(t.addEventListener)&&t.addEventListener(i,r,!1),e.exists(t)&&e.exists(t.attachEvent)&&t.attachEvent("on"+i,r)},removeEvent:function(i,s,n,r){var o;if(e.exists(r))if(e.exists(r["x_internal"+s]))if(e.isArray(r["x_internal"+s]))if(-1!==(o=e.indexOf(r["x_internal"+s],n,"origin"))){try{e.exists(i)&&e.exists(i.removeEventListener)&&i.removeEventListener(s,r["x_internal"+s][o],!1),e.exists(i)&&e.exists(i.detachEvent)&&i.detachEvent("on"+s,r["x_internal"+s][o])}catch(e){t.debug("event not registered in browser: ("+s+" -- "+n+")")}r["x_internal"+s].splice(o,1)}else t.debug("no such event function in internal list: "+n);else t.debug("owner[x_internal + "+s+"] is not an array");else t.debug("no such type: "+s);else t.debug("no such owner")},removeAllEvents:function(e,i,s){var n;if(s["x_internal"+i]){for(n=s["x_internal"+i].length-1;n>=0;n--)t.removeEvent(e,i,s["x_internal"+i][n].origin,s);s["x_internal"+i].length>0&&t.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(i,s,n){var r,o,a,l=0,h=0;if(i||(i=window.event),n=n||document,e.exists(a=i[t.touchProperty])&&0===a.length&&(a=i.changedTouches),e.exists(s)&&e.exists(a))if(-1===s){for(o=a.length,r=0;r<o;r++)if(a[r]){i=a[r];break}}else i=a[s];return i.clientX&&(l=i.clientX,h=i.clientY),[l,h]},getOffset:function(t){var e,i=t,s=t,n=i.offsetLeft-i.scrollLeft,r=i.offsetTop-i.scrollTop;for(n=(e=this.getCSSTransform([n,r],i))[0],r=e[1],i=i.offsetParent;i;){for(n+=i.offsetLeft,r+=i.offsetTop,i.offsetParent&&(n+=i.clientLeft-i.scrollLeft,r+=i.clientTop-i.scrollTop),n=(e=this.getCSSTransform([n,r],i))[0],r=e[1],s=s.parentNode;s!==i;)n=(e=this.getCSSTransform([n+=s.clientLeft-s.scrollLeft,r+=s.clientTop-s.scrollTop],s))[0],r=e[1],s=s.parentNode;i=i.offsetParent}return[n,r]},getStyle:function(e,i){var s,n=e.ownerDocument;return n.defaultView&&n.defaultView.getComputedStyle?s=n.defaultView.getComputedStyle(e,null).getPropertyValue(i):e.currentStyle&&t.ieVersion>=9?s=e.currentStyle[i]:e.style&&(i=i.replace(/-([a-z]|[0-9])/gi,function(t,e){return e.toUpperCase()}),s=e.style[i]),s},getProp:function(t,e){var i=parseInt(this.getStyle(t,e),10);return isNaN(i)?0:i},getCSSTransform:function(t,i){var s,n,r,o,a,l,h,c=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(a=c.length,s=0,r="";s<a;s++)if(e.exists(i.style[c[s]])){r=i.style[c[s]];break}if(""!==r&&(o=r.indexOf("("))>0){for(n=0,l=(h=r.substring(o+1,(a=r.length)-1).split(",")).length;n<l;n++)h[n]=parseFloat(h[n]);0===r.indexOf("matrix")?(t[0]+=h[4],t[1]+=h[5]):0===r.indexOf("translateX")?t[0]+=h[0]:0===r.indexOf("translateY")?t[1]+=h[0]:0===r.indexOf("translate")&&(t[0]+=h[0],t[1]+=h[1])}return e.exists(i.style.zoom)&&""!==(r=i.style.zoom)&&(t[0]*=parseFloat(r),t[1]*=parseFloat(r)),t},getCSSTransformMatrix:function(t){var i,s,n,r,o,a,l,h,c=t.ownerDocument,d=["transform","webkitTransform","MozTransform","msTransform","oTransform"],u=[[1,0,0],[0,1,0],[0,0,1]];if(c.defaultView&&c.defaultView.getComputedStyle)n=(h=c.defaultView.getComputedStyle(t,null)).getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");else for(o=d.length,i=0,n="";i<o;i++)if(e.exists(t.style[d[i]])){n=t.style[d[i]];break}if(""!==n&&(r=n.indexOf("("))>0){for(s=0,a=(l=n.substring(r+1,(o=n.length)-1).split(",")).length;s<a;s++)l[s]=parseFloat(l[s]);0===n.indexOf("matrix")?u=[[1,0,0],[0,l[0],l[1]],[0,l[2],l[3]]]:0===n.indexOf("scaleX")?u[1][1]=l[0]:0===n.indexOf("scaleY")?u[2][2]=l[0]:0===n.indexOf("scale")&&(u[1][1]=l[0],u[2][2]=l[1])}return e.exists(t.style.zoom)&&""!==(n=t.style.zoom)&&(u[1][1]*=parseFloat(n),u[2][2]*=parseFloat(n)),u},timedChunk:function(t,e,i,s){var n=t.concat(),r=function(){var o=+new Date;do{e.call(i,n.shift())}while(n.length>0&&+new Date-o<300);n.length>0?window.setTimeout(r,1):s(t)};window.setTimeout(r,1)}}),t}),define("utils/xml",["jxg","utils/type"],function(t,e){"use strict";return t.XML={cleanWhitespace:function(t){for(var i=t.firstChild;e.exists(i);)3!==i.nodeType||/\S/.test(i.nodeValue)?1===i.nodeType&&this.cleanWhitespace(i):t.removeChild(i),i=i.nextSibling},parse:function(t){var e;return e=(new("function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(t){var e;return"function"==typeof ActiveXObject&&(e=new ActiveXObject("MSXML.DomDocument")).loadXML(t),e}})).parseFromString(t,"text/xml"),this.cleanWhitespace(e),e}},t.XML}),define("utils/event",["jxg","utils/type"],function(t,e){"use strict";return t.EventEmitter={eventHandlers:{},suspended:{},trigger:function(t,e){var i,s,n,r,o,a;for(o=t.length,s=0;s<o;s++)if(r=this.eventHandlers[t[s]],!this.suspended[t[s]]){if(this.suspended[t[s]]=!0,r)for(a=r.length,i=0;i<a;i++)(n=r[i]).handler.apply(n.context,e);this.suspended[t[s]]=!1}return this},on:function(t,i,s){return e.isArray(this.eventHandlers[t])||(this.eventHandlers[t]=[]),s=e.def(s,this),this.eventHandlers[t].push({handler:i,context:s}),this},off:function(t,i){var s;return t&&e.isArray(this.eventHandlers[t])?(i?((s=e.indexOf(this.eventHandlers[t],i,"handler"))>-1&&this.eventHandlers[t].splice(s,1),0===this.eventHandlers[t].length&&delete this.eventHandlers[t]):delete this.eventHandlers[t],this):this},eventify:function(t){t.eventHandlers={},t.on=this.on,t.off=this.off,t.triggerEventHandlers=this.trigger,t.trigger=this.trigger,t.suspended={}}},t.EventEmitter}),define("math/math",["jxg","utils/type"],function(t,e){"use strict";var i=function(t){var e,i;return t.memo?t.memo:(e={},i=Array.prototype.join,t.memo=function(){var s=i.call(arguments);return void 0!==e[s]?e[s]:e[s]=t.apply(this,arguments)},t.memo)};return t.Math={eps:1e-6,relDif:function(t,e){var i=Math.abs(t),s=Math.abs(e);return 0===(s=Math.max(i,s))?0:Math.abs(t-e)/s},mod:function(t,e){return t-Math.floor(t/e)*e},vector:function(t,e){var i,s;for(e=e||0,i=[],s=0;s<t;s++)i[s]=e;return i},matrix:function(t,e,i){var s,n,r;for(i=i||0,e=e||t,s=[],n=0;n<t;n++)for(s[n]=[],r=0;r<e;r++)s[n][r]=i;return s},identity:function(t,e){var i,s;for(void 0===e&&"number"!=typeof e&&(e=t),i=this.matrix(t,e),s=0;s<Math.min(t,e);s++)i[s][s]=1;return i},frustum:function(t,e,i,s,n,r){var o=this.matrix(4,4);return o[0][0]=2*n/(e-t),o[0][1]=0,o[0][2]=(e+t)/(e-t),o[0][3]=0,o[1][0]=0,o[1][1]=2*n/(s-i),o[1][2]=(s+i)/(s-i),o[1][3]=0,o[2][0]=0,o[2][1]=0,o[2][2]=-(r+n)/(r-n),o[2][3]=-r*n*2/(r-n),o[3][0]=0,o[3][1]=0,o[3][2]=-1,o[3][3]=0,o},projection:function(t,e,i,s){var n=i*Math.tan(t/2),r=n*e;return this.frustum(-r,r,-n,n,i,s)},matVecMult:function(t,e){var i,s,n,r=t.length,o=e.length,a=[];if(3===o)for(i=0;i<r;i++)a[i]=t[i][0]*e[0]+t[i][1]*e[1]+t[i][2]*e[2];else for(i=0;i<r;i++){for(s=0,n=0;n<o;n++)s+=t[i][n]*e[n];a[i]=s}return a},matMatMult:function(t,e){var i,s,n,r,o=t.length,a=o>0?e[0].length:0,l=e.length,h=this.matrix(o,a);for(i=0;i<o;i++)for(s=0;s<a;s++){for(n=0,r=0;r<l;r++)n+=t[i][r]*e[r][s];h[i][s]=n}return h},transpose:function(t){var e,i,s,n,r;for(e=this.matrix(r=t.length>0?t[0].length:0,n=t.length),i=0;i<r;i++)for(s=0;s<n;s++)e[i][s]=t[s][i];return e},inverse:function(t){var e,i,s,n,r,o,a,l=t.length,h=[],c=[],d=[];for(e=0;e<l;e++){for(h[e]=[],i=0;i<l;i++)h[e][i]=t[e][i];c[e]=e}for(i=0;i<l;i++){for(r=Math.abs(h[i][i]),o=i,e=i+1;e<l;e++)Math.abs(h[e][i])>r&&(r=Math.abs(h[e][i]),o=e);if(r<=this.eps)return[];if(o>i){for(s=0;s<l;s++)a=h[i][s],h[i][s]=h[o][s],h[o][s]=a;a=c[i],c[i]=c[o],c[o]=a}for(n=1/h[i][i],e=0;e<l;e++)h[e][i]*=n;for(h[i][i]=n,s=0;s<l;s++)if(s!==i){for(e=0;e<l;e++)e!==i&&(h[e][s]-=h[e][i]*h[i][s]);h[i][s]=-n*h[i][s]}}for(e=0;e<l;e++){for(s=0;s<l;s++)d[c[s]]=h[e][s];for(s=0;s<l;s++)h[e][s]=d[s]}return h},innerProduct:function(t,i,s){var n,r=0;for(void 0!==s&&e.isNumber(s)||(s=t.length),n=0;n<s;n++)r+=t[n]*i[n];return r},crossProduct:function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},factorial:i(function(t){return t<0?NaN:0===(t=Math.floor(t))||1===t?1:t*this.factorial(t-1)}),binomial:i(function(t,e){var i,s;if(e>t||e<0)return NaN;if(e=Math.round(e),t=Math.round(t),0===e||e===t)return 1;for(i=1,s=0;s<e;s++)i*=t-s,i/=s+1;return i}),cosh:function(t){return.5*(Math.exp(t)+Math.exp(-t))},sinh:function(t){return.5*(Math.exp(t)-Math.exp(-t))},pow:function(t,e){return 0===t?0===e?1:0:Math.floor(e)===e?Math.pow(t,e):t>0?Math.exp(e*Math.log(Math.abs(t))):NaN},log10:function(t){return Math.log(t)/Math.log(10)},log2:function(t){return Math.log(t)/Math.log(2)},log:function(t,i){return void 0!==i&&e.isNumber(i)?Math.log(t)/Math.log(i):Math.log(t)},sign:Math.sign||function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1},squampow:function(t,e){var i;if(Math.floor(e)===e){for(i=1,e<0&&(t=1/t,e*=-1);0!==e;)1&e&&(i*=t),e>>=1,t*=t;return i}return this.pow(t,e)},gcd:function(t,i){if(t=Math.abs(t),i=Math.abs(i),!e.isNumber(t)||!e.isNumber(i))return NaN;if(i>t){var s=t;t=i,i=s}for(;;){if(0==(t%=i))return i;if(0==(i%=t))return t}},lcm:function(t,i){var s;return e.isNumber(t)&&e.isNumber(i)?0!=(s=t*i)?s/this.gcd(t,i):0:NaN},normalize:function(t){var e,i,s=2*t[3],n=t[4]/s;return t[5]=n,t[6]=-t[1]/s,t[7]=-t[2]/s,isFinite(n)?Math.abs(n)>=1?(t[0]=(t[6]*t[6]+t[7]*t[7]-n*n)/(2*n),t[1]=-t[6]/n,t[2]=-t[7]/n,t[3]=1/(2*n),t[4]=1):(t[0]=(i=n<=0?-1:1)*(t[6]*t[6]+t[7]*t[7]-n*n)*.5,t[1]=-i*t[6],t[2]=-i*t[7],t[3]=i/2,t[4]=i*n):(e=Math.sqrt(t[1]*t[1]+t[2]*t[2]),t[0]/=e,t[1]/=e,t[2]/=e,t[3]=0,t[4]=1),t},toGL:function(t){var e,i,s;if(e="function"==typeof Float32Array?new Float32Array(16):new Array(16),4!==t.length&&4!==t[0].length)return e;for(i=0;i<4;i++)for(s=0;s<4;s++)e[i+4*s]=t[i][s];return e}},t.Math}),define("base/coords",["jxg","base/constants","utils/event","utils/type","math/math"],function(t,e,i,s,n){"use strict";return t.Coords=function(t,e,n,r){this.board=n,this.usrCoords=[],this.scrCoords=[],this.emitter=!s.exists(r)||r,this.emitter&&i.eventify(this),this.setCoordinates(t,e,!0,!0)},t.extend(t.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>n.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(t){var e=Math.round,i=this.board,s=this.usrCoords,n=i.origin.scrCoords;!0===t?(this.scrCoords[0]=e(s[0]),this.scrCoords[1]=e(s[0]*n[1]+s[1]*i.unitX),this.scrCoords[2]=e(s[0]*n[2]-s[2]*i.unitY)):(this.scrCoords[0]=s[0],this.scrCoords[1]=s[0]*n[1]+s[1]*i.unitX,this.scrCoords[2]=s[0]*n[2]-s[2]*i.unitY)},screen2usr:function(){var t=this.board.origin.scrCoords,e=this.scrCoords,i=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(e[1]-t[1])/i.unitX,this.usrCoords[2]=(t[2]-e[2])/i.unitY},distance:function(t,i){var s,r,o=0,a=this.usrCoords,l=this.scrCoords;if(t===e.COORDS_BY_USER){if((o=(r=a[0]-(s=i.usrCoords)[0])*r)>n.eps*n.eps)return Number.POSITIVE_INFINITY;o+=(r=a[1]-s[1])*r,o+=(r=a[2]-s[2])*r}else o+=(r=l[1]-(s=i.scrCoords)[1])*r,o+=(r=l[2]-s[2])*r;return Math.sqrt(o)},setCoordinates:function(t,i,s,n){var r=this.usrCoords,o=this.scrCoords,a=[r[0],r[1],r[2]],l=[o[0],o[1],o[2]];return t===e.COORDS_BY_USER?(2===i.length?(r[0]=1,r[1]=i[0],r[2]=i[1]):(r[0]=i[0],r[1]=i[1],r[2]=i[2],this.normalizeUsrCoords()),this.usr2screen(s)):(2===i.length?(o[1]=i[0],o[2]=i[1]):(o[1]=i[1],o[2]=i[2]),this.screen2usr()),!this.emitter||n||l[1]===o[1]&&l[2]===o[2]||this.triggerEventHandlers(["update"],[a,l]),this},copy:function(t,e){return void 0===e&&(e=0),this[t].slice(e)},__evt__update:function(t,e){},__evt:function(){}}),t.Coords}),define("utils/expect",["jxg","utils/type","base/constants","base/coords"],function(t,e,i,s){"use strict";var n={each:function(t,i,s){var n,r,o=[];if(e.exists(t.length))for(r=t.length,n=0;n<r;n++)o.push(i.call(this,t[n],s));return o},coords:function(t,e){var n=t;return t&&t.elementClass===i.OBJECT_CLASS_POINT?n=t.coords:t.usrCoords&&t.scrCoords&&t.usr2screen&&(n=t),e&&(n=new s(i.COORDS_BY_USER,n.usrCoords,n.board)),n},coordsArray:function(t,i){var s;return(s=e.isArray(t)?t:this.coords(t).usrCoords).length<3&&s.unshift(1),i&&(s=[s[0],s[1],s[2]]),s}};return t.Expect=n,n}),define("math/qdt",["math/math","utils/type"],function(t,e){"use strict";var i=function(t){this.capacity=10,this.points=[],this.xlb=t[0],this.xub=t[2],this.ylb=t[3],this.yub=t[1],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null};return e.extend(i.prototype,{contains:function(t,e){return this.xlb<t&&t<=this.xub&&this.ylb<e&&e<=this.yub},insert:function(t){return!!this.contains(t.usrCoords[1],t.usrCoords[2])&&(this.points.length<this.capacity?(this.points.push(t),!0):(null===this.northWest&&this.subdivide(),!!(this.northWest.insert(t)||this.northEast.insert(t)||this.southEast.insert(t)||this.southWest.insert(t))))},subdivide:function(){var t,e=this.points.length,s=this.xlb+(this.xub-this.xlb)/2,n=this.ylb+(this.yub-this.ylb)/2;for(this.northWest=new i([this.xlb,this.yub,s,n]),this.northEast=new i([s,this.yub,this.xub,n]),this.southEast=new i([this.xlb,n,s,this.ylb]),this.southWest=new i([s,n,this.xub,this.ylb]),t=0;t<e;t+=1)this.northWest.insert(this.points[t]),this.northEast.insert(this.points[t]),this.southEast.insert(this.points[t]),this.southWest.insert(this.points[t])},_query:function(t,e){var i;if(this.contains(t,e)){if(null===this.northWest)return this;if(i=this.northWest._query(t,e))return i;if(i=this.northEast._query(t,e))return i;if(i=this.southEast._query(t,e))return i;if(i=this.southWest._query(t,e))return i}return!1},query:function(t,i){var s,n;return e.exists(i)?(s=t,n=i):(s=t.usrCoords[1],n=t.usrCoords[2]),this._query(s,n)}}),t.Quadtree=i,i}),define("math/numerics",["jxg","utils/type","math/math"],function(t,e,i){"use strict";var s={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};return i.Numerics={Gauss:function(t,s){var n,r,o,a,l,h=i.eps,c=t.length>0?t[0].length:0;if(c!==s.length||c!==t.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(a=[],l=s.slice(0,c),n=0;n<c;n++)a[n]=t[n].slice(0,c);for(r=0;r<c;r++){for(n=c-1;n>r;n--)if(Math.abs(a[n][r])>h)if(Math.abs(a[r][r])<h)e.swap(a,n,r),e.swap(l,n,r);else for(a[n][r]/=a[r][r],l[n]-=a[n][r]*l[r],o=r+1;o<c;o++)a[n][o]-=a[n][r]*a[r][o];if(Math.abs(a[r][r])<h)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(a,l,!0),l},backwardSolve:function(t,e,i){var s,n,r,o;for(s=i?e:e.slice(0,e.length),n=t.length>0?t[0].length:0,r=t.length-1;r>=0;r--){for(o=n-1;o>r;o--)s[r]-=t[r][o]*s[o];s[r]/=t[r][r]}return s},gaussBareiss:function(t){var e,s,n,r,o,a,l,h,c,d=i.eps;if((l=t.length)<=0)return 0;for(t[0].length<l&&(l=t[0].length),h=[],r=0;r<l;r++)h[r]=t[r].slice(0,l);for(s=1,n=1,e=0;e<l-1;e++){if(a=h[e][e],Math.abs(a)<d){for(r=e+1;r<l&&!(Math.abs(h[r][e])>=d);r++);if(r===l)return 0;for(o=e;o<l;o++)c=h[r][o],h[r][o]=h[e][o],h[e][o]=c;n=-n,a=h[e][e]}for(r=e+1;r<l;r++)for(o=e+1;o<l;o++)h[r][o]=(c=a*h[r][o]-h[r][e]*h[e][o])/s;s=a}return n*h[l-1][l-1]},det:function(t){return 2===t.length&&2===t[0].length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:this.gaussBareiss(t)},Jacobi:function(t){var e,s,n,r,o,a,l,h,c,d=i.eps,u=0,p=t.length,f=[[0,0,0],[0,0,0],[0,0,0]],m=[[0,0,0],[0,0,0],[0,0,0]],g=0;for(e=0;e<p;e++){for(s=0;s<p;s++)f[e][s]=0,m[e][s]=t[e][s],u+=Math.abs(m[e][s]);f[e][e]=1}if(1===p)return[m,f];if(u<=0)return[m,f];u/=p*p;do{for(h=0,c=0,s=1;s<p;s++)for(e=0;e<s;e++)if((r=Math.abs(m[e][s]))>c&&(c=r),h+=r,r>=d){for(r=.5*Math.atan2(2*m[e][s],m[e][e]-m[s][s]),o=Math.sin(r),a=Math.cos(r),n=0;n<p;n++)m[n][e]=a*(l=m[n][e])+o*m[n][s],m[n][s]=-o*l+a*m[n][s],f[n][e]=a*(l=f[n][e])+o*f[n][s],f[n][s]=-o*l+a*f[n][s];for(m[e][e]=a*m[e][e]+o*m[s][e],m[s][s]=-o*m[e][s]+a*m[s][s],m[e][s]=0,n=0;n<p;n++)m[e][n]=m[n][e],m[s][n]=m[n][s]}g+=1}while(Math.abs(h)/u>d&&g<2e3);return[m,f]},NewtonCotes:function(t,i,s){var n,r,o,a=0,l=s&&e.isNumber(s.number_of_nodes)?s.number_of_nodes:28,h={trapez:!0,simpson:!0,milne:!0},c=s&&s.integration_type&&h.hasOwnProperty(s.integration_type)&&h[s.integration_type]?s.integration_type:"milne",d=(t[1]-t[0])/l;switch(c){case"trapez":for(a=.5*(i(t[0])+i(t[1])),n=t[0],r=0;r<l-1;r++)a+=i(n+=d);a*=d;break;case"simpson":if(l%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(o=l/2,a=i(t[0])+i(t[1]),n=t[0],r=0;r<o-1;r++)a+=2*i(n+=2*d);for(n=t[0]-d,r=0;r<o;r++)a+=4*i(n+=2*d);a*=d/3;break;default:if(l%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(o=.25*l,a=7*(i(t[0])+i(t[1])),n=t[0],r=0;r<o-1;r++)a+=14*i(n+=4*d);for(n=t[0]-3*d,r=0;r<o;r++)a+=32*(i(n+=4*d)+i(n+2*d));for(n=t[0]-2*d,r=0;r<o;r++)a+=12*i(n+=4*d);a*=2*d/45}return a},Romberg:function(t,i,s){var n,r,o,a,l,h,c,d,u=[],p=0,f=1/0,m=s&&e.isNumber(s.max_iterations)?s.max_iterations:20,g=s&&e.isNumber(s.eps)?s.eps:s.eps||1e-7;for(l=1,u[0]=.5*(o=(r=t[1])-(n=t[0]))*(i(n)+i(r)),h=0;h<m;++h){for(a=0,o*=.5,l*=2,d=1,c=1;c<l;c+=2)a+=i(n+c*o);for(u[h+1]=.5*u[h]+a*o,p=u[h+1],c=h-1;c>=0;--c)u[c]=u[c+1]+(u[c+1]-u[c])/((d*=4)-1),p=u[c];if(Math.abs(p-f)<g*Math.abs(p))break;f=p}return p},GaussLegendre:function(t,i,s){var n,r,o,a,l,h,c,d,u=0,p=[],f=[],m=s&&e.isNumber(s.n)?s.n:12;if(m>18&&(m=18),p[2]=[.5773502691896257],f[2]=[1],p[4]=[.33998104358485626,.8611363115940526],f[4]=[.6521451548625461,.34785484513745385],p[6]=[.2386191860831969,.6612093864662645,.932469514203152],f[6]=[.46791393457269104,.3607615730481386,.17132449237917036],p[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],f[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],p[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],f[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],p[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],f[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],p[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],f[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],p[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],f[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],p[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],f[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],p[3]=[0,.7745966692414834],f[3]=[.8888888888888888,.5555555555555556],p[5]=[0,.5384693101056831,.906179845938664],f[5]=[.5688888888888889,.47862867049936647,.23692688505618908],p[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],f[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],p[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],f[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],p[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],f[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],p[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],f[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],p[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],f[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],p[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],f[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],a=m+1>>1,c=p[m],d=f[m],h=.5*((r=t[1])-(n=t[0])),l=.5*(r+n),!0&m)for(u=d[0]*i(l),o=1;o<a;++o)u+=d[o]*(i(l+h*c[o])+i(l-h*c[o]));else for(u=0,o=0;o<a;++o)u+=d[o]*(i(l+h*c[o])+i(l-h*c[o]));return h*u},_rescale_error:function(t,e,i){var s,n;return t=Math.abs(t),0!==i&&0!==t&&(t=(s=Math.pow(200*t/i,1.5))<1?i*s:i),e>2.0041683600089728e-294&&(n=1.1102230246251565e-14*e)>t&&(t=n),t},_gaussKronrod:function(t,e,i,s,n,r,o){var a,l,h,c,d,u,p,f,m,g,b,y=t[0],v=t[1],C=.5*(y+v),x=.5*(v-y),_=Math.abs(x),P=e(C),S=0,w=P*r[i-1],E=Math.abs(w),k=0,A=[],T=[];for(i%2==0&&(S=P*n[i/2-1]),a=Math.floor((i-1)/2),h=0;h<a;h++)f=(u=e(C-(d=x*s[c=2*h+1])))+(p=e(C+d)),A[c]=u,T[c]=p,S+=n[h]*f,w+=r[c]*f,E+=r[c]*(Math.abs(u)+Math.abs(p));for(a=Math.floor(i/2),h=0;h<a;h++)u=e(C-(d=x*s[m=2*h])),p=e(C+d),A[m]=u,T[m]=p,w+=r[m]*(u+p),E+=r[m]*(Math.abs(u)+Math.abs(p));for(g=.5*w,k=r[i-1]*Math.abs(P-g),h=0;h<i-1;h++)k+=r[h]*(Math.abs(A[h]-g)+Math.abs(T[h]-g));return b=(w-S)*x,l=w*=x,o.abserr=this._rescale_error(b,E*=_,k*=_),o.resabs=E,o.resasc=k,l},GaussKronrod15:function(t,e,i){return this._gaussKronrod(t,e,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],i)},GaussKronrod21:function(t,e,i){return this._gaussKronrod(t,e,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],i)},GaussKronrod31:function(t,e,i){return this._gaussKronrod(t,e,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],i)},_workspace:function(t,e){return{limit:e,size:0,nrmax:0,i:0,alist:[t[0]],blist:[t[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var t,e,i,s,n,r=this.size-1,o=this.limit,a=this.nrmax,l=this.order[a];if(r<2)return this.order[0]=0,this.order[1]=1,void(this.i=l);for(t=this.elist[l];a>0&&t>this.elist[this.order[a-1]];)this.order[a]=this.order[a-1],a--;for(n=r<o/2+2?r:o-r+1,i=a+1;i<n&&t<this.elist[this.order[i]];)this.order[i-1]=this.order[i],i++;for(this.order[i-1]=l,e=this.elist[r],s=n-1;s>i-2&&e>=this.elist[this.order[s]];)this.order[s+1]=this.order[s],s--;this.order[s+1]=r,this.i=l=this.order[a],this.nrmax=a},set_initial_result:function(t,e){this.size=1,this.rlist[0]=t,this.elist[0]=e},update:function(t,e,i,s,n,r,o,a){var l=this.i,h=this.size,c=this.level[this.i]+1;a>s?(this.alist[l]=n,this.rlist[l]=o,this.elist[l]=a,this.level[l]=c,this.alist[h]=t,this.blist[h]=e,this.rlist[h]=i,this.elist[h]=s,this.level[h]=c):(this.blist[l]=e,this.rlist[l]=i,this.elist[l]=s,this.level[l]=c,this.alist[h]=n,this.blist[h]=r,this.rlist[h]=o,this.elist[h]=a,this.level[h]=c),this.size++,c>this.maximum_level&&(this.maximum_level=c),this.qpsrt()},retrieve:function(){var t=this.i;return{a:this.alist[t],b:this.blist[t],r:this.rlist[t],e:this.elist[t]}},sum_results:function(){var t,e=this.size,i=0;for(t=0;t<e;t++)i+=this.rlist[t];return i},subinterval_too_small:function(t,e,i){var s=1.0000000000000222*(Math.abs(e)+2.2250738585072014e-305);return Math.abs(t)<=s&&Math.abs(i)<=s}}},Qag:function(s,n,r){var o,a,l,h,c,d,u,p,f,m,g,b,y,v,C,x,_,P=this._workspace(s,1e3),S=r&&e.isNumber(r.limit)?r.limit:15,w=r&&e.isNumber(r.epsrel)?r.epsrel:1e-7,E=r&&e.isNumber(r.epsabs)?r.epsabs:1e-7,k=r&&e.isFunction(r.q)?r.q:this.GaussKronrod15,A={},T=0,M=0,O=0,N=0,L=0,D=0,j=0,I=0,R=0,B=0;if(S>P.limit&&t.warn("iteration limit exceeds available workspace"),E<=0&&(w<50*i.eps||w<5e-29)&&t.warn("tolerance cannot be acheived with given epsabs and epsrel"),l=k.apply(this,[s,n,A]),c=A.resabs,d=A.resasc,P.set_initial_result(l,h=A.abserr),u=Math.max(E,w*Math.abs(l)),h<=1.1102230246251565e-14*c&&h>u)return t.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(h<=u&&h!==d||0===h)return l;if(1===S)return t.warn("a maximum of one iteration was insufficient"),-1/0;o=l,a=h,T=1;do{L=0,D=0,j=0,I=0,R=0,B=0,v=(_=P.retrieve()).r,C=_.e,m=f=.5*((b=_.a)+(y=_.b)),g=y,L=k.apply(this,[[p=b,f],n,A]),I=A.abserr,x=A.resasc,D=k.apply(this,[[m,g],n,A]),a+=(B=I+(R=A.abserr))-C,o+=(j=L+D)-v,x!==I&&A.resasc!==R&&(Math.abs(v-j)<=1e-5*Math.abs(j)&&B>=.99*C&&M++,T>=10&&B>C&&O++),a>(u=Math.max(E,w*Math.abs(o)))&&((M>=6||O>=20)&&(N=2),P.subinterval_too_small(p,m,g)&&(N=3)),P.update(p,f,L,I,m,g,D,R),b=(_=P.retrieve()).a_i,y=_.b_i,v=_.r_i,C=_.e_i,T++}while(T<S&&!N&&a>u);return P.sum_results()},I:function(t,e){return this.Qag(t,e,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(t,s,n){var r,o=0,a=i.eps,l=t.apply(n,[s]);for(e.isArray(s)&&(s=s[0]);o<50&&Math.abs(l)>a;)r=this.D(t,n)(s),Math.abs(r)>a?s-=l/r:s+=.2*Math.random()-1,l=t.apply(n,[s]),o+=1;return s},root:function(t,e,i){return this.fzero(t,e,i)},generalizedNewton:function(t,e,s,n){var r,o,a,l,h,c,d,u,p,f,m,g,b,y,v=0;for(this.generalizedNewton.t1memo?(r=this.generalizedNewton.t1memo,o=this.generalizedNewton.t2memo):(r=s,o=n),f=(u=t.X(r)-e.X(o))*u+(p=t.Y(r)-e.Y(o))*p,m=this.D(t.X,t),g=this.D(e.X,e),b=this.D(t.Y,t),y=this.D(e.Y,e);f>i.eps&&v<10;)a=m(r),l=-g(o),o-=(a*p-(h=b(r))*u)/(d=a*(c=-y(o))-l*h),f=(u=t.X(r-=(c*u-l*p)/d)-e.X(o))*u+(p=t.Y(r)-e.Y(o))*p,v+=1;return this.generalizedNewton.t1memo=r,this.generalizedNewton.t2memo=o,Math.abs(r)<Math.abs(o)?[t.X(r),t.Y(r)]:[e.X(o),e.Y(o)]},Neville:function(t){var e=[],s=function(s){return function(n,r){var o,a,l,h=i.binomial,c=t.length,d=c-1,u=0,p=0;if(!r)for(l=1,o=0;o<c;o++)e[o]=h(d,o)*l,l*=-1;for(a=n,o=0;o<c;o++){if(0===a)return t[o][s]();l=e[o]/a,a-=1,u+=t[o][s]()*l,p+=l}return u/p}};return[s("X"),s("Y"),0,function(){return t.length-1}]},splineDef:function(t,e){var i,s,n=Math.min(t.length,e.length),r=[],o=[],a=[],l=[],h=[],c=[];if(2===n)return[0,0];for(i=0;i<n;i++)a.push({X:t[i],Y:e[i]});for(a.sort(function(t,e){return t.X-e.X}),i=0;i<n;i++)t[i]=a[i].X,e[i]=a[i].Y;for(i=0;i<n-1;i++)l.push(t[i+1]-t[i]);for(i=0;i<n-2;i++)h.push(6*(e[i+2]-e[i+1])/l[i+1]-6*(e[i+1]-e[i])/l[i]);for(r.push(2*(l[0]+l[1])),o.push(h[0]),i=0;i<n-3;i++)r.push(2*(l[i+1]+l[i+2])-(s=l[i+1]/r[i])*l[i+1]),o.push(h[i+1]-s*o[i]);for(c[n-3]=o[n-3]/r[n-3],i=n-4;i>=0;i--)c[i]=(o[i]-l[i+1]*c[i+1])/r[i];for(i=n-3;i>=0;i--)c[i+1]=c[i];return c[0]=0,c[n-1]=0,c},splineEval:function(t,i,s,n){var r,o,a,l=Math.min(i.length,s.length),h=1,c=!1,d=[];for(e.isArray(t)?(h=t.length,c=!0):t=[t],r=0;r<h;r++){if(t[r]<i[0]||i[r]>i[l-1])return NaN;for(o=1;o<l&&!(t[r]<=i[o]);o++);d.push(s[o-=1]+((s[o+1]-s[o])/(i[o+1]-i[o])-(i[o+1]-i[o])/6*(n[o+1]+2*n[o])+(n[o]/2+(n[o+1]-n[o])/(6*(i[o+1]-i[o]))*(a=t[r]-i[o]))*a)*a)}return c?d:d[0]},generatePolynomialTerm:function(t,e,i,s){var n,r=[];for(n=e;n>=0;n--)r=r.concat(["(",t[n].toPrecision(s),")"]),n>1?r=r.concat(["*",i,"<sup>",n,"<","/sup> + "]):1===n&&(r=r.concat(["*",i," + "]));return r.join("")},lagrangePolynomial:function(t){var e=[],i=function(i,s){var n,r,o,a,l=t.length,h=0,c=0;if(!s)for(n=0;n<l;n++){for(e[n]=1,o=t[n].X(),r=0;r<l;r++)r!==n&&(e[n]*=o-t[r].X());e[n]=1/e[n]}for(n=0;n<l;n++){if(i===(o=t[n].X()))return t[n].Y();c+=a=e[n]/(i-o),h+=a*t[n].Y()}return h/c};return i.getTerm=function(){return""},i},_initCubicPoly:function(t,e,i,s){return[t,i,-3*t+3*e-2*i-s,2*t-2*e+i+s]},CardinalSpline:function(t,s,n){var r,o,a,l,h=[],c=this;return l=e.isFunction(s)?s:function(){return s},void 0===n&&(n="uniform"),[(o=function(e){return function(s,o){var d,u,p,f,m,g,b,y,v;if(t.length<2)return NaN;if(!o)for(a=l(),p={X:function(){return 2*t[t.length-1].X()-t[t.length-2].X()},Y:function(){return 2*t[t.length-1].Y()-t[t.length-2].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return Math.sqrt(e*e+i*i)}},v=(r=[{X:function(){return 2*t[0].X()-t[1].X()},Y:function(){return 2*t[0].Y()-t[1].Y()},Dist:function(t){var e=this.X()-t.X(),i=this.Y()-t.Y();return Math.sqrt(e*e+i*i)}}].concat(t,[p])).length,h[e]=[],d=0;d<v-3;d++)"centripetal"===n?(g=r[d].Dist(r[d+1]),b=r[d+2].Dist(r[d+1]),y=r[d+3].Dist(r[d+2]),g=Math.sqrt(g),b=Math.sqrt(b),y=Math.sqrt(y),b<i.eps&&(b=1),g<i.eps&&(g=b),y<i.eps&&(y=b),f=(r[d+1][e]()-r[d][e]())/g-(r[d+2][e]()-r[d][e]())/(b+g)+(r[d+2][e]()-r[d+1][e]())/b,m=(r[d+2][e]()-r[d+1][e]())/b-(r[d+3][e]()-r[d+1][e]())/(y+b)+(r[d+3][e]()-r[d+2][e]())/y,f*=b,m*=b,h[e][d]=c._initCubicPoly(r[d+1][e](),r[d+2][e](),a*f,a*m)):h[e][d]=c._initCubicPoly(r[d+1][e](),r[d+2][e](),a*(r[d+2][e]()-r[d][e]()),a*(r[d+3][e]()-r[d+1][e]()));return isNaN(s)?NaN:(v=t.length,s<=0?t[0][e]():s>=v?t[v-1][e]():(d=Math.floor(s))===s?t[d][e]():(s-=d,void 0===(u=h[e][d])?NaN:((u[3]*s+u[2])*s+u[1])*s+u[0]))}})("X"),o("Y"),0,function(){return t.length-1}]},CatmullRomSpline:function(t,e){return this.CardinalSpline(t,.5,e)},regressionPolynomial:function(t,s,n){var r,o,a,l,h,c,d="";if(e.isPoint(t)&&e.isFunction(t.Value))o=function(){return t.Value()};else if(e.isFunction(t))o=t;else{if(!e.isNumber(t))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof t+"'.");o=function(){return t}}if(3===arguments.length&&e.isArray(s)&&e.isArray(n))h=0;else if(2===arguments.length&&e.isArray(s)&&s.length>0&&e.isPoint(s[0]))h=1;else{if(!(2===arguments.length&&e.isArray(s)&&s.length>0&&s[0].usrCoords&&s[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");h=2}return(c=function(t,c){var u,p,f,m,g,b,y,v,C,x=s.length;if(C=Math.floor(o()),!c){if(1===h)for(a=[],l=[],u=0;u<x;u++)a[u]=s[u].X(),l[u]=s[u].Y();if(2===h)for(a=[],l=[],u=0;u<x;u++)a[u]=s[u].usrCoords[1],l[u]=s[u].usrCoords[2];if(0===h)for(a=[],l=[],u=0;u<x;u++)e.isFunction(s[u])?a.push(s[u]()):a.push(s[u]),e.isFunction(n[u])?l.push(n[u]()):l.push(n[u]);for(f=[],p=0;p<x;p++)f.push([1]);for(u=1;u<=C;u++)for(p=0;p<x;p++)f[p][u]=f[p][u-1]*a[p];g=l,m=i.transpose(f),b=i.matMatMult(m,f),y=i.matVecMult(m,g),r=i.Numerics.Gauss(b,y),d=i.Numerics.generatePolynomialTerm(r,C,"x",3)}for(v=r[C],u=C-1;u>=0;u--)v=v*t+r[u];return v}).getTerm=function(){return d},c},bezier:function(t){var e,i,s=function(s){return function(n,r){var o=3*Math.floor(n),a=n%1,l=1-a;return r||(i=3*Math.floor((t.length-1)/3),e=Math.floor(i/3)),n<0?t[0][s]():n>=e?t[i][s]():isNaN(n)?NaN:l*l*(l*t[o][s]()+3*a*t[o+1][s]())+(3*l*t[o+2][s]()+a*t[o+3][s]())*a*a}};return[s("X"),s("Y"),0,function(){return Math.floor(t.length/3)}]},bspline:function(t,e){var i,s=[],n=function(n){return function(r,o){var a,l,h,c=t.length,d=c-1,u=e;if(d<=0)return NaN;if(d+2<=u&&(u=d+1),r<=0)return t[0][n]();if(r>=d-u+2)return t[d][n]();for(h=Math.floor(r)+u-1,i=function(t,e){var i,s=[];for(i=0;i<t+e+1;i++)s[i]=i<e?0:i<=t?i-e+1:t-e+2;return s}(d,u),s=function(t,e,i,s,n){var r,o,a,l,h=[];for(h[n]=e[n]<=t&&t<e[n+1]?1:0,r=2;r<=s;r++)for(o=n-r+1;o<=n;o++)a=o>=n?0:h[o+1],h[o]=0==(l=e[o+r-1]-e[o])?0:(t-e[o])/l*(o<=n-r+1||o<0?0:h[o]),0!=(l=e[o+r]-e[o+1])&&(h[o]+=(e[o+r]-t)/l*a);return h}(r,i,0,u,h),a=0,l=h-u+1;l<=h;l++)l<c&&l>=0&&(a+=t[l][n]()*s[l]);return a}};return[n("X"),n("Y"),0,function(){return t.length-1}]},D:function(t,i){return e.exists(i)?function(e,s){return(t.apply(i,[e+1e-5,s])-t.apply(i,[e-1e-5,s]))/2e-5}:function(e,i){return(t(e+1e-5,i)-t(e-1e-5,i))/2e-5}},_riemannValue:function(t,e,i,s){var n,r,o,a;if(s<0&&("trapezoidal"!==i&&(t+=s),s*=-1,"lower"===i?i="upper":"upper"===i&&(i="lower")),a=.01*s,"right"===i)n=e(t+s);else if("middle"===i)n=e(t+.5*s);else if("left"===i||"trapezoidal"===i)n=e(t);else if("lower"===i){for(n=e(t),o=t+a;o<=t+s;o+=a)(r=e(o))<n&&(n=r);(r=e(t+s))<n&&(n=r)}else if("upper"===i){for(n=e(t),o=t+a;o<=t+s;o+=a)(r=e(o))>n&&(n=r);(r=e(t+s))>n&&(n=r)}else n="random"===i?e(t+s*Math.random()):"simpson"===i?(e(t)+4*e(t+.5*s)+e(t+s))/6:e(t);return n},riemann:function(t,i,s,n,r){var o,a,l,h,c,d,u,p=[],f=[],m=0,g=n,b=0;if(e.isArray(t)?(c=t[0],h=t[1]):h=t,(i=Math.floor(i))<=0)return[p,f,b];for(a=(r-n)/i,o=0;o<i;o++)l=this._riemannValue(g,h,s,a),p[m]=g,f[m]=l,m+=1,g+=a,"trapezoidal"===s&&(l=h(g)),p[m]=g,f[m]=l,m+=1;for(o=0;o<i;o++)l=c?this._riemannValue(g,c,s,-a):0,p[m]=g,f[m]=l,m+=1,g-=a,"trapezoidal"===s&&c&&(l=c(g)),p[m]=g,f[m]=l,"trapezoidal"!==s?(d=l,u=f[2*(i-1)-2*o]):(u=.5*(h(g+a)+h(g)),d=c?.5*(c(g+a)+c(g)):0),b+=(u-d)*a,p[m+=1]=g,f[m]=f[2*(i-1)-2*o],m+=1;return[p,f,b]},riemannsum:function(e,i,s,n,r){return t.deprecated("Numerics.riemannsum()","Numerics.riemann()"),this.riemann(e,i,s,n,r)[2]},rungeKutta:function(t,i,n,r,o){var a,l,h,c,d,u,p=[],f=[],m=(n[1]-n[0])/r,g=n[0],b=i.length,y=[],v=0;for(e.isString(t)&&(t=s[t]||s.euler),u=t.s,a=0;a<b;a++)p[a]=i[a];for(l=0;l<r;l++){for(y[v]=[],a=0;a<b;a++)y[v][a]=p[a];for(v+=1,c=[],h=0;h<u;h++){for(a=0;a<b;a++)f[a]=0;for(d=0;d<h;d++)for(a=0;a<b;a++)f[a]+=t.A[h][d]*m*c[d][a];for(a=0;a<b;a++)f[a]+=p[a];c.push(o(g+t.c[h]*m,f))}for(a=0;a<b;a++)f[a]=0;for(d=0;d<u;d++)for(a=0;a<b;a++)f[a]+=t.b[d]*c[d][a];for(a=0;a<b;a++)p[a]=p[a]+m*f[a];g+=m}return y},maxIterationsRoot:80,maxIterationsMinimize:500,fzero:function(t,s,n){var r,o,a,l,h,c,d,u,p,f,m,g,b,y,v,C,x,_,P,S,w=i.eps,E=this.maxIterationsRoot,k=0;if(e.isArray(s)){if(s.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");l=t.call(n,r=s[0]),h=t.call(n,o=s[1])}else{for(l=t.call(n,r=s),f=(u=[.9*(d=0===r?1:r),1.1*d,d-1,d+1,.5*d,1.5*d,-d,2*d,-10*d,10*d]).length,p=0;p<f&&!(l*(h=t.call(n,o=u[p]))<=0);p++);o<r&&(m=r,r=o,o=m,g=l,l=h,h=g)}if(l*h>0)return e.isArray(s)?this.fminbr(t,[r,o],n):this.Newton(t,r,n);for(a=r,c=l;k<E;){if(b=o-r,Math.abs(c)<Math.abs(h)&&(r=o,o=a,a=r,l=h,h=c,c=l),x=2*w*Math.abs(o)+.5*w,S=.5*(a-o),Math.abs(S)<=x&&Math.abs(h)<=w)return o;Math.abs(b)>=x&&Math.abs(l)>Math.abs(h)&&(v=a-o,r===a?(_=v*(y=h/l),P=1-y):(_=(C=h/l)*(v*(P=l/c)*(P-(y=h/c))-(o-r)*(y-1)),P=(P-1)*(y-1)*(C-1)),_>0?P=-P:_=-_,_<.75*v*P-.5*Math.abs(x*P)&&_<Math.abs(b*P*.5)&&(S=_/P)),Math.abs(S)<x&&(S=S>0?x:-x),r=o,l=h,((h=t.call(n,o+=S))>0&&c>0||h<0&&c<0)&&(a=r,c=l),k++}return o},fminbr:function(t,s,n){var r,o,a,l,h,c,d,u,p,f,m,g,b,y,v,C,x=.5*(3-Math.sqrt(5)),_=i.eps,P=i.eps,S=this.maxIterationsMinimize,w=0;if(!e.isArray(s)||s.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(a=l=(r=s[0])+x*((o=s[1])-r),h=l,c=d=t.call(n,l),u=d;w<S;){if(p=o-r,f=.5*(r+o),m=P*Math.abs(a)+_/3,Math.abs(a-f)+.5*p<=2*m)return a;g=x*(a<f?o-a:r-a),Math.abs(a-h)>=m&&(b=(a-l)*(y=(a-l)*(c-u))-(a-h)*(v=(a-h)*(c-d)),(y=2*(y-v))>0?b=-b:y=-y,Math.abs(b)<Math.abs(g*y)&&b>y*(r-a+2*m)&&b<y*(o-a-2*m)&&(g=b/y)),Math.abs(g)<m&&(g=g>0?m:-m),(C=t.call(n,v=a+g))<=c?(v<a?o=a:r=a,l=h,h=a,a=v,d=u,u=c,c=C):(v<a?r=v:o=v,C<=u||h===a?(l=h,h=v,d=u,u=C):(C<=d||l===a||l===h)&&(l=v,d=C)),w+=1}return a},RamerDouglasPeucker:function(t,e){var s,n,r,o=[],a=function(t,e,s){var n,r,o,a,l,h,c,d,u,p,f,m=0,g=e;if(s-e<2)return[-1,0];if(o=t[e].scrCoords,a=t[s].scrCoords,isNaN(o[1]+o[2]))return[NaN,e];if(isNaN(a[1]+a[2]))return[NaN,s];for(r=e+1;r<s;r++){if(l=t[r].scrCoords,isNaN(l[1]+l[2]))return[NaN,r];h=l[1]-o[1],c=l[2]-o[2],(p=(d=a[1]-o[1])*d+(u=a[2]-o[2])*u)>=i.eps?((f=(h*d+c*u)/p)<0?f=0:f>1&&(f=1),n=(h-=f*d)*h+(c-=f*u)*c):(f=0,n=h*h+c*c),n>m&&(m=n,g=r)}return[Math.sqrt(m),g]},l=function(t,e,i,s,n){var r=a(t,e,i),o=r[1];if(isNaN(r[0])){l(t,e,o-1,s,n),n.push(t[o]);do{++o}while(o<=i&&isNaN(t[o].scrCoords[1]+t[o].scrCoords[2]));o<=i&&n.push(t[o]),l(t,o+1,i,s,n)}else r[0]>s?(l(t,e,o,s,n),l(t,o,i,s,n)):n.push(t[i])};for(r=t.length,s=0;s<r&&isNaN(t[s].scrCoords[1]+t[s].scrCoords[2]);)s+=1;for(n=r-1;n>s&&isNaN(t[n].scrCoords[1]+t[n].scrCoords[2]);)n-=1;return s>n||s===r||(o[0]=t[s],l(t,s,n,e,o)),o},RamerDouglasPeuker:function(e,i){return t.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(e,i)},Visvalingam:function(e,i){var s,n,r,o,a,l,h,c,d,u=[],p=[],f=[];if((n=e.length)<=2)return e;for(u[0]={used:!0,lft:null,node:null},a=0,s=1;s<n-1;s++)r=Math.abs(t.Math.Numerics.det([e[s-1].usrCoords,e[s].usrCoords,e[s+1].usrCoords])),isNaN(r)||(p.push(d={v:r,idx:s}),u[s]={used:!0,lft:a,node:d},u[a].rt=s,a=s);for(u[n-1]={used:!0,rt:null,lft:a,node:null},u[a].rt=n-1,o=-1/0;p.length>i;)p.sort(function(t,e){return e.v-t.v}),u[s=p.pop().idx].used=!1,o=u[s].node.v,u[a=u[s].lft].rt=l=u[s].rt,u[l].lft=a,null!==(h=u[a].lft)&&(r=Math.abs(t.Math.Numerics.det([e[h].usrCoords,e[a].usrCoords,e[l].usrCoords])),u[a].node.v=r>=o?r:o),null!==(c=u[l].rt)&&(r=Math.abs(t.Math.Numerics.det([e[a].usrCoords,e[l].usrCoords,e[c].usrCoords])),u[l].node.v=r>=o?r:o);f=[e[s=0]];do{f.push(e[s=u[s].rt])}while(null!==u[s].rt);return f}},i.Numerics}),define("math/statistics",["jxg","math/math","utils/type"],function(t,e,i){"use strict";return e.Statistics={sum:function(t){var e,i=t.length,s=0;for(e=0;e<i;e++)s+=t[e];return s},prod:function(t){var e,i=t.length,s=1;for(e=0;e<i;e++)s*=t[e];return s},mean:function(t){return t.length>0?this.sum(t)/t.length:0},median:function(t){var e,i;return t.length>0?((e=t.slice(0)).sort(function(t,e){return t-e}),(i=e.length)%2==1?e[parseInt(.5*i,10)]:.5*(e[.5*i-1]+e[.5*i])):0},variance:function(t){var e,i,s,n=t.length;if(n>1){for(e=this.mean(t),i=0,s=0;s<n;s++)i+=(t[s]-e)*(t[s]-e);return i/(t.length-1)}return 0},sd:function(t){return Math.sqrt(this.variance(t))},weightedMean:function(t,e){if(t.length!==e.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return t.length>0?this.mean(this.multiply(t,e)):0},max:function(t){return Math.max.apply(this,t)},min:function(t){return Math.min.apply(this,t)},range:function(t){return[this.min(t),this.max(t)]},abs:function(t){var e,s,n;if(i.isArray(t))for(s=t.length,n=[],e=0;e<s;e++)n[e]=Math.abs(t[e]);else n=Math.abs(t);return n},add:function(t,e){var s,n,r=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(n=t.length,s=0;s<n;s++)r[s]=t[s]+e;else if(i.isNumber(t)&&i.isArray(e))for(n=e.length,s=0;s<n;s++)r[s]=t+e[s];else if(i.isArray(t)&&i.isArray(e))for(n=Math.min(t.length,e.length),s=0;s<n;s++)r[s]=t[s]+e[s];else r=t+e;return r},div:function(t,e){var s,n,r=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(n=t.length,s=0;s<n;s++)r[s]=t[s]/e;else if(i.isNumber(t)&&i.isArray(e))for(n=e.length,s=0;s<n;s++)r[s]=t/e[s];else if(i.isArray(t)&&i.isArray(e))for(n=Math.min(t.length,e.length),s=0;s<n;s++)r[s]=t[s]/e[s];else r=t/e;return r},divide:function(){t.deprecated("Statistics.divide()","Statistics.div()"),e.Statistics.div.apply(e.Statistics,arguments)},mod:function(t,s,n){var r,o,a=[],l=function(t,e){return t%e};if((n=i.def(n,!1))&&(l=e.mod),t=i.evalSlider(t),s=i.evalSlider(s),i.isArray(t)&&i.isNumber(s))for(o=t.length,r=0;r<o;r++)a[r]=l(t[r],s);else if(i.isNumber(t)&&i.isArray(s))for(o=s.length,r=0;r<o;r++)a[r]=l(t,s[r]);else if(i.isArray(t)&&i.isArray(s))for(o=Math.min(t.length,s.length),r=0;r<o;r++)a[r]=l(t[r],s[r]);else a=l(t,s);return a},multiply:function(t,e){var s,n,r=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(n=t.length,s=0;s<n;s++)r[s]=t[s]*e;else if(i.isNumber(t)&&i.isArray(e))for(n=e.length,s=0;s<n;s++)r[s]=t*e[s];else if(i.isArray(t)&&i.isArray(e))for(n=Math.min(t.length,e.length),s=0;s<n;s++)r[s]=t[s]*e[s];else r=t*e;return r},subtract:function(t,e){var s,n,r=[];if(t=i.evalSlider(t),e=i.evalSlider(e),i.isArray(t)&&i.isNumber(e))for(n=t.length,s=0;s<n;s++)r[s]=t[s]-e;else if(i.isNumber(t)&&i.isArray(e))for(n=e.length,s=0;s<n;s++)r[s]=t-e[s];else if(i.isArray(t)&&i.isArray(e))for(n=Math.min(t.length,e.length),s=0;s<n;s++)r[s]=t[s]-e[s];else r=t-e;return r},TheilSenRegression:function(t){var i,s,n=[],r=[],o=[];for(i=0;i<t.length;i++){for(r.length=0,s=0;s<t.length;s++)Math.abs(t[s].usrCoords[1]-t[i].usrCoords[1])>e.eps&&(r[s]=(t[s].usrCoords[2]-t[i].usrCoords[2])/(t[s].usrCoords[1]-t[i].usrCoords[1]));n[i]=this.median(r),o.push(t[i].usrCoords[2]-n[i]*t[i].usrCoords[1])}return[this.median(o),this.median(n),-1]}},e.Statistics}),define("math/geometry",["jxg","base/constants","base/coords","math/math","math/numerics","utils/type","utils/expect"],function(t,e,i,s,n,r,o){"use strict";return s.Geometry={},t.extend(s.Geometry,{angle:function(e,i,s){var n,r,o,a,l=[],h=[],c=[];return t.deprecated("Geometry.angle()","Geometry.rad()"),e.coords?(l[0]=e.coords.usrCoords[1],l[1]=e.coords.usrCoords[2]):(l[0]=e[0],l[1]=e[1]),i.coords?(h[0]=i.coords.usrCoords[1],h[1]=i.coords.usrCoords[2]):(h[0]=i[0],h[1]=i[1]),s.coords?(c[0]=s.coords.usrCoords[1],c[1]=s.coords.usrCoords[2]):(c[0]=s[0],c[1]=s[1]),n=l[0]-h[0],r=l[1]-h[1],o=c[0]-h[0],a=c[1]-h[1],Math.atan2(n*a-r*o,n*o+r*a)},trueAngle:function(t,e,i){return 57.29577951308232*this.rad(t,e,i)},rad:function(t,e,i){var s,n,r,o,a,l,h;return t.coords?(s=t.coords.usrCoords[1],n=t.coords.usrCoords[2]):(s=t[0],n=t[1]),e.coords?(r=e.coords.usrCoords[1],o=e.coords.usrCoords[2]):(r=e[0],o=e[1]),i.coords?(a=i.coords.usrCoords[1],l=i.coords.usrCoords[2]):(a=i[0],l=i[1]),(h=Math.atan2(l-o,a-r)-Math.atan2(n-o,s-r))<0&&(h+=6.283185307179586),h},angleBisector:function(t,s,n,o){var a,l,h,c,d,u=t.coords.usrCoords,p=s.coords.usrCoords,f=n.coords.usrCoords;return r.exists(o)||(o=t.board),0===p[0]?new i(e.COORDS_BY_USER,[1,.5*(u[1]+f[1]),.5*(u[2]+f[2])],o):(c=u[1]-p[1],d=u[2]-p[2],a=Math.atan2(d,c),c=f[1]-p[1],d=f[2]-p[2],h=.5*(a+(l=Math.atan2(d,c))),a>l&&(h+=Math.PI),c=Math.cos(h)+p[1],d=Math.sin(h)+p[2],new i(e.COORDS_BY_USER,[1,c,d],o))},reflection:function(t,s,n){var o,a,l,h=s.coords.usrCoords,c=t.point1.coords.usrCoords,d=t.point2.coords.usrCoords;return r.exists(n)||(n=s.board),new i(e.COORDS_BY_USER,[h[1]+2*(l=((o=d[1]-c[1])*(h[2]-c[2])-(a=d[2]-c[2])*(h[1]-c[1]))/(o*o+a*a))*a,h[2]-2*l*o],n)},rotation:function(t,s,n,o){var a,l,h,c,d=s.coords.usrCoords,u=t.coords.usrCoords;return r.exists(o)||(o=s.board),a=d[1]-u[1],l=d[2]-u[2],h=Math.cos(n),c=Math.sin(n),new i(e.COORDS_BY_USER,[a*h-l*c+u[1],a*c+l*h+u[2]],o)},perpendicular:function(t,n,o){var a,l,h,c,d,u=t.point1.coords.usrCoords,p=t.point2.coords.usrCoords,f=n.coords.usrCoords;return r.exists(o)||(o=n.board),n===t.point1?(a=u[1]+p[2]-u[2],l=u[2]-p[1]+u[1],d=u[0]*p[0],Math.abs(d)<s.eps&&(a=p[2],l=-p[1]),c=[d,a,l],h=!0):n===t.point2?(a=p[1]+u[2]-p[2],l=p[2]-u[1]+p[1],d=u[0]*p[0],Math.abs(d)<s.eps&&(a=u[2],l=-u[1]),c=[d,a,l],h=!1):Math.abs(s.innerProduct(f,t.stdform,3))<s.eps?(a=f[1]+p[2]-f[2],l=f[2]-p[1]+f[1],d=p[0],Math.abs(d)<s.eps&&(a=p[2],l=-p[1]),h=!0,Math.abs(d)>s.eps&&Math.abs(a-f[1])<s.eps&&Math.abs(l-f[2])<s.eps&&(a=f[1]+u[2]-f[2],l=f[2]-u[1]+f[1],h=!1),c=[d,a,l]):(c=s.crossProduct(c=[0,t.stdform[1],t.stdform[2]],f),c=s.crossProduct(c,t.stdform),h=!0),[new i(e.COORDS_BY_USER,c,o),h]},circumcenterMidpoint:function(){t.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(t,n,o,a){var l,h,c=t.coords.usrCoords,d=n.coords.usrCoords,u=o.coords.usrCoords;return r.exists(a)||(a=t.board),l=s.crossProduct([d[0]-c[0],-d[2]+c[2],d[1]-c[1]],[.5*(c[0]+d[0]),.5*(c[1]+d[1]),.5*(c[2]+d[2])]),h=s.crossProduct([u[0]-d[0],-u[2]+d[2],u[1]-d[1]],[.5*(d[0]+u[0]),.5*(d[1]+u[1]),.5*(d[2]+u[2])]),new i(e.COORDS_BY_USER,s.crossProduct(l,h),a)},distance:function(t,e,i){var s,n=0;for(i||(i=Math.min(t.length,e.length)),s=0;s<i;s++)n+=(t[s]-e[s])*(t[s]-e[s]);return Math.sqrt(n)},affineDistance:function(t,e,i){var n;return(n=this.distance(t,e,i))>s.eps&&(Math.abs(t[0])<s.eps||Math.abs(e[0])<s.eps)?1/0:n},sortVertices:function(t){var e,i,n=o.each(t,o.coordsArray),a=n.length;for(e=1;e<a;e++)(n[e][2]<n[0][2]||Math.abs(n[e][2]-n[0][2])<s.eps&&n[e][1]<n[0][1])&&(n=r.swap(n,e,0));return i=n.shift(),n.sort(function(t,e){return Math.atan2(t[2]-i[2],t[1]-i[1])-Math.atan2(e[2]-i[2],e[1]-i[1])}),n.unshift(i),n.unshift(n[n.length-1]),n},signedTriangle:function(t,e,i){var s=o.coordsArray(t),n=o.coordsArray(e),r=o.coordsArray(i);return.5*((n[1]-s[1])*(r[2]-s[2])-(n[2]-s[2])*(r[1]-s[1]))},signedPolygon:function(t,e){var i,s,n=0,r=o.each(t,o.coordsArray);for(void 0===e&&(e=!0),e?r.unshift(r[r.length-1]):r=this.sortVertices(r),s=r.length,i=1;i<s;i++)n+=r[i-1][1]*r[i][2]-r[i][1]*r[i-1][2];return.5*n},GrahamScan:function(t){var e,i,s=1,n=o.each(t,o.coordsArray);for(i=(n=this.sortVertices(n)).length,e=2;e<i;e++){for(;this.signedTriangle(n[s-1],n[s],n[e])<=0;)if(s>1)s-=1;else{if(e===i-1)break;e+=1}n=r.swap(n,s+=1,e)}return n.slice(0,s)},calcStraight:function(t,i,n,o){var a,l,h,c,d,u,p,f,m,g;if(r.exists(o)||(o=10),u=r.evaluate(t.visProp.straightfirst),p=r.evaluate(t.visProp.straightlast),Math.abs(i.scrCoords[0])<s.eps&&(u=!0),Math.abs(n.scrCoords[0])<s.eps&&(p=!0),(u||p)&&((f=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,f[1]=t.stdform[1]/t.board.unitX,f[2]=-t.stdform[2]/t.board.unitY,!isNaN(f[0]+f[1]+f[2]))){if(a=!u&&Math.abs(i.usrCoords[0])>=s.eps&&i.scrCoords[1]>=0&&i.scrCoords[1]<=t.board.canvasWidth&&i.scrCoords[2]>=0&&i.scrCoords[2]<=t.board.canvasHeight,l=!p&&Math.abs(n.usrCoords[0])>=s.eps&&n.scrCoords[1]>=0&&n.scrCoords[1]<=t.board.canvasWidth&&n.scrCoords[2]>=0&&n.scrCoords[2]<=t.board.canvasHeight,c=(h=this.meetLineBoard(f,t.board,o))[0],d=h[1],!a&&!l){if(!u&&p&&!this.isSameDirection(i,n,c)&&!this.isSameDirection(i,n,d))return;if(u&&!p&&!this.isSameDirection(n,i,c)&&!this.isSameDirection(n,i,d))return}a?l||(g=this.isSameDir(i,n,c,d)?d:c):l?m=this.isSameDir(i,n,c,d)?c:d:this.isSameDir(i,n,c,d)?(m=c,g=d):(g=c,m=d),m&&i.setCoordinates(e.COORDS_BY_USER,m.usrCoords),g&&n.setCoordinates(e.COORDS_BY_USER,g.usrCoords)}},calcLineDelimitingPoints:function(t,i,n){var o,a,l,h,c,d,u,p,f,m=!1,g=!1;if(c=r.evaluate(t.visProp.straightfirst),d=r.evaluate(t.visProp.straightlast),Math.abs(i.scrCoords[0])<s.eps&&(c=!0),Math.abs(n.scrCoords[0])<s.eps&&(d=!0),(u=[])[0]=t.stdform[0]-t.stdform[1]*t.board.origin.scrCoords[1]/t.board.unitX+t.stdform[2]*t.board.origin.scrCoords[2]/t.board.unitY,u[1]=t.stdform[1]/t.board.unitX,u[2]=-t.stdform[2]/t.board.unitY,!isNaN(u[0]+u[1]+u[2])){if(m=!c,g=!d,a=t.board.getBoundingBox(),t.getSlope()>=0?(l=this.projectPointToLine({coords:{usrCoords:[1,a[2],a[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,a[0],a[3]]}},t,t.board)):(l=this.projectPointToLine({coords:{usrCoords:[1,a[0],a[1]]}},t,t.board),h=this.projectPointToLine({coords:{usrCoords:[1,a[2],a[3]]}},t,t.board)),!m&&!g){if(!c&&!d){if(o=i.distance(e.COORDS_BY_USER,n),Math.abs(i.distance(e.COORDS_BY_USER,l)+l.distance(e.COORDS_BY_USER,n)-o)>s.eps)return;if(Math.abs(i.distance(e.COORDS_BY_USER,h)+h.distance(e.COORDS_BY_USER,n)-o)>s.eps)return}if(!c&&d&&!this.isSameDirection(i,n,l)&&!this.isSameDirection(i,n,h))return;if(c&&!d&&!this.isSameDirection(n,i,l)&&!this.isSameDirection(n,i,h))return}m?g||(f=this.isSameDir(i,n,l,h)?h:l):g?p=this.isSameDir(i,n,l,h)?l:h:this.isSameDir(i,n,l,h)?(p=l,f=h):(f=l,p=h),p&&i.setCoordinates(e.COORDS_BY_USER,p.usrCoords),f&&n.setCoordinates(e.COORDS_BY_USER,f.usrCoords)}},calcLabelQuadrant:function(t){return t<0&&(t+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((t+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(t,e,i,n){var r=e.usrCoords[1]-t.usrCoords[1],o=e.usrCoords[2]-t.usrCoords[2],a=n.usrCoords[1]-i.usrCoords[1],l=n.usrCoords[2]-i.usrCoords[2];return Math.abs(e.usrCoords[0])<s.eps&&(r=e.usrCoords[1],o=e.usrCoords[2]),Math.abs(t.usrCoords[0])<s.eps&&(r=-t.usrCoords[1],o=-t.usrCoords[2]),r*a+o*l>=0},isSameDirection:function(t,e,i){var n,r,o,a,l=!1;return n=e.usrCoords[1]-t.usrCoords[1],r=e.usrCoords[2]-t.usrCoords[2],o=i.usrCoords[1]-t.usrCoords[1],a=i.usrCoords[2]-t.usrCoords[2],Math.abs(n)<s.eps&&(n=0),Math.abs(r)<s.eps&&(r=0),Math.abs(o)<s.eps&&(o=0),Math.abs(a)<s.eps&&(a=0),n>=0&&o>=0?l=r>=0&&a>=0||r<=0&&a<=0:n<=0&&o<=0&&(l=r>=0&&a>=0||r<=0&&a<=0),l},intersectionFunction:function(t,s,n,o,a,l){var h=this;return s.elementClass===e.OBJECT_CLASS_CURVE&&n.elementClass===e.OBJECT_CLASS_CURVE?function(){return h.meetCurveCurve(s,n,o,a,s.board)}:s.elementClass===e.OBJECT_CLASS_CURVE&&n.elementClass===e.OBJECT_CLASS_LINE||n.elementClass===e.OBJECT_CLASS_CURVE&&s.elementClass===e.OBJECT_CLASS_LINE?function(){return h.meetCurveLine(s,n,o,s.board,l)}:s.elementClass===e.OBJECT_CLASS_LINE&&n.elementClass===e.OBJECT_CLASS_LINE?function(){var t,a,c,d,u;return a=c=r.evaluate(s.visProp.straightfirst),d=u=r.evaluate(s.visProp.straightlast),r.evaluate(l)||a&&d&&c&&u?h.meet(s.stdform,n.stdform,o,s.board):(t=h.meetSegmentSegment(s.point1.coords.usrCoords,s.point2.coords.usrCoords,n.point1.coords.usrCoords,n.point2.coords.usrCoords,s.board),new i(e.COORDS_BY_USER,!a&&t[1]<0||!d&&t[1]>1||!c&&t[2]<0||!u&&t[2]>1?[0,NaN,NaN]:t[0],s.board))}:function(){return h.meet(s.stdform,n.stdform,o,s.board)}},meet:function(t,e,i,n){var r=s.eps;return Math.abs(t[3])<r&&Math.abs(e[3])<r?this.meetLineLine(t,e,i,n):Math.abs(t[3])>=r&&Math.abs(e[3])<r?this.meetLineCircle(e,t,i,n):Math.abs(t[3])<r&&Math.abs(e[3])>=r?this.meetLineCircle(t,e,i,n):this.meetCircleCircle(t,e,i,n)},meetLineBoard:function(t,n,o){var a,l,h,c,d=[];for(r.exists(o)||(o=0),d[0]=s.crossProduct(t,[o,0,1]),d[1]=s.crossProduct(t,[o,1,0]),d[2]=s.crossProduct(t,[-o-n.canvasHeight,0,1]),d[3]=s.crossProduct(t,[-o-n.canvasWidth,1,0]),h=0;h<4;h++)if(Math.abs(d[h][0])>s.eps){for(c=2;c>0;c--)d[h][c]/=d[h][0];d[h][0]=1}return Math.abs(d[1][0])<s.eps?(a=d[0],l=d[2]):Math.abs(d[0][0])<s.eps?(a=d[1],l=d[3]):d[1][2]<0?(a=d[0],l=d[3][2]>n.canvasHeight?d[2]:d[3]):d[1][2]>n.canvasHeight?(a=d[2],l=d[3][2]<0?d[0]:d[3]):(a=d[1],l=d[3][2]<0?d[0]:d[3][2]>n.canvasHeight?d[2]:d[3]),[a=new i(e.COORDS_BY_SCREEN,a.slice(1),n),l=new i(e.COORDS_BY_SCREEN,l.slice(1),n)]},meetLineLine:function(t,n,r,o){var a=isNaN(t[5]+n[5])?[0,0,0]:s.crossProduct(t,n);return new i(e.COORDS_BY_USER,a,o)},meetLineCircle:function(t,n,r,o){var a,l,h,c,d,u,p,f,m;return n[4]<s.eps?Math.abs(s.innerProduct([1,n[6],n[7]],t,3))<s.eps?new i(e.COORDS_BY_USER,n.slice(6,8),o):new i(e.COORDS_BY_USER,[NaN,NaN],o):(h=n[0],l=n.slice(1,3),a=n[3],c=t[0],d=t.slice(1,3),(f=(p=l[0]*d[1]-l[1]*d[0])*p-4*(u=a)*(a*c*c-(l[0]*d[0]+l[1]*d[1])*c+h))>-s.eps*s.eps?(m=[(-p+(f=Math.sqrt(Math.abs(f))))/(2*u),(-p-f)/(2*u)],new i(e.COORDS_BY_USER,0===r?[-m[0]*-d[1]-c*d[0],-m[0]*d[0]-c*d[1]]:[-m[1]*-d[1]-c*d[0],-m[1]*d[0]-c*d[1]],o)):new i(e.COORDS_BY_USER,[0,0,0],o))},meetCircleCircle:function(t,n,r,o){var a;return t[4]<s.eps?Math.abs(this.distance(t.slice(6,2),n.slice(6,8))-n[4])<s.eps?new i(e.COORDS_BY_USER,t.slice(6,8),o):new i(e.COORDS_BY_USER,[0,0,0],o):n[4]<s.eps?Math.abs(this.distance(n.slice(6,2),t.slice(6,8))-t[4])<s.eps?new i(e.COORDS_BY_USER,n.slice(6,8),o):new i(e.COORDS_BY_USER,[0,0,0],o):(a=s.normalize(a=[n[3]*t[0]-t[3]*n[0],n[3]*t[1]-t[3]*n[1],n[3]*t[2]-t[3]*n[2],0,1,1/0,1/0,1/0]),this.meetLineCircle(a,t,r,o))},meetCurveCurve:function(t,s,o,a,l,h){var c;return c=r.exists(h)&&"newton"===h?n.generalizedNewton(t,s,o,a):3===t.bezierDegree&&3===s.bezierDegree?this.meetBezierCurveRedBlueSegments(t,s,o):this.meetCurveRedBlueSegments(t,s,o),new i(e.COORDS_BY_USER,c,l)},meetCurveLine:function(t,i,s,n,o){var a,l;return r.exists(n)||(n=t.board),t.elementClass===e.OBJECT_CLASS_CURVE?(a=t,l=i):(a=i,l=t),this.meetCurveLineDiscrete(a,l,s,n,!o)},meetCurveLineContinuous:function(t,r,o,a,l){var h,c,d,u,p,f,m,g,b,y,v,C,x,_=s.eps,P=s.eps;for(u=this.meetCurveLineDiscrete(t,r,o,a,l),p=u.usrCoords[1],f=u.usrCoords[2],c=function(e){var i,s;return e>t.maxX()||e<t.minX()?1/0:(i=p-t.X(e))*i+(s=f-t.Y(e))*s},d=function(e){var i=r.stdform[0]+r.stdform[1]*t.X(e)+r.stdform[2]*t.Y(e);return i*i},g=(t.maxX()-t.minX())/50,b=t.minX(),C=1e-4,v=NaN,y=0;y<50&&(h=n.root(c,[Math.max(b,t.minX()),Math.min(b+g,t.maxX())]),!((x=Math.abs(c(h)))<=C&&(C=x,v=h,C<_)));y++)b+=g;return h=v,x=d(h=n.root(d,[Math.max(h-g,t.minX()),Math.min(h+g,t.maxX())])),m=isNaN(x)||Math.abs(x)>P?0:1,new i(e.COORDS_BY_USER,[m,t.X(h),t.Y(h)],a)},meetCurveLineContinuousOld:function(r,o,a,l){var h,c,d,u,p,f,m,g,b,y,v,C=10*s.eps;if(t.deprecated("Geometry.meetCurveLineContinuousOld()","Geometry.meetCurveLineContinuous()"),u=function(t){var e=o.stdform[0]+o.stdform[1]*r.X(t)+o.stdform[2]*r.Y(t);return e*e},this.meetCurveLineContinuous.t1memo?h=n.root(u,g=this.meetCurveLineContinuous.t1memo):(g=r.minX(),b=r.maxX(),h=n.root(u,[g,b])),this.meetCurveLineContinuous.t1memo=h,y=r.X(h),v=r.Y(h),1===a){if(this.meetCurveLineContinuous.t2memo&&(g=this.meetCurveLineContinuous.t2memo),c=n.root(u,g),!(Math.abs(c-h)>.1&&Math.abs(y-r.X(c))>.1&&Math.abs(v-r.Y(c))>.1))for(m=(r.maxX()-r.minX())/20,f=r.minX(),d=0;d<20&&(c=n.root(u,[f,f+m]),!(Math.abs(u(c))<=C&&Math.abs(c-h)>.1&&Math.abs(y-r.X(c))>.1&&Math.abs(v-r.Y(c))>.1));d++)f+=m;this.meetCurveLineContinuous.t2memo=h=c}return p=Math.abs(u(h))>C?NaN:1,new i(e.COORDS_BY_USER,[p,r.X(h),r.Y(h)],l)},meetCurveLineDiscrete:function(t,n,o,a,l){var h,c,d,u,p,f,m,g=n.point1.coords.usrCoords,b=n.point2.coords.usrCoords,y=0,v=t.numberPoints,C=r.evaluate(n.visProp.straightfirst),x=r.evaluate(n.visProp.straightlast);for(f=new i(e.COORDS_BY_USER,[0,NaN,NaN],a),0===g[0]?g=[1,b[1]+n.stdform[2],b[2]-n.stdform[1]]:0===b[0]&&(b=[1,g[1]+n.stdform[2],g[2]-n.stdform[1]]),u=t.points[0].usrCoords,h=1;h<v;h++)if(d=u.slice(0),this.distance(d,u=t.points[h].usrCoords)>s.eps)for(3===t.bezierDegree?(m=this.meetBeziersegmentBeziersegment([t.points[h-1].usrCoords.slice(1),t.points[h].usrCoords.slice(1),t.points[h+1].usrCoords.slice(1),t.points[h+2].usrCoords.slice(1)],[g.slice(1),b.slice(1)],l),h+=2):m=[this.meetSegmentSegment(d,u,g,b)],c=0;c<m.length;c++)if(0<=(p=m[c])[1]&&p[1]<=1){if(y===o)return l&&(!C&&p[2]<0||!x&&p[2]>1)?f:f=new i(e.COORDS_BY_USER,p[0],a);y+=1}return f},meetCurveRedBlueSegments:function(t,e,i){var s,n,r,o,a,l,h,c,d,u=0,p=e.numberPoints,f=t.numberPoints;if(p<=1||f<=1)return[0,NaN,NaN];for(s=1;s<f;s++)for(r=t.points[s-1].usrCoords,o=t.points[s].usrCoords,c=Math.min(r[1],o[1]),d=Math.max(r[1],o[1]),l=e.points[0].usrCoords,n=1;n<p;n++)if(a=l,l=e.points[n].usrCoords,Math.min(a[1],l[1])<d&&Math.max(a[1],l[1])>c&&(h=this.meetSegmentSegment(r,o,a,l))[1]>=0&&h[2]>=0&&(h[1]<1&&h[2]<1||s===f-1&&1===h[1]||n===p-1&&1===h[2])){if(u===i)return h[0];u++}return[0,NaN,NaN]},meetSegmentSegment:function(t,e,i,n){var r,o=s.crossProduct(t,e),a=s.crossProduct(i,n),l=s.crossProduct(o,a),h=l[0];return Math.abs(h)<s.eps?[l,1/0,1/0]:[l,((r=[i[1]-t[1],i[2]-t[2]])[0]*(n[2]-i[2])-r[1]*(n[1]-i[1]))/h,(r[0]*(e[2]-t[2])-r[1]*(e[1]-t[1]))/h]},_bezierSplit:function(t){var e,i,s,n,r,o;return[[t[0],e=[.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n=[.5*(e[0]+(i=[.5*(t[1][0]+t[2][0]),.5*(t[1][1]+t[2][1])])[0]),.5*(e[1]+i[1])],o=[.5*(n[0]+(r=[.5*(i[0]+(s=[.5*(t[2][0]+t[3][0]),.5*(t[2][1]+t[3][1])])[0]),.5*(i[1]+s[1])])[0]),.5*(n[1]+r[1])]],[o,r,s,t[3]]]},_bezierBbox:function(t){var e=[];return 4===t.length?(e[0]=Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),e[1]=Math.max(t[0][1],t[1][1],t[2][1],t[3][1]),e[2]=Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),e[3]=Math.min(t[0][1],t[1][1],t[2][1],t[3][1])):(e[0]=Math.min(t[0][0],t[1][0]),e[1]=Math.max(t[0][1],t[1][1]),e[2]=Math.max(t[0][0],t[1][0]),e[3]=Math.min(t[0][1],t[1][1])),e},_bezierOverlap:function(t,e){return t[2]>=e[0]&&t[0]<=e[2]&&t[1]>=e[3]&&t[3]<=e[1]},_bezierListConcat:function(t,e,i,s){var n,o=r.exists(s),a=0,l=e.length,h=t.length;for(h>0&&l>0&&(1===t[h-1][1]&&0===e[0][1]||o&&1===t[h-1][2]&&0===e[0][2])&&(a=1),n=a;n<l;n++)o&&(e[n][2]*=.5,e[n][2]+=s),e[n][1]*=.5,e[n][1]+=i,t.push(e[n])},_bezierMeetSubdivision:function(t,e,i){var s,n,r,o,a,l,h,c,d,u,p,f,m=[];return n=this._bezierBbox(e),s=this._bezierBbox(t),this._bezierOverlap(n,s)?i<5?(l=(r=this._bezierSplit(t))[0],h=r[1],a=(r=this._bezierSplit(e))[1],this._bezierListConcat(m,this._bezierMeetSubdivision(l,o=r[0],i+1),0,0),this._bezierListConcat(m,this._bezierMeetSubdivision(l,a,i+1),0,.5),this._bezierListConcat(m,this._bezierMeetSubdivision(h,o,i+1),.5,0),this._bezierListConcat(m,this._bezierMeetSubdivision(h,a,i+1),.5,.5),m):(p=[1].concat(t[0]),f=[1].concat(t[3]),d=[1].concat(e[0]),u=[1].concat(e[3]),(c=this.meetSegmentSegment(p,f,d,u))[1]>=0&&c[2]>=0&&c[1]<=1&&c[2]<=1?[c]:[]):[]},_bezierLineMeetSubdivision:function(t,e,i,s){var n,r,o,a,l,h,c,d,u,p=[];return n=this._bezierBbox(e),r=this._bezierBbox(t),s&&!this._bezierOverlap(r,n)?[]:i<5?(a=(o=this._bezierSplit(t))[1],this._bezierListConcat(p,this._bezierLineMeetSubdivision(o[0],e,i+1),0),this._bezierListConcat(p,this._bezierLineMeetSubdivision(a,e,i+1),.5),p):(d=[1].concat(t[0]),u=[1].concat(t[3]),h=[1].concat(e[0]),c=[1].concat(e[1]),(l=this.meetSegmentSegment(d,u,h,c))[1]>=0&&l[1]<=1&&(!s||l[2]>=0&&l[2]<=1)?[l]:[])},meetBeziersegmentBeziersegment:function(t,e,i){var s,n,r;for((s=4===t.length&&4===e.length?this._bezierMeetSubdivision(t,e,0):this._bezierLineMeetSubdivision(t,e,0,i)).sort(function(t,e){return 1e7*(t[1]-e[1])+(t[2]-e[2])}),n=[],r=0;r<s.length;r++)0!==r&&s[r][1]===s[r-1][1]&&s[r][2]===s[r-1][2]||n.push(s[r]);return n},meetBezierCurveRedBlueSegments:function(t,e,i){var s,n,r,o,a,l,h,c=e.numberPoints,d=t.numberPoints,u=[];if(c<4||d<4)return[0,NaN,NaN];for(n=0;n<d-3;n+=3)for(l=this._bezierBbox(o=[[(s=t.points)[n].usrCoords[1],s[n].usrCoords[2]],[s[n+1].usrCoords[1],s[n+1].usrCoords[2]],[s[n+2].usrCoords[1],s[n+2].usrCoords[2]],[s[n+3].usrCoords[1],s[n+3].usrCoords[2]]]),r=0;r<c-3;r+=3)if(h=this._bezierBbox(a=[[(s=e.points)[r].usrCoords[1],s[r].usrCoords[2]],[s[r+1].usrCoords[1],s[r+1].usrCoords[2]],[s[r+2].usrCoords[1],s[r+2].usrCoords[2]],[s[r+3].usrCoords[1],s[r+3].usrCoords[2]]]),this._bezierOverlap(l,h)&&(u=u.concat(this.meetBeziersegmentBeziersegment(o,a))).length>i)return u[i][0];return u.length>i?u[i][0]:[0,NaN,NaN]},bezierSegmentEval:function(t,e){var i,s,n,r=1-t;return s=0,n=0,s+=(i=r*r*r)*e[0][0],n+=i*e[0][1],s+=(i=3*t*r*r)*e[1][0],n+=i*e[1][1],s+=(i=3*t*t*r)*e[2][0],n+=i*e[2][1],[1,s+=(i=t*t*t)*e[3][0],n+=i*e[3][1]]},bezierArc:function(t,e,i,n,r){var o,a,l,h,c,d,u,p,f,m,g,b,y,v,C,x,_=.5*Math.PI,P=e[1],S=e[2],w=e[0],E=[],k=[];for(c=this.distance(e,t),P/=w,S/=w,d=this.rad(t.slice(1),e.slice(1),i.slice(1)),-1===r&&(d=2*Math.PI-d),(o=t)[1]/=o[0],o[2]/=o[0],o[0]/=o[0],h=o.slice(0),n?(E=[P,P+.333*(o[1]-P),P+.666*(o[1]-P),o[1]],k=[S,S+.333*(o[2]-S),S+.666*(o[2]-S),o[2]]):(E=[o[1]],k=[o[2]]);d>s.eps;)d>_?(u=_,d-=_):(u=d,d=0),p=Math.cos(r*u),f=Math.sin(r*u),C=s.matVecMult([[1,0,0],[P*(1-p)+S*f,p,-f],[S*(1-p)-P*f,f,p]],o),m=o[1]-P,g=o[2]-S,b=(h=[C[0]/C[0],C[1]/C[0],C[2]/C[0]])[1]-P,y=h[2]-S,x=Math.sqrt((m+b)*(m+b)+(g+y)*(g+y)),v=Math.abs(y-g)>s.eps?(m+b)*(c/x-.5)/(y-g)*8/3:(g+y)*(c/x-.5)/(m-b)*8/3,E=E.concat([(a=[1,o[1]-v*g,o[2]+v*m])[1],(l=[1,h[1]+v*y,h[2]-v*b])[1],h[1]]),k=k.concat([a[2],l[2],h[2]]),o=h.slice(0);return n&&(E=E.concat([h[1]+.333*(P-h[1]),h[1]+.666*(P-h[1]),P]),k=k.concat([h[2]+.333*(S-h[2]),h[2]+.666*(S-h[2]),S])),[E,k]},projectPointToCircle:function(t,n,o){var a,l,h,c=n.center.coords.usrCoords;return r.exists(o)||(o=t.board),r.isPoint(t)?(a=t.coords.distance(e.COORDS_BY_USER,n.center.coords),l=t.coords.usrCoords):(a=t.distance(e.COORDS_BY_USER,n.center.coords),l=t.usrCoords),Math.abs(a)<s.eps&&(a=s.eps),h=n.Radius()/a,new i(e.COORDS_BY_USER,[c[1]+h*(l[1]-c[1]),c[2]+h*(l[2]-c[2])],o)},projectPointToLine:function(t,n,o){var a=[0,n.stdform[1],n.stdform[2]];return r.exists(o)||(o=t.board),a=s.crossProduct(a,t.coords.usrCoords),new i(e.COORDS_BY_USER,s.crossProduct(a,n.stdform),o)},projectCoordsToSegment:function(t,e,i){var n,r=[i[1]-e[1],i[2]-e[2]],o=[t[1]-e[1],t[2]-e[2]];return Math.abs(r[0])<s.eps&&Math.abs(r[1])<s.eps?[e,0]:(n=s.innerProduct(o,r),[[1,(n/=s.innerProduct(r,r))*r[0]+e[1],n*r[1]+e[2]],n])},projectCoordsToBeziersegment:function(e,i,s){var n;return n=t.Math.Numerics.fminbr(function(t){var n=[1,i.X(s+t),i.Y(s+t)];return n[1]-=e[1],n[2]-=e[2],n[1]*n[1]+n[2]*n[2]},[0,1]),[[1,i.X(n+s),i.Y(n+s)],n]},projectPointToCurve:function(t,e,i){r.exists(i)||(i=t.board);var s=t.X(),n=t.Y(),o=this.projectCoordsToCurve(s,n,t.position||0,e,i);return t.position=o[1],o[0]},projectCoordsToCurve:function(t,s,o,a,l){var h,c,d,u,p,f,m,g,b,y,v,C,x,_,P,S,w,E,k,A,T=Number.POSITIVE_INFINITY;if(r.exists(l)||(l=a.board),"plot"===r.evaluate(a.visProp.curvetype)){if(o=0,p=T,h=0===a.numberPoints?[0,1,1]:[a.Z(0),a.X(0),a.Y(0)],a.numberPoints>1)for(g=[1,t,s],3===a.bezierDegree?u=0:v=[a.Z(0),a.X(0),a.Y(0)],d=0;d<a.numberPoints-1;d++)3===a.bezierDegree?x=this.projectCoordsToBeziersegment(g,a,u):(C=[a.Z(d+1),a.X(d+1),a.Y(d+1)],x=this.projectCoordsToSegment(g,v,C)),b=x[0],0<=(m=x[1])&&m<=1?(f=this.distance(b,g),y=d+m):m<0?(b=v,f=this.distance(v,g),y=d):m>1&&d===a.numberPoints-2&&(f=this.distance(b=C,g),y=a.numberPoints-1),f<p&&(p=f,o=y,h=b),3===a.bezierDegree?(u++,d+=2):v=C;c=new i(e.COORDS_BY_USER,h,l)}else{for(w=(_=function(e){var i,n;return e<a.minX()||e>a.maxX()?NaN:(i=t-a.X(e))*i+(n=s-a.Y(e))*n})(o),E=(a.maxX()-a.minX())/50,P=a.minX(),d=0;d<50;d++)((S=_(P))<w||isNaN(w))&&(o=P,w=S),P+=E;o=n.fminbr(_,[o-E,o+E]),k=a.minX(),A=a.maxX(),c=new i(e.COORDS_BY_USER,[a.X(o=(o=o<k?k:o)>A?A:o),a.Y(o)],l)}return[a.updateTransform(c),o]},projectCoordsToPolygon:function(e,i){var s,n,r,o,a=i.vertices.length,l=1/0;for(s=0;s<a;s++)r=t.Math.Geometry.projectCoordsToSegment(e,i.vertices[s].coords.usrCoords,i.vertices[(s+1)%a].coords.usrCoords),n=t.Math.Geometry.distance(r[0],e,3),0<=r[1]&&r[1]<=1&&n<l&&(o=r[0].slice(0),l=n);return o},projectPointToTurtle:function(t,s,n){var o,a,l,h,c,d,u,p,f=0,m=0,g=Number.POSITIVE_INFINITY,b=s.objects.length;for(r.exists(n)||(n=t.board),c=0;c<b;c++)(u=s.objects[c]).elementClass===e.OBJECT_CLASS_CURVE&&(o=this.projectPointToCurve(t,u),(d=this.distance(o.usrCoords,t.coords.usrCoords))<g&&(l=o.usrCoords[1],h=o.usrCoords[2],a=t.position,g=d,p=u,m=f),f+=u.numberPoints);return o=new i(e.COORDS_BY_USER,[l,h],n),t.position=a+m,p.updateTransform(o)},projectPointToPoint:function(t,e){return e.coords},projectPointToBoard:function(t,e){var i,n,r,o=e||t.board,a=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],l=t.coords||t,h=o.getBoundingBox();for(i=0;i<4;i++)(r=a[i])[0]*l.usrCoords[r[1]]<r[0]*h[r[2]]&&((n=s.crossProduct([1,h[r[3]],h[r[4]]],[1,h[r[5]],h[r[6]]]))[3]=0,n=s.normalize(n),l=this.projectPointToLine({coords:l},{stdform:n},o));return l},distPointLine:function(t,e){var i,n=e[1],r=e[2],o=e[0];return Math.abs(n)+Math.abs(r)<s.eps?Number.POSITIVE_INFINITY:(i=n*t[1]+r*t[2]+o,n*=n,r*=r,Math.abs(i)/Math.sqrt(n+r))},reuleauxPolygon:function(t,e){var i,n=2*Math.PI,r=n/e,o=(e-1)/2,a=0,l=function(l,h){return function(c,d){var u=(c%n+n)%n,p=Math.floor(u/r)%e;return d||(a=t[0].Dist(t[o]),i=s.Geometry.rad([t[0].X()+1,t[0].Y()],t[0],t[o%e])),isNaN(p)?p:(u=.5*u+p*r*.5+i,t[p][l]()+a*Math[h](u))}};return[l("X","cos"),l("Y","sin"),0,n]}}),s.Geometry}),define("utils/zip",["jxg"],function(t){"use strict";var e=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],a=256;return t.Util=t.Util||{},t.Util.Unzip=function(l){function h(){return L<N?l[L++]:-1}function c(){D=1}function d(){var t;try{return t=1&D,0==(D>>=1)&&(t=1&(D=h()),D=D>>1|128),t}catch(t){throw t}}function u(t){var i=0,s=t;try{for(;s--;)i=i<<1|d();t&&(i=e[i]>>8-t)}catch(t){throw t}return i}function p(){M=0}function f(t){T[M++]=t,E.push(String.fromCharCode(t)),32768===M&&(M=0)}function m(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function g(){for(;;){if(Y[F]>=S)return-1;if(P[Y[F]]===F)return Y[F]++;Y[F]++}}function b(t,e,i,s){var n;for(B=t,R=0,P=i,S=e,n=0;n<17;n++)Y[n]=0;return F=0,function t(){var e,i=B[R];if(17===F)return-1;if(R++,F++,(e=g())>=0)i.b0=e;else if(i.b0=32768,t())return-1;if((e=g())>=0)i.b1=e,i.jump=null;else if(i.b1=32768,i.jump=B[R],i.jumppos=R,t())return-1;return F--,0}()?-1:0}function y(t){for(var e,i,s=0,n=t[s];;)if(d()){if(!(32768&n.b1))return n.b1;for(n=n.jump,e=t.length,i=0;i<e;i++)if(t[i]===n){s=i;break}}else{if(!(32768&n.b0))return n.b0;n=t[++s]}}function v(){var a,l,g,v,C,x,_,P,S,w,E,k,A,O,N;do{if(a=d(),0===(l=u(2)))for(c(),S=h(),S|=h()<<8,E=h(),65535&(S^~(E|=h()<<8))&&t.debug("BlockLen checksum mismatch\n");S--;)f(h());else if(1===l)for(;;)if((v=e[u(7)]>>1)>23?(v=v<<1|d())>199?v=(v-=128)<<1|d():(v-=48)>143&&(v+=136):v+=256,v<256)f(v);else{if(256===v)break;for(P=u(s[v-=257])+i[v],v=e[u(5)]>>3,r[v]>8?(w=u(8),w|=u(r[v]-8)<<8):w=u(r[v]),w+=n[v],v=0;v<P;v++)f(T[M-w&32767])}else if(2===l){for(x=new Array(320),A=257+u(5),O=1+u(5),N=4+u(4),v=0;v<19;v++)x[v]=0;for(v=0;v<N;v++)x[o[v]]=u(3);for(P=I.length,g=0;g<P;g++)I[g]=new m;if(b(I,19,x))return p(),1;for(k=A+O,g=0;g<k;)if((v=y(I))<16)x[g++]=v;else if(16===v){if(g+(v=3+u(2))>k)return p(),1;for(C=g?x[g-1]:0;v--;)x[g++]=C}else{if(g+(v=17===v?3+u(3):11+u(7))>k)return p(),1;for(;v--;)x[g++]=0}for(P=j.length,g=0;g<P;g++)j[g]=new m;if(b(j,A,x))return p(),1;for(P=j.length,g=0;g<P;g++)I[g]=new m;for(_=[],g=A;g<x.length;g++)_[g-A]=x[g];if(b(I,O,_))return p(),1;for(;;)if((v=y(j))>=256){if(0==(v-=256))break;for(P=u(s[v-=1])+i[v],v=y(I),r[v]>8?(w=u(8),w|=u(r[v]-8)<<8):w=u(r[v]),w+=n[v];P--;)f(T[M-w&32767])}else f(v)}}while(!a);return p(),c(),0}function C(){var t,e,i,s,n,r=[];try{if(E=[],O=!1,r[0]=h(),r[1]=h(),120===r[0]&&218===r[1]&&(v(),A[k]=[E.join(""),"geonext.gxt"],k++),31===r[0]&&139===r[1]&&(w(),A[k]=[E.join(""),"file"],k++),80===r[0]&&75===r[1]&&(O=!0,r[2]=h(),r[3]=h(),3===r[2]&&4===r[3])){for(r[0]=h(),r[1]=h(),x=h(),x|=h()<<8,n=h(),n|=h()<<8,h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),h(),s=h(),s|=h()<<8,i=h(),i|=h()<<8,t=0,z=[];s--;)"/"===(e=h())|":"===e?t=0:t<a-1&&(z[t++]=String.fromCharCode(e));for(_||(_=z),t=0;t<i;)e=h(),t++;8===n&&(v(),A[k]=new Array(2),A[k][0]=E.join(""),A[k][1]=z.join(""),k++),w()}}catch(t){throw t}}var x,_,P,S,w,E=[],k=0,A=[],T=new Array(32768),M=0,O=!1,N=l.length,L=0,D=1,j=new Array(288),I=new Array(32),R=0,B=null,F=(new Array(64),new Array(64),0),Y=new Array(17),z=[];Y[0]=0,w=function(){var t,e,i=[];if(8&x&&(i[0]=h(),i[1]=h(),i[2]=h(),i[3]=h(),80===i[0]&&75===i[1]&&7===i[2]&&8===i[3]&&(h(),h(),h(),h()),h(),h(),h(),h(),h(),h(),h(),h()),O&&C(),i[0]=h(),8===i[0]){if(x=h(),h(),h(),h(),h(),h(),h(),4&x)for(i[0]=h(),i[2]=h(),F=i[0]+256*i[1],t=0;t<F;t++)h();if(8&x)for(t=0,z=[],e=h();e;)"7"!==e&&":"!==e||(t=0),t<a-1&&(z[t++]=e),e=h();if(16&x)for(e=h();e;)e=h();2&x&&(h(),h()),v(),h(),h(),h(),h(),h(),h(),h(),h(),O&&C()}},t.Util.Unzip.prototype.unzipFile=function(t){var e;for(this.unzip(),e=0;e<A.length;e++)if(A[e][1]===t)return A[e][0];return""},t.Util.Unzip.prototype.unzip=function(){return C(),A}},t.Util}),define("utils/encoding",["jxg"],function(t){"use strict";var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];return t.Util=t.Util||{},t.Util.UTF8={encode:function(t){var e,i,s="",n=t.length;if(t=t.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(t));for(e=0;e<n;e++)(i=t.charCodeAt(e))<128?s+=String.fromCharCode(i):i>127&&i<2048?(s+=String.fromCharCode(i>>6|192),s+=String.fromCharCode(63&i|128)):(s+=String.fromCharCode(i>>12|224),s+=String.fromCharCode(i>>6&63|128),s+=String.fromCharCode(63&i|128));return s},decode:function(t){var i,s,n,r=0,o=0,a=0,l=[],h=t.length,c=[];for(i=0;i<h;i++)s=t.charCodeAt(i),n=e[s],o=0!==a?63&s|o<<6:255>>n&s,0===(a=e[256+a+n])&&(o>65535?l.push(55232+(o>>10),56320+(1023&o)):l.push(o),++r%1e4==0&&(c.push(String.fromCharCode.apply(null,l)),l=[]));return c.push(String.fromCharCode.apply(null,l)),c.join("")},asciiCharCodeAt:function(t,e){var i=t.charCodeAt(e);if(i>255)switch(i){case 8364:i=128;break;case 8218:i=130;break;case 402:i=131;break;case 8222:i=132;break;case 8230:i=133;break;case 8224:i=134;break;case 8225:i=135;break;case 710:i=136;break;case 8240:i=137;break;case 352:i=138;break;case 8249:i=139;break;case 338:i=140;break;case 381:i=142;break;case 8216:i=145;break;case 8217:i=146;break;case 8220:i=147;break;case 8221:i=148;break;case 8226:i=149;break;case 8211:i=150;break;case 8212:i=151;break;case 732:i=152;break;case 8482:i=153;break;case 353:i=154;break;case 8250:i=155;break;case 339:i=156;break;case 382:i=158;break;case 376:i=159}return i}},t.Util.UTF8}),define("utils/base64",["jxg","utils/encoding"],function(t,e){"use strict";function i(t,e){return 255&t.charCodeAt(e)}function s(t,e){return n.indexOf(t.charAt(e))}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return t.Util=t.Util||{},t.Util.Base64={encode:function(t){var s,r,o,a,l,h=[];for(a=(o=(l=e.encode(t)).length)%3,s=0;s<o-a;s+=3)r=i(l,s)<<16|i(l,s+1)<<8|i(l,s+2),h.push(n.charAt(r>>18),n.charAt(r>>12&63),n.charAt(r>>6&63),n.charAt(63&r));switch(a){case 1:r=i(l,o-1),h.push(n.charAt(r>>2),n.charAt(r<<4&63),"=","=");break;case 2:r=i(l,o-2)<<8|i(l,o-1),h.push(n.charAt(r>>10),n.charAt(r>>4&63),n.charAt(r<<2&63),"=")}return h.join("")},decode:function(t,i){var n,r,o,a,l,h,c=[],d=[];if((o=(n=t.replace(/[^A-Za-z0-9\+\/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for("="===n.charAt(o-1)&&(a=1,"="===n.charAt(o-2)&&(a=2),o-=4),r=0;r<o;r+=4)l=s(n,r)<<18|s(n,r+1)<<12|s(n,r+2)<<6|s(n,r+3),d.push(l>>16,l>>8&255,255&l),r%1e4==0&&(c.push(String.fromCharCode.apply(null,d)),d=[]);switch(a){case 1:l=s(n,o)<<12|s(n,o+1)<<6|s(n,o+2),d.push(l>>10,l>>2&255);break;case 2:l=s(n,r)<<6|s(n,r+1),d.push(l>>4)}return c.push(String.fromCharCode.apply(null,d)),h=c.join(""),i&&(h=e.decode(h)),h},decodeAsArray:function(t){var e,i=this.decode(t),s=[],n=i.length;for(e=0;e<n;e++)s[e]=i.charCodeAt(e);return s}},t.Util.Base64}),define("server/server",["jxg","utils/zip","utils/base64","utils/type"],function(t,e,i,s){"use strict";return t.Server={modules:{},runningCalls:{},handleError:function(e){t.debug("error occured, server says: "+e.message)},callServer:function(n,r,o,a){var l,h,c,d,u,p;for(p in a=a||!1,o)o.hasOwnProperty(p)&&(escape(p),escape(o[p]));u=s.toJSON(o);do{d=n+Math.floor(4096*Math.random())}while(s.exists(this.runningCalls[d]));return this.runningCalls[d]={action:n},s.exists(o.module)&&(this.runningCalls[d].module=o.module),l=t.serverBase+"JXGServer.py",h="action="+escape(n)+"&id="+d+"&dataJSON="+escape(i.encode(u)),this.cbp=function(t){var n,o,a,l,h,c,d,u;if(n=new e.Unzip(i.decodeAsArray(t)).unzip(),s.isArray(n)&&n.length>0&&(n=n[0][0]),s.exists(n))if("error"===(o=window.JSON&&window.JSON.parse?window.JSON.parse(n):new Function("return "+n)()).type)this.handleError(o);else if("response"===o.type){for(c=o.id,d=0;d<o.fields.length;d++)l=(a=o.fields[d]).namespace+("object"==typeof new Function("return "+a.namespace)()?".":".prototype.")+a.name+" = "+a.value,new Function(l)();for(d=0;d<o.handler.length;d++){for(a=o.handler[d],h=[],u=0;u<a.parameters.length;u++)h[u]='"'+a.parameters[u]+'": '+a.parameters[u];l="if(typeof JXG.Server.modules."+this.runningCalls[c].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[c].module+" = {};",l+="JXG.Server.modules."+this.runningCalls[c].module+"."+a.name+"_cb = "+a.callback+";",l+="JXG.Server.modules."+this.runningCalls[c].module+"."+a.name+" = function ("+a.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[c].module+"."+a.name+"_cb;var __JXGSERVER_PAR__ = {"+h.join(",")+', "module": "'+this.runningCalls[c].module+'", "handler": "'+a.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(l)()}delete this.runningCalls[c],r(o.data)}},this.cb=t.bind(this.cbp,this),window.XMLHttpRequest?(c=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):c=new ActiveXObject("Microsoft.XMLHTTP"),!(!c||(c.open("POST",l,!a),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a||(c.onreadystatechange=function(t){return function(){return 4===c.readyState&&200===c.status&&(t(c.responseText),!0)}}(this.cb)),c.send(h),!a)||(this.cb(c.responseText),0))},loadModule_cb:function(e){var i;for(i=0;i<e.length;i++)t.debug(e[i].name+": "+e[i].value)},loadModule:function(e){return t.Server.callServer("load",t.Server.loadModule_cb,{module:e},!0)}},t.Server.load=t.Server.loadModule,t.Server}),define("math/symbolic",["base/constants","base/coords","math/math","math/geometry","server/server","utils/type"],function(t,e,i,s,n,r){"use strict";return i.Symbolic={generateSymbolicCoordinatesPartial:function(t,e,i,s){var n,o,a,l=e.ancestors,h=0,c=function(t){return"underscore"===s?i+"_{"+t+"}":"brace"===s?i+"["+t+"]":i+t};for(o in t.listOfFreePoints=[],t.listOfDependantPoints=[],l)if(l.hasOwnProperty(o)&&(n=0,r.isPoint(l[o]))){for(a in l[o].ancestors)l[o].ancestors.hasOwnProperty(a)&&n++;0===n?(l[o].symbolic.x=l[o].coords.usrCoords[1],l[o].symbolic.y=l[o].coords.usrCoords[2],t.listOfFreePoints.push(l[o])):(l[o].symbolic.x=c(h+=1),l[o].symbolic.y=c(h+=1),t.listOfDependantPoints.push(l[o]))}return r.isPoint(e)&&(e.symbolic.x="x",e.symbolic.y="y"),h},clearSymbolicCoordinates:function(t){var e=function(t){var e,i=t&&t.length||0;for(e=0;e<i;e++)r.isPoint(t[e])&&(t[e].symbolic.x="",t[e].symbolic.y="")};e(t.listOfFreePoints),e(t.listOfDependantPoints),delete t.listOfFreePoints,delete t.listOfDependantPoints},generatePolynomials:function(t,e,i){var s,n,o,a,l=e.ancestors,h=[],c=[];for(s in i&&this.generateSymbolicCoordinatesPartial(t,e,"u","brace"),l[e.id]=e,l)if(l.hasOwnProperty(s)&&(a=0,h=[],r.isPoint(l[s]))){for(n in l[s].ancestors)l[s].ancestors.hasOwnProperty(n)&&a++;if(a>0)for(h=l[s].generatePolynomial(),o=0;o<h.length;o++)c.push(h[o])}return i&&this.clearSymbolicCoordinates(t),c},geometricLocusByGroebnerBase:function(o,a){var l,h,c,d,u,p,f,m,g,b,y,v,C=o.options.locus,x={},_=this.generateSymbolicCoordinatesPartial(o,a,"u","brace"),P=new e(t.COORDS_BY_USR,[0,0],o),S=new e(t.COORDS_BY_USR,[o.canvasWidth,o.canvasHeight],o),w=1,E=0,k=0,A=0;if(void 0===n.modules.geoloci&&n.loadModule("geoloci"),void 0===n.modules.geoloci)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(p=P.usrCoords[1],f=S.usrCoords[1],m=S.usrCoords[2],g=P.usrCoords[2],C.translateToOrigin&&o.listOfFreePoints.length>0){for(E=(c=null!=C.toOrigin&&r.isInArray(o.listOfFreePoints,C.toOrigin.id)?C.toOrigin:o.listOfFreePoints[0]).symbolic.x,k=c.symbolic.y,u=0;u<o.listOfFreePoints.length;u++)o.listOfFreePoints[u].symbolic.x-=E,o.listOfFreePoints[u].symbolic.y-=k;if(p-=E,f-=E,m-=k,g-=k,C.translateTo10&&o.listOfFreePoints.length>1){for(d=null!=C.to10&&C.to10.id!==C.toOrigin.id&&r.isInArray(o.listOfFreePoints,C.to10.id)?C.to10:o.listOfFreePoints[0].id===c.id?o.listOfFreePoints[1]:o.listOfFreePoints[0],A=s.rad([1,0],[0,0],[d.symbolic.x,d.symbolic.y]),b=Math.cos(-A),y=Math.sin(-A),u=0;u<o.listOfFreePoints.length;u++)v=o.listOfFreePoints[u].symbolic.x,o.listOfFreePoints[u].symbolic.x=b*o.listOfFreePoints[u].symbolic.x-y*o.listOfFreePoints[u].symbolic.y,o.listOfFreePoints[u].symbolic.y=y*v+b*o.listOfFreePoints[u].symbolic.y;if(d.symbolic.y=0,v=p,p=b*p-y*m,m=y*v+b*m,v=f,f=b*f-y*g,g=y*v+b*g,C.stretch&&Math.abs(d.symbolic.x)>i.eps){for(w=d.symbolic.x,u=0;u<o.listOfFreePoints.length;u++)o.listOfFreePoints[u].symbolic.x/=w,o.listOfFreePoints[u].symbolic.y/=w;for(u=0;u<o.objectsList.length;u++)o.objectsList[u].elementClass===t.OBJECT_CLASS_CIRCLE&&"pointRadius"===o.objectsList[u].method&&(x[u]=o.objectsList[u].radius,o.objectsList[u].radius/=w);p/=w,f/=w,m/=w,g/=w,d.symbolic.x=1}}for(u=0;u<o.listOfFreePoints.length;u++)v=o.listOfFreePoints[u].symbolic.x,Math.abs(v)<i.eps&&(o.listOfFreePoints[u].symbolic.x=0),Math.abs(v-Math.round(v))<i.eps&&(o.listOfFreePoints[u].symbolic.x=Math.round(v)),v=o.listOfFreePoints[u].symbolic.y,Math.abs(v)<i.eps&&(o.listOfFreePoints[u].symbolic.y=0),Math.abs(v-Math.round(v))<i.eps&&(o.listOfFreePoints[u].symbolic.y=Math.round(v))}for(u in l=this.generatePolynomials(o,a).join(","),this.cbp=function(t){h=t},this.cb=r.bind(this.cbp,this),n.modules.geoloci.lociCoCoA(p,f,m,g,_,l,w,A,E,k,this.cb,!0),this.clearSymbolicCoordinates(o),x)x.hasOwnProperty(u)&&(o.objects[u].radius=x[u]);return h}},i.Symbolic}),define("math/poly",["jxg","math/math","utils/type"],function(t,e,i){"use strict";return e.Poly={},e.Poly.Ring=function(t){this.vars=t},t.extend(e.Poly.Ring.prototype,{}),e.Poly.Monomial=function(t,e,s){var n;if(!i.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(i.isArray(s)||(s=[]),n=(s=s.slice(0,t.vars.length)).length;n<t.vars.length;n++)s.push(0);this.ring=t,this.coefficient=e||0,this.exponents=i.deepCopy(s)},t.extend(e.Poly.Monomial.prototype,{copy:function(){return new e.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var t,e=[];for(t=0;t<this.ring.vars.length;t++)e.push(this.ring.vars[t]+"^"+this.exponents[t]);return this.coefficient+"*"+e.join("*")}}),e.Poly.Polynomial=function(t,e){var s;if(!i.exists(t))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");s=i.exists(e)&&i.isString(e)?void 0:[],this.ring=t,this.monomials=s},t.extend(e.Poly.Polynomial.prototype,{findSignature:function(t){var e;for(e=0;e<this.monomials.length;e++)if(i.cmpArrays(this.monomials[e].exponents,t))return e;return-1},addSubMonomial:function(t,e){var i;(i=this.findSignature(t.exponents))>-1?this.monomials[i].coefficient+=e*t.coefficient:(t.coefficient*=e,this.monomials.push(t))},add:function(t){var e;if(!i.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(i.isArray(t.exponents))this.addSubMonomial(t,1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],1)},sub:function(t){var e;if(!i.exists(t)||t.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(i.isArray(t.exponents))this.addSubMonomial(t,-1);else for(e=0;e<t.monomials.length;e++)this.addSubMonomial(t.monomials[e],-1)},copy:function(){var t,i;for(i=new e.Poly.Polynomial(this.ring),t=0;t<this.monomials.length;t++)i.monomials.push(this.monomials[t].copy());return i},print:function(){var t,e=[];for(t=0;t<this.monomials.length;t++)e.push("("+this.monomials[t].print()+")");return e.join("+")}}),e.Poly}),define("math/complex",["jxg","utils/type"],function(t,e){"use strict";return t.Complex=function(t,e){this.isComplex=!0,t&&t.isComplex&&(e=t.imaginary,t=t.real),this.real=t||0,this.imaginary=e||0,this.absval=0,this.angle=0},t.extend(t.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(t){return e.isNumber(t)?this.real+=t:(this.real+=t.real,this.imaginary+=t.imaginary),this},sub:function(t){return e.isNumber(t)?this.real-=t:(this.real-=t.real,this.imaginary-=t.imaginary),this},mult:function(t){var i,s;return e.isNumber(t)?(this.real*=t,this.imaginary*=t):(this.real=(i=this.real)*t.real-(s=this.imaginary)*t.imaginary,this.imaginary=i*t.imaginary+s*t.real),this},div:function(t){var i,s,n;if(e.isNumber(t)){if(Math.abs(t)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=t,this.imaginary/=t}else{if(Math.abs(t.real)<Math.eps&&Math.abs(t.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real=((n=this.real)*t.real+(s=this.imaginary)*t.imaginary)/(i=t.real*t.real+t.imaginary*t.imaginary),this.imaginary=(s*t.real-n*t.imaginary)/i}return this},conj:function(){return this.imaginary*=-1,this}}),t.C={},t.C.add=function(e,i){var s=new t.Complex(e);return s.add(i),s},t.C.sub=function(e,i){var s=new t.Complex(e);return s.sub(i),s},t.C.mult=function(e,i){var s=new t.Complex(e);return s.mult(i),s},t.C.div=function(e,i){var s=new t.Complex(e);return s.div(i),s},t.C.conj=function(e){var i=new t.Complex(e);return i.conj(),i},t.C.abs=function(e){var i=new t.Complex(e);return i.conj(),i.mult(e),Math.sqrt(i.real)},t.Complex.C=t.C,t.Complex}),define("utils/color",["jxg","utils/type","math/math"],function(t,e,i){"use strict";var s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},n=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}];return t.rgbParser=function(t,i,r){var o,a,l,h,c,d,u,p,f,m=t;if(!e.exists(t))return[];if(e.exists(i)&&e.exists(r)&&(m=[t,i,r]),f=!1,e.isArray(o=m)){for(c=0;c<3;c++)f=f||/\./.test(m[c].toString());for(c=0;c<3;c++)f=f&&m[c]>=0&&m[c]<=1;return f?[Math.ceil(255*m[0]),Math.ceil(255*m[1]),Math.ceil(255*m[2])]:m}for("string"==typeof m&&(o=m),"#"===o.charAt(0)&&(o=o.substr(1,6)),o=o.replace(/ /g,"").toLowerCase(),o=s[o]||o,c=0;c<n.length;c++)l=n[c].process,(h=n[c].re.exec(o))&&(d=(a=l(h))[0],u=a[1],p=a[2]);return isNaN(d)||isNaN(u)||isNaN(p)?[]:[d=d<0||isNaN(d)?0:d>255?255:d,u=u<0||isNaN(u)?0:u>255?255:u,p=p<0||isNaN(p)?0:p>255?255:p]},t.rgb2css=function(e,i,s){var n;return"rgb("+(n=t.rgbParser(e,i,s))[0]+", "+n[1]+", "+n[2]+")"},t.rgb2hex=function(e,i,s){var n,r,o;return r=(n=t.rgbParser(e,i,s))[1],o=n[2],n=(n=n[0]).toString(16),r=r.toString(16),o=o.toString(16),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===o.length&&(o="0"+o),"#"+n+r+o},t.hex2rgb=function(e){return t.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),t.rgb2css(e)},t.hsv2rgb=function(t,e,s){var n,r,o,a,l,h,c,d,u;if(t=(t%360+360)%360,0===e){if(!(isNaN(t)||t<i.eps))return"#ffffff";n=s,r=s,o=s}else switch(h=t>=360?0:t,h/=60,l=Math.floor(h),a=h-l,c=s*(1-e),d=s*(1-e*a),u=s*(1-e*(1-a)),l){case 0:n=s,r=u,o=c;break;case 1:n=d,r=s,o=c;break;case 2:n=c,r=s,o=u;break;case 3:n=c,r=d,o=s;break;case 4:n=u,r=c,o=s;break;case 5:n=s,r=c,o=d}return["#",n=2===(n=Math.round(255*n).toString(16)).length?n:1===n.length?"0"+n:"00",r=2===(r=Math.round(255*r).toString(16)).length?r:1===r.length?"0"+r:"00",o=2===(o=Math.round(255*o).toString(16)).length?o:1===o.length?"0"+o:"00"].join("")},t.rgb2hsv=function(e,i,s){var n,r,o,a,l,h,c,d,u,p,f,m,g;return r=(n=t.rgbParser(e,i,s))[1],o=n[2],a=(n=n[0])/255,l=r/255,h=o/255,m=Math.max(n,r,o),d=(g=Math.min(n,r,o))/255,p=0,(f=c=m/255)>0&&(p=(f-d)/f),u=1/(c-d),p>0&&(m===n?u*=l-h:u=m===r?2+(h-a)*u:4+(a-l)*u),(u*=60)<0&&(u+=360),m===g&&(u=0),[u,p,f]},t.rgb2LMS=function(e,i,s){var n,r,o,a,l,h,c,d=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return r=(n=t.rgbParser(e,i,s))[1],o=n[2],n=n[0],n=Math.pow(n,.476190476),r=Math.pow(r,.476190476),o=Math.pow(o,.476190476),(c=[a=n*d[0][0]+r*d[0][1]+o*d[0][2],l=n*d[1][0]+r*d[1][1]+o*d[1][2],h=n*d[2][0]+r*d[2][1]+o*d[2][2]]).l=a,c.m=l,c.s=h,c},t.LMS2rgb=function(t,e,i){var s,n,r,o,a=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],l=function(t){for(var e=127,i=64;i>0;){if(Math.pow(e,.476190476)>t)e-=i;else{if(Math.pow(e+1,.476190476)>t)return e;e+=i}i/=2}return 254===e&&13.994955247<t?255:e};return n=t*a[1][0]+e*a[1][1]+i*a[1][2],r=t*a[2][0]+e*a[2][1]+i*a[2][2],(o=[s=l(s=t*a[0][0]+e*a[0][1]+i*a[0][2]),n=l(n),r=l(r)]).r=s,o.g=n,o.b=r,o},t.rgba2rgbo=function(t){var e;return 9===t.length&&"#"===t.charAt(0)?(e=parseInt(t.substr(7,2).toUpperCase(),16)/255,t=t.substr(0,7)):e=1,[t,e]},t.rgbo2rgba=function(t,e){var i;return"none"===t?t:(1===(i=Math.round(255*e).toString(16)).length&&(i="0"+i),t+i)},t.rgb2bw=function(e){var i,s,n,r="0123456789ABCDEF";return"none"===e?e:(n=t.rgbParser(e),i=Math.floor(.3*n[0]+.59*n[1]+.11*n[2]),e="#"+(s=r.charAt(i>>4&15)+r.charAt(15&i))+s+s)},t.rgb2cb=function(e,i){var s,n,r,o,a,l,h,c,d,u,p,f="0123456789ABCDEF";if("none"===e)return e;switch(n=(a=t.rgb2LMS(e))[0],r=a[1],o=a[2],i=i.toLowerCase()){case"protanopia":l=-.06150039994295001,h=.08277001656812001,c=-.013200141220000003,d=.05858939668799999,u=-.07934519995360001,p=.013289415272000003,n=o/r<.6903216543277437?-(h*r+c*o)/l:-(u*r+p*o)/d;break;case"tritanopia":l=-.00058973116217,h=.007690316482,c=-.01011703519052,d=.025495080838999994,u=-.0422740347,p=.017005316784,o=r/n<.8349489908460004?-(l*n+h*r)/c:-(d*n+u*r)/p;break;default:l=-.06150039994295001,h=.08277001656812001,c=-.013200141220000003,d=.05858939668799999,u=-.07934519995360001,p=.013289415272000003,r=o/n<.5763833686400911?-(l*n+c*o)/h:-(d*n+p*o)/u}return s=t.LMS2rgb(n,r,o),e="#"+(f.charAt(s[0]>>4&15)+f.charAt(15&s[0])),(e+=f.charAt(s[1]>>4&15)+f.charAt(15&s[1]))+(f.charAt(s[2]>>4&15)+f.charAt(15&s[2]))},t.autoHighlight=function(e){var i=t.rgba2rgbo(e),s=i[0],n=i[1];return"#"===e.charAt(0)?t.rgbo2rgba(s,n*=n<.3?1.8:.4):e},t}),define("options",["jxg","base/constants","math/math","utils/color","utils/type"],function(t,e,i,s,n){"use strict";return t.Options={jc:{enabled:!0,compile:!0},board:{boundingBox:[-5,5,5,-5],zoomFactor:1,zoomX:1,zoomY:1,showCopyright:!0,axis:!1,defaultAxes:{x:{name:"x",ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},drawZero:!1,visible:"inherit"}},y:{name:"y",ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],drawZero:!1,visible:"inherit"}}},showNavigation:!0,showZoom:!0,showReload:!1,showScreenshot:!1,screenshot:{scale:1,type:"png",symbol:"\u2318",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},showClearTraces:!1,keepAspectRatio:!1,ignoreLabels:!0,maxNameLength:1,document:!1,takeFirst:!1,takeSizeFromFile:!1,renderer:"auto",animationDelay:35,registerEvents:!0,minimizeReflow:"svg",offsetX:0,offsetY:0,zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,min:1e-4,max:1e4,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},pan:{needShift:!0,needTwoFingers:!1,enabled:!0},selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,withLines:!1,vertices:{visible:!1},fillColor:"#ffff00",visible:!1}},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",fillColor:"red",highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,transitionDuration:100,strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,dash:0,shadow:!1,trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,dragToTopOfLayer:!1,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],minorTicks:4,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,ticksDistance:1,strokeOpacity:1,strokeWidth:1,strokeColor:"black",highlightStrokeColor:"#888888",visible:"inherit",includeBoundaries:!1},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",strokeWidth:2,strokeColor:"blue",ticksDistance:.2},precision:{touch:15,touchMax:100,mouse:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:.5,type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:"#FF7F00",highlightFillColor:"#FF7F00",strokeColor:"#FF7F00",fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"black",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:"#0000FF"},arc:{visible:!1}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",useDirection:!1,center:{},radiuspoint:{},anglepoint:{}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"black"},line2:{strokeColor:"black"}},button:{disabled:!1},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!1,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#C3D9FF","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,fixed:!1,withLabel:!1,name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""}},curve:{strokeWidth:1,strokeColor:"#0000ff",fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,recursionDepthHigh:17,recursionDepthLow:13,doAdvancedPlotOld:!1,label:{position:"lft"}},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#C0C0C0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"black",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,fixed:!1,withLabel:!1,name:""}},inequality:{fillColor:"red",fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:"red",fillOpacity:.4,highlightFillColor:"red",highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:"red",fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:"red",fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20}},input:{disabled:!1,maxlength:524288},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"black",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"black",fixed:!0,position:"urt",offset:[10,10]},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#C3D9FF","#4096EE","#008C00"]},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#888888",withTicks:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,defaultDistance:1,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1,lineCap:"butt"},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",fillColor:"#ff0000",highlightFillColor:"#EEEEEE",strokeWidth:2,strokeColor:"#ff0000",highlightStrokeColor:"#C3D9FF",zoom:!1,showInfobox:!0,infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},vertices:{layer:9,withLabel:!1,name:"",strokeColor:"#ff0000",fillColor:"#ff0000",fixed:!1,visible:"inherit"},label:{offset:[0,0]}},prescribedangle:{anglepoint:{size:2,visible:!1,withLabel:!1}},regularpolygon:{hasInnerPoints:!1,fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:"#ff0000",fillColor:"#ff0000",fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:"#ffff00"},sector:{fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none"},radiuspoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglepoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,name:""}},slider:{snapWidth:-1,precision:2,firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,fixed:!0,scalable:!1,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,precision:2,includeBoundaries:1,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,minorHeight:4,majorHeight:5,minorTicks:0,defaultDistance:1,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,fixed:!0,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{strokeColor:"#000000"}},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},curve:{strokeWidth:1,strokeColor:"#000000",fillColor:"none"}},slopetriangle:{fillColor:"red",fillOpacity:.4,highlightFillColor:"red",highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},stepfunction:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,precision:2,point1:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],defaultDistance:.1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit"},label:{position:"top"}},text:{fontSize:12,digits:2,parse:!0,useCaja:!1,isLabel:!1,strokeColor:"black",highlightStrokeColor:"black",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",useASCIIMathML:!1,useMathJax:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:"#ff0000"}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},t.Validator=function(){var e,s=function(t){return n.isString(t)},r=function(t){return Math.abs(t-Math.round(t))<i.eps},o=function(t){return r(t)&&t>0},a=function(t){return t>0},l=function(t){return t>=0},h={},c={attractorDistance:l,color:s,defaultDistance:n.isNumber,display:function(t){return"html"===t||"internal"===t},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(e){return n.exists(t.normalizePointFace(e))},factor:n.isNumber,fillColor:s,fillOpacity:n.isNumber,firstArrow:!1,fontSize:r,dash:r,gridX:n.isNumber,gridY:n.isNumber,hasGrid:!1,highlightFillColor:s,highlightFillOpacity:n.isNumber,highlightStrokeColor:s,highlightStrokeOpacity:n.isNumber,insertTicks:!1,lastArrow:!1,majorHeight:r,minorHeight:r,minorTicks:l,minTicksDistance:o,numberPointsHigh:o,numberPointsLow:o,opacity:n.isNumber,radius:n.isNumber,RDPsmoothing:!1,renderer:function(t){return"vml"===t||"svg"===t||"canvas"===t||"no"===t},right:function(t){return/^[0-9]+px$/.test(t)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:r,snapSizeX:a,snapSizeY:a,snapWidth:n.isNumber,snapToGrid:!1,snatchDistance:l,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:s,strokeOpacity:n.isNumber,strokeWidth:r,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(e in c)c.hasOwnProperty(e)&&(h[e.toLowerCase()]=c[e]);return h}(),t.normalizePointFace=function(t){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",diamond:"<>","<>":"<>",triangleup:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[t]},t.useStandardOptions=function(i){var s,n,r,o,a=t.Options,l=i.hasGrid;for(s in i.options.grid.hasGrid=a.grid.hasGrid,i.options.grid.gridX=a.grid.gridX,i.options.grid.gridY=a.grid.gridY,i.options.grid.gridColor=a.grid.gridColor,i.options.grid.gridOpacity=a.grid.gridOpacity,i.options.grid.gridDash=a.grid.gridDash,i.options.grid.snapToGrid=a.grid.snapToGrid,i.options.grid.snapSizeX=a.grid.SnapSizeX,i.options.grid.snapSizeY=a.grid.SnapSizeY,i.takeSizeFromFile=a.takeSizeFromFile,o=function(t,e){t.visProp.fillcolor=e.fillColor,t.visProp.highlightfillcolor=e.highlightFillColor,t.visProp.strokecolor=e.strokeColor,t.visProp.highlightstrokecolor=e.highlightStrokeColor},i.objects)if(i.objects.hasOwnProperty(s))if((r=i.objects[s]).elementClass===e.OBJECT_CLASS_POINT)o(r,a.point);else if(r.elementClass===e.OBJECT_CLASS_LINE)for(o(r,a.line),n=0;n<r.ticks.length;n++)r.ticks[n].majorTicks=a.line.ticks.majorTicks,r.ticks[n].minTicksDistance=a.line.ticks.minTicksDistance,r.ticks[n].visProp.minorheight=a.line.ticks.minorHeight,r.ticks[n].visProp.majorheight=a.line.ticks.majorHeight;else r.elementClass===e.OBJECT_CLASS_CIRCLE?o(r,a.circle):r.type===e.OBJECT_TYPE_ANGLE?o(r,a.angle):r.type===e.OBJECT_TYPE_ARC?o(r,a.arc):r.type===e.OBJECT_TYPE_POLYGON?o(r,a.polygon):r.type===e.OBJECT_TYPE_CONIC?o(r,a.conic):r.type===e.OBJECT_TYPE_CURVE?o(r,a.curve):r.type===e.OBJECT_TYPE_SECTOR&&(r.arc.visProp.fillcolor=a.sector.fillColor,r.arc.visProp.highlightfillcolor=a.sector.highlightFillColor,r.arc.visProp.fillopacity=a.sector.fillOpacity,r.arc.visProp.highlightfillopacity=a.sector.highlightFillOpacity);i.fullUpdate(),l&&!i.hasGrid?i.removeGrids(i):!l&&i.hasGrid&&i.create("grid",[])},t.useBlackWhiteOptions=function(e){var i=t.Options;i.point.fillColor=s.rgb2bw(i.point.fillColor),i.point.highlightFillColor=s.rgb2bw(i.point.highlightFillColor),i.point.strokeColor=s.rgb2bw(i.point.strokeColor),i.point.highlightStrokeColor=s.rgb2bw(i.point.highlightStrokeColor),i.line.fillColor=s.rgb2bw(i.line.fillColor),i.line.highlightFillColor=s.rgb2bw(i.line.highlightFillColor),i.line.strokeColor=s.rgb2bw(i.line.strokeColor),i.line.highlightStrokeColor=s.rgb2bw(i.line.highlightStrokeColor),i.circle.fillColor=s.rgb2bw(i.circle.fillColor),i.circle.highlightFillColor=s.rgb2bw(i.circle.highlightFillColor),i.circle.strokeColor=s.rgb2bw(i.circle.strokeColor),i.circle.highlightStrokeColor=s.rgb2bw(i.circle.highlightStrokeColor),i.arc.fillColor=s.rgb2bw(i.arc.fillColor),i.arc.highlightFillColor=s.rgb2bw(i.arc.highlightFillColor),i.arc.strokeColor=s.rgb2bw(i.arc.strokeColor),i.arc.highlightStrokeColor=s.rgb2bw(i.arc.highlightStrokeColor),i.polygon.fillColor=s.rgb2bw(i.polygon.fillColor),i.polygon.highlightFillColor=s.rgb2bw(i.polygon.highlightFillColor),i.sector.fillColor=s.rgb2bw(i.sector.fillColor),i.sector.highlightFillColor=s.rgb2bw(i.sector.highlightFillColor),i.curve.strokeColor=s.rgb2bw(i.curve.strokeColor),i.grid.gridColor=s.rgb2bw(i.grid.gridColor),t.useStandardOptions(e)},t.Options.normalizePointFace=t.normalizePointFace,t.Options}),define("renderer/abstract",["jxg","options","base/coords","base/constants","math/math","math/geometry","utils/type","utils/env"],function(t,e,i,s,n,r,o,a){"use strict";return t.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1},t.extend(t.AbstractRenderer.prototype,{_updateVisual:function(t,e,i){(i||this.enhancedRendering)&&(e=e||{},this.setObjectTransition(t),o.evaluate(t.visProp.draft)?this.setDraft(t):(e.stroke||(t.highlighted?(this.setObjectStrokeColor(t,t.visProp.highlightstrokecolor,t.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(t,t.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))),e.fill||(t.highlighted?this.setObjectFillColor(t,t.visProp.highlightfillcolor,t.visProp.highlightfillopacity):this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity)),e.dash||this.setDashStyle(t,t.visProp),e.shadow||this.setShadow(t),e.gradient||this.setShadow(t)))},drawPoint:function(t){var i,s=e.normalizePointFace(o.evaluate(t.visProp.face));t.rendNode=this.appendChildPrim(this.createPrim(i="o"===s?"ellipse":"[]"===s?"rect":"path",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,i),this._updateVisual(t,{dash:!0,shadow:!0},!0),this.updatePoint(t)},updatePoint:function(t){var i,s=o.evaluate(t.visProp.size),n=e.normalizePointFace(o.evaluate(t.visProp.face)),r=o.evaluate(t.visProp.sizeunit),a=o.evaluate(t.visProp.zoom);isNaN(t.coords.scrCoords[2]+t.coords.scrCoords[1])||("user"===r&&(s*=Math.sqrt(t.board.unitX*t.board.unitY)),i=0==(s*=t.board&&a?Math.sqrt(t.board.zoomX*t.board.zoomY):1)?0:s+1,"o"===n?this.updateEllipsePrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2],i,i):"[]"===n?this.updateRectPrim(t.rendNode,t.coords.scrCoords[1]-s,t.coords.scrCoords[2]-s,2*s,2*s):this.updatePathPrim(t.rendNode,this.updatePathStringPoint(t,s,n),t.board),this._updateVisual(t,{dash:!1,shadow:!1}),this.setShadow(t))},changePointStyle:function(t){var e=this.getElementById(t.id);o.exists(e)&&this.remove(e),this.drawPoint(t),o.clearVisPropOld(t),t.visPropCalc.visible||this.hide(t),o.evaluate(t.visProp.draft)&&this.setDraft(t)},drawLine:function(t){t.rendNode=this.appendChildPrim(this.createPrim("line",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"lines"),this.updateLine(t)},updateLineEndings:function(t,e){var n,a,l=new i(s.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),h=new i(s.COORDS_BY_USER,t.point2.coords.usrCoords,t.board);return a=o.evaluate(t.visProp.margin),r.calcStraight(t,l,h,a),n=this.getPositionArrowHead(t,l,h,e),this.updateLinePrim(t.rendNode,n.c1.scrCoords[1]+n.d1x,n.c1.scrCoords[2]+n.d1y,n.c2.scrCoords[1]-n.d2x,n.c2.scrCoords[2]-n.d2y,t.board),n},updateArrowSize:function(t,e){var i,s,n;return(s=o.evaluate(t.visProp.firstarrow))&&(i=o.exists(s.size)?o.evaluate(s.size):3,this._setArrowWidth(t.rendNodeTriangleStart,e.sFirst,t.rendNode,i)),(n=o.evaluate(t.visProp.lastarrow))&&(i=o.exists(n.size)?o.evaluate(n.size):3,this._setArrowWidth(t.rendNodeTriangleEnd,e.sLast,t.rendNode,i)),this},updateLine:function(t){var e;e=this.updateLineEndings(t,o.evaluate(t.visProp.strokewidth)),this.makeArrows(t),this._updateVisual(t),this.updateArrowSize(t,e),this.setLineCap(t)},getPositionArrowHead:function(t,e,r,a){var l,h,c,d,u,p,f,m,g,b,y,v=n.eps,C=0,x=0,_=o.evaluate(t.visProp.firstarrow),P=o.evaluate(t.visProp.lastarrow);return u=p=f=m=0,(_||P)&&(l=(h=o.evaluate(t.point1.visProp.size)+o.evaluate(t.point1.visProp.strokewidth))+(c=o.evaluate(t.point2.visProp.size)+o.evaluate(t.point2.visProp.strokewidth)),P&&o.evaluate(t.visProp.touchlastpoint)&&(d=e.distance(s.COORDS_BY_SCREEN,r))>l&&(r=new i(s.COORDS_BY_SCREEN,[r.scrCoords[1]-(f=(r.scrCoords[1]-e.scrCoords[1])*c/d),r.scrCoords[2]-(m=(r.scrCoords[2]-e.scrCoords[2])*c/d)],t.board)),_&&o.evaluate(t.visProp.touchfirstpoint)&&(d=e.distance(s.COORDS_BY_SCREEN,r))>l&&(e=new i(s.COORDS_BY_SCREEN,[e.scrCoords[1]+(u=(r.scrCoords[1]-e.scrCoords[1])*h/d),e.scrCoords[2]+(p=(r.scrCoords[2]-e.scrCoords[2])*h/d)],t.board)),u=p=f=m=0,d=e.distance(s.COORDS_BY_SCREEN,r),o.exists(_.type)&&(g=o.evaluate(_.type)),o.exists(P.type)&&(b=o.evaluate(P.type)),_&&(C=a*(y=o.exists(_.size)?o.evaluate(_.size):3),2===g?(C*=.5,v+=a*y):3===g?(C=a,v+=a):v+=a*y),P&&(x=a*(y=o.exists(P.size)?o.evaluate(P.size):3),2===b?(x*=.5,v+=a*y):3===b?(x=a,v+=a):v+=a*y),_&&"vml"!==t.board.renderer.type&&(d>=v?(u=(r.scrCoords[1]-e.scrCoords[1])*C/d,p=(r.scrCoords[2]-e.scrCoords[2])*C/d):C=0),P&&"vml"!==t.board.renderer.type&&(d>=v?(f=(r.scrCoords[1]-e.scrCoords[1])*x/d,m=(r.scrCoords[2]-e.scrCoords[2])*x/d):x=0)),{c1:e,c2:r,d1x:u,d1y:p,d2x:f,d2y:m,sFirst:C,sLast:x}},setLineCap:function(t){},drawTicks:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path")},updateTicks:function(t){},drawCurve:function(t){t.rendNode=this.appendChildPrim(this.createPrim("path",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"path"),t.numberPoints>1&&this.makeArrows(t),this._updateVisual(t,{shadow:!0},!0),this.updateCurve(t)},updateCurve:function(t){var e,i,s,n=o.evaluate(t.visProp.strokewidth);o.evaluate(t.visProp.handdrawing)?this.updatePathPrim(t.rendNode,this.updatePathStringBezierPrim(t),t.board):this.updatePathPrim(t.rendNode,this.updatePathStringPrim(t),t.board),t.numberPoints>1&&(this.makeArrows(t),(i=o.evaluate(t.visProp.firstarrow))&&(e=o.exists(i.size)?o.evaluate(i.size):3,this._setArrowWidth(t.rendNodeTriangleStart,n,t.rendNode,e)),(s=o.evaluate(t.visProp.lastarrow))&&(e=o.exists(s.size)?o.evaluate(s.size):3,this._setArrowWidth(t.rendNodeTriangleEnd,n,t.rendNode,e))),this._updateVisual(t)},drawEllipse:function(t){t.rendNode=this.appendChildPrim(this.createPrim("ellipse",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"ellipse"),this.updateEllipse(t)},updateEllipse:function(t){this._updateVisual(t);var e=t.Radius();e>0&&Math.abs(t.center.coords.usrCoords[0])>n.eps&&!isNaN(e+t.center.coords.scrCoords[1]+t.center.coords.scrCoords[2])&&e*t.board.unitX<2e6&&this.updateEllipsePrim(t.rendNode,t.center.coords.scrCoords[1],t.center.coords.scrCoords[2],e*t.board.unitX,e*t.board.unitY)},drawPolygon:function(t){t.rendNode=this.appendChildPrim(this.createPrim("polygon",t.id),o.evaluate(t.visProp.layer)),this.appendNodesToElement(t,"polygon"),this.updatePolygon(t)},updatePolygon:function(t){this._updateVisual(t,{stroke:!0,dash:!0}),this.updatePolygonPrim(t.rendNode,t)},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){var e,i,s;"html"===o.evaluate(t.visProp.display)&&a.isBrowser&&"no"!==this.type?((e=this.container.ownerDocument.createElement("div")).style.position="absolute",e.className=o.evaluate(t.visProp.cssclass),s=o.evaluate(t.visProp.layer),o.exists(s)||(s=0),i=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),e.style.zIndex=i+s,this.container.appendChild(e),e.setAttribute("id",this.container.id+"_"+t.id)):e=this.drawInternalText(t),t.rendNode=e,t.htmlStr="",this.updateText(t)},updateText:function(e){var i,s,n,r,a,l=e.plaintext;if(e.visPropCalc.visible)if(this.updateTextStyle(e,!1),"html"===o.evaluate(e.visProp.display)&&"no"!==this.type){if(isNaN(e.coords.scrCoords[1]+e.coords.scrCoords[2])||(s=e.coords.scrCoords[1],s=Math.abs(s)<1e6?s:1e6,i="right"===(r=e.getAnchorX())?Math.floor(e.board.canvasWidth-s):"middle"===r?Math.floor(s-.5*e.size[0]):Math.floor(s),e.visPropOld.left!==r+i&&("right"===r?(e.rendNode.style.right=i+"px",e.rendNode.style.left="auto"):(e.rendNode.style.left=i+"px",e.rendNode.style.right="auto"),e.visPropOld.left=r+i),s=e.coords.scrCoords[2]+this.vOffsetText,s=Math.abs(s)<1e6?s:1e6,i="bottom"===(a=e.getAnchorY())?Math.floor(e.board.canvasHeight-s):"middle"===a?Math.floor(s-.5*e.size[1]):Math.floor(s),e.visPropOld.top!==a+i&&("bottom"===a?(e.rendNode.style.top="auto",e.rendNode.style.bottom=i+"px"):(e.rendNode.style.bottom="auto",e.rendNode.style.top=i+"px"),e.visPropOld.top=a+i)),e.htmlStr!==l){try{e.rendNode.innerHTML=l}catch(t){n=e.rendNode.parentNode,e.rendNode.parentNode.removeChild(e.rendNode),e.rendNode.innerHTML=l,n.appendChild(e.rendNode)}if(e.htmlStr=l,o.evaluate(e.visProp.usemathjax))try{MathJax.Hub.Queue(["Typeset",MathJax.Hub,e.rendNode])}catch(e){t.debug("MathJax (not yet) loaded")}else if(o.evaluate(e.visProp.useasciimathml))try{AMprocessNode(e.rendNode,!1)}catch(e){t.debug("AsciiMathML (not yet) loaded")}}this.transformImage(e,e.transformations)}else this.updateInternalText(e)},_css2js:function(t){var e,i,s,n,r,a=[],l=o.trim(t).replace(/;$/,"").split(";");for(i=l.length,e=0;e<i;++e)""!==o.trim(l[e])&&(r=l[e].split(":"),s=o.trim(r[0].replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()})),n=o.trim(r[1]),a.push({key:s,val:n}));return a},updateTextStyle:function(t,e){var i,s,n,r,l,h,c,d,u,p=t.visProp,f=a.isBrowser?p.display:"internal",m=["rendNode","rendNodeTag","rendNodeLabel"],g=m.length,b=["cssdefaultstyle","cssstyle"],y=b.length;if(e?(n=p.highlightstrokecolor,s=p.highlightstrokeopacity,r=p.highlightcssclass):(n=p.strokecolor,s=p.strokeopacity,r=p.cssclass),"no"!==this.type&&("html"===f||"canvas"!==this.type)){for(d=0;d<y;d++)if(""!==(u=o.evaluate(p[(e?"highlight":"")+b[d]]))&&t.visPropOld[b[d]]!==u){for(h=this._css2js(u),l=0;l<g;l++)if(o.exists(t[m[l]]))for(c in h)h.hasOwnProperty(c)&&(t[m[l]].style[h[c].key]=h[c].val);t.visPropOld[b[d]]=u}if(i=o.evaluate(p.fontsize),t.visPropOld.fontsize!==i){t.needsSizeUpdate=!0;try{for(l=0;l<g;l++)o.exists(t[m[l]])&&(t[m[l]].style.fontSize=i+"px")}catch(e){for(l=0;l<g;l++)o.exists(t[m[l]])&&(t[m[l]].style.fontSize=i)}t.visPropOld.fontsize=i}}return this.setObjectTransition(t),"html"===f&&"no"!==this.type?(t.visPropOld.cssclass!==r&&(t.rendNode.className=r,t.visPropOld.cssclass=r,t.needsSizeUpdate=!0),this.setObjectStrokeColor(t,n,s)):this.updateInternalTextStyle(t,n,s),this},updateInternalTextStyle:function(t,e,i){this.setObjectStrokeColor(t,e,i)},drawImage:function(t){},updateImage:function(t){this.updateRectPrim(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),this.updateImageURL(t),this.transformImage(t,t.transformations),this._updateVisual(t,{stroke:!0,dash:!0},!0)},joinTransforms:function(t,e){var i,s=t.board.origin.scrCoords[1],r=t.board.origin.scrCoords[2],o=t.board.unitX,a=t.board.unitY,l=e.length,h=[[1,0,0],[-s/o,1/o,0],[r/a,0,-1/a]];for(i=0;i<l;i++)h=n.matMatMult(e[i].matrix,h);return n.matMatMult([[1,0,0],[s,o,0],[r,0,-a]],h)},transformImage:function(t,e){},updateImageURL:function(t){},updateImageStyle:function(t,e){t.rendNode.className=o.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass)},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},_setArrowWidth:function(t,e,i){},updateEllipsePrim:function(t,e,i,s,n){},updateLinePrim:function(t,e,i,s,n,r){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,s,n){},setPropertyPrim:function(t,e,i){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){if(o.evaluate(t.visProp.draft)){var e=t.board.options.elements.draft.color,i=t.board.options.elements.draft.opacity;this.setObjectTransition(t),t.type===s.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,e,i):(t.elementClass===s.OBJECT_CLASS_POINT?this.setObjectFillColor(t,e,i):this.setObjectFillColor(t,"none",0),this.setObjectStrokeColor(t,e,i),this.setObjectStrokeWidth(t,t.board.options.elements.draft.strokeWidth))}},removeDraft:function(t){this.setObjectTransition(t),t.type===s.OBJECT_TYPE_POLYGON?this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity):(t.type===s.OBJECT_CLASS_POINT&&this.setObjectFillColor(t,t.visProp.fillcolor,t.visProp.fillopacity),this.setObjectStrokeColor(t,t.visProp.strokecolor,t.visProp.strokeopacity),this.setObjectStrokeWidth(t,t.visProp.strokewidth))},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){var e,i,n,r=t.visProp;if(this.setObjectTransition(t),!r.draft){if(t.type===s.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,r.highlightfillcolor,r.highlightfillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.highlightstrokecolor,t.borders[e].visProp.highlightstrokeopacity);else t.elementClass===s.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!0):t.type===s.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!0),this.setObjectFillColor(t,r.highlightfillcolor,r.highlightfillopacity)):(this.setObjectStrokeColor(t,r.highlightstrokecolor,r.highlightstrokeopacity),this.setObjectFillColor(t,r.highlightfillcolor,r.highlightfillopacity));r.highlightstrokewidth&&(i=Math.max(o.evaluate(r.highlightstrokewidth),o.evaluate(r.strokewidth)),this.setObjectStrokeWidth(t,i),t.elementClass===s.OBJECT_CLASS_LINE&&(n=this.updateLineEndings(t,i),this.makeArrows(t),this.updateArrowSize(t,n)))}return this},noHighlight:function(t){var e,i,n,r=t.visProp;if(this.setObjectTransition(t),!o.evaluate(t.visProp.draft)){if(t.type===s.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(t,r.fillcolor,r.fillopacity),e=0;e<t.borders.length;e++)this.setObjectStrokeColor(t.borders[e],t.borders[e].visProp.strokecolor,t.borders[e].visProp.strokeopacity);else t.elementClass===s.OBJECT_CLASS_TEXT?this.updateTextStyle(t,!1):t.type===s.OBJECT_TYPE_IMAGE?(this.updateImageStyle(t,!1),this.setObjectFillColor(t,r.fillcolor,r.fillopacity)):(this.setObjectStrokeColor(t,r.strokecolor,r.strokeopacity),this.setObjectFillColor(t,r.fillcolor,r.fillopacity));n=o.evaluate(r.strokewidth),this.setObjectStrokeWidth(t,n),t.elementClass===s.OBJECT_CLASS_LINE&&(i=this.updateLineEndings(t,n),this.makeArrows(t),this.updateArrowSize(t,i))}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t,e){var i,s,n=function(t){t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},r=function(r,l){var h;h=i.createElement("span"),s.appendChild(h),h.appendChild(i.createTextNode(r)),h.style.paddingLeft="7px",h.style.paddingRight="7px",a.addEvent(h,"mouseover",function(){this.style.backgroundColor=e.highlightfillcolor},h),a.addEvent(h,"mouseover",function(){this.style.backgroundColor=e.highlightfillcolor},h),a.addEvent(h,"mouseout",function(){this.style.backgroundColor=e.fillcolor},h),a.addEvent(h,"click",function(e){return o.bind(l,t)(),!1},t),a.addEvent(h,"mouseup",n,t),a.addEvent(h,"mousedown",n,t),a.addEvent(h,"touchend",n,t),a.addEvent(h,"touchstart",n,t)};a.isBrowser&&"no"!==this.type&&((s=(i=t.containerObj.ownerDocument).createElement("div")).setAttribute("id",t.containerObj.id+"_navigationbar"),s.style.color=e.strokecolor,s.style.backgroundColor=e.fillcolor,s.style.padding=e.padding,s.style.position=e.position,s.style.fontSize=e.fontsize,s.style.cursor=e.cursor,s.style.zIndex=e.zindex,t.containerObj.appendChild(s),s.style.right=e.right,s.style.bottom=e.bottom,t.attr.showscreenshot&&r(t.attr.screenshot.symbol,function(){setTimeout(function(){t.renderer.screenshot(t,"",!1)},330)}),t.attr.showreload&&r("\u21bb",function(){t.reload()}),t.attr.showcleartraces&&r("\u2297",function(){t.clearTraces()}),t.attr.shownavigation&&(t.attr.showzoom&&(r("\u2013",t.zoomOut),r("o",t.zoom100),r("+",t.zoomIn)),r("\u2190",t.clickLeftArrow),r("\u2193",t.clickUpArrow),r("\u2191",t.clickDownArrow),r("\u2192",t.clickRightArrow)))},getElementById:function(t){return o.exists(this.container)?this.container.ownerDocument.getElementById(this.container.id+"_"+t):""},removeToInsertLater:function(t){var e=t.parentNode,i=t.nextSibling;return e.removeChild(t),function(){i?e.insertBefore(t,i):e.appendChild(t)}},resize:function(t,e){},createTouchpoints:function(t){},showTouchpoint:function(t){},hideTouchpoint:function(t){},updateTouchpoint:function(t,e){},dumpToCanvas:function(t){},screenshot:function(t){}}),t.AbstractRenderer}),define("renderer/no",["jxg","renderer/abstract"],function(t,e){"use strict";return t.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},t.extend(t.NoRenderer.prototype,{drawPoint:function(t){},updatePoint:function(t){},changePointStyle:function(t){},drawLine:function(t){},updateLine:function(t){},drawTicks:function(t){},updateTicks:function(t){},drawCurve:function(t){},updateCurve:function(t){},drawEllipse:function(t){},updateEllipse:function(t){},drawPolygon:function(t){},updatePolygon:function(t){},displayCopyright:function(t,e){},drawInternalText:function(t){},updateInternalText:function(t){},drawText:function(t){},updateText:function(t){},updateTextStyle:function(t,e){},updateInternalTextStyle:function(t,e,i){},drawImage:function(t){},updateImage:function(t){},transformImage:function(t,e){},updateImageURL:function(t){},appendChildPrim:function(t,e){},appendNodesToElement:function(t,e){},createPrim:function(t,e){return null},remove:function(t){},makeArrows:function(t){},updateEllipsePrim:function(t,e,i,s,n){},updateLinePrim:function(t,e,i,s,n,r){},updatePathPrim:function(t,e,i){},updatePathStringPoint:function(t,e,i){},updatePathStringPrim:function(t){},updatePathStringBezierPrim:function(t){},updatePolygonPrim:function(t,e){},updateRectPrim:function(t,e,i,s,n){},setPropertyPrim:function(t,e,i){},display:function(t,e){t&&(t.visPropOld.visible=e)},show:function(t){},hide:function(t){},setBuffering:function(t,e){},setDashStyle:function(t){},setDraft:function(t){},removeDraft:function(t){},setGradient:function(t){},updateGradient:function(t){},setObjectTransition:function(t,e){},setObjectFillColor:function(t,e,i){},setObjectStrokeColor:function(t,e,i){},setObjectStrokeWidth:function(t,e){},setShadow:function(t){},highlight:function(t){},noHighlight:function(t){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(t){},getElementById:function(t){return null},resize:function(t,e){},removeToInsertLater:function(){return function(){}}}),t.NoRenderer.prototype=new e,t.NoRenderer}),define("reader/file",["jxg","utils/env","utils/type","utils/encoding","utils/base64"],function(t,e,i,s,n){"use strict";return t.FileReader={parseFileContent:function(e,r,o,a,l){var h=!1;i.exists(a)||(a=!0);try{h=new XMLHttpRequest,"raw"===o.toLowerCase()?h.overrideMimeType("text/plain; charset=iso-8859-1"):h.overrideMimeType("text/xml; charset=iso-8859-1")}catch(t){try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){h=!1}}}if(h){h.open("GET",e,a),this.cbp="raw"===o.toLowerCase()?function(){4===h.readyState&&r(h.responseText)}:function(){var t=h,e="";4===t.readyState&&(e=!i.exists(t.responseStream)||"PK"!==t.responseText.slice(0,2)&&31!==s.asciiCharCodeAt(t.responseText.slice(0,1),0)?t.responseText:n.decode(jxgBinFileReader(t)),this.parseString(e,r,o,l))},this.cb=i.bind(this.cbp,this),h.onreadystatechange=this.cb;try{h.send(null)}catch(t){throw new Error("JSXGraph: A problem occurred while trying to read '"+e+"'.")}}else t.debug("AJAX not activated!")},parseString:function(e,s,n,r){var o;if(n=n.toLowerCase(),!i.exists(o=t.readers[n]))throw new Error("JSXGraph: There is no reader available for '"+n+"'.");new o(s,e).read(),i.isFunction(r)&&r(s)}},!e.isMetroApp()&&e.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n<\/script>\n'),t.FileReader}),define("parser/geonext",["jxg","base/constants","utils/type"],function(t,e,i){"use strict";return t.GeonextParser={replacePow:function(t){var e,i,s,n,r,o,a,l,h,c,d,u;for(c=(t=t.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),n=-1;c>=0&&c<t.length-1;){if(n===c)throw new Error("JSXGraph: Error while parsing expression '"+t+"'");if(n=c,h=t.slice(0,c),d=t.slice(c+1),")"===h.charAt(h.length-1)){for(e=1,i=h.length-2;i>=0&&e>0;)")"===(s=h.charAt(i))?e++:"("===s&&(e-=1),i-=1;if(0!==e)throw new Error("JSXGraph: Missing '(' in expression");for(r="",a=h.substring(0,i+1),l=i;l>=0&&a.substr(l,1).match(/([\w\.]+)/);)r=RegExp.$1+r,l-=1;r=(r+=h.substring(i+1,h.length)).replace(/([\(\)\+\*\%\^\-\/\]\[])/g,"\\$1")}else r="[\\w\\.]+";if(d.match(/^([\w\.]*\()/)){for(e=1,i=RegExp.$1.length;i<d.length&&e>0;)")"===(s=d.charAt(i))?e-=1:"("===s&&(e+=1),i+=1;if(0!==e)throw new Error("JSXGraph: Missing ')' in expression");o=(o=d.substring(0,i)).replace(/([\(\)\+\*\%\^\-\/\[\]])/g,"\\$1")}else o="[\\w\\.]+";u=new RegExp("("+r+")\\^("+o+")"),c=(t=t.replace(u,"pow($1,$2)")).indexOf("^")}return t},replaceIf:function(t){var e,i,s,n,r,o,a,l,h,c="",d=null,u=null,p=null;if((s=t.indexOf("If("))<0)return t;for(t=t.replace(/""/g,"0");s>=0;){for(e=t.slice(0,s),i=t.slice(s+3),r=1,n=0,o=-1,a=-1;n<i.length&&r>0;)")"===(l=i.charAt(n))?r-=1:"("===l?r+=1:","===l&&1===r&&(o<0?o=n:a=n),n+=1;if(h=i.slice(0,n-1),i=i.slice(n),o<0)return"";if(a<0)return"";d=h.slice(0,o),u=h.slice(o+1,a),p=h.slice(a+1),c+=e+"(("+(d=this.replaceIf(d))+")?("+(u=this.replaceIf(u))+"):("+(p=this.replaceIf(p))+"))",d=null,u=null,s=(t=i).indexOf("If(")}return c+i},replaceNameById:function(t,e,i){var s,n,r,o,a=0,l=["X","Y","L","V"],h=function(t){return i?"$('"+t+"')":t};for(o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(s=t.indexOf(")",a+2))>=0&&(n=(n=t.slice(a+2,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+2)+(i?"$('":"")+h(r.id)+t.slice(s))),s=t.indexOf(")",a+2),a=t.indexOf(l[o]+"(",s);for(a=t.indexOf("Dist(");a>=0;)a>=0&&(s=t.indexOf(",",a+5))>=0&&(n=(n=t.slice(a+5,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+5)+h(r.id)+t.slice(s))),s=t.indexOf(",",a+5),a=t.indexOf(",",s),(s=t.indexOf(")",a+1))>=0&&(n=(n=t.slice(a+1,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(r.id)+t.slice(s))),s=t.indexOf(")",a+1),a=t.indexOf("Dist(",s);for(l=["Deg","Rad"],o=0;o<l.length;o++)for(a=t.indexOf(l[o]+"(");a>=0;)a>=0&&(s=t.indexOf(",",a+4))>=0&&(n=(n=t.slice(a+4,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+4)+h(r.id)+t.slice(s))),s=t.indexOf(",",a+4),a=t.indexOf(",",s),(s=t.indexOf(",",a+1))>=0&&(n=(n=t.slice(a+1,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(r.id)+t.slice(s))),s=t.indexOf(",",a+1),a=t.indexOf(",",s),(s=t.indexOf(")",a+1))>=0&&(n=(n=t.slice(a+1,s)).replace(/\\(['"])?/g,"$1"),(r=e.elementsByName[n])&&(t=t.slice(0,a+1)+h(r.id)+t.slice(s))),s=t.indexOf(")",a+1),a=t.indexOf(l[o]+"(",s);return t},replaceIdByObj:function(t){var e;return(t=(t=(t=(t=(t=t.replace(e,"$('$2').$1()")).replace(e=/(V)\(([\w_]+)\)/g,"$('$2').Value()")).replace(/(Dist)\(([\w_]+),([\w_]+)\)/g,"dist($('$2'), $('$3'))")).replace(/(Deg)\(([\w_]+),([ \w\[\w_]+),([\w_]+)\)/g,"deg($('$2'),$('$3'),$('$4'))")).replace(/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,"rad($('$1'),$('$2'),$('$3'))")).replace(/N\((.+)\)/g,"($1)")},geonext2JS:function(t,e){var i,s,n,r=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],o=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),s=this.replaceNameById(s=t,e),s=this.replaceIf(s),s=this.replacePow(s),s=this.replaceIdByObj(s),n=0;n<r.length;n++)i=new RegExp(["(\\W|^)(",r[n],")"].join(""),"ig"),s=s.replace(i,["$1",o[n]].join(""));return(s=(s=(s=(s=s.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(t,s,n){var r,o,a,l;for(o in i.exists(n)||(n=t.board),r=n.elementsByName)r.hasOwnProperty(o)&&o!==t.name&&(r[o].elementClass===e.OBJECT_CLASS_TEXT&&i.evaluate(r[o].visProp.islabel)||(l=(l=o.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),a=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+l+")(,[\\w\\[\\]'_ ]+)*\\)","g"),s.search(a)>=0&&r[o].addChild(t)))},gxt2jc:function(t,e){return t=(t=(t=t.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),this.replaceNameById(t,e,!0).replace(/True/g,"true").replace(/False/g,"false").replace(/fasle/g,"false")}},t.GeonextParser}),define("base/element",["jxg","base/constants","base/coords","math/math","math/statistics","options","parser/geonext","utils/event","utils/color","utils/type"],function(t,e,i,s,n,r,o,a,l,h){"use strict";return t.GeometryElement=function(t,i,s,n){var r,o,l;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},a.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(o in this.board=t,this.type=s,this._org_type=s,this.elementClass=n||e.OBJECT_CLASS_OTHER,this.id=i.id,h.exists(r=i.name)||(r=this.board.generateName(this)),""!==r&&(this.board.elementsByName[r]=this),this.name=r,this.needsRegularUpdate=i.needsregularupdate,h.clearVisPropOld(this),l=this.resolveShortcuts(i))l.hasOwnProperty(o)&&this._set(o,l[o]);this.visProp.draft=l.draft&&l.draft.draft,this.visProp.gradientangle="270",this.visProp.gradientsecondopacity=h.evaluate(this.visProp.fillopacity),this.visProp.gradientpositionx=.5,this.visProp.gradientpositiony=.5}},t.extend(t.GeometryElement.prototype,{addChild:function(t){var e,i;for(e in this.childElements[t.id]=t,this.addDescendants(t),t.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(e))for(i in this.descendants[e].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(i)&&(this.descendants[e].ancestors[this.ancestors[i].id]=this.ancestors[i]);for(e in this.ancestors)if(this.ancestors.hasOwnProperty(e))for(i in this.descendants)this.descendants.hasOwnProperty(i)&&(this.ancestors[e].descendants[this.descendants[i].id]=this.descendants[i]);return this},addDescendants:function(t){var e;for(e in this.descendants[t.id]=t,t.childElements)t.childElements.hasOwnProperty(e)&&this.addDescendants(t.childElements[e]);return this},addParents:function(t){var e,i,s;for(i=(s=h.isArray(t)?t:arguments).length,e=0;e<i;++e)h.exists(s[e])&&(h.isId(this.board,s[e])?this.parents.push(s[e]):h.exists(s[e].id)&&this.parents.push(s[e].id));this.parents=h.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},removeChild:function(t){return delete this.childElements[t.id],this.removeDescendants(t),delete t.ancestors[this.id],this},removeDescendants:function(t){var e;for(e in delete this.descendants[t.id],t.childElements)t.childElements.hasOwnProperty(e)&&this.removeDescendants(t.childElements[e]);return this},countChildren:function(){var t,e,i=0;for(t in e=this.childElements)e.hasOwnProperty(t)&&t.indexOf("Label")<0&&i++;return i},getName:function(){return this.name},addTransform:function(t){return this},draggable:function(){return this.isDraggable&&!h.evaluate(this.visProp.fixed)&&this.type!==e.OBJECT_TYPE_GLIDER},setPosition:function(t,i){var s,n,r,o,a=[];if(!h.exists(this.parents))return this;for(r=this.parents.length,n=0;n<r;++n)if(s=this.board.select(this.parents[n]),h.isPoint(s)){if(!s.draggable())return this;a.push(s)}for(3===i.length&&(i=i.slice(1)),o=this.board.create("transform",i,{type:"translate"}),(r=a.length)>0?o.applyOnce(a):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(o):this.addTransform(o),n=0;n<r;++n)a[n].type===e.OBJECT_TYPE_GLIDER&&a[n].updateGlider();return this},setPositionDirectly:function(t,s,r){var o=new i(t,s,this.board,!1),a=new i(t,r,this.board,!1),l=n.subtract(o.usrCoords,a.usrCoords);return this.setPosition(e.COORDS_BY_USER,l),this},generatePolynomial:function(){return[]},animate:function(t,e,i){i=i||{};var s,n,r,o=Math.ceil(e/this.board.attr.animationdelay),a=this,c=function(t,e,i,s){var n,l;if(t=parseFloat(t),e=parseFloat(e),!isNaN(t)&&!isNaN(e))for(l=(e-t)/o,a.animationData[i]=[],r=0;r<o;r++)n=t+(r+1)*l,a.animationData[i][o-r-1]=s?Math.floor(n):n};for(s in this.animationData={},t)if(t.hasOwnProperty(s))switch(n=s.toLowerCase()){case"strokecolor":case"fillcolor":!function(t,e,i){var s,n,h,c,d;for(s=l.rgb2hsv(t),h=((n=l.rgb2hsv(e))[0]-s[0])/o,c=(n[1]-s[1])/o,d=(n[2]-s[2])/o,a.animationData[i]=[],r=0;r<o;r++)a.animationData[i][o-r-1]=l.hsv2rgb(s[0]+(r+1)*h,s[1]+(r+1)*c,s[2]+(r+1)*d)}(this.visProp[n],t[s],n);break;case"size":if(!h.isPoint(this))break;c(this.visProp[n],t[s],n,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":c(this.visProp[n],t[s],n,!1)}return this.animationCallback=i.callback,this.board.addAnimation(this),this},update:function(){return h.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(t){return this.prepareUpdate().update().updateVisibility(t).updateRenderer()},setDisplayRendNode:function(t){var e,i,s,n,r;if(void 0===t&&(t=this.visPropCalc.visible),t===this.visPropOld.visible)return this;for(this.board.renderer.display(this,t),i=this.inherits.length,s=0;s<i;s++)if(h.isArray(r=this.inherits[s]))for(n=r.length,e=0;e<n;e++)h.exists(r[e])&&h.exists(r[e].rendNode)&&"inherit"===h.evaluate(r[e].visProp.visible)&&r[e].setDisplayRendNode(t);else h.exists(r)&&h.exists(r.rendNode)&&"inherit"===h.evaluate(r.visProp.visible)&&r.setDisplayRendNode(t);return this.hasLabel&&h.exists(this.label)&&h.exists(this.label.rendNode)&&"inherit"===h.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(t),this},hideElement:function(){return t.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=this.visProp.visible=!1,this.board.renderer.display(this,!1),h.exists(this.label)&&this.hasLabel&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement()),this},showElement:function(){return t.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=this.visProp.visible=!0,this.board.renderer.display(this,!0),h.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},updateVisibility:function(t){var e,i,s,n,r,o;if(this.needsUpdate){for(void 0!==t?this.visPropCalc.visible=t:(o=h.evaluate(this.visProp.visible),h.exists(this.hiddenByParent)&&this.hiddenByParent&&(o=!1),"inherit"!==o&&(this.visPropCalc.visible=o)),i=this.inherits.length,s=0;s<i;s++)if(h.isArray(r=this.inherits[s]))for(n=r.length,e=0;e<n;e++)h.exists(r[e])&&"inherit"===h.evaluate(r[e].visProp.visible)&&r[e].prepareUpdate().updateVisibility(this.visPropCalc.visible);else h.exists(r)&&"inherit"===h.evaluate(r.visProp.visible)&&r.prepareUpdate().updateVisibility(this.visPropCalc.visible);h.exists(this.label)&&h.exists(this.label.visProp)&&h.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(t,e){t=t.toLocaleLowerCase(),this.visProp.hasOwnProperty(t)&&t.indexOf("color")>=0&&h.isString(e)&&9===e.length&&"#"===e.charAt(0)?(e=l.rgba2rgbo(e),this.visProp[t]=e[0],this.visProp[t.replace("color","opacity")]=e[1]):this.visProp[t]=e},resolveShortcuts:function(t){var e,i;for(e in r.shortcuts)if(r.shortcuts.hasOwnProperty(e)&&h.exists(t[e]))for(i=0;i<r.shortcuts[e].length;i++)h.exists(t[r.shortcuts[e][i]])||(t[r.shortcuts[e][i]]=t[e]);return t},setLabel:function(t){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(t)},setLabelText:function(t){return h.exists(this.label)&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(t)),this},setName:function(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(t),this.setAttribute({name:t})},setProperty:function(){t.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(i){var s,n,r,o,a,c,d,u,p,f={};for(s=0;s<arguments.length;s++)h.isString(c=arguments[s])?(u=c.split(":"),f[h.trim(u[0])]=h.trim(u[1])):h.isArray(c)?f[c[0]]=c[1]:t.extend(f,c);for(s in f=this.resolveShortcuts(f))if(f.hasOwnProperty(s)){if(o=s.replace(/\s+/g,"").toLowerCase(),p=this.visProp[o],h.isObject(a=f[s])&&h.exists(this.visProp[o])){if(this.visProp[o]=h.merge(this.visProp[o],a),this.type===e.OBJECT_TYPE_TICKS&&h.exists(this.labels))for(r=this.labels.length,n=0;n<r;n++)this.labels[n].setAttribute(a);continue}switch(o){case"name":p=this.name,delete this.board.elementsByName[this.name],this.name=a,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===a||!1===a),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":d=(a=l.rgba2rgbo(a))[1],a=a[0],0===d&&h.exists(this.label)&&this.hasLabel&&this.label.hideElement(),h.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=a,this.board.renderer.setObjectStrokeColor(this.label,a,d)),this.elementClass===e.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=a,this.visProp.strokeopacity=d,this.board.renderer.setObjectStrokeColor(this,a,d));break;case"infoboxtext":this.infoboxText=!!h.isString(a)&&a;break;case"visible":this.visProp.visible="false"!==a&&("true"===a||a),this.setDisplayRendNode(h.evaluate(this.visProp.visible));break;case"face":h.isPoint(this)&&(this.visProp.face=a,this.board.renderer.changePointStyle(this));break;case"trace":"false"===a||!1===a?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace=!0;break;case"gradient":this.visProp.gradient=a,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":a=l.rgba2rgbo(a),this.visProp.gradientsecondcolor=a[0],this.visProp.gradientsecondopacity=a[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=a,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=a,h.evaluate(a)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=a;break;case"radius":this.type!==e.OBJECT_TYPE_ANGLE&&this.type!==e.OBJECT_TYPE_SECTOR||this.setRadius(a);break;case"rotate":(this.elementClass===e.OBJECT_CLASS_TEXT&&"internal"===h.evaluate(this.visProp.display)||this.type===e.OBJECT_TYPE_IMAGE)&&this.addRotation(a);break;case"ticksdistance":this.type===e.OBJECT_TYPE_TICKS&&h.isNumber(a)&&(this.ticksFunction=this.makeTicksFunction(a));break;case"generatelabelvalue":this.type===e.OBJECT_TYPE_TICKS&&h.isFunction(a)&&(this.generateLabelValue=a);break;case"onpolygon":this.type===e.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!a);break;case"disabled":h.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!a);break;case"checked":h.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!a);break;case"maxlength":h.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!a);break;default:h.exists(this.visProp[o])&&(!t.Validator[o]||t.Validator[o]&&t.Validator[o](a)||t.Validator[o]&&h.isFunction(a)&&t.Validator[o](a()))&&(a=(!a.toLowerCase||"false"!==a.toLowerCase())&&a,this._set(o,a))}this.triggerEventHandlers(["attribute:"+o],[p,a,this])}return this.triggerEventHandlers(["attribute"],[f,this]),h.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){t.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(t){var e;switch(t=t.toLowerCase()){case"needsregularupdate":e=this.needsRegularUpdate;break;case"labelcolor":e=this.label.visProp.strokecolor;break;case"infoboxtext":e=this.infoboxText;break;case"withlabel":e=this.hasLabel;break;default:e=this.visProp[t]}return e},setDash:function(t){return this.setAttribute({dash:t}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new i(e.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new i(e.COORDS_BY_USER,[0,0],this.board)},setArrow:function(t,i){return this.visProp.firstarrow=t,this.visProp.lastarrow=i,i&&(this.type=e.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var t=h.evaluate(this.visProp.gradient);"linear"!==t&&"radial"!==t||this.board.renderer.setGradient(this)},createLabel:function(){var e,i=this;return t.elements.text?((e=h.deepCopy(this.visProp.label,null)).id=this.id+"Label",e.isLabel=!0,e.anchor=this,e.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=t.elements.text(this.board,[0,0,function(){return h.isFunction(i.name)?i.name():i.name}],e),this.label.needsUpdate=!0,this.label.dump=!1,this.label.update(),this.hasLabel=!0)):t.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(t){return t=h.def(t,!1),!h.evaluate(this.visProp.highlight)||this.highlighted&&!t||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var t;for(t in this.traces)this.traces.hasOwnProperty(t)&&this.board.renderer.remove(this.traces[t]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=s.normalize(this.stdform),this},toJSON:function(){var t,e,i=['{"name":',this.name];for(e in i.push(', "id":'+this.id),t=[],this.visProp)this.visProp.hasOwnProperty(e)&&h.exists(this.visProp[e])&&t.push('"'+e+'":'+this.visProp[e]);return i.push(', "visProp":{'+t.toString()+"}"),i.push("}"),i.join("")},addRotation:function(t){var i,s,n,r,o,a=this;return(this.elementClass===e.OBJECT_CLASS_TEXT&&"internal"===h.evaluate(this.visProp.display)||this.type===e.OBJECT_TYPE_IMAGE)&&0!==t&&(i=this.board.create("transform",[function(){return-a.X()},function(){return-a.Y()}],{type:"translate"}),s=this.board.create("transform",[function(){return a.X()},function(){return a.Y()}],{type:"translate"}),n=this.board.create("transform",[function(){return a.board.unitX/a.board.unitY},function(){return 1}],{type:"scale"}),r=this.board.create("transform",[function(){return a.board.unitY/a.board.unitX},function(){return 1}],{type:"scale"}),o=this.board.create("transform",[t*Math.PI/180],{type:"rotate"}),i.bindTo(this),n.bindTo(this),o.bindTo(this),r.bindTo(this),s.bindTo(this)),this},highlightStrokeColor:function(e){return t.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:e}),this},strokeColor:function(e){return t.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:e}),this},strokeWidth:function(e){return t.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:e}),this},fillColor:function(e){return t.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:e}),this},highlightFillColor:function(e){return t.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:e}),this},labelColor:function(e){return t.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:e}),this},dash:function(e){return t.deprecated("dash()","setAttribute()"),this.setAttribute({dash:e}),this},visible:function(e){return t.deprecated("visible()","setAttribute()"),this.setAttribute({visible:e}),this},shadow:function(e){return t.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:e}),this},getType:function(){return this.elType},getParents:function(){return h.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var t,e=h.deepCopy(this.visProp),i=[],s=i.length;for(e.id=this.id,e.name=this.name,t=0;t<s;t++)delete e[i[t]];return e},hasPoint:function(t,e){return!1},handleSnapToGrid:function(t,i){var s,n,r,o,a=h.evaluate(this.visProp.snapsizex),l=h.evaluate(this.visProp.snapsizey);return h.exists(this.coords)?((h.evaluate(this.visProp.snaptogrid)||!0===t)&&(s=this.coords.usrCoords[1],n=this.coords.usrCoords[2],a<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(a=(r=this.board.defaultAxes.x.defaultTicks).ticksDelta*(h.evaluate(r.visProp.minorticks)+1)),l<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(l=(r=this.board.defaultAxes.y.defaultTicks).ticksDelta*(h.evaluate(r.visProp.minorticks)+1)),a>0&&l>0&&(o=this.board.getBoundingBox(),s=Math.round(s/a)*a,n=Math.round(n/l)*l,i||(s<o[0]?s+=a:s>o[2]&&(s-=a),n<o[3]?n+=l:n>o[1]&&(n-=l)),this.coords.setCoordinates(e.COORDS_BY_USER,[s,n]))),this):this},addEvent:t.shortcut(t.GeometryElement.prototype,"on"),removeEvent:t.shortcut(t.GeometryElement.prototype,"off"),__evt__over:function(t){},__evt__mouseover:function(t){},__evt__out:function(t){},__evt__mouseout:function(t){},__evt__move:function(t){},__evt__mousemove:function(t){},__evt__drag:function(t){},__evt__mousedrag:function(t){},__evt__touchdrag:function(t){},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__touchdown:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__touchup:function(t){},__evt__attribute:function(t,e){},__evt__attribute_:function(t,e,i){},__evt:function(){}}),t.GeometryElement}),define("base/transformation",["jxg","base/constants","math/math","utils/type"],function(t,e,i,s){"use strict";return t.Transformation=function(t,i,s){this.elementClass=e.OBJECT_CLASS_OTHER,this.type=e.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=t,this.isNumericMatrix=!1,this.setMatrix(t,i,s),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bind",melt:"melt"}},t.Transformation.prototype={},t.extend(t.Transformation.prototype,{update:function(){return this},setMatrix:function(t,e,n){var r;for(this.isNumericMatrix=!0,r=0;r<n.length;r++)if("number"!=typeof n[r]){this.isNumericMatrix=!1;break}if("translate"===e){if(2!==n.length)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=s.createEvalFunction(t,n,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===e){if(2!==n.length)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=s.createEvalFunction(t,n,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===e)n.length<4&&(n[0]=t.select(n[0])),2===n.length&&(n[1]=t.select(n[1])),4===n.length&&(this.evalParam=s.createEvalFunction(t,n,4)),this.update=function(){var t,e,s,r,o,a,l,h;1===n.length?l=n[0].stdform:2===n.length?l=i.crossProduct(n[1].coords.usrCoords,n[0].coords.usrCoords):4===n.length&&(l=i.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),r=(h=[-(s=l[0])*(t=l[1]),-s*(e=l[2]),t*t+e*e])[0]/h[2],o=h[1]/h[2],this.matrix[1][1]=((t=-l[2])*t-(e=l[1])*e)/(a=h[2]),this.matrix[1][2]=2*t*e/a,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=r*(1-this.matrix[1][1])-o*this.matrix[1][2],this.matrix[2][0]=o*(1-this.matrix[2][2])-r*this.matrix[2][1]};else if("rotate"===e)3===n.length?this.evalParam=s.createEvalFunction(t,n,3):n.length>0&&n.length<=2&&(this.evalParam=s.createEvalFunction(t,n,1),2!==n.length||s.isArray(n[1])||(n[1]=t.select(n[1]))),this.update=function(){var t,e,i=this.evalParam(0),r=Math.cos(i),o=Math.sin(i);this.matrix[1][1]=r,this.matrix[1][2]=-o,this.matrix[2][1]=o,this.matrix[2][2]=r,n.length>1&&(3===n.length?(t=this.evalParam(1),e=this.evalParam(2)):s.isArray(n[1])?(t=n[1][0],e=n[1][1]):(t=n[1].X(),e=n[1].Y()),this.matrix[1][0]=t*(1-r)+e*o,this.matrix[2][0]=e*(1-r)-t*o)};else if("shear"===e){if(2!==n.length)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=s.createEvalFunction(t,n,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===e){if(9!==n.length)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=s.createEvalFunction(t,n,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(t,e){return this.update(),s.exists(e)?i.matVecMult(this.matrix,t.initialCoords.usrCoords):i.matVecMult(this.matrix,t.coords.usrCoords)},applyOnce:function(t){var n,r,o;for(s.isArray(t)||(t=[t]),r=t.length,o=0;o<r;o++)this.update(),n=i.matVecMult(this.matrix,t[o].coords.usrCoords),t[o].coords.setCoordinates(e.COORDS_BY_USER,n)},bindTo:function(t){var e,i;if(s.isArray(t))for(i=t.length,e=0;e<i;e++)t[e].transformations.push(this);else t.transformations.push(this)},setProperty:function(e){t.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(t){},melt:function(t){var e,i,s,n,r,o,a=[];for(i=t.matrix.length,s=this.matrix[0].length,e=0;e<i;e++)a[e]=[];for(this.update(),t.update(),e=0;e<i;e++)for(o=0;o<s;o++){for(r=0,n=0;n<i;n++)r+=t.matrix[e][n]*this.matrix[n][o];a[e][o]=r}return this.update=function(){var t=this.matrix.length,i=this.matrix[0].length;for(e=0;e<t;e++)for(o=0;o<i;o++)this.matrix[e][o]=a[e][o]},this},getParents:function(){var t=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(t=this.parents),t}}),t.createTransform=function(e,i,s){return new t.Transformation(e,s.type,i)},t.registerElement("transform",t.createTransform),{Transformation:t.Transformation,createTransform:t.createTransform}}),define("base/coordselement",["jxg","options","math/math","math/geometry","math/numerics","math/statistics","base/coords","base/constants","base/element","parser/geonext","utils/type","base/transformation"],function(t,e,i,s,n,r,o,a,l,h,c,d){"use strict";return t.CoordsElement=function(t,e){var i;for(c.exists(t)||(t=[1,0,0]),i=0;i<t.length;++i)t[i]=parseFloat(t[i]);this.coords=new o(a.COORDS_BY_USER,t,this.board),this.initialCoords=new o(a.COORDS_BY_USER,t,this.board),this.position=null,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.updateConstraint=function(){return this},this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=c.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",onPolygon:"onPolygon"}),c.exists(this.element)&&this.addAnchor(t,e),this.isDraggable=!0},t.extend(t.CoordsElement.prototype,{updateCoords:function(t){return this.needsUpdate?(c.exists(t)||(t=!1),this.type===a.OBJECT_TYPE_GLIDER&&(t?this.updateGliderFromParent():this.updateGlider()),c.evaluate(this.visProp.frozen)||this.updateConstraint(),this.updateTransform(),this):this},updateGlider:function(){var t,e,n,r,l,h,d,u,p,f,m,g,b,y,v,C,x,_=2*Math.PI,P=!1,S=this.slideObject;if(this.needsUpdateFromParent=!1,S.elementClass===a.OBJECT_CLASS_CIRCLE)c.evaluate(this.visProp.isgeonext)&&(_=1),v=s.projectPointToCircle(this,S,this.board),C=s.rad([S.center.X()+1,S.center.Y()],S.center,this)/_;else if(S.elementClass===a.OBJECT_CLASS_LINE){if(this.onPolygon){if(r=(n=S.point2.coords.usrCoords)[t=1]-(e=S.point1.coords.usrCoords)[t],Math.abs(r)<i.eps&&(r=n[t=2]-e[t]),d=s.projectPointToLine(this,S,this.board),h=S.parentPolygon,(u=(d.usrCoords[t]-e[t])/r)<0){for(t=0;t<h.borders.length;t++)if(S===h.borders[t]){S=h.borders[(t-1+h.borders.length)%h.borders.length];break}}else if(u>1)for(t=0;t<h.borders.length;t++)if(S===h.borders[t]){S=h.borders[(t+1+h.borders.length)%h.borders.length];break}S.id!==this.slideObject.id&&(this.slideObject=S)}(r=(e=S.point1.coords).distance(a.COORDS_BY_USER,n=S.point2.coords))<i.eps?(v=e,P=!0,C=0):(v=s.projectPointToLine(this,S,this.board),e=e.usrCoords.slice(0),n=n.usrCoords.slice(0),Math.abs(n[0])<i.eps?(r=n[t=1],Math.abs(r)<i.eps&&(r=n[t=2]),C=((r=(v.usrCoords[t]-e[t])/r)>=0?1:-1)*(r=Math.abs(r))/(r+1)):Math.abs(e[0])<i.eps?(r=e[t=1],Math.abs(r)<i.eps&&(r=e[t=2]),C=(r=(v.usrCoords[t]-n[t])/r)<0?(1-2*r)/(1-r):1/(r+1)):(r=n[t=1]-e[t],Math.abs(r)<i.eps&&(r=n[t=2]-e[t]),C=(v.usrCoords[t]-e[t])/r)),x=c.evaluate(this.visProp.snapwidth),c.evaluate(x)>0&&Math.abs(this._smax-this._smin)>=i.eps&&(l=(C=Math.max(Math.min(C,1),0))*(this._smax-this._smin)+this._smin,C=((l=Math.round(l/x)*x)-this._smin)/(this._smax-this._smin),this.update(!0)),e=S.point1.coords,!c.evaluate(S.visProp.straightfirst)&&Math.abs(e.usrCoords[0])>i.eps&&C<0&&(v=e,P=!0,C=0),n=S.point2.coords,!c.evaluate(S.visProp.straightlast)&&Math.abs(n.usrCoords[0])>i.eps&&C>1&&(v=n,P=!0,C=1)}else S.type===a.OBJECT_TYPE_TURTLE?(this.updateConstraint(),v=s.projectPointToTurtle(this,S,this.board),C=this.position):S.elementClass===a.OBJECT_CLASS_CURVE?S.type===a.OBJECT_TYPE_ARC||S.type===a.OBJECT_TYPE_SECTOR?(v=s.projectPointToCircle(this,S,this.board),m=s.rad(S.radiuspoint,S.center,this),p=0,f=s.rad(S.radiuspoint,S.center,S.anglepoint),C=m,("minor"===(x=c.evaluate(S.visProp.selection))&&f>Math.PI||"major"===x&&f<Math.PI)&&(p=f,f=2*Math.PI),(m<p||m>f)&&(C=f,(m<p&&m>.5*p||m>f&&m>.5*f+Math.PI)&&(C=p),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),_=f-p,this.visProp.isgeonext&&(_=1),Math.abs(_)>i.eps&&(C/=_)):(this.updateConstraint(),S.transformations.length>0?(S.updateTransformMatrix(),y=i.inverse(S.transformMat),b=i.matVecMult(y,this.coords.usrCoords),g=new o(a.COORDS_BY_USER,b,this.board).usrCoords,v=(b=s.projectCoordsToCurve(g[1],g[2],this.position||0,S,this.board))[0],C=b[1]):(v=s.projectPointToCurve(this,S,this.board),C=this.position)):c.isPoint(S)&&(v=s.projectPointToPoint(this,S,this.board),C=this.position);this.coords.setCoordinates(a.COORDS_BY_USER,v.usrCoords,P),this.position=C},updateGliderFromParent:function(){var t,e,n,r,o,l,h,d,u,p=this.slideObject,f=2*Math.PI;this.needsUpdateFromParent?(p.elementClass===a.OBJECT_CLASS_CIRCLE?(n=p.Radius(),c.evaluate(this.visProp.isgeonext)&&(f=1),o=[p.center.X()+n*Math.cos(this.position*f),p.center.Y()+n*Math.sin(this.position*f)]):p.elementClass===a.OBJECT_CLASS_LINE?(e=p.point2.coords.usrCoords,0===(t=p.point1.coords.usrCoords)[0]&&0===t[1]&&0===t[2]||0===e[0]&&0===e[1]&&0===e[2]?o=[0,0,0]:Math.abs(e[0])<i.eps?(r=Math.min(Math.abs(this.position),1-i.eps),r/=1-r,this.position<0&&(r=-r),o=[t[0]+r*e[0],t[1]+r*e[1],t[2]+r*e[2]]):Math.abs(t[0])<i.eps?(r=Math.max(this.position,i.eps),r=Math.min(r,2-i.eps),o=[e[0]+(r=r>1?(r-1)/(r-2):(1-r)/r)*t[0],e[1]+r*t[1],e[2]+r*t[2]]):o=[t[0]+(r=this.position)*(e[0]-t[0]),t[1]+r*(e[1]-t[1]),t[2]+r*(e[2]-t[2])]):p.type===a.OBJECT_TYPE_TURTLE?(this.coords.setCoordinates(a.COORDS_BY_USER,[p.Z(this.position),p.X(this.position),p.Y(this.position)]),this.updateConstraint(),o=s.projectPointToTurtle(this,p,this.board).usrCoords):p.elementClass===a.OBJECT_CLASS_CURVE?(this.coords.setCoordinates(a.COORDS_BY_USER,[p.Z(this.position),p.X(this.position),p.Y(this.position)]),p.type===a.OBJECT_TYPE_ARC||p.type===a.OBJECT_TYPE_SECTOR?(l=s.rad([p.center.X()+1,p.center.Y()],p.center,p.radiuspoint),h=0,u=s.rad(p.radiuspoint,p.center,p.anglepoint),("minor"===p.visProp.selection&&u>Math.PI||"major"===p.visProp.selection&&u<Math.PI)&&(h=u,u=2*Math.PI),f=u-h,c.evaluate(this.visProp.isgeonext)&&(f=1),((d=this.position*f)<h||d>u)&&(((d=u)<h&&d>.5*h||d>u&&d>.5*u+Math.PI)&&(d=h),this.position=d,Math.abs(f)>i.eps&&(this.position/=f)),n=p.Radius(),o=[p.center.X()+n*Math.cos(this.position*f+l),p.center.Y()+n*Math.sin(this.position*f+l)]):(this.updateConstraint(),o=s.projectPointToCurve(this,p,this.board).usrCoords)):c.isPoint(p)&&(o=s.projectPointToPoint(this,p,this.board).usrCoords),this.coords.setCoordinates(a.COORDS_BY_USER,o,!1)):this.needsUpdateFromParent=!0},updateRendererGeneric:function(t){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>i.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[t](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(t){return this.isReal&&t.isReal?this.coords.distance(a.COORDS_BY_USER,t.coords):NaN},snapToGrid:function(t){return this.handleSnapToGrid(t)},handleSnapToPoints:function(t){var e,i,n,r,o,l,h,d,u=0,p=1/0,f=null,m=c.evaluate(this.visProp.ignoredsnaptopoints),g=!1;if(r=this.board.objectsList.length,m&&(h=m.length),c.evaluate(this.visProp.snaptopoints)||t){for(o=c.evaluate(this.visProp.attractorunit),l=c.evaluate(this.visProp.attractordistance),e=0;e<r;e++){if(i=this.board.objectsList[e],m){for(g=!1,d=0;d<h;d++)if(i==this.board.select(m[d])){g=!0;break}if(g)continue}c.isPoint(i)&&i!==this&&i.visPropCalc.visible&&(u=(n=s.projectPointToPoint(this,i,this.board)).distance("screen"===o?a.COORDS_BY_SCREEN:a.COORDS_BY_USER,this.coords))<l&&u<p&&(p=u,f=n)}null!==f&&this.coords.setCoordinates(a.COORDS_BY_USER,f.usrCoords)}return this},snapToPoints:function(t){return this.handleSnapToPoints(t)},handleAttractors:function(){var t,e,i,n,r=0,l=c.evaluate(this.visProp.attractorunit),h=c.evaluate(this.visProp.attractordistance),d=c.evaluate(this.visProp.snatchdistance),u=c.evaluate(this.visProp.attractors),p=u.length;if(0!==h){for(t=0;t<p;t++)if(e=this.board.select(u[t]),c.exists(e)&&e!==this){if(c.isPoint(e)?i=s.projectPointToPoint(this,e,this.board):e.elementClass===a.OBJECT_CLASS_LINE?(n=s.projectCoordsToSegment(this.coords.usrCoords,e.point1.coords.usrCoords,e.point2.coords.usrCoords),i=!c.evaluate(e.visProp.straightfirst)&&n[1]<0?e.point1.coords:!c.evaluate(e.visProp.straightlast)&&n[1]>1?e.point2.coords:new o(a.COORDS_BY_USER,n[0],this.board)):e.elementClass===a.OBJECT_CLASS_CIRCLE?i=s.projectPointToCircle(this,e,this.board):e.elementClass===a.OBJECT_CLASS_CURVE?i=s.projectPointToCurve(this,e,this.board):e.type===a.OBJECT_TYPE_TURTLE&&(i=s.projectPointToTurtle(this,e,this.board)),(r=i.distance("screen"===l?a.COORDS_BY_SCREEN:a.COORDS_BY_USER,this.coords))<h){this.type===a.OBJECT_TYPE_GLIDER&&this.slideObject===e||this.makeGlider(e);break}e===this.slideObject&&r>=d&&this.popSlideObject()}return this}},setPositionDirectly:function(t,e){var s,n,l,h,d=this.coords;if(this.relativeCoords)return n=new o(t,e,this.board),c.evaluate(this.visProp.islabel)?(l=r.subtract(n.scrCoords,d.scrCoords),this.relativeCoords.scrCoords[1]+=l[1],this.relativeCoords.scrCoords[2]+=l[2]):(l=r.subtract(n.usrCoords,d.usrCoords),this.relativeCoords.usrCoords[1]+=l[1],this.relativeCoords.usrCoords[2]+=l[2]),this;for(this.coords.setCoordinates(t,e),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),s=this.transformations.length-1;s>=0;s--)t===a.COORDS_BY_SCREEN?h=new o(t,e,this.board).usrCoords:(2===e.length&&(e=[1].concat(e)),h=e),this.initialCoords.setCoordinates(a.COORDS_BY_USER,i.matVecMult(i.inverse(this.transformations[s].matrix),h));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===a.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(t,e){var i;return e=new o(t,e,this.board),i=this.board.create("transform",e.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(i):this.addTransform(this,i),this.prepareUpdate().update(),this},setPosition:function(t,e){return this.setPositionDirectly(t,e)},setGliderPosition:function(t){return this.type===a.OBJECT_TYPE_GLIDER&&(this.position=t,this.board.update()),this},makeGlider:function(e){var i,s,n,r=this.board.select(e),o=!1;if(r.type===a.OBJECT_TYPE_POLYGON){for(i=Number.MAX_VALUE,s=0;s<r.borders.length;s++)(n=t.Math.Geometry.distPointLine(this.coords.usrCoords,r.borders[s].stdform))<i&&(i=n,e=r.borders[s]);r=this.board.select(e),o=!0}if(!c.exists(r))throw new Error("JSXGraph: slide object undefined.");if(r.type===a.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(e),this.slideObjects.push(this.slideObject),this.addParents(e),this.type=a.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=o,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===a.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===a.OBJECT_CLASS_TEXT?this.elType="text":this.type===a.OBJECT_TYPE_IMAGE&&(this.elType="image"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var t,e;if(this.type!==a.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,this.isDraggable)return;this.isDraggable=!0,this.elementClass===a.OBJECT_CLASS_POINT&&(this.type=a.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(t in this.board.objects)this.board.objects.hasOwnProperty(t)&&(e=this.board.objects[t]).descendants&&(delete e.descendants[this.id],delete e.childElements[this.id],this.hasLabel&&(delete e.descendants[this.label.id],delete e.childElements[this.label.id]));this.ancestors={},this.slideObject=null,this.slideObjects=[],this.elementClass===a.OBJECT_CLASS_POINT?(this.type=a.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===a.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===a.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(t){var e,i,s=[],n=["X","Y"];for(this.elementClass===a.OBJECT_CLASS_POINT&&(this.type=a.OBJECT_TYPE_CAS),this.isDraggable=!1,e=0;e<t.length;e++)c.isString(i=t[e])?(s[e]=this.board.jc.snippet(i,!0,null,!0),2===t.length&&(this[n[e]+"jc"]=t[e])):c.isFunction(i)?s[e]=i:c.isNumber(i)?s[e]=function(t){return function(){return t}}(i):c.isObject(i)&&c.isFunction(i.Value)&&(s[e]=function(t){return function(){return t.Value()}}(i)),s[e].origin=i;return 1===t.length?this.updateConstraint=function(){var t=s[0]();c.isArray(t)?this.coords.setCoordinates(a.COORDS_BY_USER,t):this.coords=t}:2===t.length?(this.XEval=s[0],this.YEval=s[1],this.setParents([s[0].origin,s[1].origin]),this.updateConstraint=function(){this.coords.setCoordinates(a.COORDS_BY_USER,[this.XEval(),this.YEval()])}):(this.ZEval=s[0],this.XEval=s[1],this.YEval=s[2],this.setParents([s[0].origin,s[1].origin,s[2].origin]),this.updateConstraint=function(){this.coords.setCoordinates(a.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])}),this.prepareUpdate().update(),this.board.isSuspendedUpdate||this.updateVisibility().updateRenderer(),this},addAnchor:function(t,e){this.relativeCoords=e?new o(a.COORDS_BY_SCREEN,t.slice(0,2),this.board):new o(a.COORDS_BY_USER,t,this.board),this.element.addChild(this),e&&this.addParents(this.element),this.XEval=function(){var t,e,i=c.evaluate(this.visProp.offset);return c.evaluate(this.visProp.islabel)?(t=parseFloat(i[0]),e=this.element.getLabelAnchor(),new o(a.COORDS_BY_SCREEN,[t+this.relativeCoords.scrCoords[1]+e.scrCoords[1],0],this.board).usrCoords[1]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+e.usrCoords[1])},this.YEval=function(){var t,e,i=c.evaluate(this.visProp.offset);return c.evaluate(this.visProp.islabel)?(t=-parseFloat(i[1]),e=this.element.getLabelAnchor(),new o(a.COORDS_BY_SCREEN,[0,t+this.relativeCoords.scrCoords[2]+e.scrCoords[2]],this.board).usrCoords[2]):(e=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+e.usrCoords[2])},this.ZEval=c.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(a.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.coords=new o(a.COORDS_BY_SCREEN,[0,0],this.board)},updateTransform:function(){var t;if(0===this.transformations.length)return this;for(t=0;t<this.transformations.length;t++)this.transformations[t].update();return this},addTransform:function(t,e){var i,s=c.isArray(e)?e:[e],n=s.length;for(0===this.transformations.length&&(this.baseElement=t),i=0;i<n;i++)this.transformations.push(s[i]);return this},startAnimation:function(t,e){var i=this;return this.type!==a.OBJECT_TYPE_GLIDER||c.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){i._anim(t,e)},250),c.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return c.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(t,e,i){i=i||{};var s,r,o,l,h,d=[],u=[],p=e/this.board.attr.animationdelay,f=function(e,i){return function(){return t[e][i]}};if(c.isArray(t)){for(o=t.length,s=0;s<o;s++)u[s]=c.isPoint(t[s])?t[s]:{elementClass:a.OBJECT_CLASS_POINT,X:f(s,0),Y:f(s,1)};if(0===(e=e||0))return this.setPosition(a.COORDS_BY_USER,[u[u.length-1].X(),u[u.length-1].Y()]),this.board.update(this);if(!c.exists(i.interpolate)||i.interpolate)for(r=n.Neville(u),s=0;s<p;s++)d[s]=[],d[s][0]=r[0]((p-s)/p*r[3]()),d[s][1]=r[1]((p-s)/p*r[3]());else{for(o=t.length-1,s=0;s<p;++s)h=s/p*o-(l=Math.floor(s/p*o)),d[s]=[],d[s][0]=(1-h)*u[l].X()+h*u[l+1].X(),d[s][1]=(1-h)*u[l].Y()+h*u[l+1].Y();d.push([u[o].X(),u[o].Y()]),d.reverse()}this.animationPath=d}else c.isFunction(t)&&(this.animationPath=t,this.animationStart=(new Date).getTime());return this.animationCallback=i.callback,this.board.addAnimation(this),this},moveTo:function(t,e,s){s=s||{},t=new o(a.COORDS_BY_USER,t,this.board);var n,r=Math.ceil(e/this.board.attr.animationdelay),l=[],h=this.coords.usrCoords[1],d=this.coords.usrCoords[2],u=t.usrCoords[1]-h,p=t.usrCoords[2]-d,f=function(t){return s.effect&&"<>"===s.effect?Math.pow(Math.sin(t/r*Math.PI/2),2):t/r};if(!c.exists(e)||0===e||Math.abs(t.usrCoords[0]-this.coords.usrCoords[0])>i.eps)return this.setPosition(a.COORDS_BY_USER,t.usrCoords),this.board.update(this);if(!c.exists(s.callback)&&Math.abs(u)<i.eps&&Math.abs(p)<i.eps)return this;for(n=r;n>=0;n--)l[r-n]=[t.usrCoords[0],h+u*f(n),d+p*f(n)];return this.animationPath=l,this.animationCallback=s.callback,this.board.addAnimation(this),this},visit:function(t,e,i){t=new o(a.COORDS_BY_USER,t,this.board);var s,n,r,l=this.board.attr.animationdelay,h=[],d=this.coords.usrCoords[1],u=this.coords.usrCoords[2],p=t.usrCoords[1]-d,f=t.usrCoords[2]-u,m=function(t){var e=t<r/2?2*t/r:2*(r-t)/r;return i.effect&&"<>"===i.effect?Math.pow(Math.sin(e*Math.PI/2),2):e};for(c.isNumber(i)?i={repeat:i}:c.exists((i=i||{}).repeat)||(i.repeat=1),r=Math.ceil(e/(l*i.repeat)),n=0;n<i.repeat;n++)for(s=r;s>=0;s--)h[n*(r+1)+r-s]=[t.usrCoords[0],d+p*m(s),u+f*m(s)];return this.animationPath=h,this.animationCallback=i.callback,this.board.addAnimation(this),this},_anim:function(t,e){var i,n,r,o,l,h,c,d,u=1;return this.intervalCount+=1,this.intervalCount>e&&(this.intervalCount=0),this.slideObject.elementClass===a.OBJECT_CLASS_LINE?(i=this.slideObject.point1.coords.distance(a.COORDS_BY_SCREEN,this.slideObject.point2.coords),(n=this.slideObject.getSlope())!==1/0?(l=Math.atan(n),r=Math.round(this.intervalCount/e*i*Math.cos(l)),o=Math.round(this.intervalCount/e*i*Math.sin(l))):(r=0,o=Math.round(this.intervalCount/e*i)),t<0?(h=this.slideObject.point2,this.slideObject.point2.coords.scrCoords[1]-this.slideObject.point1.coords.scrCoords[1]>0?u=-1:this.slideObject.point2.coords.scrCoords[1]-this.slideObject.point1.coords.scrCoords[1]==0&&this.slideObject.point2.coords.scrCoords[2]-this.slideObject.point1.coords.scrCoords[2]>0&&(u=-1)):(h=this.slideObject.point1,this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]>0?u=-1:this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]==0&&this.slideObject.point1.coords.scrCoords[2]-this.slideObject.point2.coords.scrCoords[2]>0&&(u=-1)),this.coords.setCoordinates(a.COORDS_BY_SCREEN,[h.coords.scrCoords[1]+u*r,h.coords.scrCoords[2]+u*o])):this.slideObject.elementClass===a.OBJECT_CLASS_CURVE?(c=t>0?Math.round(this.intervalCount/e*this.board.canvasWidth):Math.round((e-this.intervalCount)/e*this.board.canvasWidth),this.coords.setCoordinates(a.COORDS_BY_SCREEN,[c,0]),this.coords=s.projectPointToCurve(this,this.slideObject,this.board)):this.slideObject.elementClass===a.OBJECT_CLASS_CIRCLE&&(l=t<0?this.intervalCount/e*2*Math.PI:(e-this.intervalCount)/e*2*Math.PI,d=this.slideObject.Radius(),this.coords.setCoordinates(a.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+d*Math.cos(l),this.slideObject.center.coords.usrCoords[2]+d*Math.sin(l)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var t=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(t=this.parents),this.type===a.OBJECT_TYPE_GLIDER&&(t=[this.X(),this.Y(),this.slideObject.id]),t}}),t.CoordsElement.create=function(t,e,i,s,n,r){var o,a,l=!1;for(a=0;a<i.length;a++)(c.isFunction(i[a])||c.isString(i[a]))&&(l=!0);if(l)(o=new t(e,[0,0],s,n,r)).addConstraint(i);else if(c.isNumber(i[0])&&c.isNumber(i[1]))o=new t(e,i,s,n,r),c.exists(s.slideobject)?o.makeGlider(s.slideobject):o.baseElement=o,o.isDraggable=!0;else{if(!c.isObject(i[0])||!c.isTransformationOrArray(i[1]))return!1;(o=new t(e,[0,0],s,n,r)).addTransform(i[0],i[1]),o.isDraggable=!1}return o.handleSnapToGrid(),o.handleSnapToPoints(),o.handleAttractors(),o.addParents(i),o},t.CoordsElement}),define("base/text",["jxg","base/constants","base/coords","base/element","parser/geonext","math/statistics","utils/env","utils/type","math/math","base/coordselement"],function(t,e,i,s,n,r,o,a,l,h){"use strict";var c=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};return t.Text=function(t,i,s,n){this.constructor(t,s,e.OBJECT_TYPE_TEXT,e.OBJECT_CLASS_TEXT),this.element=this.board.select(s.anchor),this.coordsConstructor(i,a.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this._setUpdateText(n),this.updateText(),this.board.renderer.drawText(this),this.board.finalizeAdding(this),a.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=a.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords"})},t.Text.prototype=new s,a.copyPrototypeMethods(t.Text,h,"coordsConstructor"),t.extend(t.Text.prototype,{hasPoint:function(t,e){var i,s,n,r,o,h,c=this.board.options.precision.hasPoint;return this.transformations.length>0&&(t=(i=l.matVecMult(l.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,t,e]))[1],e=i[2]),s=(i="right"===(o=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===o?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],n=(r="top"===(h=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===h?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===a.evaluate(this.visProp.dragarea)?t>=i-c&&t<s+c&&e>=n-c&&e<=r+c:e>=n-c&&e<=r+c&&(t>=i-c&&t<=i+2*c||t>=s-2*c&&t<=s+c)},_setUpdateText:function(t){var e,i,s=a.evaluate(this.visProp.parse),n=a.evaluate(this.visProp.usemathjax);this.orgText=t,a.isFunction(t)?this.updateText=function(){i=t().toString(),this.plaintext=s&&!n?this.replaceSub(this.replaceSup(this.convertGeonext2CSS(i))):i}:a.isString(t)&&!s?this.updateText=function(){this.plaintext=t}:(this.content=a.isNumber(t)?a.toFixed(t,a.evaluate(this.visProp.digits)):a.evaluate(this.visProp.useasciimathml)?"'`"+t+"`'":n?"'"+t+"'":this.generateTerm(t,!0,!0),e=this.board.jc.snippet(this.content,!0,"",!1),this.updateText=function(){this.plaintext=e()})},_setText:function(t){return this._setUpdateText(t),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(t){var e;return this.visProp.castext=t,e=a.isFunction(t)?function(){return a.sanitizeHTML(t())}:a.isNumber(t)?t:a.sanitizeHTML(t),this._setText(e)},setText:function(t){return this._setText(t)},updateSize:function(){var t,e,i,s,n=a.evaluate(this.visProp.display);if(!o.isBrowser||"no"===this.board.renderer.type)return this;if(s=this.rendNode,"html"===n||"vml"===this.board.renderer.type)a.exists(s.offsetWidth)?0===(e=[s.offsetWidth,s.offsetHeight])[0]&&0===e[1]?(i=this,window.setTimeout(function(){i.size=[s.offsetWidth,s.offsetHeight],i.needsUpdate=!0,i.updateRenderer()},0)):this.size=e:this.size=this.crudeSizeEstimate();else if("internal"===n)if("svg"===this.board.renderer.type)try{t=s.getBBox(),this.size=[t.width,t.height]}catch(t){}else"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate());return this},crudeSizeEstimate:function(){var t=parseFloat(a.evaluate(this.visProp.fontsize));return[t*this.plaintext.length*.45,.9*t]},utf8_decode:function(t){return t.replace(/&#x(\w+);/g,function(t,e){return String.fromCharCode(parseInt(e,16))})},replaceSub:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("_{");i>=0;)(e=(t=t.substr(0,i)+t.substr(i).replace(/_\{/,"<sub>")).substr(i).indexOf("}"))>=0&&(t=t.substr(0,e)+t.substr(e).replace(/\}/,"</sub>")),i=t.indexOf("_{");for(i=t.indexOf("_");i>=0;)i=(t=t.substr(0,i)+t.substr(i).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return t},replaceSup:function(t){if(!t.indexOf)return t;for(var e,i=t.indexOf("^{");i>=0;)(e=(t=t.substr(0,i)+t.substr(i).replace(/\^\{/,"<sup>")).substr(i).indexOf("}"))>=0&&(t=t.substr(0,e)+t.substr(e).replace(/\}/,"</sup>")),i=t.indexOf("^{");for(i=t.indexOf("^");i>=0;)i=(t=t.substr(0,i)+t.substr(i).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return t},getSize:function(){return this.size},setCoords:function(t,i){var s;return a.isArray(t)&&t.length>1&&(i=t[1],t=t[0]),a.evaluate(this.visProp.islabel)&&a.exists(this.element)?(s=this.element.getLabelAnchor(),this.relativeCoords.setCoordinates(e.COORDS_BY_SCREEN,[(t-s.usrCoords[1])*this.board.unitX,-(i-s.usrCoords[2])*this.board.unitY])):this.coords.setCoordinates(e.COORDS_BY_USER,[t,i]),this.fullUpdate(),this},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateText(),"internal"===a.evaluate(this.visProp.display)&&a.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return this.updateRendererGeneric("updateText")},expandShortMath:function(t){return t.replace(/([\)0-9\.])\s*([\(a-zA-Z_])/g,"$1*$2")},generateTerm:function(t,e,i){var s,r,o,l,h='""';if(o=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),l=t.indexOf("</value>"),o>=0)for(;o>=0;)h+=' + "'+this.replaceSub(this.replaceSup(t.slice(0,o)))+'"',r=(r=t.slice(o+7,l)).replace(/\s+/g,""),!0===e&&(r=this.expandShortMath(r)),(s=(s=(s=i?r:n.geonext2JS(r,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&a.isNumber(a.bind(this.board.jc.snippet(s,!0,"",!1),this)())?h+="+("+s+").toFixed("+a.evaluate(this.visProp.digits)+")":h+="+("+s+")",o=(t=t.slice(l+8)).indexOf("<value>"),l=t.indexOf("</value>");return h+=' + "'+this.replaceSub(this.replaceSup(t))+'"',(h=(h=this.convertGeonext2CSS(h)).replace(/&amp;/g,"&")).replace(/"/g,"'")},convertGeonext2CSS:function(t){return a.isString(t)&&(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<overline>/g,"<span style=text-decoration:overline>")).replace(/&lt;overline&gt;/g,"<span style=text-decoration:overline>")).replace(/<\/overline>/g,"</span>")).replace(/&lt;\/overline&gt;/g,"</span>")).replace(/<arrow>/g,"<span style=text-decoration:overline>")).replace(/&lt;arrow&gt;/g,"<span style=text-decoration:overline>")).replace(/<\/arrow>/g,"</span>")).replace(/&lt;\/arrow&gt;/g,"</span>")),t},notifyParents:function(t){var e,i=null;t=(t=t.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do{null!==(i=(e=/<value>([\w\s\*\/\^\-\+\(\)\[\],<>=!]+)<\/value>/).exec(t))&&(n.findDependencies(this,i[1],this.board),t=(t=t.substr(i.index)).replace(e,""))}while(null!==i);return this},getParents:function(){var t;return t=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(t=this.parents),t},bounds:function(){var t=this.coords.usrCoords;return a.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[t[1],t[2]+this.size[1]/this.board.unitY,t[1]+this.size[0]/this.board.unitX,t[2]]},getAnchorX:function(){var t=a.evaluate(this.visProp.anchorx);if("auto"==t)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";case"lft":case"llft":case"ulft":default:return"right"}return t},getAnchorY:function(){var t=a.evaluate(this.visProp.anchory);if("auto"==t)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";case"rt":case"lft":default:return"middle"}return t}}),t.createText=function(e,i,s){var n,r=a.copyAttributes(s,e.options,"text"),o=i.slice(0,-1),l=i[i.length-1];if(r.anchor=r.parent||r.anchor,!(n=h.create(t.Text,e,o,r,l)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==a.evaluate(r.rotate)&&"internal"===r.display&&n.addRotation(a.evaluate(r.rotate)),n},t.registerElement("text",t.createText),t.createHTMLSlider=function(e,i,s){var n,r=a.copyAttributes(s,e.options,"htmlslider");if(2!==i.length||2!==i[0].length||3!==i[1].length)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");r.anchor=r.parent||r.anchor,r.fixed=r.fixed||!0,(n=t.createText(e,[i[0][0],i[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],r)).type=a.OBJECT_TYPE_HTMLSLIDER,n.rendNodeForm=n.rendNode.childNodes[0],n.rendNodeRange=n.rendNodeForm.childNodes[0],n.rendNodeRange.min=i[1][0],n.rendNodeRange.max=i[1][2],n.rendNodeRange.step=r.step,n.rendNodeRange.value=i[1][1],n.rendNodeLabel=n.rendNodeForm.childNodes[1],n.rendNodeLabel.id=n.rendNode.id+"_label",r.withlabel&&(n.rendNodeLabel.innerHTML=n.name+"="),n.rendNodeOut=n.rendNodeForm.childNodes[2],n.rendNodeOut.value=i[1][1];try{n.rendNodeForm.id=n.rendNode.id+"_form",n.rendNodeRange.id=n.rendNode.id+"_range",n.rendNodeOut.id=n.rendNode.id+"_out"}catch(e){t.debug(e)}return n.rendNodeRange.style.width=r.widthrange+"px",n.rendNodeRange.style.verticalAlign="middle",n.rendNodeOut.style.width=r.widthout+"px",n._val=i[1][1],t.supportsVML()?o.addEvent(n.rendNodeForm,"change",c,n):o.addEvent(n.rendNodeForm,"input",c,n),n.Value=function(){return this._val},n},t.registerElement("htmlslider",t.createHTMLSlider),{Text:t.Text,createText:t.createText,createHTMLSlider:t.createHTMLSlider}}),define("utils/uuid",["jxg"],function(t){"use strict";var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return t.Util=t.Util||{},t.Util.genUUID=function(){var t,i,s=[],n=0;for(i=0;i<36;i++)8===i||13===i||18===i||23===i?s[i]="-":14===i?s[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,s[i]=e[19===i?3&t|8:t]);return s.join("")},t.Util}),define("parser/jessiecode",["jxg","base/constants","base/text","math/math","math/geometry","math/statistics","utils/type","utils/uuid","utils/env"],function(JXG,Const,Text,Mat,Geometry,Statistics,Type,UUID,Env){Object.create||(Object.create=function(t,e){function i(){}if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object prototype may only be an Object: "+t);if(null===t)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(void 0!==e)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");return i.prototype=t,new i});var priv={modules:{math:Mat,"math/geometry":Geometry,"math/statistics":Statistics,"math/numerics":Mat.Numerics}},t,e;JXG.JessieCode=function(t,e){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.board=null,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,JXG.CA&&(this.CA=new JXG.CA(this.node,this.createNode,this)),this.code="","string"==typeof t&&this.parse(t,e)},JXG.extend(JXG.JessieCode.prototype,{node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i){var s,n=this.node(t,e,[]);for(s=2;s<arguments.length;s++)n.children.push(arguments[s]);return"node_const"==n.type&&Type.isNumber(n.value)&&(n.isMath=!0),n.line=this.parCurLine,n.col=this.parCurColumn,n},pushScope:function(t){var e={args:t,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=e,e.id=this.scopes.push(e)-1,e},popScope:function(){var t=this.scope.previous;return this.scope=null!==t?t:this.scope,this.scope},getElementById:function(t){return this.board.objects[t]},log:function(){this.$log.push(arguments),"object"==typeof console&&console.log&&console.log.apply(console,arguments)},creator:(e={},(t=function(t){var i;return"function"==typeof e[this.board.id+t]?i=e[this.board.id+t]:((i=function(e){return function(i,s){var n;return n=Type.exists(s)?s:{name:0!==e.lhs[e.scope]?e.lhs[e.scope]:""},e.board.create(t,i,n)}}(this)).creator=!0,e[this.board.id+t]=i),i}).clearCache=function(){e={}},t),letvar:function(t,e){this.builtIn[t]&&this._warn('"'+t+'" is a predefined value.'),this.scope.locals[t]=e},isLocalVariable:function(t){for(var e=this.scope;null!==e;){if(Type.exists(e.locals[t]))return e;e=e.previous}return null},isParameter:function(t){for(var e=this.scope;null!==e;){if(Type.indexOf(e.args,t)>-1)return e;e=e.previous}return null},isCreator:function(t){return!!JXG.elements[t]},isMathMethod:function(t){return"E"!==t&&!!Math[t]},isBuiltIn:function(t){return!!this.builtIn[t]},getvar:function(t,e){var i;return e=Type.def(e,!1),null!==(i=this.isLocalVariable(t))?i.locals[t]:this.isCreator(t)?this.creator(t):this.isBuiltIn(t)?this.builtIn[t]:this.isMathMethod(t)?Math[t]:e||(i=this.board.select(t))===t?void 0:i},resolve:function(t){for(var e=this.scope;null!==e;){if(Type.exists(e.locals[t]))return e.locals[t];e=e.previous}},getvarJS:function(t,e,i){var s="";return e=Type.def(e,!1),i=Type.def(i,!1),null!==this.isParameter(t)?t:null===this.isLocalVariable(t)||i?this.isCreator(t)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(i?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+t+"'].concat([a, props])); })":(i&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(t)?this.builtIn[t].src||this.builtIn[t]:this.isMathMethod(t)?"Math."+t:e?"":(Type.isId(this.board,t)?s="$jc$.board.objects['"+t+"']":Type.isName(this.board,t)?s="$jc$.board.elementsByName['"+t+"']":Type.isGroup(this.board,t)&&(s="$jc$.board.groups['"+t+"']"),s)):"$jc$.resolve('"+t+"')"},makeMap:function(t){return t.isMap=!0,t},functionCodeJS:function(t){var e=t.children[0].join(", "),i="",s="";return"op_map"===t.value&&(i="{ return  ",s=" }"),"function ("+e+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+i+this.compile(t.children[1],!0)+s+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(node){var fun,i,list=node.children[0],scope=this.pushScope(list),t;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function($jc$){var fun,str="var f = "+$jc$.functionCodeJS(node)+"; f;";try{return eval(str)}catch(t){return $jc$._warn("error compiling function\n\n"+str+"\n\n"+t.toString()),function(){}}}(this),this.popScope()}else fun=function(t,e,i){return function(){var s,n;for(n=e.scope,e.scope=e.scopes[i],s=0;s<t.length;s++)e.scope.locals[t[s]]=arguments[s];return s=e.execute(node.children[1]),e.scope=n,s}}(list,this,scope.id);return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(t=this,function(){return t.compile(t.replaceIDs(Type.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],fun.deps),fun},mergeAttributes:function(t){var e,i={};for(e=0;e<arguments.length;e++)i=Type.deepCopy(i,arguments[e],!0);return i},setProp:function(t,e,i){var s,n,r={};t.elementClass!==Const.OBJECT_CLASS_POINT||"X"!==e&&"Y"!==e?t.elementClass!==Const.OBJECT_CLASS_TEXT||"X"!==e&&"Y"!==e?t.type&&t.elementClass&&t.visProp?Type.exists(t[t.methodMap[e]])&&"function"!=typeof t[t.methodMap[e]]?t[t.methodMap[e]]=i:(r[e]=i,t.setAttribute(r)):t[e]=i:("number"==typeof i?t[e]=function(){return i}:"function"==typeof i?(t.isDraggable=!1,t[e]=i):"string"==typeof i&&(t.isDraggable=!1,t[e]=Type.createFunction(i,this.board,null,!0),t[e+"jc"]=i),t[e].origin=i,this.board.update()):(e=e.toLowerCase(),t.isDraggable&&"number"==typeof i?(s="x"===e?i:t.X(),n="y"===e?i:t.Y(),t.setPosition(Const.COORDS_BY_USER,[s,n])):!t.isDraggable||"function"!=typeof i&&"string"!=typeof i?t.isDraggable||t.addConstraint([s="x"===e?i:t.XEval.origin,n="y"===e?i:t.YEval.origin]):t.addConstraint([s="x"===e?i:t.coords.usrCoords[1],n="y"===e?i:t.coords.usrCoords[2]]),this.board.update())},_genericParse:function(t,e,i,s){var n,r,o,a,l=t.replace(/\r\n/g,"\n").split("\n"),h=[];s||(this.code+=t+"\n"),Text&&(r=Text.Text.prototype.setText,Text.Text.prototype.setText=Text.Text.prototype.setTextJessieCode);try{for(Type.exists(i)||(i=!1),n=0;n<l.length;n++)i&&(l[n]=JXG.GeonextParser.geonext2JS(l[n],this.board)),h.push(l[n]);switch(t=h.join("\n"),o=parser.parse(t),this.CA&&(o=this.CA.expandDerivatives(o,null,o),o=this.CA.removeTrivialNodes(o)),e){case"parse":a=this.execute(o);break;case"manipulate":a=this.compile(o);break;case"getAst":a=o;break;default:a=!1}}catch(t){console.log(t)}finally{Text&&(Text.Text.prototype.setText=r)}return a},parse:function(t,e,i){return this._genericParse(t,"parse",e,i)},manipulate:function(t,e,i){return this._genericParse(t,"manipulate",e,i)},getAST:function(t,e,i){return this._genericParse(t,"getAst",e,i)},snippet:function(t,e,i,s){return e=Type.def(e,!0),i=Type.def(i,""),s=Type.def(s,!1),this.parse((e?" function ("+i+") { return ":"")+t+(e?"; }":"")+";",s,!0)},replaceIDs:function(t){var e,i;if(t.replaced&&Type.exists(i=this.board.objects[t.children[1][0].value])&&""!==i.name&&(t.type="node_var",t.value=i.name,t.children.length=0,delete t.replaced),t.children)for(e=t.children.length;e>0;e--)Type.exists(t.children[e-1])&&(t.children[e-1]=this.replaceIDs(t.children[e-1]));return t},replaceNames:function(t){var e,i;if(i=t.value,"node_op"===t.type&&"op_lhs"===i&&1===t.children.length?this.isLHS=!0:"node_var"===t.type&&(this.isLHS?this.letvar(i,!0):!Type.exists(this.getvar(i,!0))&&Type.exists(this.board.elementsByName[i])&&(t=this.createReplacementNode(t))),t.children)for(e=t.children.length;e>0;e--)Type.exists(t.children[e-1])&&(t.children[e-1]=this.replaceNames(t.children[e-1]));return"node_op"===t.type&&"op_lhs"===t.value&&1===t.children.length&&(this.isLHS=!1),t},createReplacementNode:function(t){var e=this.board.elementsByName[t.value];return(t=this.createNode("node_op","op_execfun",this.createNode("node_var","$"),[this.createNode("node_str",e.id)])).replaced=!0,t},collectDependencies:function(t,e){var i,s,n;if(Type.isArray(t))for(n=t.length,i=0;i<n;i++)this.collectDependencies(t[i],e);else if("node_var"===t.type&&(s=this.getvar(t.value))&&s.visProp&&s.type&&s.elementClass&&s.id&&(e[s.id]=s),"node_op"===t.type&&"op_execfun"===t.value&&t.children.length>1&&"$"===t.children[0].value&&t.children[1].length>0&&(e[s=t.children[1][0].value]=this.board.objects[s]),t.children)for(i=t.children.length;i>0;i--)Type.exists(t.children[i-1])&&this.collectDependencies(t.children[i-1],e)},resolveProperty:function(t,e,i){return i=Type.def(i,!1),t&&t.methodMap&&(Type.exists(t.subs)&&Type.exists(t.subs[e])?t=t.subs:Type.exists(t.methodMap[e])?e=t.methodMap[e]:(t=t.visProp,e=e.toLowerCase())),Type.isFunction(t)&&this._error("Accessing function properties is not allowed."),Type.exists(t)||this._error(t+" is not an object"),Type.exists(t[e])||this._error("unknown property "+e),i&&"function"==typeof t[e]?function(){return t[e].apply(t,arguments)}:t[e]},getLHS:function(t){var e;if("node_var"===t.type)e={o:this.scope.locals,what:t.value};else if("node_op"===t.type&&"op_property"===t.value)e={o:this.execute(t.children[0]),what:t.children[1]};else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");e={o:this.execute(t.children[0]),what:this.execute(t.children[1])}}return e},getLHSCompiler:function(t,e){var i;if("node_var"===t.type)i=t.value;else if("node_op"===t.type&&"op_property"===t.value)i=[this.compile(t.children[0],e),"'"+t.children[1]+"'"];else{if("node_op"!==t.type||"op_extvalue"!==t.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");i=[this.compile(t.children[0],e),"node_const"===t.children[1].type?t.children[1].value:this.compile(t.children[1],e)]}return i},execute:function(t){var e,i,s,n,r,o,a,l,h,c,d=[];if(e=0,!t)return e;switch(this.line=t.line,this.col=t.col,t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&this.execute(t.children[0]),t.children[1]&&(e=this.execute(t.children[1]));break;case"op_assign":i=this.getLHS(t.children[0]),this.lhs[this.scope.id]=i[1],i.o.type&&i.o.elementClass&&i.o.methodMap&&"label"===i.what&&this._error("Left-hand side of assignment is read-only."),e=this.execute(t.children[1]),i.o!==this.scope.locals||Type.isArray(i.o)&&"number"==typeof i.what?this.setProp(i.o,i.what,e):this.letvar(i.what,e),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(t.children[0])&&(e=this.execute(t.children[1]));break;case"op_conditional":case"op_if_else":e=this.execute(t.children[0])?this.execute(t.children[1]):this.execute(t.children[2]);break;case"op_while":for(;this.execute(t.children[0]);)this.execute(t.children[1]);break;case"op_do":do{this.execute(t.children[0])}while(this.execute(t.children[1]));break;case"op_for":for(this.execute(t.children[0]);this.execute(t.children[1]);this.execute(t.children[2]))this.execute(t.children[3]);break;case"op_proplst":t.children[0]&&this.execute(t.children[0]),t.children[1]&&this.execute(t.children[1]);break;case"op_emptyobject":e={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(t.children[0]),e=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][t.children[0]]=this.execute(t.children[1]);break;case"op_array":for(e=[],r=t.children[0].length,s=0;s<r;s++)e.push(this.execute(t.children[0][s]));break;case"op_extvalue":e=this.execute(t.children[0]),e="number"==typeof(s=this.execute(t.children[1]))&&Math.abs(Math.round(s)-s)<Mat.eps?e[s]:void 0;break;case"op_return":if(0!==this.scope)return this.execute(t.children[0]);this._error("Unexpected return.");break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(l=this.defineFunction(t)).isMap=!0,e=l;break;case"op_function":(l=this.defineFunction(t)).isMap=!1,e=l;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,o=t.children[1],Type.exists(t.children[2]))if(t.children[3])for(a=t.children[2],h={},s=0;s<a.length;s++)h=Type.deepCopy(h,this.execute(a[s]),!0);else h=this.execute(t.children[2]);for(c=(l=this.execute(t.children[0]))&&l.sc?l.sc:this,!l.creator&&Type.exists(t.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),s=0;s<o.length;s++)d[s]=this.execute(o[s]),this.dpstack[this.pscope].push({line:t.children[1][s].line,col:t.children[1][s].ecol});if("function"!=typeof l||l.creator)if("function"==typeof l&&l.creator){n=this.line;try{for((e=l(d,h)).jcLineStart=n,e.jcLineEnd=t.eline,s=n;s<=t.line;s++)this.lineToElement[s]=e;e.debugParents=this.dpstack[this.pscope]}catch(t){this._error(t.toString())}}else this._error("Function '"+l+"' is undefined.");else e=l.apply(c,d);this.dpstack.pop(),this.pscope--;break;case"op_property":n=this.execute(t.children[0]),e=this.resolveProperty(n,i=t.children[1],!1),Type.exists(e)&&(e.sc=n);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(t.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),i=this.getvar(t.children[0]),e=this.del(i);break;case"op_equ":e=this.execute(t.children[0])==this.execute(t.children[1]);break;case"op_neq":e=this.execute(t.children[0])!=this.execute(t.children[1]);break;case"op_approx":e=Math.abs(this.execute(t.children[0])-this.execute(t.children[1]))<Mat.eps;break;case"op_grt":e=this.execute(t.children[0])>this.execute(t.children[1]);break;case"op_lot":e=this.execute(t.children[0])<this.execute(t.children[1]);break;case"op_gre":e=this.execute(t.children[0])>=this.execute(t.children[1]);break;case"op_loe":e=this.execute(t.children[0])<=this.execute(t.children[1]);break;case"op_or":e=this.execute(t.children[0])||this.execute(t.children[1]);break;case"op_and":e=this.execute(t.children[0])&&this.execute(t.children[1]);break;case"op_not":e=!this.execute(t.children[0]);break;case"op_add":e=this.add(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_sub":e=this.sub(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_div":e=this.div(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_mod":e=this.mod(this.execute(t.children[0]),this.execute(t.children[1]),!0);break;case"op_mul":e=this.mul(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_exp":e=this.pow(this.execute(t.children[0]),this.execute(t.children[1]));break;case"op_neg":e=this.neg(this.execute(t.children[0]))}break;case"node_var":e=this.getvar(t.value);break;case"node_const":e=Number(t.value);break;case"node_const_bool":e=t.value;break;case"node_str":e=t.value.replace(/\\(.)/,"$1")}return e},compile:function(t,e){var i,s,n,r="";if(Type.exists(e)||(e=!1),!t)return r;switch(t.type){case"node_op":switch(t.value){case"op_none":t.children[0]&&(r=this.compile(t.children[0],e)),t.children[1]&&(r+=this.compile(t.children[1],e));break;case"op_assign":e?(i=this.getLHSCompiler(t.children[0],e),Type.isArray(i)?r="$jc$.setProp("+i[0]+", "+i[1]+", "+this.compile(t.children[1],e)+");\n":(this.isLocalVariable(i)!==this.scope&&(this.scope.locals[i]=!0),r="$jc$.scopes["+this.scope.id+"].locals['"+i+"'] = "+this.compile(t.children[1],e)+";\n")):r=(i=this.compile(t.children[0]))+" = "+this.compile(t.children[1],e)+";\n";break;case"op_if":r=" if ("+this.compile(t.children[0],e)+") "+this.compile(t.children[1],e);break;case"op_if_else":r=" if ("+this.compile(t.children[0],e)+")"+this.compile(t.children[1],e),r+=" else "+this.compile(t.children[2],e);break;case"op_conditional":r="(("+this.compile(t.children[0],e)+")?("+this.compile(t.children[1],e),r+="):("+this.compile(t.children[2],e)+"))";break;case"op_while":r=" while ("+this.compile(t.children[0],e)+") {\n"+this.compile(t.children[1],e)+"}\n";break;case"op_do":r=" do {\n"+this.compile(t.children[0],e)+"} while ("+this.compile(t.children[1],e)+");\n";break;case"op_for":r=" for ("+this.compile(t.children[0],e)+"; "+this.compile(t.children[1],e)+"; "+this.compile(t.children[2],e)+") {\n"+this.compile(t.children[3],e)+"\n}\n";break;case"op_proplst":t.children[0]&&(r=this.compile(t.children[0],e)+", "),r+=this.compile(t.children[1],e);break;case"op_prop":r=t.children[0]+": "+this.compile(t.children[1],e);break;case"op_emptyobject":r=e?"{}":"<< >>";break;case"op_proplst_val":r=this.compile(t.children[0],e);break;case"op_array":for(n=[],s=0;s<t.children[0].length;s++)n.push(this.compile(t.children[0][s],e));r="["+n.join(", ")+"]";break;case"op_extvalue":r=this.compile(t.children[0],e)+"["+this.compile(t.children[1],e)+"]";break;case"op_return":r=" return "+this.compile(t.children[0],e)+";\n";break;case"op_map":t.children[1].isMath||"node_var"===t.children[1].type||this._error("compile: In a map only function calls and mathematical expressions are allowed."),n=t.children[0],r=e?" $jc$.makeMap(function ("+n.join(", ")+") { return "+this.compile(t.children[1],e)+"; })":"map ("+n.join(", ")+") -> "+this.compile(t.children[1],e);break;case"op_function":this.pushScope(n=t.children[0]),r=e?this.functionCodeJS(t):" function ("+n.join(", ")+") "+this.compile(t.children[1],e),this.popScope();break;case"op_execfunmath":console.log("TODO"),r="-1";break;case"op_execfun":if(t.children[2]){for(n=[],s=0;s<t.children[2].length;s++)n.push(this.compile(t.children[2][s],e));e&&(i="$jc$.mergeAttributes("+n.join(", ")+")")}for(t.children[0].withProps=!!t.children[2],n=[],s=0;s<t.children[1].length;s++)n.push(this.compile(t.children[1][s],e));r=this.compile(t.children[0],e)+"("+n.join(", ")+(t.children[2]&&e?", "+i:"")+")"+(t.children[2]&&!e?i:""),e&&"$"===t.children[0].value&&(r="$jc$.board.objects["+this.compile(t.children[1][0],e)+"]");break;case"op_property":r=e&&"X"!==t.children[1]&&"Y"!==t.children[1]?"$jc$.resolveProperty("+this.compile(t.children[0],e)+", '"+t.children[1]+"', true)":this.compile(t.children[0],e)+"."+t.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),r=e?"$jc$.use('":"use('",r+=t.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),r=e?"$jc$.del(":"remove(",r+=this.compile(t.children[0],e)+")";break;case"op_equ":r="("+this.compile(t.children[0],e)+" == "+this.compile(t.children[1],e)+")";break;case"op_neq":r="("+this.compile(t.children[0],e)+" != "+this.compile(t.children[1],e)+")";break;case"op_approx":r="("+this.compile(t.children[0],e)+" ~= "+this.compile(t.children[1],e)+")";break;case"op_grt":r="("+this.compile(t.children[0],e)+" > "+this.compile(t.children[1],e)+")";break;case"op_lot":r="("+this.compile(t.children[0],e)+" < "+this.compile(t.children[1],e)+")";break;case"op_gre":r="("+this.compile(t.children[0],e)+" >= "+this.compile(t.children[1],e)+")";break;case"op_loe":r="("+this.compile(t.children[0],e)+" <= "+this.compile(t.children[1],e)+")";break;case"op_or":r="("+this.compile(t.children[0],e)+" || "+this.compile(t.children[1],e)+")";break;case"op_and":r="("+this.compile(t.children[0],e)+" && "+this.compile(t.children[1],e)+")";break;case"op_not":r="!("+this.compile(t.children[0],e)+")";break;case"op_add":r=e?"$jc$.add("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" + "+this.compile(t.children[1],e)+")";break;case"op_sub":r=e?"$jc$.sub("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" - "+this.compile(t.children[1],e)+")";break;case"op_div":r=e?"$jc$.div("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" / "+this.compile(t.children[1],e)+")";break;case"op_mod":r=e?"$jc$.mod("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+", true)":"("+this.compile(t.children[0],e)+" % "+this.compile(t.children[1],e)+")";break;case"op_mul":r=e?"$jc$.mul("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+" * "+this.compile(t.children[1],e)+")";break;case"op_exp":r=e?"$jc$.pow("+this.compile(t.children[0],e)+", "+this.compile(t.children[1],e)+")":"("+this.compile(t.children[0],e)+"^"+this.compile(t.children[1],e)+")";break;case"op_neg":r=e?"$jc$.neg("+this.compile(t.children[0],e)+")":"(-"+this.compile(t.children[0],e)+")"}break;case"node_var":r=e?this.getvarJS(t.value,!1,t.withProps):t.value;break;case"node_const":case"node_const_bool":r=t.value;break;case"node_str":r="'"+t.value+"'"}return t.needsBrackets&&(r="{\n"+r+"}\n"),r},X:function(t){return t.X()},Y:function(t){return t.Y()},V:function(t){return t.Value()},L:function(t){return t.L()},dist:function(t,e){return Type.exists(t)&&Type.exists(t.Dist)||this._error("Error: Can't calculate distance."),t.Dist(e)},add:function(t,e){var i,s,n;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isArray(e))for(s=Math.min(t.length,e.length),n=[],i=0;i<s;i++)n[i]=t[i]+e[i];else Type.isNumber(t)&&Type.isNumber(e)?n=t+e:Type.isString(t)||Type.isString(e)?n=t.toString()+e.toString():this._error("Operation + not defined on operands "+typeof t+" and "+typeof e);return n},sub:function(t,e){var i,s,n;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isArray(e))for(s=Math.min(t.length,e.length),n=[],i=0;i<s;i++)n[i]=t[i]-e[i];else Type.isNumber(t)&&Type.isNumber(e)?n=t-e:this._error("Operation - not defined on operands "+typeof t+" and "+typeof e);return n},neg:function(t){var e,i,s;if(t=Type.evalSlider(t),Type.isArray(t))for(i=t.length,s=[],e=0;e<i;e++)s[e]=-t[e];else Type.isNumber(t)?s=-t:this._error("Unary operation - not defined on operand "+typeof t);return s},mul:function(t,e){var i,s,n;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isNumber(e)&&(i=t,e=t=e),Type.isArray(t)&&Type.isArray(e))s=Math.min(t.length,e.length),n=Mat.innerProduct(t,e,s);else if(Type.isNumber(t)&&Type.isArray(e))for(s=e.length,n=[],i=0;i<s;i++)n[i]=t*e[i];else Type.isNumber(t)&&Type.isNumber(e)?n=t*e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return n},div:function(t,e){var i,s,n;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isNumber(e))for(s=t.length,n=[],i=0;i<s;i++)n[i]=t[i]/e;else Type.isNumber(t)&&Type.isNumber(e)?n=t/e:this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return n},mod:function(t,e){var i,s,n;if(t=Type.evalSlider(t),e=Type.evalSlider(e),Type.isArray(t)&&Type.isNumber(e))for(s=t.length,n=[],i=0;i<s;i++)n[i]=Mat.mod(t[i],e,!0);else Type.isNumber(t)&&Type.isNumber(e)?n=Mat.mod(t,e,!0):this._error("Operation * not defined on operands "+typeof t+" and "+typeof e);return n},pow:function(t,e){return t=Type.evalSlider(t),e=Type.evalSlider(e),Math.pow(t,e)},DDD:function(t){console.log("Dummy derivative function. This should never appear!")},ifthen:function(t,e,i){return t?e:i},del:function(t){"object"==typeof t&&JXG.exists(t.type)&&JXG.exists(t.elementClass)&&this.board.removeObject(t)},use:function(t){var e,i,s=!1;if("string"==typeof t){for(e in JXG.boards)if(JXG.boards.hasOwnProperty(e)&&JXG.boards[e].container===t){i=JXG.boards[e],s=!0;break}}else i=t,s=!0;s?(this.board=i,this.builtIn.$board=i,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+t+"' not found!")},findSymbol:function(t,e){var i,s;for(s=-1===(e=Type.def(e,-1))?this.scope:this.scopes[e];null!==s;){for(i in s.locals)if(s.locals.hasOwnProperty(i)&&s.locals[i]===t)return[i,s];s=s.previous}return[]},importModule:function(t){return priv.modules[t.toLowerCase()]},defineBuiltIn:function(){var t=this,e={PI:Math.PI,EULER:Math.E,X:t.X,Y:t.Y,V:t.V,L:t.L,dist:t.dist,rad:Geometry.rad,deg:Geometry.trueAngle,factorial:Mat.factorial,trunc:Type.trunc,log:Mat.log,ln:Math.log,log10:Mat.log10,lg:Mat.log10,log2:Mat.log2,lb:Mat.log2,ld:Mat.log2,cosh:Mat.cosh,sinh:Mat.sinh,IfThen:t.ifthen,import:t.importModule,use:t.use,remove:t.del,$:t.getElementById,$board:t.board,$log:t.log,D:t.DDD};return e.rad.sc=Geometry,e.deg.sc=Geometry,e.factorial.sc=Mat,e.X.src="$jc$.X",e.Y.src="$jc$.Y",e.V.src="$jc$.V",e.L.src="$jc$.L",e.dist.src="$jc$.dist",e.rad.src="JXG.Math.Geometry.rad",e.deg.src="JXG.Math.Geometry.trueAngle",e.factorial.src="JXG.Math.factorial",e.trunc.src="JXG.trunc",e.ln.src="Math.log",e.log10.src="JXG.Math.log10",e.lg.src="JXG.Math.log10",e.log2.src="JXG.Math.log2",e.lb.src="JXG.Math.log2",e.ld.src="JXG.Math.log2",e.cosh.src="JXG.Math.cosh",e.sinh.src="JXG.Math.sinh",e.import.src="$jc$.importModule",e.use.src="$jc$.use",e.remove.src="$jc$.del",e.IfThen.src="$jc$.ifthen",e.$.src="(function (n) { return $jc$.board.select(n); })",e.$board&&(e.$board.src="$jc$.board"),e.$log.src="$jc$.log",e},_debug:function(t){"object"==typeof console?console.log(t):Env.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=t+"<br />")},_error:function(t){var e=new Error("Error("+this.line+"): "+t);throw e.line=this.line,e},_warn:function(t){"object"==typeof console?console.log("Warning("+this.line+"): "+t):Env.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+t+"<br />")},_log:function(t){"object"!=typeof window&&"object"==typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+t.toString()}):console.log("Log: ",arguments)}});var parser=function(){function t(){this.yy={}}var e=function(t,e,i,s){for(i=i||{},s=t.length;s--;i[t[s]]=e);return i},i=[2,14],s=[1,13],n=[1,37],r=[1,14],o=[1,15],a=[1,21],l=[1,16],h=[1,17],c=[1,33],d=[1,18],u=[1,19],p=[1,12],f=[1,59],m=[1,60],g=[1,58],b=[1,46],y=[1,48],v=[1,49],C=[1,50],x=[1,51],_=[1,52],P=[1,53],S=[1,54],w=[1,45],E=[1,38],k=[1,39],A=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],T=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],M=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],O=[2,48],N=[1,72],L=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],D=[1,78],j=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],I=[1,82],R=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],B=[1,83],F=[1,84],Y=[1,85],z=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],X=[1,89],U=[1,90],G=[1,91],H=[1,92],q=[1,97],J=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],V=[1,103],$=[1,104],W=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],K=[1,105],Z=[1,106],Q=[1,107],tt=[1,126],et=[1,139],it=[83,86],st=[1,149],nt=[10,66,86],rt=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],ot=[1,166],at=[10,86],lt={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,6],[92,1],[92,3]],performAction:function(t,e,i,s,n,r,o){var a=r.length-1;switch(n){case 1:return r[a-1];case 2:this.$=ht.createNode(ct(o[a-4]),"node_op","op_if",r[a-2],r[a]);break;case 3:this.$=ht.createNode(ct(o[a-6]),"node_op","op_if_else",r[a-4],r[a-2],r[a]);break;case 4:this.$=ht.createNode(ct(o[a-4]),"node_op","op_while",r[a-2],r[a]);break;case 5:this.$=ht.createNode(ct(o[a-8]),"node_op","op_for",r[a-6],r[a-4],r[a-2],r[a]);break;case 6:this.$=ht.createNode(ct(o[a-6]),"node_op","op_do",r[a-5],r[a-2]);break;case 7:this.$=ht.createNode(ct(o[a-1]),"node_op","op_use",r[a]);break;case 8:this.$=ht.createNode(ct(o[a-1]),"node_op","op_delete",r[a]);break;case 9:this.$=ht.createNode(ct(o[a-1]),"node_op","op_return",void 0);break;case 10:this.$=ht.createNode(ct(o[a-2]),"node_op","op_return",r[a-1]);break;case 11:case 14:this.$=ht.createNode(ct(o[a]),"node_op","op_none");break;case 12:this.$=r[a-1],this.$.needsBrackets=!0;break;case 13:this.$=ht.createNode(ct(o[a-1]),"node_op","op_none",r[a-1],r[a]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=r[a];break;case 22:case 65:case 93:this.$=r[a-1];break;case 25:this.$=ht.createNode(ct(o[a-2]),"node_op","op_assign",r[a-2],r[a]),this.$.isMath=!1;break;case 27:this.$=ht.createNode(ct(o[a-4]),"node_op","op_conditional",r[a-4],r[a-2],r[a]),this.$.isMath=!1;break;case 29:this.$=ht.createNode(ct(o[a-2]),"node_op","op_or",r[a-2],r[a]),this.$.isMath=!1;break;case 31:this.$=ht.createNode(ct(o[a-2]),"node_op","op_and",r[a-2],r[a]),this.$.isMath=!1;break;case 33:this.$=ht.createNode(ct(o[a-2]),"node_op","op_equ",r[a-2],r[a]),this.$.isMath=!1;break;case 34:this.$=ht.createNode(ct(o[a-2]),"node_op","op_neq",r[a-2],r[a]),this.$.isMath=!1;break;case 35:this.$=ht.createNode(ct(o[a-2]),"node_op","op_approx",r[a-2],r[a]),this.$.isMath=!1;break;case 37:this.$=ht.createNode(ct(o[a-2]),"node_op","op_lot",r[a-2],r[a]),this.$.isMath=!1;break;case 38:this.$=ht.createNode(ct(o[a-2]),"node_op","op_grt",r[a-2],r[a]),this.$.isMath=!1;break;case 39:this.$=ht.createNode(ct(o[a-2]),"node_op","op_loe",r[a-2],r[a]),this.$.isMath=!1;break;case 40:this.$=ht.createNode(ct(o[a-2]),"node_op","op_gre",r[a-2],r[a]),this.$.isMath=!1;break;case 42:this.$=ht.createNode(ct(o[a-2]),"node_op","op_add",r[a-2],r[a]),this.$.isMath=!0;break;case 43:this.$=ht.createNode(ct(o[a-2]),"node_op","op_sub",r[a-2],r[a]),this.$.isMath=!0;break;case 45:this.$=ht.createNode(ct(o[a-2]),"node_op","op_mul",r[a-2],r[a]),this.$.isMath=!0;break;case 46:this.$=ht.createNode(ct(o[a-2]),"node_op","op_div",r[a-2],r[a]),this.$.isMath=!0;break;case 47:this.$=ht.createNode(ct(o[a-2]),"node_op","op_mod",r[a-2],r[a]),this.$.isMath=!0;break;case 49:this.$=ht.createNode(ct(o[a-2]),"node_op","op_exp",r[a-2],r[a]),this.$.isMath=!0;break;case 51:this.$=ht.createNode(ct(o[a-1]),"node_op","op_not",r[a]),this.$.isMath=!1;break;case 53:this.$=ht.createNode(ct(o[a-1]),"node_op","op_neg",r[a]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=r[a],this.$.isMath=!1;break;case 59:case 91:this.$=ht.createNode(ct(o[a-2]),"node_op","op_property",r[a-2],r[a]),this.$.isMath=!0;break;case 60:case 90:this.$=ht.createNode(ct(o[a-3]),"node_op","op_extvalue",r[a-3],r[a-1]),this.$.isMath=!0;break;case 61:this.$=ht.createNode(ct(o[a]),"node_var",r[a]);break;case 69:this.$=r[a],this.$.isMath=!0;break;case 70:this.$=ht.createNode(ct(o[a]),"node_const",null);break;case 71:this.$=ht.createNode(ct(o[a]),"node_const_bool",!0);break;case 72:this.$=ht.createNode(ct(o[a]),"node_const_bool",!1);break;case 73:this.$=ht.createNode(ct(o[a]),"node_str",r[a].substring(1,r[a].length-1));break;case 74:this.$=ht.createNode(ct(o[a]),"node_const",parseFloat(r[a]));break;case 75:this.$=ht.createNode(ct(o[a]),"node_const",NaN);break;case 76:this.$=ht.createNode(ct(o[a]),"node_const",1/0);break;case 77:this.$=ht.createNode(ct(o[a-1]),"node_op","op_array",[]);break;case 78:this.$=ht.createNode(ct(o[a-2]),"node_op","op_array",r[a-1]);break;case 79:this.$=ht.createNode(ct(o[a-1]),"node_op","op_emptyobject",{});break;case 80:this.$=ht.createNode(ct(o[a-2]),"node_op","op_proplst_val",r[a-1]);break;case 82:this.$=ht.createNode(ct(o[a-2]),"node_op","op_proplst",r[a-2],r[a]);break;case 83:this.$=ht.createNode(ct(o[a-2]),"node_op","op_prop",r[a-2],r[a]);break;case 87:case 89:this.$=ht.createNode(ct(o[a-1]),"node_op","op_execfun",r[a-1],r[a]),this.$.isMath=!0;break;case 88:this.$=ht.createNode(ct(o[a-2]),"node_op","op_execfun",r[a-2],r[a-1],r[a],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 103:this.$=[r[a]];break;case 95:case 99:case 104:this.$=r[a-2].concat(r[a]);break;case 96:this.$=ht.createNode(ct(o[a]),"node_var",r[a]),this.$.isMath=!0;break;case 100:this.$=ht.createNode(ct(o[a-3]),"node_op","op_function",[],r[a]),this.$.isMath=!1;break;case 101:this.$=ht.createNode(ct(o[a-4]),"node_op","op_function",r[a-2],r[a]),this.$.isMath=!1;break;case 102:this.$=ht.createNode(ct(o[a-5]),"node_op","op_map",r[a-3],r[a])}},table:[e([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],i,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:s,8:n,9:20,11:4,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{1:[2,1]},e(A,[2,13]),e(T,[2,15]),e(T,[2,16]),e(T,[2,17]),e(T,[2,18]),e(T,[2,19]),e(T,[2,20]),e(T,[2,21]),e([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],i,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:s,8:n,9:20,11:65,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{20:[1,66]},{20:[1,67]},{8:n,9:69,16:[1,68],20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{16:[1,70]},e(T,[2,11]),e(M,[2,23]),e(M,[2,24]),e([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],O,{32:[1,71],57:N}),e([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),e(L,[2,54],{88:77,8:D,64:[1,75],65:[1,76]}),e(L,[2,55],{88:79,8:D,64:[1,81],65:[1,80]}),e(j,[2,28],{39:I}),e(M,[2,56]),e(M,[2,57]),e(M,[2,58]),e(R,[2,30],{41:B,42:F,43:Y}),e(M,[2,61]),e(M,[2,62]),e(M,[2,63]),e(M,[2,64]),{8:n,9:86,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:[1,87]},{8:[1,88]},e(z,[2,32],{45:X,46:U,47:G,48:H}),e(M,[2,66]),e(M,[2,67]),e(M,[2,68]),e(M,[2,69]),{20:q,72:98,73:99,77:x,78:_,79:P,80:S,83:[1,93],84:94,85:95,87:96},{8:n,20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,81:101,82:w,91:E,93:k},e(J,[2,36],{50:V,51:$}),e(M,[2,70]),e(M,[2,71]),e(M,[2,72]),e(M,[2,73]),e(M,[2,74]),e(M,[2,75]),e(M,[2,76]),e(W,[2,41],{53:K,54:Z,55:Q}),e(M,[2,44]),e(M,[2,50]),{8:n,20:c,31:109,50:f,51:m,52:108,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:110,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:111,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{6:6,7:s,8:n,9:20,11:4,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:113,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:114,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:115,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{14:[1,116]},e(T,[2,7]),e(T,[2,8]),e(T,[2,9]),{16:[1,117]},e(T,[2,22]),{8:n,20:c,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:119,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,36:121,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{20:[1,122]},{8:n,9:123,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(M,[2,87],{89:124,90:125,68:127,20:tt,82:w}),{8:n,10:[1,128],20:c,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,81:129,82:w,91:E,93:k},e(M,[2,89]),{8:n,9:130,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{20:[1,131]},{8:n,20:c,31:109,38:132,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,40:133,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,40:134,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,40:135,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{10:[1,136]},{10:[1,137],20:et,92:138},{20:et,92:140},{8:n,20:c,31:109,44:141,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,44:142,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,44:143,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,44:144,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(M,[2,79]),{83:[1,145],86:[1,146]},e(it,[2,81]),{35:[1,147]},{35:[2,84]},{35:[2,85]},{35:[2,86]},e(M,[2,77]),{66:[1,148],86:st},e(nt,[2,98]),{8:n,20:c,31:109,49:150,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,49:151,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:152,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:153,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,31:109,50:f,51:m,52:154,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(M,[2,51]),e([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],O,{57:N}),e(M,[2,52]),e(M,[2,53]),e([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,155]},{10:[1,156]},{16:[1,157]},{8:[1,158]},e(T,[2,10]),e(M,[2,25]),e(M,[2,49]),{35:[1,159]},e(j,[2,29],{39:I}),e(M,[2,59]),{66:[1,160]},e([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,161]}),e(M,[2,94]),e(M,[2,96]),e(M,[2,97]),e(rt,[2,92]),{10:[1,162],86:st},{66:[1,163]},e(M,[2,91]),e(R,[2,31],{41:B,42:F,43:Y}),e(z,[2,33],{45:X,46:U,47:G,48:H}),e(z,[2,34],{45:X,46:U,47:G,48:H}),e(z,[2,35],{45:X,46:U,47:G,48:H}),e(M,[2,65]),{25:164,26:p},{10:[1,165],86:ot},e(at,[2,103]),{10:[1,167],86:ot},e(J,[2,37],{50:V,51:$}),e(J,[2,38],{50:V,51:$}),e(J,[2,39],{50:V,51:$}),e(J,[2,40],{50:V,51:$}),e(M,[2,80]),{20:q,72:98,73:99,77:x,78:_,79:P,80:S,85:168,87:96},{8:n,20:c,29:169,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(M,[2,78]),{8:n,20:c,29:170,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(W,[2,42],{53:K,54:Z,55:Q}),e(W,[2,43],{53:K,54:Z,55:Q}),e(M,[2,45]),e(M,[2,46]),e(M,[2,47]),{6:6,7:s,8:n,9:20,11:171,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{6:6,7:s,8:n,9:20,11:172,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:173,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:174,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,20:c,29:175,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(M,[2,60]),{20:tt,68:127,82:w,90:176},e(rt,[2,93]),e(M,[2,90]),e(M,[2,100]),{25:177,26:p},{20:[1,178]},{94:[1,179]},e(it,[2,82]),e(it,[2,83]),e(nt,[2,99]),e(A,[2,2],{12:[1,180]}),e(T,[2,4]),{16:[1,181]},{10:[1,182]},e(M,[2,27]),e(M,[2,95]),e(M,[2,101]),e(at,[2,104]),{8:n,9:183,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{6:6,7:s,8:n,9:20,11:184,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{8:n,9:185,20:c,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},{16:[1,186]},e(M,[2,102]),e(T,[2,3]),{10:[1,187]},e(T,[2,6]),{6:6,7:s,8:n,9:20,11:188,13:7,14:r,15:o,16:a,17:l,18:8,19:h,20:c,21:d,22:9,23:u,24:11,25:5,26:p,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:f,51:m,52:56,56:57,58:g,59:26,60:27,61:29,62:30,63:31,65:b,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:y,75:v,76:C,77:x,78:_,79:P,80:S,82:w,91:E,93:k},e(T,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(t,e){if(!e.recoverable){var i=new Error(t);throw i.hash=e,i}this.trace(t)},parse:function(t){var e=this,i=[0],s=[null],n=[],r=this.table,o="",a=0,l=0,h=0,c=n.slice.call(arguments,1),d=Object.create(this.lexer),u={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(u.yy[p]=this.yy[p]);d.setInput(t,u.yy),u.yy.lexer=d,u.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var f=d.yylloc;n.push(f);var m=d.options&&d.options.ranges;this.parseError="function"==typeof u.yy.parseError?u.yy.parseError:Object.getPrototypeOf(this).parseError;for(var g,b,y,v,C,x,_,P,S=function(){var t;return"number"!=typeof(t=d.lex()||1)&&(t=e.symbols_[t]||t),t},w={};;){if(this.defaultActions[y=i[i.length-1]]?v=this.defaultActions[y]:(null!=g||(g=S()),v=r[y]&&r[y][g]),void 0===v||!v.length||!v[0]){var E;for(x in P=[],r[y])this.terminals_[x]&&x>2&&P.push("'"+this.terminals_[x]+"'");E=d.showPosition?"Parse error on line "+(a+1)+":\n"+d.showPosition()+"\nExpecting "+P.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(E,{text:d.match,token:this.terminals_[g]||g,line:d.yylineno,loc:f,expected:P})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+g);switch(v[0]){case 1:i.push(g),s.push(d.yytext),n.push(d.yylloc),i.push(v[1]),g=null,b?(g=b,b=null):(l=d.yyleng,o=d.yytext,a=d.yylineno,f=d.yylloc,h>0&&h--);break;case 2:if(w.$=s[s.length-(_=this.productions_[v[1]][1])],w._$={first_line:n[n.length-(_||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(_||1)].first_column,last_column:n[n.length-1].last_column},m&&(w._$.range=[n[n.length-(_||1)].range[0],n[n.length-1].range[1]]),void 0!==(C=this.performAction.apply(w,[o,l,a,u.yy,v[1],s,n].concat(c))))return C;_&&(i=i.slice(0,-1*_*2),s=s.slice(0,-1*_),n=n.slice(0,-1*_)),i.push(this.productions_[v[1]][0]),s.push(w.$),n.push(w._$),i.push(r[i[i.length-2]][i[i.length-1]]);break;case 3:return!0}}return!0}},ht={node:function(t,e,i){return{type:t,value:e,children:i}},createNode:function(t,e,i,s){var n,r=this.node(e,i,[]);for(n=3;n<arguments.length;n++)r.children.push(arguments[n]);return r.line=t[0],r.col=t[1],r.eline=t[2],r.ecol=t[3],r}},ct=function(t){return[t.first_line,t.first_column,t.last_line,t.last_column]};return lt.lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===s.length?this.yylloc.first_column:0)+s[s.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,s,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(s=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var r in n)this[r]=n[r];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),r=0;r<n.length;r++)if((i=this._input.match(this.rules[n[r]]))&&(!e||i[0].length>e[0].length)){if(e=i,s=r,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,n[r])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[s]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,s){switch(i){case 0:break;case 1:case 2:return 78;case 3:case 4:return 77;case 5:case 6:break;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:return 94;case 22:return 82;case 23:return 83;case 24:return 26;case 25:return 27;case 26:return 16;case 27:return"#";case 28:return 34;case 29:return 35;case 30:return 79;case 31:return 64;case 32:return 65;case 33:return 66;case 34:return 8;case 35:return 10;case 36:return 58;case 37:return 57;case 38:return 53;case 39:return 54;case 40:return 55;case 41:return 50;case 42:return 51;case 43:return 47;case 44:return 45;case 45:return 48;case 46:return 46;case 47:return 41;case 48:return 43;case 49:return 42;case 50:return 39;case 51:return 37;case 52:return 32;case 53:return 86;case 54:return 5;case 55:return 20;case 56:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56],inclusive:!0}}},t.prototype=lt,lt.Parser=t,new t}();return void 0!==require&&"undefined"!=typeof exports&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var e=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(e)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1))),parser.yy.parseError=parser.parseError,JXG.JessieCode}),define("base/point",["jxg","options","math/math","math/geometry","math/numerics","base/coords","base/constants","base/element","parser/geonext","utils/type","base/transformation","base/coordselement"],function(t,e,i,s,n,r,o,a,l,h,c,d){"use strict";return t.Point=function(t,e,i){this.constructor(t,i,o.OBJECT_TYPE_POINT,o.OBJECT_CLASS_POINT),this.element=this.board.select(i.anchor),this.coordsConstructor(e),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createLabel()},t.Point.prototype=new a,h.copyPrototypeMethods(t.Point,d,"coordsConstructor"),t.extend(t.Point.prototype,{hasPoint:function(t,e){var i,s=this.coords.scrCoords,n=h.evaluate(this.visProp.sizeunit);return i=parseFloat(h.evaluate(this.visProp.size)),"user"===n&&(i*=Math.sqrt(this.board.unitX*this.board.unitY)),(i+=.5*parseFloat(h.evaluate(this.visProp.strokewidth)))<this.board.options.precision.hasPoint&&(i=this.board.options.precision.hasPoint),Math.abs(s[1]-t)<i+2&&Math.abs(s[2]-e)<i+2},update:function(t){return this.needsUpdate?(this.updateCoords(t),h.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(){var t,e;if(0===this.transformations.length||null===this.baseElement)return this;for(t=this===this.baseElement?this.transformations[0].apply(this.baseElement,"self"):this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(o.COORDS_BY_USER,t),e=1;e<this.transformations.length;e++)this.coords.setCoordinates(o.COORDS_BY_USER,this.transformations[e].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(t,e,i,n){var r;t=this.board.select(t),e=this.board.select(e),r=s.intersectionFunction(this.board,t,e,i,n,h.evaluate(this.visProp.alwaysintersect)),this.addConstraint([r]);try{t.addChild(this),e.addChild(this)}catch(i){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof t+"' and '"+typeof e+"'.")}this.type=o.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[t.id,e.id,i,n],this.generatePolynomial=function(){var i=t.generatePolynomial(this),s=e.generatePolynomial(this);return 0===i.length||0===s.length?[]:[i[0],s[0]]},this.prepareUpdate().update()},setStyle:function(t){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][t],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][t],this.board.renderer.changePointStyle(this),this},normalizeFace:function(i){return t.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),e.normalizePointFace(i)},face:function(e){t.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:e})},size:function(e){t.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:e})},cloneToBackground:function(){var t={};return t.id=this.id+"T"+this.numTraces,this.numTraces+=1,t.coords=this.coords,t.visProp=h.deepCopy(this.visProp,this.visProp.traceattributes,!0),t.visProp.layer=this.board.options.layer.trace,t.elementClass=o.OBJECT_CLASS_POINT,t.board=this.board,h.clearVisPropOld(t),t.visPropCalc={visible:h.evaluate(t.visProp.visible)},this.board.renderer.drawPoint(t),this.traces[t.id]=t.rendNode,this}}),t.createPoint=function(e,i,s){var n,r;if(r=h.copyAttributes(s,e.options,"point"),!(n=d.create(t.Point,e,i,r)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return n},t.createGlider=function(t,e,i){var s,n,r=h.copyAttributes(i,t.options,"glider");return n=1===e.length?[0,0]:e.slice(0,2),(s=t.create("point",n,r)).makeGlider(e[e.length-1]),s},t.createIntersectionPoint=function(t,e,i){var n,r,a,l,c,d,u=h.copyAttributes(i,t.options,"intersection");e.push(0,0),r=t.select(e[0]),a=t.select(e[1]),c=e[2]||0,d=e[3]||0,n=t.create("point",[0,0,0],u),l=s.intersectionFunction(t,r,a,c,d,n.visProp.alwaysintersect),n.addConstraint([l]);try{r.addChild(n),a.addChild(n)}catch(t){throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.")}return n.type=o.OBJECT_TYPE_INTERSECTION,n.elType="intersection",n.setParents([r.id,a.id]),n.intersectionNumbers=[c,d],n.getParents=function(){return this.parents.concat(this.intersectionNumbers)},n.generatePolynomial=function(){var t=r.generatePolynomial(n),e=a.generatePolynomial(n);return 0===t.length||0===e.length?[]:[t[0],e[0]]},n},t.createOtherIntersectionPoint=function(t,e,n){var r,a,l,c;if(3!==e.length||!h.isPoint(e[2])||e[0].elementClass!==o.OBJECT_CLASS_LINE&&e[0].elementClass!==o.OBJECT_CLASS_CIRCLE||e[1].elementClass!==o.OBJECT_CLASS_LINE&&e[1].elementClass!==o.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof e[0]+"',  '"+typeof e[1]+"'and  '"+typeof e[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return a=t.select(e[0]),l=t.select(e[1]),c=t.select(e[2]),(r=t.create("point",[function(){var t=s.meet(a.stdform,l.stdform,0,a.board);return Math.abs(c.X()-t.usrCoords[1])>i.eps||Math.abs(c.Y()-t.usrCoords[2])>i.eps||Math.abs(c.Z()-t.usrCoords[0])>i.eps?t:s.meet(a.stdform,l.stdform,1,a.board)}],n)).type=o.OBJECT_TYPE_INTERSECTION,r.elType="otherintersection",r.setParents([a.id,l.id,c]),a.addChild(r),l.addChild(r),r.generatePolynomial=function(){var t=a.generatePolynomial(r),e=l.generatePolynomial(r);return 0===t.length||0===e.length?[]:[t[0],e[0]]},r},t.createPolePoint=function(e,i,s){var n,r,a,l,h,c,d;if(i.length>1&&(l=i[0].type===o.OBJECT_TYPE_CONIC||i[0].elementClass===o.OBJECT_CLASS_CIRCLE,h=i[1].type===o.OBJECT_TYPE_CONIC||i[1].elementClass===o.OBJECT_CLASS_CIRCLE,c=i[0].elementClass===o.OBJECT_CLASS_LINE,d=i[1].elementClass===o.OBJECT_CLASS_LINE),2!==i.length||!(l&&d||c&&h))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return d?(r=e.select(i[0]),a=e.select(i[1])):(r=e.select(i[1]),a=e.select(i[0])),(n=e.create("point",[function(){var e=r.quadraticform,i=a.stdform.slice(0,3);return[t.Math.Numerics.det([i,e[1],e[2]]),t.Math.Numerics.det([e[0],i,e[2]]),t.Math.Numerics.det([e[0],e[1],i])]}],s)).elType="polepoint",n.setParents([r.id,a.id]),r.addChild(n),a.addChild(n),n},t.registerElement("point",t.createPoint),t.registerElement("glider",t.createGlider),t.registerElement("intersection",t.createIntersectionPoint),t.registerElement("otherintersection",t.createOtherIntersectionPoint),t.registerElement("polepoint",t.createPolePoint),{Point:t.Point,createPoint:t.createPoint,createGlider:t.createGlider,createIntersection:t.createIntersectionPoint,createOtherIntersection:t.createOtherIntersectionPoint,createPolePoint:t.createPolePoint}}),define("base/line",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/constants","base/coords","base/element","utils/type","base/point"],function(t,e,i,s,n,r,o,a,l,h){"use strict";return t.Line=function(e,i,s,n){this.constructor(e,n,r.OBJECT_TYPE_LINE,r.OBJECT_CLASS_LINE),this.point1=this.board.select(i),this.point2=this.board.select(s),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1.addChild(this),this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=t.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",L:"L",length:"L",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"})},t.Line.prototype=new a,t.extend(t.Line.prototype,{hasPoint:function(t,s){var n,a,h,c,d,u,p,f,m=[],g=[1,t,s],b=l.evaluate(this.visProp.strokewidth);return f=this.board.options.precision.hasPoint+.5*b,m[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,m[1]=this.stdform[1]/this.board.unitX,m[2]=this.stdform[2]/-this.board.unitY,n=i.distPointLine(g,m),!(isNaN(n)||n>f||(!l.evaluate(this.visProp.straightfirst)||!l.evaluate(this.visProp.straightlast))&&(h=this.point1.coords,c=this.point2.coords,a=[0,m[1],m[2]],a=e.crossProduct(a,g),a=e.crossProduct(a,m),a[1]/=a[0],a[2]/=a[0],a[0]=1,a=new o(r.COORDS_BY_SCREEN,a.slice(1),this.board).usrCoords,d=h.distance(r.COORDS_BY_USER,c),h=h.usrCoords.slice(0),c=c.usrCoords.slice(0),d<e.eps?u=0:(d===Number.POSITIVE_INFINITY&&(d=1/e.eps,Math.abs(c[0])<e.eps?(d/=i.distance([0,0,0],c),c=[1,h[1]+c[1]*d,h[2]+c[2]*d]):(d/=i.distance([0,0,0],h),h=[1,c[1]+h[1]*d,c[2]+h[2]*d])),p=1,d=c[p]-h[p],Math.abs(d)<e.eps&&(p=2,d=c[p]-h[p]),u=(a[p]-h[p])/d),!l.evaluate(this.visProp.straightfirst)&&u<0||!l.evaluate(this.visProp.straightlast)&&u>1))},update:function(){var t;return this.needsUpdate?(this.constrained&&(l.isFunction(this.funps)?(t=this.funps())&&t.length&&2===t.length&&(this.point1=t[0],this.point2=t[1]):(l.isFunction(this.funp1)&&(t=this.funp1(),l.isPoint(t)?this.point1=t:t&&t.length&&2===t.length&&this.point1.setPositionDirectly(r.COORDS_BY_USER,t)),l.isFunction(this.funp2)&&(t=this.funp2(),l.isPoint(t)?this.point2=t:t&&t.length&&2===t.length&&this.point2.setPositionDirectly(r.COORDS_BY_USER,t)))),this.updateSegmentFixedLength(),this.updateStdform(),l.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var t,i,s,n,o,a,h,c;return this.hasFixedLength?(t=this.point1.Dist(this.point2),i=this.fixedLength(),s=this.fixedLengthOldCoords[0].distance(r.COORDS_BY_USER,this.point1.coords),n=this.fixedLengthOldCoords[1].distance(r.COORDS_BY_USER,this.point2.coords),(s>e.eps||n>e.eps||t!==i)&&(o=this.point1.isDraggable&&this.point1.type!==r.OBJECT_TYPE_GLIDER&&!l.evaluate(this.point1.visProp.fixed),a=this.point2.isDraggable&&this.point2.type!==r.OBJECT_TYPE_GLIDER&&!l.evaluate(this.point2.visProp.fixed),t>e.eps?s>n&&a||s<=n&&a&&!o?(this.point2.setPositionDirectly(r.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*i/t,this.point1.Y()+(this.point2.Y()-this.point1.Y())*i/t]),this.point2.fullUpdate()):(s<=n&&o||s>n&&o&&!a)&&(this.point1.setPositionDirectly(r.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*i/t,this.point2.Y()+(this.point1.Y()-this.point2.Y())*i/t]),this.point1.fullUpdate()):(h=Math.random()-.5,c=Math.random()-.5,t=Math.sqrt(h*h+c*c),a?(this.point2.setPositionDirectly(r.COORDS_BY_USER,[this.point1.X()+h*i/t,this.point1.Y()+c*i/t]),this.point2.fullUpdate()):o&&(this.point1.setPositionDirectly(r.COORDS_BY_USER,[this.point2.X()+h*i/t,this.point2.Y()+c*i/t]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(r.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(r.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var t=e.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=t[0],this.stdform[1]=t[1],this.stdform[2]=t[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&e.innerProduct(this.stdform,this.stdform,3)>=e.eps*e.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(t){var e=this.point1.symbolic.x,i=this.point1.symbolic.y,s=this.point2.symbolic.x,n=this.point2.symbolic.y,r=t.symbolic.x,o=t.symbolic.y;return[["(",i,")*(",r,")-(",i,")*(",s,")+(",o,")*(",s,")-(",e,")*(",o,")+(",e,")*(",n,")-(",r,")*(",n,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=e.eps?-this.stdform[0]/this.stdform[2]:1/0},getSlope:function(){return Math.abs(this.stdform[2])>=e.eps?-this.stdform[1]/this.stdform[2]:1/0},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(t,e){return this.visProp.straightfirst=t,this.visProp.straightlast=e,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new o(r.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(t){l.exists(this.label)&&(this.label.relativeCoords=new o(r.COORDS_BY_SCREEN,[t[0],-t[1]],this.board))},getLabelAnchor:function(){var t,s,n=0,a=new o(r.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),h=new o(r.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),c=l.evaluate(this.visProp.straightfirst),d=l.evaluate(this.visProp.straightlast);if((c||d)&&i.calcStraight(this,a,h,0),a=a.scrCoords,h=h.scrCoords,!l.exists(this.label))return new o(r.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(l.evaluate(this.label.visProp.position)){case"lft":case"llft":case"ulft":a[1]<=h[1]?(t=a[1],s=a[2]):(t=h[1],s=h[2]);break;case"rt":case"lrt":case"urt":a[1]>h[1]?(t=a[1],s=a[2]):(t=h[1],s=h[2]);break;default:t=.5*(a[1]+h[1]),s=.5*(a[2]+h[2])}return(c||d)&&(l.exists(this.label)&&(n=l.evaluate(this.label.visProp.fontsize)),Math.abs(t)<e.eps?t=n+0:this.board.canvasWidth+e.eps>t&&t>this.board.canvasWidth-n-e.eps&&(t=this.board.canvasWidth-n),e.eps+n>s&&s>-e.eps?s=n:this.board.canvasHeight+e.eps>s&&s>this.board.canvasHeight-n-e.eps&&(s=this.board.canvasHeight-n)),new o(r.COORDS_BY_SCREEN,[t,s],this.board)},cloneToBackground:function(){var t,e,i,s={};return s.id=this.id+"T"+this.numTraces,s.elementClass=r.OBJECT_CLASS_LINE,this.numTraces++,s.point1=this.point1,s.point2=this.point2,s.stdform=this.stdform,s.board=this.board,s.visProp=l.deepCopy(this.visProp,this.visProp.traceattributes,!0),s.visProp.layer=this.board.options.layer.trace,l.clearVisPropOld(s),s.visPropCalc={visible:l.evaluate(s.visProp.visible)},e=this.getSlope(),t=this.getRise(),s.getSlope=function(){return e},s.getRise=function(){return t},i=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(s),this.board.renderer.enhancedRendering=i,this.traces[s.id]=s.rendNode,this},addTransform:function(t){var e,i=l.isArray(t)?t:[t],s=i.length;for(e=0;e<s;e++)this.point1.transformations.push(i[e]),this.point2.transformations.push(i[e]);return this},snapToGrid:function(t){var e,s,a,h,c,d,u,p;return l.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):l.exists(t)&&(u=l.evaluate(this.visProp.snapsizex),p=l.evaluate(this.visProp.snapsizey),c=(e=new o(r.COORDS_BY_SCREEN,[t.Xprev,t.Yprev],this.board)).usrCoords[1],d=e.usrCoords[2],u<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(u=(h=this.board.defaultAxes.x.defaultTicks).ticksDelta*(l.evaluate(h.visProp.minorticks)+1)),p<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(p=(h=this.board.defaultAxes.y.defaultTicks).ticksDelta*(l.evaluate(h.visProp.minorticks)+1)),u>0&&p>0&&(s=i.projectPointToLine({coords:e},this,this.board),a=n.subtract([1,Math.round(c/u)*u,Math.round(d/p)*p],s.usrCoords),this.board.create("transform",a.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var t=l.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(t),this.point2.handleSnapToPoints(t)),this},X:function(t){var i,s=this.stdform[2];return i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],t=2*(t-.5),(1-Math.abs(t))*i-t*s},Y:function(t){var i,s=this.stdform[1];return i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],t=2*(t-.5),(1-Math.abs(t))*i+t*s},Z:function(t){var i=Math.abs(this.point1.coords.usrCoords[0])>e.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return t=2*(t-.5),(1-Math.abs(t))*i},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var t=this.point1.coords.usrCoords,e=this.point2.coords.usrCoords;return[Math.min(t[1],e[1]),Math.max(t[2],e[2]),Math.max(t[1],e[1]),Math.min(t[2],e[2])]},addTicks:function(t){return""!==t.id&&l.exists(t.id)||(t.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(t),this.ticks.push(t),t.id},remove:function(){this.removeAllTicks(),a.prototype.remove.call(this)},removeAllTicks:function(){var t;for(t=this.ticks.length;t>0;t--)this.removeTicks(this.ticks[t-1]);this.ticks=[],this.board.update()},removeTicks:function(t){var e,i;for(l.exists(this.defaultTicks)&&this.defaultTicks===t&&(this.defaultTicks=null),e=this.ticks.length;e>0;e--)if(this.ticks[e-1]===t){if(this.board.removeObject(this.ticks[e-1]),this.ticks[e-1].ticks)for(i=0;i<this.ticks[e-1].ticks.length;i++)l.exists(this.ticks[e-1].labels[i])&&this.board.removeObject(this.ticks[e-1].labels[i]);delete this.ticks[e-1];break}}}),t.createLine=function(e,i,s){var n,r,o,a,c,d,u,p=[],f=!1,m=!1;if(2===i.length){if(l.isArray(i[0])&&i[0].length>1)d=l.copyAttributes(s,e.options,"line","point1"),o=e.create("point",i[0],d);else if(l.isString(i[0])||l.isPoint(i[0]))o=e.select(i[0]);else if(l.isFunction(i[0])&&l.isPoint(i[0]()))o=i[0](),m=!0;else if(l.isFunction(i[0])&&i[0]().length&&i[0]().length>=2)d=l.copyAttributes(s,e.options,"line","point1"),o=h.createPoint(e,i[0](),d),m=!0;else{if(!l.isObject(i[0])||!l.isTransformationOrArray(i[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");f=!0,d=l.copyAttributes(s,e.options,"line","point1"),o=e.create("point",[i[0].point1,i[1]],d)}if(f)d=l.copyAttributes(s,e.options,"line","point2"),a=e.create("point",[i[0].point2,i[1]],d);else if(l.isArray(i[1])&&i[1].length>1)d=l.copyAttributes(s,e.options,"line","point2"),a=e.create("point",i[1],d);else if(l.isString(i[1])||l.isPoint(i[1]))a=e.select(i[1]);else if(l.isFunction(i[1])&&l.isPoint(i[1]()))a=i[1](),m=!0;else{if(!(l.isFunction(i[1])&&i[1]().length&&i[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");d=l.copyAttributes(s,e.options,"line","point2"),a=h.createPoint(e,i[1](),d),m=!0}d=l.copyAttributes(s,e.options,"line"),r=new t.Line(e,o,a,d),m?(r.constrained=!0,r.funp1=i[0],r.funp2=i[1]):f||(r.isDraggable=!0),r.setParents([o.id,a.id])}else if(3===i.length){for(u=!0,c=0;c<3;c++)if(l.isNumber(i[c]))p[c]=l.createFunction(i[c]);else{if(!l.isFunction(i[c]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");p[c]=i[c],u=!1}d=l.copyAttributes(s,e.options,"line","point1"),o=e.create("point",u?[p[2]()*p[2]()+p[1]()*p[1](),p[2]()-p[1]()*p[0]()+p[2](),-p[1]()-p[2]()*p[0]()-p[1]()]:[function(){return.5*(p[2]()*p[2]()+p[1]()*p[1]())},function(){return.5*(p[2]()-p[1]()*p[0]()+p[2]())},function(){return.5*(-p[1]()-p[2]()*p[0]()-p[1]())}],d),d=l.copyAttributes(s,e.options,"line","point2"),a=e.create("point",u?[p[2]()*p[2]()+p[1]()*p[1](),-p[1]()*p[0]()+p[2](),-p[2]()*p[0]()-p[1]()]:[function(){return p[2]()*p[2]()+p[1]()*p[1]()},function(){return-p[1]()*p[0]()+p[2]()},function(){return-p[2]()*p[0]()-p[1]()}],d),o.prepareUpdate().update(),a.prepareUpdate().update(),d=l.copyAttributes(s,e.options,"line"),(r=new t.Line(e,o,a,d)).isDraggable=u,r.setParents([o,a])}else if(1===i.length&&l.isFunction(i[0])&&2===i[0]().length&&l.isPoint(i[0]()[0])&&l.isPoint(i[0]()[1]))n=i[0](),d=l.copyAttributes(s,e.options,"line"),(r=new t.Line(e,n[0],n[1],d)).constrained=!0,r.funps=i[0],r.setParents(n);else{if(!(1===i.length&&l.isFunction(i[0])&&3===i[0]().length&&l.isNumber(i[0]()[0])&&l.isNumber(i[0]()[1])&&l.isNumber(i[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");n=i[0],d=l.copyAttributes(s,e.options,"line","point1"),o=e.create("point",[function(){var t=n();return[.5*(t[2]*t[2]+t[1]*t[1]),.5*(t[2]-t[1]*t[0]+t[2]),.5*(-t[1]-t[2]*t[0]-t[1])]}],d),d=l.copyAttributes(s,e.options,"line","point2"),a=e.create("point",[function(){var t=n();return[t[2]*t[2]+t[1]*t[1],-t[1]*t[0]+t[2],-t[2]*t[0]-t[1]]}],d),d=l.copyAttributes(s,e.options,"line"),(r=new t.Line(e,o,a,d)).constrained=!0,r.funps=i[0],r.setParents([o,a])}return r},t.registerElement("line",t.createLine),t.createSegment=function(t,e,i){var s,n;if(i.straightFirst=!1,i.straightLast=!1,n=l.copyAttributes(i,t.options,"segment"),s=t.create("line",e.slice(0,2),n),3===e.length){if(s.hasFixedLength=!0,l.isNumber(e[2]))s.fixedLength=function(){return e[2]};else{if(!l.isFunction(e[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof e[2]+"'.\nPossible third parent types: number or function");s.fixedLength=e[2]}s.getParents=function(){return this.parents.concat(this.fixedLength())},s.fixedLengthOldCoords=[],s.fixedLengthOldCoords[0]=new o(r.COORDS_BY_USER,s.point1.coords.usrCoords.slice(1,3),t),s.fixedLengthOldCoords[1]=new o(r.COORDS_BY_USER,s.point2.coords.usrCoords.slice(1,3),t)}return s.elType="segment",s},t.registerElement("segment",t.createSegment),t.createArrow=function(t,e,i){var s;return i.firstArrow=!1,i.lastArrow=!0,(s=t.create("line",e,i).setStraight(!1,!1)).type=r.OBJECT_TYPE_VECTOR,s.elType="arrow",s},t.registerElement("arrow",t.createArrow),t.createAxis=function(t,e,i){var s,n,o,a,h;if(!l.isArray(e[0])&&!l.isPoint(e[0])||!l.isArray(e[1])&&!l.isPoint(e[1]))throw new Error("JSXGraph: Can't create axis with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");for(a in s=l.copyAttributes(i,t.options,"axis"),(o=t.create("line",e,s)).type=r.OBJECT_TYPE_AXIS,o.isDraggable=!1,o.point1.isDraggable=!1,o.point2.isDraggable=!1,o.ancestors)o.ancestors.hasOwnProperty(a)&&(o.ancestors[a].type=r.OBJECT_TYPE_AXISPOINT);return n=l.copyAttributes(i,t.options,"axis","ticks"),h=l.exists(n.ticksdistance)?n.ticksdistance:l.isArray(n.ticks)?n.ticks:1,o.defaultTicks=t.create("ticks",[o,h],n),o.defaultTicks.dump=!1,o.elType="axis",o.subs={ticks:o.defaultTicks},o.inherits.push(o.defaultTicks),o},t.registerElement("axis",t.createAxis),t.createTangent=function(t,i,n){var o,a,h,c,d,u,p;if(1===i.length)a=(o=i[0]).slideObject;else{if(2!==i.length)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(l.isPoint(i[0]))o=i[0],a=i[1];else{if(!l.isPoint(i[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");a=i[0],o=i[1]}}if(a.elementClass===r.OBJECT_CLASS_LINE?(p=t.create("line",[a.point1,a.point2],n)).glider=o:a.elementClass===r.OBJECT_CLASS_CURVE&&a.type!==r.OBJECT_TYPE_CONIC?"plot"!==l.evaluate(a.visProp.curvetype)?(h=a.X,c=a.Y,p=t.create("line",[function(){return-o.X()*s.D(c)(o.position)+o.Y()*s.D(h)(o.position)},function(){return s.D(c)(o.position)},function(){return-s.D(h)(o.position)}],n),o.addChild(p),p.glider=o):(p=t.create("line",[function(){var t,e,i=Math.floor(o.position);return i===a.numberPoints-1&&i--,i<0?1:(t=a.points[i].usrCoords)[2]*(e=a.points[i+1].usrCoords)[1]-t[1]*e[2]},function(){var t=Math.floor(o.position);return t===a.numberPoints-1&&t--,t<0?0:a.points[t+1].usrCoords[2]-a.points[t].usrCoords[2]},function(){var t=Math.floor(o.position);return t===a.numberPoints-1&&t--,t<0?0:a.points[t].usrCoords[1]-a.points[t+1].usrCoords[1]}],n),o.addChild(p),p.glider=o):a.type===r.OBJECT_TYPE_TURTLE?(p=t.create("line",[function(){var t=Math.floor(o.position);for(d=0;d<a.objects.length;d++)if((u=a.objects[d]).type===r.OBJECT_TYPE_CURVE){if(t<u.numberPoints)break;t-=u.numberPoints}return t===u.numberPoints-1&&t--,t<0?1:u.Y(t)*u.X(t+1)-u.X(t)*u.Y(t+1)},function(){var t=Math.floor(o.position);for(d=0;d<a.objects.length;d++)if((u=a.objects[d]).type===r.OBJECT_TYPE_CURVE){if(t<u.numberPoints)break;t-=u.numberPoints}return t===u.numberPoints-1&&t--,t<0?0:u.Y(t+1)-u.Y(t)},function(){var t=Math.floor(o.position);for(d=0;d<a.objects.length;d++)if((u=a.objects[d]).type===r.OBJECT_TYPE_CURVE){if(t<u.numberPoints)break;t-=u.numberPoints}return t===u.numberPoints-1&&t--,t<0?0:u.X(t)-u.X(t+1)}],n),o.addChild(p),p.glider=o):a.elementClass!==r.OBJECT_CLASS_CIRCLE&&a.type!==r.OBJECT_TYPE_CONIC||(p=t.create("line",[function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[0]},function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[1]},function(){return e.matVecMult(a.quadraticform,o.coords.usrCoords)[2]}],n),o.addChild(p),p.glider=o),!l.exists(p))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return p.elType="tangent",p.type=r.OBJECT_TYPE_TANGENT,p.setParents(i),p},t.createRadicalAxis=function(t,i,s){var n,o,a;if(2!==i.length||i[0].elementClass!==r.OBJECT_CLASS_CIRCLE||i[1].elementClass!==r.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent type: [circle,circle]");return o=t.select(i[0]),a=t.select(i[1]),(n=t.create("line",[function(){var t=o.stdform,i=a.stdform;return e.matVecMult(e.transpose([t.slice(0,3),i.slice(0,3)]),[i[3],-t[3]])}],s)).elType="radicalaxis",n.setParents([o.id,a.id]),o.addChild(n),a.addChild(n),n},t.createPolarLine=function(t,e,i){var s,n,o,a,h,c,d;if(e.length>1&&(a=e[0].type===r.OBJECT_TYPE_CONIC||e[0].elementClass===r.OBJECT_CLASS_CIRCLE,h=e[1].type===r.OBJECT_TYPE_CONIC||e[1].elementClass===r.OBJECT_CLASS_CIRCLE,c=l.isPoint(e[0]),d=l.isPoint(e[1])),2!==e.length||!(a&&d||c&&h))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return d?(n=t.select(e[0]),o=t.select(e[1])):(n=t.select(e[1]),o=t.select(e[0])),(s=t.create("tangent",[n,o],i)).elType="polarline",s},t.registerElement("tangent",t.createTangent),t.registerElement("polar",t.createTangent),t.registerElement("radicalaxis",t.createRadicalAxis),t.registerElement("polarline",t.createPolarLine),{Line:t.Line,createLine:t.createLine,createTangent:t.createTangent,createPolar:t.createTangent,createSegment:t.createSegment,createAxis:t.createAxis,createArrow:t.createArrow,createRadicalAxis:t.createRadicalAxis,createPolarLine:t.createPolarLine}}),define("base/curve",["jxg","base/constants","base/coords","base/element","math/math","math/statistics","math/numerics","math/geometry","parser/geonext","utils/type","base/transformation","math/qdt"],function(t,e,i,s,n,r,o,a,l,h,c,d){"use strict";return t.Curve=function(t,i,s){this.constructor(t,s,e.OBJECT_TYPE_CURVE,e.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=h.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.qdt=null,this.varname=h.exists(i[0])?i[0]:"x",this.xterm=i[1],this.yterm=i[2],this.generateTerm(this.varname,this.xterm,this.yterm,i[3],i[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),h.isString(this.xterm)&&this.notifyParents(this.xterm),h.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=h.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},t.Curve.prototype=new s,t.extend(t.Curve.prototype,{minX:function(){return"polar"===h.evaluate(this.visProp.curvetype)?0:new i(e.COORDS_BY_SCREEN,[0,0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===h.evaluate(this.visProp.curvetype)?2*Math.PI:new i(e.COORDS_BY_SCREEN,[this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(t){return NaN},Y:function(t){return NaN},Z:function(t){return 1},hasPoint:function(t,s,r){var o,l,c,d,u,p,f,m,g,b,y,v,C,x=[],_=h.evaluate(this.visProp.numberpointslow),P=(this.maxX()-this.minX())/_,S=this.board.options.precision.hasPoint,w=1/0;if(t=(l=new i(e.COORDS_BY_SCREEN,[t,s],this.board,!1)).usrCoords[1],s=l.usrCoords[2],S+=.5*h.evaluate(this.visProp.strokewidth),S*=S,y=this.board.unitX*this.board.unitX,v=this.board.unitY*this.board.unitY,"parameter"===(C=h.evaluate(this.visProp.curvetype))||"polar"===C)for(this.transformations.length>0&&(this.updateTransformMatrix(),d=n.inverse(this.transformMat),t=(u=n.matVecMult(d,[1,t,s]))[1],s=u[2]),p=0,o=this.minX();p<_;p++){if((w=(t-(f=this.X(o,!0)))*(t-f)*y+(s-(m=this.Y(o,!0)))*(s-m)*v)<=S)return!0;o+=P}else if("plot"===C||"functiongraph"===C){for((!h.exists(r)||r<0)&&(r=0),h.exists(this.qdt)&&h.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?c=(g=(b=this.qdt.query(new i(e.COORDS_BY_USER,[t,s],this.board))).points).length:(g=this.points,c=this.numberPoints-1),p=r;p<c;p++)if(3===this.bezierDegree?x.push(a.projectCoordsToBeziersegment([1,t,s],this,p)):b?(g[p].prev&&(x=a.projectCoordsToSegment([1,t,s],g[p].prev.usrCoords,g[p].usrCoords)),g[p].next&&g[p+1]!==g[p].next&&(x=a.projectCoordsToSegment([1,t,s],g[p].usrCoords,g[p].next.usrCoords))):x=a.projectCoordsToSegment([1,t,s],g[p].usrCoords,g[p+1].usrCoords),x[1]>=0&&x[1]<=1&&(t-x[0][1])*(t-x[0][1])*y+(s-x[0][2])*(s-x[0][2])*v<=S)return!0;return!1}return w<S},allocatePoints:function(){var t,s;if(s=this.numberPoints,this.points.length<this.numberPoints)for(t=this.points.length;t<s;t++)this.points[t]=new i(e.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(h.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.checkReal(),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var t,i,s,n,r,a,l=!1;if(this.updateTransformMatrix(),this.updateDataArray(),i=this.minX(),s=this.maxX(),h.exists(this.dataX))for(this.numberPoints=this.dataX.length,t=this.numberPoints,this.allocatePoints(),a=0;a<t;a++)n=a,h.exists(this.dataY)?(r=a,this.points[a].setCoordinates(e.COORDS_BY_USER,[this.dataX[a],this.dataY[a]],!1)):(r=this.X(n),this.points[a].setCoordinates(e.COORDS_BY_USER,[this.dataX[a],this.Y(r,l)],!1)),this.points[a]._t=a,this.updateTransform(this.points[a]),l=!0;else{if(h.evaluate(this.visProp.doadvancedplot)?this.updateParametricCurve(i,s):h.evaluate(this.visProp.doadvancedplotold)?this.updateParametricCurveOld(i,s):(this.numberPoints=h.evaluate(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.visProp.numberpointshigh:this.visProp.numberpointslow),this.allocatePoints(),this.updateParametricCurveNaive(i,s,this.numberPoints)),t=this.numberPoints,h.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new d(this.board.getBoundingBox()),a=0;a<this.points.length;a++)this.qdt.insert(this.points[a]),a>0&&(this.points[a].prev=this.points[a-1]),a<t-1&&(this.points[a].next=this.points[a+1]);for(a=0;a<t;a++)this.updateTransform(this.points[a])}return"plot"!==h.evaluate(this.visProp.curvetype)&&h.evaluate(this.visProp.rdpsmoothing)&&(this.points=o.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),this},updateTransformMatrix:function(){var t,e,i=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],e=0;e<i;e++)(t=this.transformations[e]).update(),this.transformMat=n.matMatMult(t.matrix,this.transformMat);return this},checkReal:function(){var t,e,i=!1,s=this.numberPoints;for(t=0;t<s;t++)if(e=this.points[t].usrCoords,!isNaN(e[1])&&!isNaN(e[2])&&Math.abs(e[0])>n.eps){i=!0;break}this.isReal=i},updateParametricCurveNaive:function(t,i,s){var n,r,o=!1,a=(i-t)/s;for(n=0;n<s;n++)this.points[n].setCoordinates(e.COORDS_BY_USER,[this.X(r=t+n*a,o),this.Y(r,o)],!1),this.points[n]._t=r,o=!0;return this},updateParametricCurveOld:function(s,r){var o,a,l,h,c,d,u,p,f,m,g,b=!1,y=new i(e.COORDS_BY_USER,[0,0],this.board,!1),v=[],C=[],x=[],_=[],P=!1,S=0;for(t.deprecated("Curve.updateParametricCurveOld()"),this.board.updateQuality===this.board.BOARD_QUALITY_LOW?(f=15,m=10,g=10):(f=21,m=.7,g=.7),_[0]=r-s,o=1;o<f;o++)_[o]=.5*_[o-1];o=1,v[0]=1,C[0]=0,y.setCoordinates(e.COORDS_BY_USER,[this.X(a=s,b),this.Y(a,b)],!1),b=!0,c=y.scrCoords[1],d=y.scrCoords[2],t0=a,y.setCoordinates(e.COORDS_BY_USER,[this.X(a=r,b),this.Y(a,b)],!1),x[0]=[l=y.scrCoords[1],h=y.scrCoords[2]],u=1,p=0,this.points=[],this.points[S++]=new i(e.COORDS_BY_SCREEN,[c,d],this.board,!1);do{for(P=this.isDistOK(l-c,h-d,m,g)||this.isSegmentOutside(c,d,l,h);p<f&&(!P||p<6)&&(p<=7||this.isSegmentDefined(c,d,l,h));)v[u]=o,C[u]=p,x[u]=[l,h],u+=1,y.setCoordinates(e.COORDS_BY_USER,[this.X(a=s+(o=2*o-1)*_[++p],b),this.Y(a,b)],!1,!0),P=this.isDistOK((l=y.scrCoords[1])-c,(h=y.scrCoords[2])-d,m,g)||this.isSegmentOutside(c,d,l,h);S>1&&function(t,e,i){var s,r=i[1]-t[1],o=i[2]-t[2],a=e[0]-t[1],l=e[1]-t[2],h=a*a+l*l;return h>=n.eps&&(s=(r*a+o*l)/h)>0&&(s<=1?(r-=s*a,o-=s*l):(r-=a,o-=l)),Math.sqrt(r*r+o*o)}(this.points[S-2].scrCoords,[l,h],this.points[S-1].scrCoords)<.015&&(S-=1),this.points[S]=new i(e.COORDS_BY_SCREEN,[l,h],this.board,!1),this.points[S]._t=a,S+=1,c=l,d=h,t0=a,l=x[u-=1][0],h=x[u][1],p=C[u]+1,o=2*v[u]}while(u>0&&S<5e5);return this.numberPoints=this.points.length,this},isSegmentOutside:function(t,e,i,s){return e<0&&s<0||e>this.board.canvasHeight&&s>this.board.canvasHeight||t<0&&i<0||t>this.board.canvasWidth&&i>this.board.canvasWidth},isDistOK:function(t,e,i,s){return Math.abs(t)<i&&Math.abs(e)<s&&!isNaN(t+e)},isSegmentDefined:function(t,e,i,s){return!(isNaN(t+e)&&isNaN(i+s))},_insertPoint:function(t,e){var i=!isNaN(this._lastCrds[1]+this._lastCrds[2]),s=!isNaN(t.scrCoords[1]+t.scrCoords[2]);(!(s=s&&t.scrCoords[1]>-500&&t.scrCoords[2]>-500&&t.scrCoords[1]<this.board.canvasWidth+500&&t.scrCoords[2]<this.board.canvasHeight+500)&&i||s&&(!i||Math.abs(t.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(t.scrCoords[2]-this._lastCrds[2])>.7))&&(t._t=e,this.points.push(t),this._lastCrds=t.copy("scrCoords"))},_intersectWithBorder:function(t,e,i){var s,r,o;return i<=0?(0!==(s=n.crossProduct([-e[0],1,0],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):o=1/0,o<e[3]?0!==(s=n.crossProduct([-e[3],0,1],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):r=1/0:o>e[1]&&(0!==(s=n.crossProduct([-e[1],0,1],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):r=1/0)):(0!==(s=n.crossProduct([-e[2],1,0],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):o=1/0,o<e[3]?0!==(s=n.crossProduct([-e[3],0,1],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):r=1/0:o>e[1]&&(0!==(s=n.crossProduct([-e[1],0,1],t))[0]?(r=s[1]/s[0],o=s[2]/s[0]):r=1/0)),[1,r,o]},_borderCase:function(t,s,n,r,o,a,l){var h,c,d,u,p,f,m,g,b,y,v,C,x,_=null,P=!1;if(l<=1){c=new i(e.COORDS_BY_USER,[0,0],this.board,!1),u=0;do{if(isNaN(t[1]+t[2])&&!isNaN(n[1]+n[2]))p=r,f=a,m=o;else if(isNaN(s[1]+s[2])&&!isNaN(n[1]+n[2]))p=o,f=a,m=r;else if(isNaN(n[1]+n[2])&&!isNaN(s[1]+s[2]))p=a,f=o,m=o+(o-a);else{if(!isNaN(n[1]+n[2])||isNaN(t[1]+t[2]))return!1;p=a,f=r,m=r-(a-r)}c.setCoordinates(e.COORDS_BY_USER,[this.X(h=.5*(p+f),!0),this.Y(h,!0)],!1),d=c.usrCoords,(P=isNaN(d[1]+d[2]))?p=h:(m=f,f=h),++u}while(P&&u<30);if(u<30&&(_=d.slice(),n=d.slice(),f=h),C=((b=this.X(f,!0))-(v=this.X(m,!0)))/(f-m),x=((y=this.Y(f,!0))-this.Y(m,!0))/(f-m),g=this.board.getBoundingBox(),Math.sqrt(C*C+x*x)>500&&(_=this._intersectWithBorder([C*y-x*b,x,-C],g,b-v)),null!==_)return this._insertPoint(new i(e.COORDS_BY_USER,_,this.board,!1)),!0}return!1},_triangleDists:function(t,e,i){var s;return s=[t[0]*e[0],.5*(t[1]+e[1]),.5*(t[2]+e[2])],[a.distance(t,e,3),a.distance(t,i,3),a.distance(i,e,3),a.distance(i,s,3)]},_isUndefined:function(t,s,n,r){var o,a,l;if(!isNaN(t[1]+t[2])||!isNaN(n[1]+n[2]))return!1;for(l=new i(e.COORDS_BY_USER,[0,0],this.board,!1),a=0;a<20;++a)if(o=s+Math.random()*(r-s),l.setCoordinates(e.COORDS_BY_USER,[this.X(o,!0),this.Y(o,!0)],!1),!isNaN(l.scrCoords[0]+l.scrCoords[1]+l.scrCoords[2]))return!1;return!0},_isOutside:function(t,e,i,s){var n=this.board.canvasWidth,r=this.board.canvasHeight;return!!(t[1]<-500&&i[1]<-500||t[2]<-500&&i[2]<-500||t[1]>n+500&&i[1]>n+500||t[2]>r+500&&i[2]>r+500)},_plotRecursive:function(t,s,n,r,o,a){var l,h,c,d,u,p=0,f=new i(e.COORDS_BY_USER,[0,0],this.board,!1);if(!(this.numberPoints>65536))return o<this.nanLevel&&this._isUndefined(t,s,n,r)?this:o<this.nanLevel&&this._isOutside(t,s,n,r)?this:(f.setCoordinates(e.COORDS_BY_USER,[this.X(l=.5*(s+r),!0),this.Y(l,!0)],!1),this._borderCase(t,n,h=f.scrCoords,s,r,l,o)?this:(c=this._triangleDists(t,n,h),d=o<this.smoothLevel&&c[3]<a,u=o<this.jumpLevel&&(c[2]>.99*c[0]||c[1]>.99*c[0]||c[0]===1/0||c[1]===1/0||c[2]===1/0),o<this.smoothLevel+2&&c[0]<.5*(c[1]+c[2])&&(p=0,d=!1),--o,u?this._insertPoint(new i(e.COORDS_BY_SCREEN,[NaN,NaN],this.board,!1),l):o<=p||d?this._insertPoint(f,l):(this._plotRecursive(t,s,h,l,o,a),this._insertPoint(f,l),this._plotRecursive(h,l,n,r,o,a)),this))},updateParametricCurve:function(t,s){var n,r,o,a,l,c,d=!1,u=new i(e.COORDS_BY_USER,[0,0],this.board,!1),p=new i(e.COORDS_BY_USER,[0,0],this.board,!1);return this.board.updateQuality===this.board.BOARD_QUALITY_LOW?(l=h.evaluate(this.visProp.recursiondepthlow)||13,c=2,this.smoothLevel=5,this.jumpLevel=5):(l=h.evaluate(this.visProp.recursiondepthhigh)||17,c=2,this.smoothLevel=3,this.jumpLevel=3),this.nanLevel=l-4,this.points=[],u.setCoordinates(e.COORDS_BY_USER,[this.X(n=t,d),this.Y(n,d)],!1),o=u.copy("scrCoords"),p.setCoordinates(e.COORDS_BY_USER,[this.X(r=s,d=!0),this.Y(r,d)],!1),a=p.copy("scrCoords"),u._t=n,this.points.push(u),this._lastCrds=u.copy("scrCoords"),this._plotRecursive(o,n,a,r,l,c),p._t=r,this.points.push(p),this.numberPoints=this.points.length,this},updateTransform:function(t){var i;return this.transformations.length>0&&(i=n.matVecMult(this.transformMat,t.usrCoords),t.setCoordinates(e.COORDS_BY_USER,[i[1],i[2]],!1,!0)),t},addTransform:function(t){var e,i=h.isArray(t)?t:[t],s=i.length;for(e=0;e<s;e++)this.transformations.push(i[e]);return this},interpolationFunctionFromArray:function(t){var e="data"+t;return function(t,i){var s,n,r,o,a=this[e],l=a.length,c=[];if(isNaN(t))return NaN;if(t<0)return h.isFunction(a[0])?a[0]():a[0];if(3===this.bezierDegree){if(t>=(l/=3))return h.isFunction(a[a.length-1])?a[a.length-1]():a[a.length-1];for(s=3*Math.floor(t),o=1-(r=t%1),n=0;n<4;n++)c[n]=h.isFunction(a[s+n])?a[s+n]():a[s+n];return o*o*(o*c[0]+3*r*c[1])+(3*o*c[2]+r*c[3])*r*r}if((s=t>l-2?l-2:parseInt(Math.floor(t),10))===t)return h.isFunction(a[s])?a[s]():a[s];for(n=0;n<2;n++)c[n]=h.isFunction(a[s+n])?a[s+n]():a[s+n];return c[0]+(c[1]-c[0])*(t-s)}},generateTerm:function(t,e,i,s,n){var r,o;h.isArray(e)?(this.dataX=e,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray("X"),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=h.createFunction(e,this.board,t),h.isString(e)?this.visProp.curvetype="functiongraph":(h.isFunction(e)||h.isNumber(e))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),h.isArray(i)?(this.dataY=i,this.Y=this.interpolationFunctionFromArray("Y")):this.Y=h.createFunction(i,this.board,t),h.isFunction(e)&&h.isArray(i)&&(r=h.createFunction(i[0],this.board,""),o=h.createFunction(i[1],this.board,""),this.X=function(t){return e(t)*Math.cos(t)+r()},this.Y=function(t){return e(t)*Math.sin(t)+o()},this.visProp.curvetype="polar"),h.exists(s)&&(this.minX=h.createFunction(s,this.board,"")),h.exists(n)&&(this.maxX=h.createFunction(n,this.board,""))},notifyParents:function(t){var e,i,s,n=!1;for(e in s={xterm:1,yterm:1})if(s.hasOwnProperty(e)&&this.hasOwnProperty(e)&&this[e].origin)for(i in n=!0,this[e].origin.deps)this[e].origin.deps.hasOwnProperty(i)&&this[e].origin.deps[i].addChild(this);n||l.findDependencies(this,t,this.board)},getLabelAnchor:function(){var t,s,n,r=.05*this.board.canvasWidth,o=.05*this.board.canvasHeight,l=.95*this.board.canvasWidth,c=.95*this.board.canvasHeight;switch(h.evaluate(this.visProp.label.position)){case"ulft":s=r,n=o;break;case"llft":s=r,n=c;break;case"rt":s=l,n=.5*c;break;case"lrt":s=l,n=c;break;case"urt":s=l,n=o;break;case"top":s=.5*l,n=o;break;case"bot":s=.5*l,n=c;break;default:s=r,n=.5*c}return t=new i(e.COORDS_BY_SCREEN,[s,n],this.board,!1),a.projectCoordsToCurve(t.usrCoords[1],t.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var t,i={id:this.id+"T"+this.numTraces,elementClass:e.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:h.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return i.visProp.layer=this.board.options.layer.trace,i.visProp.curvetype=this.visProp.curvetype,this.numTraces++,h.clearVisPropOld(i),i.visPropCalc={visible:h.evaluate(i.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(i),this.board.renderer.enhancedRendering=t,this.traces[i.id]=i.rendNode,this},bounds:function(){var t,e,i,s=1/0,n=-1/0,r=1/0,a=-1/0,l=this.points.length;if(3===this.bezierDegree){for(t=0;t<l;t++)this.points[t].X=h.bind(function(){return this.usrCoords[1]},this.points[t]),this.points[t].Y=h.bind(function(){return this.usrCoords[2]},this.points[t]);return i=(e=o.bezier(this.points))[3](),s=o.fminbr(function(t){return e[0](t)},[0,i]),n=o.fminbr(function(t){return-e[0](t)},[0,i]),r=o.fminbr(function(t){return e[1](t)},[0,i]),a=o.fminbr(function(t){return-e[1](t)},[0,i]),s=e[0](s),n=e[0](n),r=e[1](r),[s,a=e[1](a),n,r]}for(t=0;t<l;t++)s>this.points[t].usrCoords[1]&&(s=this.points[t].usrCoords[1]),n<this.points[t].usrCoords[1]&&(n=this.points[t].usrCoords[1]),r>this.points[t].usrCoords[2]&&(r=this.points[t].usrCoords[2]),a<this.points[t].usrCoords[2]&&(a=this.points[t].usrCoords[2]);return[s,a,n,r]},getParents:function(){var t=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(t=this.parents),t},moveTo:function(t){var i;return this.points.length>0&&!h.evaluate(this.visProp.fixed)&&(i=this.points[0],this.setPosition(e.COORDS_BY_USER,3===t.length?[t[0]-i.usrCoords[0],t[1]-i.usrCoords[1],t[2]-i.usrCoords[2]]:[t[0]-i.usrCoords[1],t[1]-i.usrCoords[2]])),this}}),t.createCurve=function(i,s,n){var r,o,a=h.copyAttributes(n,i.options,"curve");return r=i.select(s[0]),h.isObject(r)&&(r.type===e.OBJECT_TYPE_CURVE||r.type===e.OBJECT_TYPE_ANGLE||r.type===e.OBJECT_TYPE_ARC||r.type===e.OBJECT_TYPE_CONIC||r.type===e.OBJECT_TYPE_SECTOR)&&h.isTransformationOrArray(s[1])?(r.type===e.OBJECT_TYPE_SECTOR?a=h.copyAttributes(n,i.options,"sector"):r.type===e.OBJECT_TYPE_ARC?a=h.copyAttributes(n,i.options,"arc"):r.type===e.OBJECT_TYPE_ANGLE?(h.exists(n.withLabel)||(n.withLabel=!1),a=h.copyAttributes(n,i.options,"angle")):a=h.copyAttributes(n,i.options,"curve"),a=h.copyAttributes(a,i.options,"curve"),(o=new t.Curve(i,["x",[],[]],a)).updateDataArray=function(){var t,e=r.numberPoints;for(this.bezierDegree=r.bezierDegree,this.dataX=[],this.dataY=[],t=0;t<e;t++)this.dataX.push(r.points[t].usrCoords[1]),this.dataY.push(r.points[t].usrCoords[2]);return this},o.addTransform(s[1]),o):(a=h.copyAttributes(n,i.options,"curve"),new t.Curve(i,["x"].concat(s),a))},t.registerElement("curve",t.createCurve),t.createFunctiongraph=function(e,i,s){var n,r=["x","x"].concat(i);return(n=h.copyAttributes(s,e.options,"curve")).curvetype="functiongraph",new t.Curve(e,r,n)},t.registerElement("functiongraph",t.createFunctiongraph),t.registerElement("plot",t.createFunctiongraph),t.createSpline=function(e,i,s){var n,r;return r=function(){var t,e=[],s=[];return function(n,r){var a,l,c;if(!r){if(e=[],s=[],2===i.length&&h.isArray(i[0])&&h.isArray(i[1])&&i[0].length===i[1].length)for(a=0;a<i[0].length;a++)h.isFunction(i[0][a])?e.push(i[0][a]()):e.push(i[0][a]),h.isFunction(i[1][a])?s.push(i[1][a]()):s.push(i[1][a]);else for(a=0;a<i.length;a++)if(h.isPoint(i[a]))e.push(i[a].X()),s.push(i[a].Y());else if(h.isArray(i[a])&&2===i[a].length)for(l=0;l<i.length;l++)h.isFunction(i[l][0])?e.push(i[l][0]()):e.push(i[l][0]),h.isFunction(i[l][1])?s.push(i[l][1]()):s.push(i[l][1]);else h.isFunction(i[a])&&2===i[a]().length&&(c=i[a](),e.push(c[0]),s.push(c[1]));t=o.splineDef(e,s)}return o.splineEval(n,e,s,t)}},(s=h.copyAttributes(s,e.options,"curve")).curvetype="functiongraph",(n=new t.Curve(e,["x","x",r()],s)).setParents(i),n.elType="spline",n},t.registerElement("spline",t.createSpline),t.createCardinalSpline=function(e,i,s){var n,r,a,l,c,d,u,p="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!h.exists(i[0])||!h.isArray(i[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+p);if(!h.exists(i[1])||!h.isNumber(i[1])&&!h.isFunction(i[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+p);if(!h.exists(i[2])||!h.isString(i[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+p);if(s=h.copyAttributes(s,e.options,"curve"),(s=h.copyAttributes(s,e.options,"cardinalspline")).curvetype="parameter",a=i[0],l=[],!s.isarrayofcoordinates&&2===a.length&&h.isArray(a[0])&&h.isArray(a[1])&&a[0].length===a[1].length)for(c=0;c<a[0].length;c++)l[c]=[],h.isFunction(a[0][c])?l[c].push(a[0][c]()):l[c].push(a[0][c]),h.isFunction(a[1][c])?l[c].push(a[1][c]()):l[c].push(a[1][c]);else for(c=0;c<a.length;c++)h.isString(a[c])?l.push(e.select(a[c])):h.isPoint(a[c])?l.push(a[c]):h.isArray(a[c])&&2===a[c].length?(l[c]=[],h.isFunction(a[c][0])?l[c].push(a[c][0]()):l[c].push(a[c][0]),h.isFunction(a[c][1])?l[c].push(a[c][1]()):l[c].push(a[c][1])):h.isFunction(a[c])&&2===a[c]().length&&l.push(i[c]());if(!0===s.createpoints)r=h.providePoints(e,l,s,"cardinalspline",["points"]);else for(r=[],c=0;c<l.length;c++)h.isPoint(l[c])?r.push(l[c]):r.push(function(t){return{X:function(){return l[t][0]},Y:function(){return l[t][1]}}}(c));for(u=["x"].concat(o.CardinalSpline(r,i[1])),n=new t.Curve(e,u,s),d=r.length,n.setParents(r),c=0;c<d;c++)h.isPoint(r[c])&&r[c].addChild(n);return n.elType="cardinalspline",n},t.registerElement("cardinalspline",t.createCardinalSpline),t.createRiemannsum=function(t,e,i){var s,n,r,a,l,c;if((c=h.copyAttributes(i,t.options,"riemannsum")).curvetype="plot",r=e[0],s=h.createFunction(e[1],t,""),!h.exists(s))throw new Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(n=h.createFunction(e[2],t,"",!1),!h.exists(n))throw new Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return a=[[0],[0]].concat(e.slice(3)),(l=t.create("curve",a,c)).sum=0,l.Value=function(){return this.sum},l.updateDataArray=function(){var t=o.riemann(r,s(),n(),this.minX(),this.maxX());this.dataX=t[0],this.dataY=t[1],this.sum=t[2]},l},t.registerElement("riemannsum",t.createRiemannsum),t.createTracecurve=function(t,i,s){var n,r,o,a;if(2!==i.length)throw new Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(r=t.select(i[0]),o=t.select(i[1]),r.type!==e.OBJECT_TYPE_GLIDER||!h.isPoint(o))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [glider, point]");return(a=h.copyAttributes(s,t.options,"tracecurve")).curvetype="plot",(n=t.create("curve",[[0],[0]],a)).updateDataArray=function(){var t,i,s,n,l,h,c,d,u,p=a.numberpoints,f=r.position,m=r.slideObject,g=m.minX();for(i=(m.maxX()-g)/p,this.dataX=[],this.dataY=[],m.elementClass!==e.OBJECT_CLASS_CURVE&&p++,t=0;t<p;t++){for(n in h=m.X(s=g+t*i)/m.Z(s),c=m.Y(s)/m.Z(s),r.setPositionDirectly(e.COORDS_BY_USER,[h,c]),d=!1,this.board.objects)if(this.board.objects.hasOwnProperty(n)&&((l=this.board.objects[n])===r&&(d=!0),d&&l.needsRegularUpdate&&(u=l.visProp.trace,l.visProp.trace=!1,l.needsUpdate=!0,l.update(!0),l.visProp.trace=u,l===o)))break;this.dataX[t]=o.X(),this.dataY[t]=o.Y()}for(n in r.position=f,d=!1,this.board.objects)if(this.board.objects.hasOwnProperty(n)&&((l=this.board.objects[n])===r&&(d=!0),d&&l.needsRegularUpdate&&(u=l.visProp.trace,l.visProp.trace=!1,l.needsUpdate=!0,l.update(!0),l.visProp.trace=u,l===o)))break},n},t.registerElement("tracecurve",t.createTracecurve),t.createStepfunction=function(t,e,i){var s,n;if(2!==e.length)throw new Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return n=h.copyAttributes(i,t.options,"stepfunction"),(s=t.create("curve",e,n)).updateDataArray=function(){var t,e=0,i=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==i)for(this.dataX[e]=this.xterm[0],this.dataY[e]=this.yterm[0],++e,t=1;t<i;++t)this.dataX[e]=this.xterm[t],this.dataY[e]=this.dataY[e-1],this.dataX[++e]=this.xterm[t],this.dataY[e]=this.yterm[t],++e},s},t.registerElement("stepfunction",t.createStepfunction),t.createDerivative=function(t,i,s){var n,r,a,l,c;if(1!==i.length&&i[0].class!==e.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return c=h.copyAttributes(s,t.options,"curve"),a=o.D((r=i[0]).X),l=o.D(r.Y),(n=t.create("curve",[function(t){return r.X(t)},function(t){return l(t)/a(t)},r.minX(),r.maxX()],c)).setParents(r),n},t.registerElement("derivative",t.createDerivative),{Curve:t.Curve,createCurve:t.createCurve,createFunctiongraph:t.createFunctiongraph,createPlot:t.createPlot,createSpline:t.createSpline,createRiemannsum:t.createRiemannsum,createTracecurve:t.createTracecurve,createStepfunction:t.createStepfunction}}),define("element/conic",["jxg","base/constants","base/coords","math/math","math/numerics","math/geometry","utils/type","base/point","base/curve"],function(t,e,i,s,n,r,o,a,l){"use strict";return t.createEllipse=function(t,s,n){var r,a,l,h,c,d,u,p=[],f=o.copyAttributes(n,t.options,"conic","foci"),m=o.copyAttributes(n,t.options,"conic","center"),g=o.copyAttributes(n,t.options,"conic");for(d=0;d<2;d++)if(s[d].length>1)p[d]=t.create("point",s[d],f);else if(o.isPoint(s[d]))p[d]=t.select(s[d]);else if(o.isFunction(s[d])&&o.isPoint(s[d]()))p[d]=s[d]();else{if(!o.isString(s[d]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");p[d]=t.select(s[d])}if(o.isNumber(s[2]))c=o.createFunction(s[2],t);else if(o.isFunction(s[2])&&o.isNumber(s[2]()))c=s[2];else{if(o.isPoint(s[2]))h=t.select(s[2]);else if(s[2].length>1)h=t.create("point",s[2],f);else if(o.isFunction(s[2])&&o.isPoint(s[2]()))h=s[2]();else{if(!o.isString(s[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");h=t.select(s[2])}c=function(){return h.Dist(p[0])+h.Dist(p[1])}}for(o.exists(s[4])||(s[4]=2*Math.PI),o.exists(s[3])||(s[3]=0),l=t.create("point",[function(){return.5*(p[0].X()+p[1].X())},function(){return.5*(p[0].Y()+p[1].Y())}],m),(a=t.create("curve",[function(t){return 0},function(t){return 0},s[3],s[4]],g)).majorAxis=c,u=a.hasPoint,r=function(t,e){var i,s,n,r,o,l,h,d,u;e||(s=(i=c())*i,n=p[0].X(),r=p[0].Y(),o=p[1].X(),l=p[1].Y(),a.quadraticform=[[(u=(s-n*n-r*r+o*o+l*l)/(2*i))*u-o*o-l*l,u*(h=n-o)/i+o,u*(d=r-l)/i+l],[u*h/i+o,h*h/s-1,h*d/s],[u*d/i+l,h*d/s,d*d/s-1]])},a.X=function(t,e){var i=c(),s=p[1].Dist(p[0]),n=.5*(s*s-i*i)/(s*Math.cos(t)-i),o=Math.atan2(p[1].Y()-p[0].Y(),p[1].X()-p[0].X());return e||r(0,e),p[0].X()+Math.cos(o+t)*n},a.Y=function(t,e){var i=c(),s=p[1].Dist(p[0]),n=.5*(s*s-i*i)/(s*Math.cos(t)-i),r=Math.atan2(p[1].Y()-p[0].Y(),p[1].X()-p[0].X());return p[0].Y()+Math.sin(r+t)*n},a.midpoint=a.center=l,a.type=e.OBJECT_TYPE_CONIC,a.subs={center:a.center},a.inherits.push(a.center,p[0],p[1]),o.isPoint(h)&&a.inherits.push(h),a.hasPoint=function(t,s){var n,r,a,l;return o.evaluate(this.visProp.hasinnerpoints)?(n=p[0].coords,r=p[1].coords,a=this.majorAxis(),(l=new i(e.COORDS_BY_SCREEN,[t,s],this.board)).distance(e.COORDS_BY_USER,n)+l.distance(e.COORDS_BY_USER,r)<=a):u.apply(this,arguments)},l.addChild(a),d=0;d<2;d++)o.isPoint(p[d])&&p[d].addChild(a);return o.isPoint(h)&&h.addChild(a),a.setParents(s),a},t.createHyperbola=function(t,i,s){var n,r,a,l,h,c,d=[],u=o.copyAttributes(s,t.options,"conic","foci"),p=o.copyAttributes(s,t.options,"conic","center"),f=o.copyAttributes(s,t.options,"conic");for(c=0;c<2;c++)if(i[c].length>1)d[c]=t.create("point",i[c],u);else if(o.isPoint(i[c]))d[c]=t.select(i[c]);else if(o.isFunction(i[c])&&o.isPoint(i[c]()))d[c]=i[c]();else{if(!o.isString(i[c]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");d[c]=t.select(i[c])}if(o.isNumber(i[2]))h=o.createFunction(i[2],t);else if(o.isFunction(i[2])&&o.isNumber(i[2]()))h=i[2];else{if(o.isPoint(i[2]))l=t.select(i[2]);else if(i[2].length>1)l=t.create("point",i[2],u);else if(o.isFunction(i[2])&&o.isPoint(i[2]()))l=i[2]();else{if(!o.isString(i[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");l=t.select(i[2])}h=function(){return l.Dist(d[0])-l.Dist(d[1])}}for(o.exists(i[4])||(i[4]=1.0001*Math.PI),o.exists(i[3])||(i[3]=-1.0001*Math.PI),a=t.create("point",[function(){return.5*(d[0].X()+d[1].X())},function(){return.5*(d[0].Y()+d[1].Y())}],p),(r=t.create("curve",[function(t){return 0},function(t){return 0},i[3],i[4]],f)).majorAxis=h,n=function(t,e){var i,s,n,o,a,l,c,u,p;e||(s=(i=h())*i,n=d[0].X(),o=d[0].Y(),a=d[1].X(),l=d[1].Y(),r.quadraticform=[[(p=(s-n*n-o*o+a*a+l*l)/(2*i))*p-a*a-l*l,p*(c=n-a)/i+a,p*(u=o-l)/i+l],[p*c/i+a,c*c/s-1,c*u/s],[p*u/i+l,c*u/s,u*u/s-1]])},r.X=function(t,e){var i=h(),s=d[1].Dist(d[0]),r=.5*(s*s-i*i)/(s*Math.cos(t)+i),o=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return e||n(0,e),d[0].X()+Math.cos(o+t)*r},r.Y=function(t,e){var i=h(),s=d[1].Dist(d[0]),n=.5*(s*s-i*i)/(s*Math.cos(t)+i),r=Math.atan2(d[1].Y()-d[0].Y(),d[1].X()-d[0].X());return d[0].Y()+Math.sin(r+t)*n},r.midpoint=r.center=a,r.subs={center:r.center},r.inherits.push(r.center,d[0],d[1]),o.isPoint(l)&&r.inherits.push(l),r.type=e.OBJECT_TYPE_CONIC,a.addChild(r),c=0;c<2;c++)o.isPoint(d[c])&&d[c].addChild(r);return o.isPoint(l)&&l.addChild(r),r.setParents(i),r},t.createParabola=function(t,i,s){var n,a,l,h=i[0],c=i[1],d=o.copyAttributes(s,t.options,"conic","foci"),u=o.copyAttributes(s,t.options,"conic","center"),p=o.copyAttributes(s,t.options,"conic");if(i[0].length>1)h=t.create("point",i[0],d);else if(o.isPoint(i[0]))h=t.select(i[0]);else if(o.isFunction(i[0])&&o.isPoint(i[0]()))h=i[0]();else{if(!o.isString(i[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line]");h=t.select(i[0])}return o.exists(i[3])||(i[3]=10),o.exists(i[2])||(i[2]=-10),l=t.create("point",[function(){return r.projectPointToLine(h,c,t).usrCoords}],u),(a=t.create("curve",[function(t){return 0},function(t){return 0},i[2],i[3]],p)).midpoint=a.center=l,a.subs={center:a.center},a.inherits.push(a.center),n=function(t,e){var i,s,n,r,o,l;e||(n=c.stdform[0],r=(i=c.stdform[1])*i+(s=c.stdform[2])*s,o=h.X(),l=h.Y(),a.quadraticform=[[n*n-r*(o*o+l*l),n*i+r*o,n*s+r*l],[n*i+r*o,-s*s,i*s],[n*s+r*l,i*s,-i*i]])},a.X=function(t,e){var i,s=c.getAngle(),o=r.distPointLine(h.coords.usrCoords,c.stdform),a=c.point1.coords.usrCoords,l=c.point2.coords.usrCoords,d=h.coords.usrCoords;return 0===a[0]?a=[1,l[1]+c.stdform[2],l[2]-c.stdform[1]]:0===l[0]&&(l=[1,a[1]+c.stdform[2],a[2]-c.stdform[1]]),i=((l[1]-a[1])*(d[2]-a[2])-(l[2]-a[2])*(d[1]-a[1])>=0?1:-1)*o/(1-Math.sin(t)),e||n(0,e),h.X()+Math.cos(t+s)*i},a.Y=function(t,e){var i,s=c.getAngle(),n=r.distPointLine(h.coords.usrCoords,c.stdform),o=c.point1.coords.usrCoords,a=c.point2.coords.usrCoords,l=h.coords.usrCoords;return 0===o[0]?o=[1,a[1]+c.stdform[2],a[2]-c.stdform[1]]:0===a[0]&&(a=[1,o[1]+c.stdform[2],o[2]-c.stdform[1]]),i=((a[1]-o[1])*(l[2]-o[2])-(a[2]-o[2])*(l[1]-o[1])>=0?1:-1)*n/(1-Math.sin(t)),h.Y()+Math.sin(t+s)*i},a.type=e.OBJECT_TYPE_CONIC,l.addChild(a),o.isPoint(h)&&(h.addChild(a),a.inherits.push(h)),c.addChild(a),a.setParents(i),a},t.createConic=function(t,i,r){var a,l,h,c,d,u,p,f,m,g,b,y,v,C,x=[[1,0,0],[0,1,0],[0,0,1]],_=[[1,0,0],[0,1,0],[0,0,1]],P=[],S=[],w=o.copyAttributes(r,t.options,"conic","point"),E=o.copyAttributes(r,t.options,"conic","center"),k=o.copyAttributes(r,t.options,"conic");if(5===i.length)C=!0;else{if(6!==i.length)throw new Error("JSXGraph: Can't create generic Conic with "+i.length+" parameters.");C=!1}if(C)for(y=0;y<5;y++)if(i[y].length>1)P[y]=t.create("point",i[y],w);else if(o.isPoint(i[y]))P[y]=t.select(i[y]);else if(o.isFunction(i[y])&&o.isPoint(i[y]()))P[y]=i[y]();else{if(!o.isString(i[y]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof i[y]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");P[y]=t.select(i[y])}else(v=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=o.isFunction(i[2])?function(){return i[2]()}:function(){return i[2]},v[0][1]=o.isFunction(i[4])?function(){return i[4]()}:function(){return i[4]},v[0][2]=o.isFunction(i[5])?function(){return i[5]()}:function(){return i[5]},v[1][1]=o.isFunction(i[0])?function(){return i[0]()}:function(){return i[0]},v[1][2]=o.isFunction(i[3])?function(){return i[3]()}:function(){return i[3]},v[2][2]=o.isFunction(i[1])?function(){return i[1]()}:function(){return i[1]};if(d=function(t){var e,i;for(e=0;e<3;e++)for(i=e;i<3;i++)t[e][i]+=t[i][e];for(e=0;e<3;e++)for(i=0;i<e;i++)t[e][i]=t[i][e];return t},c=function(t,e){var i,s,n=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(s=0;s<3;s++)n[i][s]=t[i]*e[s];return d(n)},h=function(t,e,i){var n,r,o,a,l,h=[[0,0,0],[0,0,0],[0,0,0]];for(l=s.matVecMult(e,i),o=s.innerProduct(i,l),l=s.matVecMult(t,i),a=s.innerProduct(i,l),n=0;n<3;n++)for(r=0;r<3;r++)h[n][r]=o*t[n][r]-a*e[n][r];return h},l=t.create("curve",[function(t){return 0},function(t){return 0},0,2*Math.PI],k),a=function(t,e){var i,r,a,d;if(!e){if(C){for(i=0;i<5;i++)S[i]=P[i].coords.usrCoords;g=c(s.crossProduct(S[0],S[1]),s.crossProduct(S[2],S[3])),b=c(s.crossProduct(S[0],S[2]),s.crossProduct(S[1],S[3])),_=h(g,b,S[4])}else for(i=0;i<3;i++)for(r=i;r<3;r++)_[i][r]=v[i][r](),r>i&&(_[r][i]=_[i][r]);for(l.quadraticform=_,(u=n.Jacobi(_))[0][0][0]<0&&(u[0][0][0]*=-1,u[0][1][1]*=-1,u[0][2][2]*=-1),i=0;i<3;i++){for(a=0,r=0;r<3;r++)a+=u[1][r][i]*u[1][r][i];a=Math.sqrt(a)}x=u[1],m=Math.sqrt(Math.abs(u[0][0][0])),p=Math.sqrt(Math.abs(u[0][1][1])),f=Math.sqrt(Math.abs(u[0][2][2]))}return u[0][1][1]<=0&&u[0][2][2]<=0?d=s.matVecMult(x,[1/m,Math.cos(t)/p,Math.sin(t)/f]):u[0][1][1]<=0&&u[0][2][2]>0?d=s.matVecMult(x,[Math.cos(t)/m,1/p,Math.sin(t)/f]):u[0][2][2]<0&&(d=s.matVecMult(x,[Math.sin(t)/m,Math.cos(t)/p,1/f])),o.exists(d)?(d[1]/=d[0],d[2]/=d[0],d[0]=1):d=[1,NaN,NaN],d},l.X=function(t,e){return a(t,e)[1]},l.Y=function(t,e){return a(t,e)[2]},l.midpoint=t.create("point",[function(){var t=l.quadraticform;return[t[1][1]*t[2][2]-t[1][2]*t[1][2],t[1][2]*t[0][2]-t[2][2]*t[0][1],t[0][1]*t[1][2]-t[1][1]*t[0][2]]}],E),l.type=e.OBJECT_TYPE_CONIC,l.center=l.midpoint,l.subs={center:l.center},l.inherits.push(l.center),l.inherits=l.inherits.concat(P),C){for(y=0;y<5;y++)o.isPoint(P[y])&&P[y].addChild(l);l.setParents(i)}return l.addChild(l.center),l},t.registerElement("ellipse",t.createEllipse),t.registerElement("hyperbola",t.createHyperbola),t.registerElement("parabola",t.createParabola),t.registerElement("conic",t.createConic),{createEllipse:t.createEllipse,createHyperbola:t.createHyperbola,createParabola:t.createParabola,createConic:t.createConic}}),define("base/circle",["jxg","base/element","base/coords","base/constants","element/conic","parser/geonext","utils/type"],function(t,e,i,s,n,r,o){"use strict";return t.Circle=function(t,e,i,n,r){this.constructor(t,r,s.OBJECT_TYPE_CIRCLE,s.OBJECT_CLASS_CIRCLE),this.method=e,this.midpoint=this.board.select(i),this.center=this.board.select(i),this.point2=null,this.radius=0,this.line=null,this.circle=null,"twoPoints"===e?(this.point2=t.select(n),this.radius=this.Radius()):"pointRadius"===e?(this.gxtterm=n,this.updateRadius=o.createFunction(n,this.board,null,!0),this.updateRadius()):"pointLine"===e?(this.line=t.select(n),this.radius=this.line.point1.coords.distance(s.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===e&&(this.circle=t.select(n),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),this.center.addChild(this),"pointRadius"===e?this.notifyParents(n):"pointLine"===e?this.line.addChild(this):"pointCircle"===e?this.circle.addChild(this):"twoPoints"===e&&this.point2.addChild(this),this.methodMap=o.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",radius:"Radius",center:"center",line:"line",point2:"point2"})},t.Circle.prototype=new e,t.extend(t.Circle.prototype,{hasPoint:function(t,e){var n,r,a,l=this.board.options.precision.hasPoint,h=this.center.coords.usrCoords,c=new i(s.COORDS_BY_SCREEN,[t,e],this.board),d=this.Radius();return n=h[1]-c.usrCoords[1],r=h[2]-c.usrCoords[2],a=Math.sqrt(n*n+r*r),l+=.5*o.evaluate(this.visProp.strokewidth),l/=Math.sqrt(this.board.unitX*this.board.unitY),o.evaluate(this.visProp.hasinnerpoints)?a<d+l:Math.abs(a-d)<l},generatePolynomial:function(t){var e=this.center.symbolic.x,i=this.center.symbolic.y,s=t.symbolic.x,n=t.symbolic.y,r=this.generateRadiusSquared();return""===r?[]:["(("+s+")-("+e+"))^2 + (("+n+")-("+i+"))^2 - ("+r+")"]},generateRadiusSquared:function(){var t="";return"twoPoints"===this.method?t="(("+this.point2.symbolic.x+")-("+this.center.symbolic.x+"))^2 + (("+this.point2.symbolic.y+")-("+this.center.symbolic.y+"))^2":"pointRadius"===this.method?o.isNumber(this.radius)&&(t=(this.radius*this.radius).toString()):"pointLine"===this.method?t="(("+this.line.point1.symbolic.x+")-("+this.line.point2.symbolic.x+"))^2 + (("+this.line.point1.symbolic.y+")-("+this.line.point2.symbolic.y+"))^2":"pointCircle"===this.method&&(t=this.circle.Radius()),t},update:function(){return this.needsUpdate&&(o.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(s.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.updateStdform(),this.updateQuadraticform()),this},updateQuadraticform:function(){var t=this.center,e=t.X(),i=t.Y(),s=this.Radius();this.quadraticform=[[e*e+i*i-s*s,-e,-i],[-e,1,0],[-i,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=o.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(t){o.isString(t)&&r.findDependencies(this,t,this.board)},setRadius:function(t){return this.updateRadius=o.createFunction(t,this.board,null,!0),this.board.update(),this},Radius:function(t){return o.exists(t)?(this.setRadius(t),this.Radius()):"twoPoints"===this.method?o.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||o.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?this.updateRadius():NaN},getRadius:function(){return t.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var t,e,n=this.Radius(),r=this.center.coords.usrCoords;switch(o.evaluate(this.visProp.label.position)){case"lft":t=r[1]-n,e=r[2];break;case"llft":t=r[1]-Math.sqrt(.5)*n,e=r[2]-Math.sqrt(.5)*n;break;case"rt":t=r[1]+n,e=r[2];break;case"lrt":t=r[1]+Math.sqrt(.5)*n,e=r[2]-Math.sqrt(.5)*n;break;case"urt":t=r[1]+Math.sqrt(.5)*n,e=r[2]+Math.sqrt(.5)*n;break;case"top":t=r[1],e=r[2]+n;break;case"bot":t=r[1],e=r[2]-n;break;default:t=r[1]-Math.sqrt(.5)*n,e=r[2]+Math.sqrt(.5)*n}return new i(s.COORDS_BY_USER,[t,e],this.board)},cloneToBackground:function(){var t,e=this.Radius(),i={id:this.id+"T"+this.numTraces,elementClass:s.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return e},getRadius:function(){return e},board:this.board,visProp:o.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return i.visProp.layer=this.board.options.layer.trace,this.numTraces++,o.clearVisPropOld(i),i.visPropCalc={visible:o.evaluate(i.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(i),this.board.renderer.enhancedRendering=t,this.traces[i.id]=i.rendNode,this},addTransform:function(t){var e,i=o.isArray(t)?t:[t],s=i.length;for(e=0;e<s;e++)this.center.transformations.push(i[e]),"twoPoints"===this.method&&this.point2.transformations.push(i[e]);return this},snapToGrid:function(){var t=o.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(t,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(t,!0),this},snapToPoints:function(){var t=o.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(t),"twoPoints"===this.method&&this.point2.handleSnapToPoints(t),this},X:function(t){return this.Radius()*Math.cos(2*t*Math.PI)+this.center.coords.usrCoords[1]},Y:function(t){return this.Radius()*Math.sin(2*t*Math.PI)+this.center.coords.usrCoords[2]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var t=this.Radius();return t*t*Math.PI},bounds:function(){var t=this.center.coords.usrCoords,e=this.Radius();return[t[1]-e,t[2]+e,t[1]+e,t[2]-e]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),t.createCircle=function(e,i,r){var a,l,h,c,d;if(l=[],d=e.select(i[0]),o.isObject(d)&&d.elementClass===s.OBJECT_CLASS_CIRCLE&&o.isTransformationOrArray(i[1]))return c=o.copyAttributes(r,e.options,"circle"),(a=n.createEllipse(e,[d.center,d.center,function(){return 2*d.Radius()}],c)).addTransform(i[1]),a;for(h=0;h<i.length;h++)if(o.isPointType(e,i[h])){if(!1===(l=l.concat(o.providePoints(e,[i[h]],r,"circle",["center"])))[l.length-1])throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else l.push(i[h]);if(c=o.copyAttributes(r,e.options,"circle"),2===l.length&&o.isPoint(l[0])&&o.isPoint(l[1]))a=new t.Circle(e,"twoPoints",l[0],l[1],c);else if((o.isNumber(l[0])||o.isFunction(l[0])||o.isString(l[0]))&&o.isPoint(l[1]))a=new t.Circle(e,"pointRadius",l[1],l[0],c);else if((o.isNumber(l[1])||o.isFunction(l[1])||o.isString(l[1]))&&o.isPoint(l[0]))a=new t.Circle(e,"pointRadius",l[0],l[1],c);else if(l[0].elementClass===s.OBJECT_CLASS_CIRCLE&&o.isPoint(l[1]))a=new t.Circle(e,"pointCircle",l[1],l[0],c);else if(l[1].elementClass===s.OBJECT_CLASS_CIRCLE&&o.isPoint(l[0]))a=new t.Circle(e,"pointCircle",l[0],l[1],c);else if(l[0].elementClass===s.OBJECT_CLASS_LINE&&o.isPoint(l[1]))a=new t.Circle(e,"pointLine",l[1],l[0],c);else if(l[1].elementClass===s.OBJECT_CLASS_LINE&&o.isPoint(l[0]))a=new t.Circle(e,"pointLine",l[0],l[1],c);else{if(!(3===i.length&&o.isPoint(l[0])&&o.isPoint(l[1])&&o.isPoint(l[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");if(!t.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");a=t.elements.circumcircle(e,l,c)}for(a.isDraggable=!0,a.setParents(l),a.elType="circle",h=0;h<l.length;h++)o.isPoint(l[h])&&a.inherits.push(l[h]);return a},t.registerElement("circle",t.createCircle),{Circle:t.Circle,createCircle:t.createCircle}}),define("base/composition",["jxg","utils/type"],function(t,e){"use strict";return t.Composition=function(t){var i,s=this,n=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"];for(i=0;i<n.length;i++)this[n[i]]=function(t){return function(){var i;for(i in s.elements)s.elements.hasOwnProperty(i)&&e.exists(s.elements[i][t])&&s.elements[i][t].apply(s.elements[i],arguments);return s}}(n[i]);for(i in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},t)t.hasOwnProperty(i)&&this.add(i,t[i]);this.dump=!0,this.subs={}},t.extend(t.Composition.prototype,{add:function(t,i){return!(e.exists(this[t])||!e.exists(i)||(e.exists(i.id)?this.elements[i.id]=i:this.elements[t]=i,e.exists(i.name)&&(this.elementsByName[i.name]=i),i.on("attribute:name",this.nameListener,this),this.objectsList.push(i),this[t]=i,this.methodMap[t]=i,0))},remove:function(t){var e,i=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[t].id){i=!0;break}return i&&(delete this.elements[this[t].id],delete this[t]),i},nameListener:function(t,e,i){delete this.elementsByName[t],this.elementsByName[e]=i},select:function(i){return e.exists(t.Board)?t.Board.prototype.select.call(this,i):new t.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var t,e={};for(t in this.subs)this.subs.hasOwnProperty(t)&&(e[t]=this.subs[t].visProp);return this.attr}}),t.Composition}),define("base/polygon",["jxg","base/constants","base/coords","math/statistics","math/geometry","utils/type","base/element","base/line","base/transformation"],function(t,e,i,s,n,r,o,a,l){"use strict";return t.Polygon=function(i,s,n){this.constructor(i,n,e.OBJECT_TYPE_POLYGON,e.OBJECT_CLASS_AREA);var o,a,l,h,c=r.copyAttributes(n,i.options,"polygon","borders");for(this.withLines=n.withlines,this.attr_line=c,this.vertices=[],o=0;o<s.length;o++)this.vertices[o]=this.board.select(s[o]);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(l=this.vertices.length-1,h=0;h<l;h++)o=(h+1)%l,c.id=c.ids&&c.ids[o],c.name=c.names&&c.names[o],c.strokecolor=r.isArray(c.colors)&&c.colors[o%c.colors.length]||c.strokecolor,c.visible=r.exists(n.borders.visible)?n.borders.visible:n.visible,!1===c.strokecolor&&(c.strokecolor="none"),(a=i.create("segment",[this.vertices[o],this.vertices[o+1]],c)).dump=!1,this.borders[o]=a,a.parentPolygon=this;for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),o=0;o<this.vertices.length-1;o++)this.board.select(this.vertices[o]).addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=t.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},t.Polygon.prototype=new o,t.extend(t.Polygon.prototype,{hasPoint:function(t,e){var i,s,n,o=!1;if(r.evaluate(this.visProp.hasinnerpoints)){for(i=0,s=(n=this.vertices.length)-2;i<n-1;s=i++)this.vertices[i].coords.scrCoords[2]>e!=this.vertices[s].coords.scrCoords[2]>e&&t<(this.vertices[s].coords.scrCoords[1]-this.vertices[i].coords.scrCoords[1])*(e-this.vertices[i].coords.scrCoords[2])/(this.vertices[s].coords.scrCoords[2]-this.vertices[i].coords.scrCoords[2])+this.vertices[i].coords.scrCoords[1]&&(o=!o);if(o)return!0}for(n=this.borders.length,i=0;i<n;i++)if(this.borders[i].hasPoint(t,e)){o=!0;break}return o},updateRenderer:function(){var t,e;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(e=this.vertices.length,this.isReal=!0,t=0;t<e;++t)if(!this.vertices[t].isReal){this.isReal=!1;break}this.isReal||this.updateVisibility(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var t,s,n,r,o;if(0===this.vertices.length)return new i(e.COORDS_BY_USER,[1,0,0],this.board);for(n=t=this.vertices[0].X(),r=s=this.vertices[0].Y(),o=0;o<this.vertices.length;o++)this.vertices[o].X()<t&&(t=this.vertices[o].X()),this.vertices[o].X()>n&&(n=this.vertices[o].X()),this.vertices[o].Y()>s&&(s=this.vertices[o].Y()),this.vertices[o].Y()<r&&(r=this.vertices[o].Y());return new i(e.COORDS_BY_USER,[.5*(t+n),.5*(s+r)],this.board)},getLabelAnchor:t.shortcut(t.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var t,e={};return e.id=this.id+"T"+this.numTraces,this.numTraces++,e.vertices=this.vertices,e.visProp=r.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,e.board=this.board,r.clearVisPropOld(e),e.visPropCalc={visible:r.evaluate(e.visProp.visible)},t=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(e),this.board.renderer.enhancedRendering=t,this.traces[e.id]=e.rendNode,this},hideElement:function(e){var i;if(t.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!e)for(i=0;i<this.borders.length;i++)this.borders[i].hideElement();this.hasLabel&&r.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(e){var i;if(t.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!e)for(i=0;i<this.borders.length;i++)this.borders[i].showElement().updateRenderer();return r.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(n.signedPolygon(this.vertices,!0))},Perimeter:function(){var t,e=this.vertices.length,i=0;for(t=1;t<e;++t)i+=this.vertices[t].Dist(this.vertices[t-1]);return i},boundingBox:function(){var t,e,i=[0,0,0,0],s=this.vertices.length-1;if(0===s)return i;for(i[0]=this.vertices[0].X(),i[2]=i[0],i[1]=this.vertices[0].Y(),i[3]=i[1],t=1;t<s;++t)(e=this.vertices[t].X())<i[0]?i[0]=e:e>i[2]&&(i[2]=e),(e=this.vertices[t].Y())>i[1]?i[1]=e:e<i[3]&&(i[3]=e);return i},bounds:function(){return this.boundingBox()},remove:function(){var t;for(t=0;t<this.borders.length;t++)this.board.removeObject(this.borders[t]);o.prototype.remove.call(this)},findPoint:function(t){var e;if(!r.isPoint(t))return-1;for(e=0;e<this.vertices.length;e++)if(this.vertices[e].id===t.id)return e;return-1},addPoints:function(t){var e=Array.prototype.slice.call(arguments);return this.insertPoints.apply(this,[this.vertices.length-2].concat(e))},insertPoints:function(t,e){var i,s,n=[];if(0===arguments.length)return this;if(t<0||t>this.vertices.length-2)return this;for(i=1;i<arguments.length;i++)r.isPoint(arguments[i])&&n.push(arguments[i]);if(s=this.vertices.slice(0,t+1).concat(n),this.vertices=s.concat(this.vertices.slice(t+1)),this.withLines){for(s=this.borders.slice(0,t),this.board.removeObject(this.borders[t]),i=0;i<n.length;i++)s.push(this.board.create("segment",[this.vertices[t+i],this.vertices[t+i+1]],this.attr_line));s.push(this.board.create("segment",[this.vertices[t+n.length],this.vertices[t+n.length+1]],this.attr_line)),this.borders=s.concat(this.borders.slice(t+1))}return this.board.update(),this},removePoints:function(t){var e,i,s,n=[],o=[],a=[],l=[];for(this.vertices=this.vertices.slice(0,this.vertices.length-1),e=0;e<arguments.length;e++)r.isPoint(s=arguments[e])&&(s=this.findPoint(s)),r.isNumber(s)&&s>-1&&s<this.vertices.length&&-1===r.indexOf(a,s)&&a.push(s);for(e=0;e<a.length;e++)this.vertices[a[e]].removeChild(this);for(a=a.sort(),n=this.vertices.slice(),o=this.borders.slice(),this.withLines&&l.push([a[a.length-1]]),e=a.length-1;e>-1;e--)n[a[e]]=-1,this.withLines&&a[e]-1>a[e-1]&&(l[l.length-1][1]=a[e],l.push([a[e-1]]));for(this.withLines&&(l[l.length-1][1]=a[0]),this.vertices=[],e=0;e<n.length;e++)r.isPoint(n[e])&&this.vertices.push(n[e]);if(this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(e=0;e<l.length;e++){for(i=l[e][1]-1;i<l[e][0]+1;i++)i<0?(i=0,this.board.removeObject(this.borders[o.length-1]),o[o.length-1]=-1):i>o.length-1&&(i=o.length-1),this.board.removeObject(this.borders[i]),o[i]=-1;0!==l[e][1]&&l[e][0]!==n.length-1&&(o[l[e][0]-1]=this.board.create("segment",[n[Math.max(l[e][1]-1,0)],n[Math.min(l[e][0]+1,this.vertices.length-1)]],this.attr_line))}for(this.borders=[],e=0;e<o.length;e++)-1!==o[e]&&this.borders.push(o[e]);l[0][1]!==this.vertices.length-1&&0!==l[l.length-1][1]||this.borders.push(this.board.create("segment",[this.vertices[0],this.vertices[this.vertices.length-2]],this.attr_line))}return this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var t,e=o.prototype.getAttributes.call(this);if(this.withLines)for(e.lines=e.lines||{},e.lines.ids=[],e.lines.colors=[],t=0;t<this.borders.length;t++)e.lines.ids.push(this.borders[t].id),e.lines.colors.push(this.borders[t].visProp.strokecolor);return e},snapToGrid:function(){var t,e;for(e=!!r.evaluate(this.visProp.snaptogrid),t=0;t<this.vertices.length;t++)this.vertices[t].handleSnapToGrid(e,!0)},setPositionDirectly:function(t,e,n){var r,o,a,l=new i(t,e,this.board),h=new i(t,n,this.board);for(a=this.vertices.length-1,o=0;o<a;o++)if(!this.vertices[o].draggable())return this;return r=s.subtract(l.usrCoords,h.usrCoords),this.board.create("transform",r.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(e){var i,s,n,r,o,a,l,h=t.Math.Geometry.sortVertices(this.vertices),c=t.Math.Geometry.sortVertices(e.vertices),d=h.length-1,u=c.length-1,p=[],f=function(t,e,i){return(e[1]-t[1])*(i[2]-t[2])-(e[2]-t[2])*(i[1]-t[1])>=0};for(n=0;n<u;n++)p.push(c[n]);for(n=0;n<d;n++)for(s=p.slice(0),p=[],o=s[(i=s.length)-1],r=0;r<i;r++)f(h[n],h[n+1],a=s[r])?(f(h[n],h[n+1],o)||((l=t.Math.Geometry.meetSegmentSegment(o,a,h[n],h[n+1]))[0][1]/=l[0][0],l[0][2]/=l[0][0],l[0][0]=1,p.push(l[0])),p.push(a)):f(h[n],h[n+1],o)&&((l=t.Math.Geometry.meetSegmentSegment(o,a,h[n],h[n+1]))[0][1]/=l[0][0],l[0][2]/=l[0][0],l[0][0]=1,p.push(l[0])),o=a;return p},intersect:function(t){return this.sutherlandHodgman(t)}}),t.createPolygon=function(i,s,n){var o,a,l,h,c,d,u=[],p=!1;if(r.copyAttributes(n,i.options,"polygon"),h=i.select(s[0]),r.isObject(h)&&h.type===e.OBJECT_TYPE_POLYGON&&r.isTransformationOrArray(s[1]))for(p=!0,l=h.vertices.length-1,d=r.copyAttributes(n,i.options,"polygon","vertices"),a=0;a<l;a++)d.withlabel&&(d.name=""===h.vertices[a].name?"":h.vertices[a].name+"'"),u.push(i.create("point",[h.vertices[a],s[1]],d));else if(!1===(u=r.providePoints(i,s,n,"polygon",["vertices"])))throw new Error("JSXGraph: Can't create polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(c=r.copyAttributes(n,i.options,"polygon"),(o=new t.Polygon(i,u,c)).isDraggable=!0,p)for(l=h.vertices.length-1,a=0;a<l;a++)u[a].prepareUpdate().update().updateVisibility(r.evaluate(o.visProp.visible)).updateRenderer();return o},t.createRegularPolygon=function(t,i,s){var n,o,a,l,h,c,d,u=[];if(r.isNumber(a=i[(h=i.length)-1])&&(3!==i.length||a<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(r.isNumber(t.select(a))?(h--,c=!1):(a=h,c=!0),!1===(u=r.providePoints(t,i.slice(0,h),s,"regularpolygon",["vertices"])))throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(d=r.copyAttributes(s,t.options,"regularpolygon","vertices"),o=2;o<a;o++)l=t.create("transform",[Math.PI*(2-(a-2)/a),u[o-1]],{type:"rotate"}),c?(u[o].addTransform(u[o-2],l),u[o].fullUpdate()):(r.isArray(d.ids)&&d.ids.length>=a-2&&(d.id=d.ids[o-2]),u[o]=t.create("point",[u[o-2],l],d),u[o].type=e.OBJECT_TYPE_CAS,u[o].isDraggable=!0,u[o].visProp.fixed=!1);return d=r.copyAttributes(s,t.options,"regularpolygon"),(n=t.create("polygon",u,d)).elType="regularpolygon",n},t.registerElement("polygon",t.createPolygon),t.registerElement("regularpolygon",t.createRegularPolygon),{Polygon:t.Polygon,createPolygon:t.createPolygon,createRegularPolygon:t.createRegularPolygon}}),define("element/arc",["jxg","math/geometry","math/math","base/coords","base/circle","utils/type","base/constants","base/curve","element/composition"],function(t,e,i,s,n,r,o,a,l){"use strict";return t.createArc=function(a,l,h){var c,d,u;if(!1===(u=r.providePoints(a,l,h,"arc",["center","radiuspoint","anglepoint"]))||u.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"' and '"+typeof l[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return d=r.copyAttributes(h,a.options,"arc"),(c=a.create("curve",[[0],[0]],d)).elType="arc",c.setParents(u),c.type=o.OBJECT_TYPE_ARC,c.center=u[0],c.radiuspoint=u[1],c.point2=c.radiuspoint,c.anglepoint=u[2],c.point3=c.anglepoint,c.center.addChild(c),c.radiuspoint.addChild(c),c.anglepoint.addChild(c),c.useDirection=d.usedirection,c.updateDataArray=function(){var t,i,s,n,o,a=1,l=this.radiuspoint,h=this.center,c=this.anglepoint,d=r.evaluate(this.visProp.selection);i=e.rad(l,h,c),("minor"===d&&i>Math.PI||"major"===d&&i<Math.PI)&&(a=-1),this.useDirection&&(((s=u[1].coords.usrCoords)[1]-(o=u[2].coords.usrCoords)[1])*(s[2]-(n=u[3].coords.usrCoords)[2])-(s[2]-o[2])*(s[1]-n[1])<0?(this.radiuspoint=u[1],this.anglepoint=u[2]):(this.radiuspoint=u[2],this.anglepoint=u[1])),t=e.bezierArc(l=l.coords.usrCoords,h=h.coords.usrCoords,c=c.coords.usrCoords,!1,a),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},c.Radius=function(){return this.radiuspoint.Dist(this.center)},c.getRadius=function(){return t.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},c.Value=function(){return this.Radius()*e.rad(this.radiuspoint,this.center,this.anglepoint)},c.hasPoint=function(t,n){var a,l,h,c,d,u,p,f,m,g=this.Radius(),b=r.evaluate(this.visProp.selection);return r.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,n):(m=this.board.options.precision.hasPoint/Math.min(this.board.unitX,this.board.unitY),l=new s(o.COORDS_BY_SCREEN,[t,n],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),p=i.inverse(this.transformMat),f=i.matVecMult(p,l.usrCoords),l=new s(o.COORDS_BY_USER,f,this.board)),a=this.center.coords.distance(o.COORDS_BY_USER,l),(h=Math.abs(a-g)<m)&&(c=e.rad(this.radiuspoint,this.center,l.usrCoords.slice(1)),d=0,u=e.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===b&&u>Math.PI||"major"===b&&u<Math.PI)&&(d=u,u=2*Math.PI),(c<d||c>u)&&(h=!1)),h)},c.hasPointSector=function(t,i){var n,a,l,h=new s(o.COORDS_BY_SCREEN,[t,i],this.board),c=this.Radius(),d=this.center.coords.distance(o.COORDS_BY_USER,h)<c,u=r.evaluate(this.visProp.selection);return d&&(n=e.rad(this.radiuspoint,this.center,h.usrCoords.slice(1)),a=0,l=e.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===u&&l>Math.PI||"major"===u&&l<Math.PI)&&(a=l,l=2*Math.PI),(n<a||n>l)&&(d=!1)),d},c.getTextAnchor=function(){return this.center.coords},c.getLabelAnchor=function(){var t,i,n,a,l,h=e.rad(this.radiuspoint,this.center,this.anglepoint),c=10/this.board.unitX,d=10/this.board.unitY,u=this.point2.coords.usrCoords,p=this.center.coords.usrCoords,f=u[1]-p[1],m=u[2]-p[2],g=r.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&h>Math.PI||"major"===g&&h<Math.PI)&&(h=-(2*Math.PI-h)),n=(t=new s(o.COORDS_BY_USER,[p[1]+Math.cos(.5*h)*f-Math.sin(.5*h)*m,p[2]+Math.sin(.5*h)*f+Math.cos(.5*h)*m],this.board)).usrCoords[1]-p[1],a=t.usrCoords[2]-p[2],l=Math.sqrt(n*n+a*a),b.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],i=[p[1]+(n=n*(l+c)/l),p[2]+(a=a*(l+d)/l)])),new s(o.COORDS_BY_USER,i,this.board)},c.updateQuadraticform=n.Circle.prototype.updateQuadraticform,c.updateStdform=n.Circle.prototype.updateStdform,c.methodMap=t.deepCopy(c.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value"}),c.prepareUpdate().update(),c},t.registerElement("arc",t.createArc),t.createSemicircle=function(t,e,i){var s,n,o,a;if(!1===(a=r.providePoints(t,e,i,"point"))||2!==a.length)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point]");return o=r.copyAttributes(i,t.options,"semicircle","center"),(n=t.create("midpoint",a,o)).dump=!1,o=r.copyAttributes(i,t.options,"semicircle"),(s=t.create("arc",[n,a[1],a[0]],o)).elType="semicircle",s.setParents([a[0].id,a[1].id]),s.subs={midpoint:n},s.inherits.push(n),s.midpoint=s.center=n,s},t.registerElement("semicircle",t.createSemicircle),t.createCircumcircleArc=function(t,e,i){var s,n,o,a;if(!1===(a=r.providePoints(t,e,i,"point"))||3!==a.length)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return o=r.copyAttributes(i,t.options,"circumcirclearc","center"),(n=t.create("circumcenter",a,o)).dump=!1,(o=r.copyAttributes(i,t.options,"circumcirclearc")).usedirection=!0,(s=t.create("arc",[n,a[0],a[2],a[1]],o)).elType="circumcirclearc",s.setParents([a[0].id,a[1].id,a[2].id]),s.subs={center:n},s.inherits.push(n),s.center=n,s},t.registerElement("circumcirclearc",t.createCircumcircleArc),t.createMinorArc=function(e,i,s){return s.selection="minor",t.createArc(e,i,s)},t.registerElement("minorarc",t.createMinorArc),t.createMajorArc=function(e,i,s){return s.selection="major",t.createArc(e,i,s)},t.registerElement("majorarc",t.createMajorArc),{createArc:t.createArc,createSemicircle:t.createSemicircle,createCircumcircleArc:t.createCircumcircleArc,createMinorArc:t.createMinorArc,createMajorArc:t.createMajorArc}}),define("element/sector",["jxg","math/geometry","math/math","math/statistics","base/coords","base/constants","utils/type","base/point","base/curve","base/transformation","element/composition"],function(t,e,i,s,n,r,o,a,l,h,c){"use strict";return t.createSector=function(a,l,h){var c,d,u,p,f,m="invalid";if(l[0].elementClass===r.OBJECT_CLASS_LINE&&l[1].elementClass===r.OBJECT_CLASS_LINE&&(o.isArray(l[2])||o.isNumber(l[2]))&&(o.isArray(l[3])||o.isNumber(l[3]))&&(o.isNumber(l[4])||o.isFunction(l[4])))m="2lines";else{if(!1===(f=o.providePoints(a,l,h,"sector",["center","radiuspoint","anglepoint"])))throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"' and '"+typeof l[2]+"'.");m="3points"}return d=o.copyAttributes(h,a.options,"sector"),(c=a.create("curve",[[0],[0]],d)).type=r.OBJECT_TYPE_SECTOR,c.elType="sector","2lines"===m?(c.Radius=function(){return o.evaluate(l[4])},c.line1=a.select(l[0]),c.line2=a.select(l[1]),c.line1.addChild(c),c.line2.addChild(c),c.setParents(l),c.point1={visProp:{}},c.point2={visProp:{}},c.point3={visProp:{}},u=e.meetLineLine(c.line1.stdform,c.line2.stdform,0,a),o.isArray(l[2])?(2===l[2].length&&(l[2]=[1].concat(l[2])),p=e.projectPointToLine({coords:{usrCoords:l[2]}},c.line1,a),p=s.subtract(p.usrCoords,u.usrCoords),c.direction1=i.innerProduct(p,[0,c.line1.stdform[2],-c.line1.stdform[1]],3)>=0?1:-1):c.direction1=l[2]>=0?1:-1,o.isArray(l[3])?(2===l[3].length&&(l[3]=[1].concat(l[3])),p=e.projectPointToLine({coords:{usrCoords:l[3]}},c.line2,a),p=s.subtract(p.usrCoords,u.usrCoords),c.direction2=i.innerProduct(p,[0,c.line2.stdform[2],-c.line2.stdform[1]],3)>=0?1:-1):c.direction2=l[3]>=0?1:-1,c.updateDataArray=function(){var t,o,a,l,h,d,u=[0,0,0];if(u=i.crossProduct((o=this.line1).stdform,(a=this.line2).stdform),Math.abs(u[0])>i.eps*i.eps&&(u[1]/=u[0],u[2]/=u[0],u[0]/=u[0]),t=this.direction1*this.Radius(),h=s.add(u,[0,t*o.stdform[2],-t*o.stdform[1]]),t=this.direction2*this.Radius(),d=s.add(u,[0,t*a.stdform[2],-t*a.stdform[1]]),this.point2.coords=new n(r.COORDS_BY_USER,h,c.board),this.point1.coords=new n(r.COORDS_BY_USER,u,c.board),this.point3.coords=new n(r.COORDS_BY_USER,d,c.board),Math.abs(h[0])<i.eps||Math.abs(u[0])<i.eps||Math.abs(d[0])<i.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);l=e.bezierArc(h,u,d,!0,1),this.dataX=l[0],this.dataY=l[1],this.bezierDegree=3},c.methodMap=t.deepCopy(c.methodMap,{radius:"getRadius",getRadius:"getRadius",setRadius:"setRadius"}),c.prepareUpdate().update()):"3points"===m&&(c.point1=f[0],c.point2=f[1],c.point3=f[2],c.point1.addChild(c),c.point2.addChild(c),c.point3.addChild(c),c.useDirection=h.usedirection,c.setParents(f),o.exists(f[3])&&(c.point4=f[3],c.point4.addChild(c)),c.methodMap=t.deepCopy(c.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"getRadius",getRadius:"getRadius",setRadius:"setRadius"}),c.updateDataArray=function(){var t,i,s,n,r,a=this.point2,l=this.point1,h=this.point3,c=1,d=o.evaluate(this.visProp.selection);if(!a.isReal||!l.isReal||!h.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);r=e.rad(a,l,h),("minor"===d&&r>Math.PI||"major"===d&&r<Math.PI)&&(c=-1),this.useDirection&&o.exists(this.point4)&&((i=this.point2.coords.usrCoords)[1]-(n=this.point3.coords.usrCoords)[1])*(i[2]-(s=this.point4.coords.usrCoords)[2])-(i[2]-n[2])*(i[1]-s[1])>=0&&(h=this.point2,a=this.point3),t=e.bezierArc(a=a.coords.usrCoords,l=l.coords.usrCoords,h=h.coords.usrCoords,!0,c),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},c.Radius=function(){return this.point2.Dist(this.point1)},(d=o.copyAttributes(h,a.options,"sector","arc")).withLabel=!1,d.name+="_arc",c.arc=a.create("arc",[c.point1,c.point2,c.point3],d),c.addChild(c.arc)),c.center=c.point1,c.radiuspoint=c.point2,c.anglepoint=c.point3,c.hasPointCurve=function(t,i){var s,a,l,h,c,d=new n(r.COORDS_BY_SCREEN,[t,i],this.board),u=this.Radius(),p=this.center.coords.distance(r.COORDS_BY_USER,d),f=o.evaluate(this.visProp.selection);return h=this.board.options.precision.hasPoint/Math.min(this.board.unitX,this.board.unitY),(c=Math.abs(p-u)<h)&&(s=e.rad(this.point2,this.center,d.usrCoords.slice(1)),a=0,l=e.rad(this.point2,this.center,this.point3),("minor"===f&&l>Math.PI||"major"===f&&l<Math.PI)&&(a=l,l=2*Math.PI),(s<a||s>l)&&(c=!1)),c},c.hasPointSector=function(t,i){var s,a,l,h=new n(r.COORDS_BY_SCREEN,[t,i],this.board),c=this.Radius(),d=this.point1.coords.distance(r.COORDS_BY_USER,h)<c,u=o.evaluate(this.visProp.selection);return d&&(s=e.rad(this.radiuspoint,this.center,h.usrCoords.slice(1)),a=0,l=e.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===u&&l>Math.PI||"major"===u&&l<Math.PI)&&(a=l,l=2*Math.PI),(s<a||s>l)&&(d=!1)),d},c.hasPoint=function(t,e){return o.evaluate(this.visProp.highlightonsector)||o.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(t,e):this.hasPointCurve(t,e)},c.getTextAnchor=function(){return this.point1.coords},c.getLabelAnchor=function(){var t,i,s,a,l,h=e.rad(this.point2,this.point1,this.point3),c=13/this.board.unitX,d=13/this.board.unitY,u=this.point2.coords.usrCoords,p=this.point1.coords.usrCoords,f=u[1]-p[1],m=u[2]-p[2],g=o.evaluate(this.visProp.selection),b=this.label?this.label.visProp:this.visProp.label;return("minor"===g&&h>Math.PI||"major"===g&&h<Math.PI)&&(h=-(2*Math.PI-h)),s=(t=new n(r.COORDS_BY_USER,[p[1]+Math.cos(.5*h)*f-Math.sin(.5*h)*m,p[2]+Math.sin(.5*h)*f+Math.cos(.5*h)*m],this.board)).usrCoords[1]-p[1],a=t.usrCoords[2]-p[2],l=Math.sqrt(s*s+a*a),b.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],i=[p[1]+(s=s*(l+c)/l),p[2]+(a=a*(l+d)/l)])),new n(r.COORDS_BY_USER,i,this.board)},c.setRadius=function(t){c.Radius=function(){return o.evaluate(t)}},c.getRadius=function(){return t.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},"3points"===m&&(c.setPositionDirectly=function(t,e,i){var r,o=new n(t,e,this.board),a=new n(t,i,this.board);return c.point1.draggable()&&c.point2.draggable()&&c.point3.draggable()?(r=s.subtract(o.usrCoords,a.usrCoords),this.board.create("transform",r.slice(1),{type:"translate"}).applyOnce([c.point1,c.point2,c.point3]),this):this}),c.prepareUpdate().update(),c},t.registerElement("sector",t.createSector),t.createCircumcircleSector=function(t,e,i){var s,n,r,a;if(!1===(a=o.providePoints(t,e,i,"point")))throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"' and '"+typeof e[2]+"'.");return(n=t.create("circumcenter",a.slice(0,3),r)).dump=!1,r=o.copyAttributes(i,t.options,"circumcirclesector"),(s=t.create("sector",[n,a[0],a[2],a[1]],r)).elType="circumcirclesector",s.setParents(a),s.center=n,s.subs={center:n},s},t.registerElement("circumcirclesector",t.createCircumcircleSector),t.createMinorSector=function(e,i,s){return s.selection="minor",t.createSector(e,i,s)},t.registerElement("minorsector",t.createMinorSector),t.createMajorSector=function(e,i,s){return s.selection="major",t.createSector(e,i,s)},t.registerElement("majorsector",t.createMajorSector),t.createAngle=function(t,s,a){var l,h,c,d,u,p,f="invalid";if(s[0].elementClass===r.OBJECT_CLASS_LINE&&s[1].elementClass===r.OBJECT_CLASS_LINE&&(o.isArray(s[2])||o.isNumber(s[2]))&&(o.isArray(s[3])||o.isNumber(s[3])))f="2lines";else{if(!1===(p=o.providePoints(t,s,a,"point")))throw new Error("JSXGraph: Can't create angle with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"' and '"+typeof s[2]+"'.");f="3points"}if(c=o.copyAttributes(a,t.options,"angle"),o.exists(c.name)&&""!==c.name||(c.name=t.generateName({type:r.OBJECT_TYPE_ANGLE})),h=o.exists(c.radius)?c.radius:0,"2lines"===f?(s.push(h),(l=t.create("sector",s,c)).updateDataArraySector=l.updateDataArray,l.setAngle=function(t){},l.free=function(t){}):((l=t.create("sector",[p[1],p[0],p[2]],c)).arc.visProp.priv=!0,l.point=l.point2=l.radiuspoint=p[0],l.pointsquare=l.point3=l.anglepoint=p[2],l.Radius=function(){return o.evaluate(h)},l.updateDataArraySector=function(){var t,i,s=this.point2,n=this.point1,r=this.point3,a=this.Radius(),l=n.Dist(s),h=1,c=o.evaluate(this.visProp.selection);i=e.rad(s,n,r),("minor"===c&&i>Math.PI||"major"===c&&i<Math.PI)&&(h=-1),t=e.bezierArc(s=[1,(n=n.coords.usrCoords)[1]+((s=s.coords.usrCoords)[1]-n[1])*a/l,n[2]+(s[2]-n[2])*a/l],n,r=[1,n[1]+((r=r.coords.usrCoords)[1]-n[1])*a/l,n[2]+(r[2]-n[2])*a/l],!0,h),this.dataX=t[0],this.dataY=t[1],this.bezierDegree=3},l.setAngle=function(t){var e,i=this.anglepoint,s=this.radiuspoint;return i.draggable()&&(e=this.board.create("transform",[t,this.center],{type:"rotate"}),i.addTransform(s,e),i.isDraggable=!1,i.setParents(s)),this},l.free=function(){var t=this.anglepoint;return t.transformations.length>0&&(t.transformations.pop(),t.isDraggable=!0,t.parents=[]),this},l.setParents(p)),o.exists(l.visProp.text)&&l.label.setText(o.evaluate(l.visProp.text)),l.elType="angle",l.type=r.OBJECT_TYPE_ANGLE,l.subs={},l.updateDataArraySquare=function(){var t,s,n,r,o,a,l,h=this.Radius();"2lines"===f&&this.updateDataArraySector(),n=(n=this.point3).coords.usrCoords,r=e.distance(t=(t=this.point2).coords.usrCoords,s=(s=this.point1).coords.usrCoords,3),o=e.distance(n,s,3),t=[1,s[1]+(t[1]-s[1])*h/r,s[2]+(t[2]-s[2])*h/r],a=i.crossProduct(n=[1,s[1]+(n[1]-s[1])*h/o,s[2]+(n[2]-s[2])*h/o],s),l=[-t[1]*a[1]-t[2]*a[2],t[0]*a[1],t[0]*a[2]],a=i.crossProduct(t,s),(a=i.crossProduct(l,[-n[1]*a[1]-n[2]*a[2],n[0]*a[1],n[0]*a[2]]))[1]/=a[0],a[2]/=a[0],this.dataX=[s[1],t[1],a[1],n[1],s[1]],this.dataY=[s[2],t[2],a[2],n[2],s[2]],this.bezierDegree=1},l.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},l.updateDataArray=function(){var t=o.evaluate(this.visProp.type),s=e.trueAngle(this.point2,this.point1,this.point3),n=o.evaluate(this.visProp.selection);("minor"===n&&s>180||"major"===n&&s<180)&&(s=360-s),Math.abs(s-90)<o.evaluate(this.visProp.orthosensitivity)+i.eps&&(t=o.evaluate(this.visProp.orthotype)),"none"===t?this.updateDataArrayNone():"square"===t?this.updateDataArraySquare():"sector"===t?this.updateDataArraySector():"sectordot"===t&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==t&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},d=o.copyAttributes(a,t.options,"angle","dot"),l.dot=t.create("point",[function(){var t,s,n,r,a,h,c,d;return o.exists(l.dot)&&!l.dot.visProp.visible?[0,0]:(t=l.point2.coords.usrCoords,s=l.point1.coords.usrCoords,n=l.Radius(),r=e.distance(t,s,3),a=e.rad(l.point2,l.point1,l.point3),("minor"===(d=o.evaluate(l.visProp.selection))&&a>Math.PI||"major"===d&&a<Math.PI)&&(a=-(2*Math.PI-a)),a*=.5,h=Math.cos(a),c=Math.sin(a),i.matVecMult([[1,0,0],[s[1]-.5*s[1]*h+.5*s[2]*c,.5*h,.5*-c],[s[2]-.5*s[1]*c-.5*s[2]*h,.5*c,.5*h]],t=[1,s[1]+(t[1]-s[1])*n/r,s[2]+(t[2]-s[2])*n/r]))}],d),l.dot.dump=!1,l.subs.dot=l.dot,"2lines"===f)for(u=0;u<2;u++)t.select(s[u]).addChild(l.dot);else for(u=0;u<3;u++)t.select(p[u]).addChild(l.dot);return l.getLabelAnchor=function(){var t,s,a,h,c,d,u,p,f=12,m=o.evaluate(l.visProp.selection),g=this.label?this.label.visProp:this.visProp.label;return o.exists(this.label.visProp.fontSize)&&(f=dy=o.evaluate(this.label.visProp.fontSize)),f/=this.board.unitX,s=l.point2.coords.usrCoords,a=l.point1.coords.usrCoords,h=l.Radius(),c=e.distance(s,a,3),d=e.rad(l.point2,l.point1,l.point3),("minor"===m&&d>Math.PI||"major"===m&&d<Math.PI)&&(d=-(2*Math.PI-d)),d*=.5,u=Math.cos(d),p=Math.sin(d),(t=i.matVecMult([[1,0,0],[a[1]-.5*a[1]*u+.5*a[2]*p,.5*u,.5*-p],[a[2]-.5*a[1]*p-.5*a[2]*u,.5*p,.5*u]],s=[1,a[1]+(s[1]-a[1])*h/c,a[2]+(s[2]-a[2])*h/c]))[1]/=t[0],t[2]/=t[0],t[0]/=t[0],c=e.distance(t,a,3),g.position=e.calcLabelQuadrant(e.rad([1,0],[0,0],t=[t[0],a[1]+(t[1]-a[1])*(h+f)/c,a[2]+(t[2]-a[2])*(h+f)/c])),new n(r.COORDS_BY_USER,t,this.board)},l.Value=function(){return e.rad(this.point2,this.point1,this.point3)},l.methodMap=o.deepCopy(l.methodMap,{Value:"Value",setAngle:"setAngle",free:"free"}),l},t.registerElement("angle",t.createAngle),t.createNonreflexAngle=function(i,s,n){var r;return n.selection="minor",(r=t.createAngle(i,s,n)).Value=function(){var t=e.rad(this.point2,this.point1,this.point3);return t<Math.PI?t:2*Math.PI-t},r},t.registerElement("nonreflexangle",t.createNonreflexAngle),t.createReflexAngle=function(i,s,n){var r;return n.selection="major",(r=t.createAngle(i,s,n)).Value=function(){var t=e.rad(this.point2,this.point1,this.point3);return t>=Math.PI?t:2*Math.PI-t},r},t.registerElement("reflexangle",t.createReflexAngle),{createSector:t.createSector,createCircumcircleSector:t.createCircumcircleSector,createMinorSector:t.createMinorSector,createMajorSector:t.createMajorSector,createAngle:t.createAngle,createReflexAngle:t.createReflexAngle,createNonreflexAngle:t.createNonreflexAngle}}),define("element/composition",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/coords","utils/type","base/constants","base/point","base/line","base/circle","base/transformation","base/composition","base/curve","base/text","base/polygon","element/arc","element/sector"],function(t,e,i,s,n,r,o,a,l,h,c,d,u,p,f,m,g,b){"use strict";return t.createOrthogonalProjection=function(t,e,s){var n,r,l,h;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),o.isPointType(t,e[0])&&e[1].elementClass===a.OBJECT_CLASS_LINE)r=o.providePoints(t,[e[0]],s,"point")[0],n=e[1];else{if(!o.isPointType(t,e[1])||e[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");r=o.providePoints(t,[e[1]],s,"point")[0],n=e[0]}return h=o.copyAttributes(s,t.options,"orthogonalprojection"),l=t.create("point",[function(){return i.projectPointToLine(r,n,t)}],h),r.addChild(l),n.addChild(l),l.elType="orthogonalprojection",l.setParents([r.id,l.id]),l.update(),l.generatePolynomial=function(){var t=n.point1.symbolic.x,e=n.point1.symbolic.y,i=n.point2.symbolic.x,s=n.point2.symbolic.y,o=r.symbolic.x,a=r.symbolic.y,h=l.symbolic.x,c=l.symbolic.y;return["("+e+")*("+h+")-("+e+")*("+i+")+("+c+")*("+i+")-("+t+")*("+c+")+("+t+")*("+s+")-("+h+")*("+s+")","("+a+")*("+e+")-("+a+")*("+s+")-("+c+")*("+e+")+("+c+")*("+s+")+("+o+")*("+t+")-("+o+")*("+i+")-("+h+")*("+t+")+("+h+")*("+i+")"]},l},t.createPerpendicular=function(t,e,i){var s,n,r,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),o.isPointType(t,e[0])&&e[1].elementClass===a.OBJECT_CLASS_LINE)n=e[1],s=o.providePoints(t,[e[0]],i,"point")[0];else{if(!o.isPointType(t,e[1])||e[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,point]");n=e[0],s=o.providePoints(t,[e[1]],i,"point")[0]}return l=o.copyAttributes(i,t.options,"perpendicular"),(r=h.createLine(t,[function(){return n.stdform[2]*s.X()-n.stdform[1]*s.Y()},function(){return-n.stdform[2]*s.Z()},function(){return n.stdform[1]*s.Z()}],l)).elType="perpendicular",r.setParents([n.id,s.id]),r},t.createPerpendicularPoint=function(t,e,s){var n,r,l;if(e[0]=t.select(e[0]),e[1]=t.select(e[1]),o.isPointType(t,e[0])&&e[1].elementClass===a.OBJECT_CLASS_LINE)r=o.providePoints(t,[e[0]],s,"point")[0],n=e[1];else{if(!o.isPointType(t,e[1])||e[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,line]");r=o.providePoints(t,[e[1]],s,"point")[0],n=e[0]}return l=t.create("point",[function(){return i.perpendicular(n,r,t)[0]}],s),r.addChild(l),n.addChild(l),l.elType="perpendicularpoint",l.setParents([r.id,n.id]),l.update(),l.generatePolynomial=function(){var t=n.point1.symbolic.x,e=n.point1.symbolic.y,i=n.point2.symbolic.x,s=n.point2.symbolic.y,o=r.symbolic.x,a=r.symbolic.y,h=l.symbolic.x,c=l.symbolic.y;return["("+e+")*("+h+")-("+e+")*("+i+")+("+c+")*("+i+")-("+t+")*("+c+")+("+t+")*("+s+")-("+h+")*("+s+")","("+a+")*("+e+")-("+a+")*("+s+")-("+c+")*("+e+")+("+c+")*("+s+")+("+o+")*("+t+")-("+o+")*("+i+")-("+h+")*("+t+")+("+h+")*("+i+")"]},l},t.createPerpendicularSegment=function(e,s,n){var r,l,c,d,u;if(s[0]=e.select(s[0]),s[1]=e.select(s[1]),o.isPointType(e,s[0])&&s[1].elementClass===a.OBJECT_CLASS_LINE)l=s[1],r=o.providePoints(e,[s[0]],n,"point")[0];else{if(!o.isPointType(e,s[1])||s[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof s[0]+"' and '"+typeof s[1]+"'.\nPossible parent types: [line,point]");l=s[0],r=o.providePoints(e,[s[1]],n,"point")[0]}return u=o.copyAttributes(n,e.options,"perpendicularsegment","point"),(d=t.createPerpendicularPoint(e,[l,r],u)).dump=!1,o.exists(n.layer)||(n.layer=e.options.layer.line),u=o.copyAttributes(n,e.options,"perpendicularsegment"),(c=h.createLine(e,[function(){return i.perpendicular(l,r,e)[1]?[d,r]:[r,d]}],u)).point=d,c.elType="perpendicularsegment",c.setParents([r.id,l.id]),c.subs={point:d},c.inherits.push(d),c},t.createMidpoint=function(t,i,s){var n,r,l,h,c;for(h=0;h<i.length;++h)i[h]=t.select(i[h]);if(2===i.length&&o.isPointType(t,i[0])&&o.isPointType(t,i[1]))i=o.providePoints(t,i,s,"point"),n=i[0],r=i[1];else{if(1!==i.length||i[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");n=i[0].point1,r=i[0].point2}return c=o.copyAttributes(s,t.options,"midpoint"),l=t.create("point",[function(){var t=n.coords.usrCoords[1]+r.coords.usrCoords[1];return isNaN(t)||Math.abs(n.coords.usrCoords[0])<e.eps||Math.abs(r.coords.usrCoords[0])<e.eps?NaN:.5*t},function(){var t=n.coords.usrCoords[2]+r.coords.usrCoords[2];return isNaN(t)||Math.abs(n.coords.usrCoords[0])<e.eps||Math.abs(r.coords.usrCoords[0])<e.eps?NaN:.5*t}],c),n.addChild(l),r.addChild(l),l.elType="midpoint",l.setParents([n.id,r.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var t=n.symbolic.x,e=n.symbolic.y,i=r.symbolic.x,s=r.symbolic.y,o=l.symbolic.x,a=l.symbolic.y;return["("+e+")*("+o+")-("+e+")*("+i+")+("+a+")*("+i+")-("+t+")*("+a+")+("+t+")*("+s+")-("+o+")*("+s+")","("+t+")^2 - 2*("+t+")*("+o+")+("+e+")^2-2*("+e+")*("+a+")-("+i+")^2+2*("+i+")*("+o+")-("+s+")^2+2*("+s+")*("+a+")"]},l},t.createParallelPoint=function(t,e,i){var s,n,r,l,h;for(h=0;h<e.length;++h)e[h]=t.select(e[h]);if(3===e.length&&o.isPointType(t,e[0])&&o.isPointType(t,e[1])&&o.isPointType(t,e[2]))e=o.providePoints(t,e,i,"point"),s=e[0],n=e[1],r=e[2];else if(o.isPointType(t,e[0])&&e[1].elementClass===a.OBJECT_CLASS_LINE)r=o.providePoints(t,[e[0]],i,"point")[0],s=e[1].point1,n=e[1].point2;else{if(!o.isPointType(t,e[1])||e[0].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [line,point], [point,point,point]");r=o.providePoints(t,[e[1]],i,"point")[0],s=e[0].point1,n=e[0].point2}return l=t.create("point",[function(){return r.coords.usrCoords[1]+n.coords.usrCoords[1]-s.coords.usrCoords[1]},function(){return r.coords.usrCoords[2]+n.coords.usrCoords[2]-s.coords.usrCoords[2]}],i),s.addChild(l),n.addChild(l),r.addChild(l),l.elType="parallelpoint",l.setParents([s.id,n.id,r.id]),l.prepareUpdate().update(),l.generatePolynomial=function(){var t=s.symbolic.x,e=s.symbolic.y,i=n.symbolic.x,o=n.symbolic.y,a=r.symbolic.x,h=r.symbolic.y,c=l.symbolic.x,d=l.symbolic.y;return["("+o+")*("+c+")-("+o+")*("+a+")-("+e+")*("+c+")+("+e+")*("+a+")-("+d+")*("+i+")+("+d+")*("+t+")+("+h+")*("+i+")-("+h+")*("+t+")","("+d+")*("+t+")-("+d+")*("+a+")-("+o+")*("+t+")+("+o+")*("+a+")-("+c+")*("+e+")+("+c+")*("+h+")+("+i+")*("+e+")-("+i+")*("+h+")"]},l},t.createParallel=function(t,i,s){var n,r,a,l,h,c;for(h=0;h<i.length;++h)i[h]=t.select(i[h]);return n=null,3===i.length?(n=(i=o.providePoints(t,i,s,"point"))[2],l=function(){return e.crossProduct(i[0].coords.usrCoords,i[1].coords.usrCoords)}):o.isPointType(t,i[0])?(n=o.providePoints(t,[i[0]],s,"point")[0],l=function(){return i[1].stdform}):o.isPointType(t,i[1])&&(n=o.providePoints(t,[i[1]],s,"point")[0],l=function(){return i[0].stdform}),o.exists(s.layer)||(s.layer=t.options.layer.line),c=o.copyAttributes(s,t.options,"parallel","point"),(r=t.create("point",[function(){return e.crossProduct([1,0,0],l())}],c)).isDraggable=!0,c=o.copyAttributes(s,t.options,"parallel"),(a=t.create("line",[n,r],c)).elType="parallel",a.subs={point:r},a.inherits.push(r),a.setParents([i[0].id,i[1].id]),3===i.length&&a.addParents(i[2].id),a.point=r,a},t.createArrowParallel=function(e,i,s){var n;try{return s.firstArrow=!1,s.lastArrow=!0,(n=t.createParallel(e,i,s).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",n}catch(t){throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},t.createNormal=function(t,i,n){var r,l,h,c,d,u,p,f,m;for(c=0;c<i.length;++c)i[c]=t.select(i[c]);if(1===i.length)l=(r=i[0]).slideObject;else{if(2!==i.length)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(o.isPointType(t,i[0]))r=o.providePoints(t,[i[0]],n,"point")[0],l=i[1];else{if(!o.isPointType(t,i[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");l=i[0],r=o.providePoints(t,[i[1]],n,"point")[0]}}if(p=o.copyAttributes(n,t.options,"normal"),l.elementClass===a.OBJECT_CLASS_LINE)m=o.copyAttributes(n,t.options,"normal","point"),(f=t.create("point",[function(){var t=e.crossProduct([1,0,0],l.stdform);return[t[0],-t[2],t[1]]}],m)).isDraggable=!0,(h=t.create("line",[r,f],p)).point=f,h.subs={point:f},h.inherits.push(f);else if(l.elementClass===a.OBJECT_CLASS_CIRCLE)h=t.create("line",[l.midpoint,r],p);else if(l.elementClass===a.OBJECT_CLASS_CURVE)"plot"!==o.evaluate(l.visProp.curvetype)?(d=l.X,u=l.Y,h=t.create("line",[function(){return-r.X()*s.D(d)(r.position)-r.Y()*s.D(u)(r.position)},function(){return s.D(d)(r.position)},function(){return s.D(u)(r.position)}],p)):h=t.create("line",[function(){var t=Math.floor(r.position),e=r.position-t;return t===l.numberPoints-1&&(t-=1,e=1),t<0?1:(l.Y(t)+e*(l.Y(t+1)-l.Y(t)))*(l.Y(t)-l.Y(t+1))-(l.X(t)+e*(l.X(t+1)-l.X(t)))*(l.X(t+1)-l.X(t))},function(){var t=Math.floor(r.position);return t===l.numberPoints-1&&(t-=1),t<0?0:l.X(t+1)-l.X(t)},function(){var t=Math.floor(r.position);return t===l.numberPoints-1&&(t-=1),t<0?0:l.Y(t+1)-l.Y(t)}],p);else{if(l.type!==a.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");h=t.create("line",[function(){var t,e,i=Math.floor(r.position),s=r.position-i;for(e=0;e<l.objects.length;e++)if((t=l.objects[e]).type===a.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1,s=1),i<0?1:(t.Y(i)+s*(t.Y(i+1)-t.Y(i)))*(t.Y(i)-t.Y(i+1))-(t.X(i)+s*(t.X(i+1)-t.X(i)))*(t.X(i+1)-t.X(i))},function(){var t,e,i=Math.floor(r.position);for(e=0;e<l.objects.length;e++)if((t=l.objects[e]).type===a.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.X(i+1)-t.X(i)},function(){var t,e,i=Math.floor(r.position);for(e=0;e<l.objects.length;e++)if((t=l.objects[e]).type===a.OBJECT_TYPE_CURVE){if(i<t.numberPoints)break;i-=t.numberPoints}return i===t.numberPoints-1&&(i-=1),i<0?0:t.Y(i+1)-t.Y(i)}],p)}return h.elType="normal",h.setParents(i),h},t.createBisector=function(t,e,s){var n,r,a,l;if(e=o.providePoints(t,e,s,"point"),o.isPoint(e[0])&&o.isPoint(e[1])&&o.isPoint(e[2])){for((l=o.copyAttributes(s,t.options,"bisector","point")).snapToGrid=!1,(n=t.create("point",[function(){return i.angleBisector(e[0],e[1],e[2],t)}],l)).dump=!1,a=0;a<3;a++)e[a].addChild(n);return o.exists(s.layer)||(s.layer=t.options.layer.line),l=o.copyAttributes(s,t.options,"bisector"),(r=h.createLine(t,[e[1],n],l)).point=n,r.elType="bisector",r.setParents(e),r.subs={point:n},r.inherits.push(n),r}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point,point]")},t.createAngularBisectorsOfTwoLines=function(t,e,i){var s,n,r,l,h=t.select(e[0]),c=t.select(e[1]);if(h.elementClass!==a.OBJECT_CLASS_LINE||c.elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [line,line]");return o.exists(i.layer)||(i.layer=t.options.layer.line),r=o.copyAttributes(i,t.options,"bisectorlines","line1"),s=t.create("line",[function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[0]/t-c.stdform[0]/e},function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[1]/t-c.stdform[1]/e},function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[2]/t-c.stdform[2]/e}],r),o.exists(i.layer)||(i.layer=t.options.layer.line),r=o.copyAttributes(i,t.options,"bisectorlines","line2"),n=t.create("line",[function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[0]/t+c.stdform[0]/e},function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[1]/t+c.stdform[1]/e},function(){var t=Math.sqrt(h.stdform[1]*h.stdform[1]+h.stdform[2]*h.stdform[2]),e=Math.sqrt(c.stdform[1]*c.stdform[1]+c.stdform[2]*c.stdform[2]);return h.stdform[2]/t+c.stdform[2]/e}],r),l=new u({line1:s,line2:n}),s.dump=!1,n.dump=!1,l.elType="bisectorlines",l.setParents([h.id,c.id]),l.subs={line1:s,line2:n},l},t.createCircumcenter=function(t,e,s){var n,r,a,h,c;if(e=o.providePoints(t,e,s,"point"),o.isPoint(e[0])&&o.isPoint(e[1])&&o.isPoint(e[2])){for(a=e[0],h=e[1],c=e[2],n=l.createPoint(t,[function(){return i.circumcenter(a,h,c,t)}],s),r=0;r<3;r++)e[r].addChild(n);return n.elType="circumcenter",n.setParents(e),n.generatePolynomial=function(){var t=a.symbolic.x,e=a.symbolic.y,i=c.symbolic.x,s=c.symbolic.y,r=n.symbolic.x,o=n.symbolic.y;return[["((",r,")-(",t,"))^2+((",o,")-(",e,"))^2-((",r,")-(",h.symbolic.x,"))^2-((",o,")-(",h.symbolic.y,"))^2"].join(""),["((",r,")-(",t,"))^2+((",o,")-(",e,"))^2-((",r,")-(",i,"))^2-((",o,")-(",s,"))^2"].join("")]},n}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]")},t.createIncenter=function(t,e,i){var s,n,l,h;if(!((e=o.providePoints(t,e,i,"point")).length>=3&&o.isPoint(e[0])&&o.isPoint(e[1])&&o.isPoint(e[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof e[0]+"', '"+typeof e[1]+"' and '"+typeof e[2]+"'.\nPossible parent types: [point,point,point]");return n=e[0],l=e[1],h=e[2],(s=t.create("point",[function(){var e,i,s;return e=Math.sqrt((l.X()-h.X())*(l.X()-h.X())+(l.Y()-h.Y())*(l.Y()-h.Y())),i=Math.sqrt((n.X()-h.X())*(n.X()-h.X())+(n.Y()-h.Y())*(n.Y()-h.Y())),s=Math.sqrt((l.X()-n.X())*(l.X()-n.X())+(l.Y()-n.Y())*(l.Y()-n.Y())),new r(a.COORDS_BY_USER,[(e*n.X()+i*l.X()+s*h.X())/(e+i+s),(e*n.Y()+i*l.Y()+s*h.Y())/(e+i+s)],t)}],i)).elType="incenter",s.setParents(e),s},t.createCircumcircle=function(e,i,s){var n,r,a;if(!1===(i=o.providePoints(e,i,s,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{a=o.copyAttributes(s,e.options,"circumcircle","center"),(n=t.createCircumcenter(e,i,a)).dump=!1,o.exists(s.layer)||(s.layer=e.options.layer.circle),a=o.copyAttributes(s,e.options,"circumcircle"),(r=c.createCircle(e,[n,i[0]],a)).elType="circumcircle",r.setParents(i),r.subs={center:n},r.inherits.push(r)}catch(t){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return r},t.createIncircle=function(e,i,s){var n,r,a;if(!1===(i=o.providePoints(e,i,s,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]");try{a=o.copyAttributes(s,e.options,"incircle","center"),(n=t.createIncenter(e,i,a)).dump=!1,o.exists(s.layer)||(s.layer=e.options.layer.circle),a=o.copyAttributes(s,e.options,"incircle"),(r=c.createCircle(e,[n,function(){var t=Math.sqrt((i[1].X()-i[2].X())*(i[1].X()-i[2].X())+(i[1].Y()-i[2].Y())*(i[1].Y()-i[2].Y())),e=Math.sqrt((i[0].X()-i[2].X())*(i[0].X()-i[2].X())+(i[0].Y()-i[2].Y())*(i[0].Y()-i[2].Y())),s=Math.sqrt((i[1].X()-i[0].X())*(i[1].X()-i[0].X())+(i[1].Y()-i[0].Y())*(i[1].Y()-i[0].Y())),n=(t+e+s)/2;return Math.sqrt((n-t)*(n-e)*(n-s)/n)}],a)).elType="incircle",r.setParents(i),r.center=n,r.subs={center:r.center},r.inherits.push(n)}catch(t){throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof i[0]+"', '"+typeof i[1]+"' and '"+typeof i[2]+"'.\nPossible parent types: [point,point,point]")}return r},t.createReflection=function(t,e,i){var s,n,r,u,f,g="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(f=0;f<e.length;++f)e[f]=t.select(e[f]);if(o.isPoint(e[0]))n=o.providePoints(t,[e[0]],i,"point")[0];else{if(e[0].elementClass!==a.OBJECT_CLASS_CURVE&&e[0].elementClass!==a.OBJECT_CLASS_LINE&&e[0].type!==a.OBJECT_TYPE_POLYGON&&e[0].elementClass!==a.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+g);n=e[0]}if(e[1].elementClass!==a.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+g);if(u=d.createTransform(t,[s=e[1]],{type:"reflect"}),o.isPoint(n))r=l.createPoint(t,[n,u],i);else if(n.elementClass===a.OBJECT_CLASS_CURVE)r=p.createCurve(t,[n,u],i);else if(n.elementClass===a.OBJECT_CLASS_LINE)r=h.createLine(t,[n,u],i);else if(n.type===a.OBJECT_TYPE_POLYGON)r=m.createPolygon(t,[n,u],i);else{if(n.elementClass!==a.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+g);r=c.createCircle(t,[n,u],i)}return n.addChild(r),s.addChild(r),r.elType="reflection",r.setParents([n,s]),r.prepareUpdate().update(),o.isPoint(r)&&(r.generatePolynomial=function(){var t=s.point1.symbolic.x,e=s.point1.symbolic.y,i=n.symbolic.x,o=n.symbolic.y,a=r.symbolic.x,l=r.symbolic.y;return[["((",l,")-(",o,"))*((",e,")-(",s.point2.symbolic.y,"))+((",t,")-(",s.point2.symbolic.x,"))*((",a,")-(",i,"))"].join(""),["((",a,")-(",t,"))^2+((",l,")-(",e,"))^2-((",i,")-(",t,"))^2-((",o,")-(",e,"))^2"].join("")]}),r},t.createMirrorElement=function(t,e,i){var s,n,r,u,f="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";if(o.isPoint(e[0]))s=o.providePoints(t,[e[0]],i,"point")[0];else{if(e[0].elementClass!==a.OBJECT_CLASS_CURVE&&e[0].elementClass!==a.OBJECT_CLASS_LINE&&e[0].type!==a.OBJECT_TYPE_POLYGON&&e[0].elementClass!==a.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+f);s=e[0]}if(!o.isPoint(e[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+f);if(n=o.providePoints(t,[e[1]],i,"point")[0],u=d.createTransform(t,[Math.PI,n],{type:"rotate"}),o.isPoint(s))r=l.createPoint(t,[s,u],i);else if(s.elementClass===a.OBJECT_CLASS_CURVE)r=p.createCurve(t,[s,u],i);else if(s.elementClass===a.OBJECT_CLASS_LINE)r=h.createLine(t,[s,u],i);else if(s.type===a.OBJECT_TYPE_POLYGON)r=m.createPolygon(t,[s,u],i);else{if(s.elementClass!==a.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'."+f);r=c.createCircle(t,[s,u],i)}return s.addChild(r),n.addChild(r),r.elType="mirrorpoint",r.setParents([s,n]),r.prepareUpdate().update(),r},t.createMirrorPoint=function(e,i,s){return t.createMirrorElement(e,i,s)},t.createIntegral=function(e,i,n){var l,h,c,d,u,p,f,m,g,b,y,v,C,x,_=null;if(o.isArray(i[0])&&i[1].elementClass===a.OBJECT_CLASS_CURVE)l=i[0],h=i[1];else{if(!o.isArray(i[1])||i[0].elementClass!==a.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");l=i[1],h=i[0]}return(c=o.copyAttributes(n,e.options,"integral")).withLabel=!1,x=e.create("curve",[[0],[0]],c),u=l[1],o.isFunction(d=l[0])?(f=function(){return h.Y(p())},d=(p=d)()):(p=d,f=h.Y(d)),o.isFunction(u)?(g=function(){return h.Y(m())},u=(m=u)()):(m=u,g=h.Y(u)),c=o.copyAttributes(n,e.options,"integral","curveLeft"),b=e.create("glider",[p,f,h],c),o.isFunction(p)&&b.hideElement(),c=o.copyAttributes(n,e.options,"integral","baseLeft"),y=e.create("point",[function(){return"y"===o.evaluate(x.visProp.axis)?0:b.X()},function(){return"y"===o.evaluate(x.visProp.axis)?b.Y():0}],c),c=o.copyAttributes(n,e.options,"integral","curveRight"),v=e.create("glider",[m,g,h],c),o.isFunction(m)&&v.hideElement(),c=o.copyAttributes(n,e.options,"integral","baseRight"),C=e.create("point",[function(){return"y"===o.evaluate(x.visProp.axis)?0:v.X()},function(){return"y"===o.evaluate(x.visProp.axis)?v.Y():0}],c),!1!==(c=o.copyAttributes(n,e.options,"integral")).withlabel&&"y"!==c.axis&&(c=o.copyAttributes(n,e.options,"integral","label"),c=o.copyAttributes(c,e.options,"label"),(_=e.create("text",[function(){var t=new r(a.COORDS_BY_SCREEN,[o.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[2]-e[0]),s=v.X();return s<e[0]?s=e[0]+i:s>e[2]&&(s=e[2]-i),s+t.usrCoords[1]},function(){var t=new r(a.COORDS_BY_SCREEN,[0,o.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),e=this.board.getBoundingBox(),i=.1*(e[1]-e[3]),s=v.Y();return s>e[1]?s=e[1]-i:s<e[3]&&(s=e[3]+i),s+t.usrCoords[2]},function(){var t=s.NewtonCotes([y.X(),C.X()],h.Y);return"&int; = "+o.toFixed(t,4)}],c)).dump=!1,b.addChild(_),v.addChild(_)),b.dump=!1,y.dump=!1,v.dump=!1,C.dump=!1,x.elType="integral",x.setParents([h.id,l]),x.subs={curveLeft:b,baseLeft:y,curveRight:v,baseRight:C},x.inherits.push(b,y,v,C),c.withLabel&&(x.subs.label=_,x.inherits.push(_)),x.Value=function(){return s.I([y.X(),C.X()],h.Y)},x.updateDataArray=function(){var t,e,i,s,n,r,a,l,c;if("y"===o.evaluate(this.visProp.axis)){for(b.Y()<v.Y()?(r=b.X(),l=b.Y(),a=v.X(),c=v.Y()):(r=v.X(),l=v.Y(),a=b.X(),c=b.Y()),s=Math.min(r,a),n=Math.max(r,a),t=[0,r],e=[l,l],i=0;i<h.numberPoints;i++)l<=h.points[i].usrCoords[2]&&s<=h.points[i].usrCoords[1]&&h.points[i].usrCoords[2]<=c&&h.points[i].usrCoords[1]<=n&&(t.push(h.points[i].usrCoords[1]),e.push(h.points[i].usrCoords[2]));t.push(a),e.push(c),t.push(0),e.push(c),t.push(0),e.push(l)}else{for(y.X()<C.X()?(s=y.X(),n=C.X()):(s=C.X(),n=y.X()),t=[s,s],e=[0,h.Y(s)],i=0;i<h.numberPoints;i++)s<=h.points[i].usrCoords[1]&&h.points[i].usrCoords[1]<=n&&(t.push(h.points[i].usrCoords[1]),e.push(h.points[i].usrCoords[2]));t.push(n),e.push(h.Y(n)),t.push(n),e.push(0),t.push(s),e.push(0)}this.dataX=t,this.dataY=e},b.addChild(x),v.addChild(x),y.addChild(x),C.addChild(x),x.baseLeft=y,x.baseRight=C,x.curveLeft=b,x.curveRight=v,x.methodMap=t.deepCopy(x.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),x.label=_,x},t.createGrid=function(t,e,i){var s,n;return n=o.copyAttributes(i,t.options,"grid"),(s=t.create("curve",[[null],[null]],n)).elType="grid",s.type=a.OBJECT_TYPE_GRID,s.updateDataArray=function(){var e,i,n,l,h,c=o.evaluate(this.visProp.gridx),d=o.evaluate(this.visProp.gridy);for(l=o.isArray(this.visProp.topleft)?new r(o.evaluate(this.visProp.tltype)||a.COORDS_BY_USER,this.visProp.topleft,t):new r(a.COORDS_BY_SCREEN,[0,0],t),h=o.isArray(this.visProp.bottomright)?new r(o.evaluate(this.visProp.brtype)||a.COORDS_BY_USER,this.visProp.bottomright,t):new r(a.COORDS_BY_SCREEN,[t.canvasWidth,t.canvasHeight],t),t.options.grid.hasGrid=!0,s.dataX=[],s.dataY=[],e=Math.floor(l.usrCoords[2]/d)*d,i=Math.ceil(h.usrCoords[2]/d)*d,l.usrCoords[2]<h.usrCoords[2]&&(e=Math.ceil(h.usrCoords[2]/d)*d,i=Math.floor(l.usrCoords[2]/d)*d),n=e;n>i-d;n-=d)s.dataX.push(l.usrCoords[1],h.usrCoords[1],NaN),s.dataY.push(n,n,NaN);for(e=Math.ceil(l.usrCoords[1]/c)*c,i=Math.floor(h.usrCoords[1]/c)*c,l.usrCoords[1]>h.usrCoords[1]&&(e=Math.floor(h.usrCoords[1]/c)*c,i=Math.ceil(l.usrCoords[1]/c)*c),n=e;n<i+c;n+=c)s.dataX.push(n,n,NaN),s.dataY.push(l.usrCoords[2],h.usrCoords[2],NaN)},s.hasPoint=function(){return!1},t.grids.push(s),s},t.createInequality=function(t,s,n){var r,l,h;if(h=o.copyAttributes(n,t.options,"inequality"),s[0].elementClass===a.OBJECT_CLASS_LINE)(l=t.create("curve",[[],[]],h)).hasPoint=function(){return!1},l.updateDataArray=function(){var n,r,o,l=t.getBoundingBox(),c=h.inverse?-1:1,d=1.5*Math.max(l[2]-l[0],l[1]-l[3]),u={coords:{usrCoords:[1,(l[0]+l[2])/2,h.inverse?l[1]:l[3]]}},p=s[0].stdform.slice(1),f=p;o=1.5*Math.max(i.perpendicular(s[0],u,t)[0].distance(a.COORDS_BY_USER,u.coords),d),o*=c,u={coords:{usrCoords:[1,(l[0]+l[2])/2,(l[1]+l[3])/2]}},u=Math.abs(e.innerProduct(u.coords.usrCoords,s[0].stdform,3))>=e.eps?i.perpendicular(s[0],u,t)[0].usrCoords:u.coords.usrCoords,this.dataX=[(n=[1,u[1]+p[1]*d,u[2]-p[0]*d])[1],n[1]+p[0]*o,(r=[1,u[1]-f[1]*d,u[2]+f[0]*d])[1]+f[0]*o,r[1],n[1]],this.dataY=[n[2],n[2]+p[1]*o,r[2]+f[1]*o,r[2],n[2]]};else if(s[0].elementClass===a.OBJECT_CLASS_CURVE&&"functiongraph"===s[0].visProp.curvetype)(l=t.create("curve",[[],[]],h)).hasPoint=function(){return!1},l.updateDataArray=function(){var t,e,i=this.board.getBoundingBox(),n=1.5*(h.inverse?i[1]:i[3]);if(this.dataX=[],this.dataY=[],!((e=s[0].points.length)<=0)){for(this.dataX.push(s[0].points[0].usrCoords[1]),this.dataY.push(n),t=0;t<e;t++)this.dataX.push(s[0].points[t].usrCoords[1]),this.dataY.push(s[0].points[t].usrCoords[2]);this.dataX.push(s[0].points[e-1].usrCoords[1]),this.dataY.push(n)}};else if(r=o.createFunction(s[0]),!o.exists(r))throw new Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return l.addParents(s[0]),l},t.registerElement("arrowparallel",t.createArrowParallel),t.registerElement("bisector",t.createBisector),t.registerElement("bisectorlines",t.createAngularBisectorsOfTwoLines),t.registerElement("msector",t.createMsector),t.registerElement("circumcircle",t.createCircumcircle),t.registerElement("circumcirclemidpoint",t.createCircumcenter),t.registerElement("circumcenter",t.createCircumcenter),t.registerElement("incenter",t.createIncenter),t.registerElement("incircle",t.createIncircle),t.registerElement("integral",t.createIntegral),t.registerElement("midpoint",t.createMidpoint),t.registerElement("mirrorelement",t.createMirrorElement),t.registerElement("mirrorpoint",t.createMirrorPoint),t.registerElement("normal",t.createNormal),t.registerElement("orthogonalprojection",t.createOrthogonalProjection),t.registerElement("parallel",t.createParallel),t.registerElement("parallelpoint",t.createParallelPoint),t.registerElement("perpendicular",t.createPerpendicular),t.registerElement("perpendicularpoint",t.createPerpendicularPoint),t.registerElement("perpendicularsegment",t.createPerpendicularSegment),t.registerElement("reflection",t.createReflection),t.registerElement("grid",t.createGrid),t.registerElement("inequality",t.createInequality),{createArrowParallel:t.createArrowParallel,createBisector:t.createBisector,createAngularBisectorOfTwoLines:t.createAngularBisectorsOfTwoLines,createCircumcircle:t.createCircumcircle,createCircumcenter:t.createCircumcenter,createIncenter:t.createIncenter,createIncircle:t.createIncircle,createIntegral:t.createIntegral,createMidpoint:t.createMidpoint,createMirrorElement:t.createMirrorElement,createMirrorPoint:t.createMirrorPoint,createNormal:t.createNormal,createOrthogonalProjection:t.createOrthogonalProjection,createParallel:t.createParallel,createParallelPoint:t.createParallelPoint,createPerpendicular:t.createPerpendicular,createPerpendicularPoint:t.createPerpendicularPoint,createPerpendicularSegmen:t.createPerpendicularSegment,createReflection:t.createReflection,createGrid:t.createGrid,createInequality:t.createInequality}}),define("base/board",["jxg","base/constants","base/coords","options","math/numerics","math/math","math/geometry","math/complex","math/statistics","parser/jessiecode","parser/geonext","utils/color","utils/type","utils/event","utils/env","base/transformation","base/point","base/line","base/text","element/composition","base/composition"],function(t,e,i,s,n,r,o,a,l,h,c,d,u,p,f,m,g,b,y,v,C){"use strict";return t.Board=function(t,i,n,r,o,a,l,c,d,m,g){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,this.BOARD_MODE_ZOOM=17,u.exists(g.document)&&!1!==g.document?this.document=g.document:void 0!==document&&u.isObject(document)&&(this.document=document),this.container=t,this.containerObj=f.isBrowser?this.document.getElementById(this.container):null,f.isBrowser&&"no"!==i.type&&null===this.containerObj)throw new Error("\nJSXGraph: HTML container element '"+t+"' not found.");this.renderer=i,this.grids=[],this.options=u.deepCopy(s),this.attr=g,this.dimension=2,this.jc=new h,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,r[0],r[1]],this.zoomX=o,this.zoomY=a,this.unitX=l*this.zoomX,this.unitY=c*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=d,this.canvasHeight=m,this.id=u.exists(n)&&""!==n&&f.isBrowser&&!u.exists(this.document.getElementById(n))?n:this.generateId(),p.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.positionAccessLast=0,this.downObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(e.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this.selectingBox=[[0,0],[0,0]],this.attr.registerevents&&this.addEventHandlers(),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},t.extend(t.Board.prototype,{generateName:function(t){var i,s,n=this.attr.maxnamelength,r="",o="",a=[],l="";if(t.type===e.OBJECT_TYPE_TICKS)return"";for(i=u.isPoint(t)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:t.type===e.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],u.isPoint(t)||t.elementClass===e.OBJECT_CLASS_LINE||t.type===e.OBJECT_TYPE_ANGLE||(r=t.type===e.OBJECT_TYPE_POLYGON?"P_{":t.elementClass===e.OBJECT_CLASS_CIRCLE?"k_{":t.elementClass===e.OBJECT_CLASS_TEXT?"t_{":"s_{",o="}"),s=0;s<n;s++)a[s]=0;for(;a[n-1]<i.length;){for(a[0]=1;a[0]<i.length;a[0]++){for(l=r,s=n;s>0;s--)l+=i[a[s-1]];if(!u.exists(this.elementsByName[l+o]))return l+o}for(a[0]=i.length,s=1;s<n;s++)a[s-1]===i.length&&(a[s-1]=1,a[s]+=1)}return""},generateId:function(){for(var e=1;u.exists(t.boards["jxgBoard"+e]);)e=Math.round(65535*Math.random());return"jxgBoard"+e},setId:function(t,e){var i,s=this.numObjects,n=t.id;if(this.numObjects+=1,""===n||!u.exists(n))for(n=this.id+e+s;u.exists(this.objects[n]);)i=Math.round(65535*Math.random()),n=this.id+e+s+"-"+i;return t.id=n,this.objects[n]=t,t._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=t,n},finalizeAdding:function(t){!1===u.evaluate(t.visProp.visible)&&this.renderer.display(t,!1)},finalizeLabel:function(t){t.hasLabel&&!u.evaluate(t.label.visProp.islabel)&&!1===u.evaluate(t.label.visProp.visible)&&this.renderer.display(t.label,!1)},getCoordsTopLeftCorner:function(){var t,e,i,s,n=this.document.documentElement||this.document.body.parentNode,r=this.document.body,o=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||(new Date).getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=(new Date).getTime(),o.getBoundingClientRect){for(e=o.getBoundingClientRect(),i=1,s=o;s&&u.exists(s.parentNode);)u.exists(s.style)&&u.exists(s.style.zoom)&&""!==s.style.zoom&&(i*=parseFloat(s.style.zoom)),s=s.parentNode;return(t=[e.left*i,e.top*i])[0]+=f.getProp(o,"border-left-width"),t[1]+=f.getProp(o,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=f.getProp(o,"padding-left"),t[1]+=f.getProp(o,"padding-top")),this.cPos=t.slice(),this.cPos}return t=f.getOffset(o),!this.containerObj.currentStyle&&this.document.documentElement.ownerDocument.defaultView&&(t[0]+=f.getProp(n,"margin-left"),t[1]+=f.getProp(n,"margin-top"),t[0]+=f.getProp(n,"border-left-width"),t[1]+=f.getProp(n,"border-top-width"),t[0]+=f.getProp(n,"padding-left"),t[1]+=f.getProp(n,"padding-top")),r&&(t[0]+=f.getProp(r,"left"),t[1]+=f.getProp(r,"top")),"object"==typeof google&&google.translate&&(t[0]+=10,t[1]+=25),t[0]+=f.getProp(o,"border-left-width"),t[1]+=f.getProp(o,"border-top-width"),"vml"!==this.renderer.type&&(t[0]+=f.getProp(o,"padding-left"),t[1]+=f.getProp(o,"padding-top")),t[0]+=this.attr.offsetx,t[1]+=this.attr.offsety,this.cPos=t.slice(),this.cPos},getMousePosition:function(t,e){var i,s,n=this.getCoordsTopLeftCorner();return i=f.getPosition(t,e,this.document),u.exists(this.cssTransMat)||this.updateCSSTransforms(),(s=r.matVecMult(this.cssTransMat,s=[1,i[0]-n[0],i[1]-n[1]]))[1]/=s[0],s[2]/=s[0],[s[1],s[2]]},initMoveOrigin:function(t,e){this.drag_dx=t-this.origin.scrCoords[1],this.drag_dy=e-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(t,i,s,n){var r,o,a,h=[],c=[],d=this.objectsList.length,p={visProp:{layer:-1e4}};for(o=0;o<d;o++)a=(r=this.objectsList[o]).hasPoint&&r.hasPoint(t,i),r.visPropCalc.visible&&a&&(r.triggerEventHandlers([n+"down","down"],[s]),this.downObjects.push(r)),(this.geonextCompatibilityMode&&(u.isPoint(r)||r.elementClass===e.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&r.isDraggable&&r.visPropCalc.visible&&!u.evaluate(r.visProp.fixed)&&a&&(r.visProp.layer>p.visProp.layer||r.visProp.layer===p.visProp.layer&&r.lastDragTime.getTime()>=p.lastDragTime.getTime())&&(this.attr.ignorelabels&&u.exists(p.label)&&r===p.label||(h.push(p=r),u.exists(p.coords)?c.push(l.subtract(p.coords.scrCoords.slice(1),[t,i])):c.push([0,0])));return h.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(h.length=1,this._drag_offset=c[0]):(h=h.slice(-1),this._drag_offset=c[c.length-1]),this._drag_offset||(this._drag_offset=[0,0]),"svg"===this.renderer.type&&u.exists(h[0])&&u.evaluate(h[0].visProp.dragtotopoflayer)&&1===h.length&&u.exists(h[0].rendNode)&&h[0].rendNode.parentNode.appendChild(h[0].rendNode),h},moveObject:function(t,s,n,r,o){var a,h,c,d=new i(e.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t,s),this);n&&n.obj&&((a=n.obj).coords&&(h=a.coords.scrCoords.slice()),this.drag_position=[d.scrCoords[1],d.scrCoords[2]],this.drag_position=l.add(this.drag_position,this._drag_offset),u.exists(a.coords)?a.setPositionDirectly(e.COORDS_BY_SCREEN,this.drag_position):(this.showInfobox(!1),isNaN(n.targets[0].Xprev+n.targets[0].Yprev)||a.setPositionDirectly(e.COORDS_BY_SCREEN,[d.scrCoords[1],d.scrCoords[2]],[n.targets[0].Xprev,n.targets[0].Yprev]),n.targets[0].Xprev=d.scrCoords[1],n.targets[0].Yprev=d.scrCoords[2]),a.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(a),a.prepareUpdate().update(!0).updateRenderer(),a.coords&&(c=a.coords.scrCoords),a.coords&&h[1]===c[1]&&h[2]===c[2]||(a.triggerEventHandlers([o+"drag","drag"],[r]),this.update()),a.highlight(!0),a.lastDragTime=new Date)},twoFingerMove:function(t,s,n,r){var o,a,l;u.exists(n)&&u.exists(n.obj)&&(l=n.obj,o=new i(e.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(t[0],t[1]),this),a=new i(e.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(s[0],s[1]),this),l.elementClass===e.OBJECT_CLASS_LINE||l.type===e.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(o,a,n,l):l.elementClass===e.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(o,a,n,l),l.triggerEventHandlers(["touchdrag","drag"],[r]),n.targets[0].Xprev=o.scrCoords[1],n.targets[0].Yprev=o.scrCoords[2],n.targets[1].Xprev=a.scrCoords[1],n.targets[1].Yprev=a.scrCoords[2])},twoFingerTouchObject:function(t,s,n,a){var l,h,c,d,p,f,m,g,b,y,v,C,x,_,P,S,w,E,k;if(u.exists(n.targets[0])&&u.exists(n.targets[1])&&!isNaN(n.targets[0].Xprev+n.targets[0].Yprev+n.targets[1].Xprev+n.targets[1].Yprev)){if(l=t.usrCoords,h=s.usrCoords,c=new i(e.COORDS_BY_SCREEN,[n.targets[0].Xprev,n.targets[0].Yprev],this).usrCoords,d=new i(e.COORDS_BY_SCREEN,[n.targets[1].Xprev,n.targets[1].Yprev],this).usrCoords,f=[1,.5*(c[1]+d[1]),.5*(c[2]+d[2])],p=[1,.5*(l[1]+h[1]),.5*(l[2]+h[2])],g=r.crossProduct(c,d),m=r.crossProduct(l,h),y=r.crossProduct(g,m),Math.abs(y[0])<r.eps)return;if(y[1]/=y[0],y[2]/=y[0],v=o.rad(f.slice(1),y.slice(1),p.slice(1)),(C=this.create("transform",[v,y[1],y[2]],{type:"rotate"})).update(),(f=r.matVecMult(C.matrix,f))[1]/=f[0],f[2]/=f[0],(x=this.create("transform",[p[1]-f[1],p[2]-f[2]],{type:"translate"})).update(),C.melt(x),u.evaluate(a.visProp.scalable)&&(b=o.distance(l,h)/o.distance(c,d),_=this.create("transform",[-p[1],-p[2]],{type:"translate"}),P=this.create("transform",[b,b],{type:"scale"}),S=this.create("transform",[p[1],p[2]],{type:"translate"}),C.melt(_).melt(P).melt(S)),a.elementClass===e.OBJECT_CLASS_LINE)w=[],a.point1.draggable()&&w.push(a.point1),a.point2.draggable()&&w.push(a.point2),C.applyOnce(w);else if(a.type===e.OBJECT_TYPE_POLYGON){for(w=[],k=a.vertices.length-1,E=0;E<k;++E)a.vertices[E].draggable()&&w.push(a.vertices[E]);C.applyOnce(w)}this.update(),a.highlight(!0)}},twoFingerTouchCircle:function(t,s,n,r){var a,l,h,c,d,p,f,m,g,b,y;"pointCircle"!==r.method&&"pointLine"!==r.method&&u.exists(n.targets[0])&&u.exists(n.targets[1])&&!isNaN(n.targets[0].Xprev+n.targets[0].Yprev+n.targets[1].Xprev+n.targets[1].Yprev)&&(a=t.usrCoords,l=s.usrCoords,h=new i(e.COORDS_BY_SCREEN,[n.targets[0].Xprev,n.targets[0].Yprev],this).usrCoords,c=new i(e.COORDS_BY_SCREEN,[n.targets[1].Xprev,n.targets[1].Yprev],this).usrCoords,f=this.create("transform",[a[1]-h[1],a[2]-h[2]],{type:"translate"}),p=o.rad(c.slice(1),a.slice(1),l.slice(1)),m=this.create("transform",[-a[1],-a[2]],{type:"translate"}),g=this.create("transform",[p],{type:"rotate"}),f.melt(m).melt(g),u.evaluate(r.visProp.scalable)&&(d=o.distance(a,l)/o.distance(h,c),b=this.create("transform",[d,d],{type:"scale"}),f.melt(b)),y=this.create("transform",[a[1],a[2]],{type:"translate"}),f.melt(y),r.center.draggable()&&f.applyOnce([r.center]),"twoPoints"===r.method?r.point2.draggable()&&f.applyOnce([r.point2]):"pointRadius"===r.method&&u.isNumber(r.updateRadius.origin)&&r.setRadius(r.radius*d),this.update(r.center),r.highlight(!0))},highlightElements:function(t,e,i,s){var n,r,o,a={},l=this.objectsList.length;for(n=0;n<l;n++)o=(r=this.objectsList[n]).id,u.exists(r.hasPoint)&&r.visPropCalc.visible&&r.hasPoint(t,e)&&(this.updateInfobox(r),u.exists(this.highlightedObjects[o])||(a[o]=r,r.highlight(),r.triggerEventHandlers(["mousehit","hit"],[i,r,s])),r.mouseover?r.triggerEventHandlers(["mousemove","move"],[i]):(r.triggerEventHandlers(["mouseover","over"],[i]),r.mouseover=!0));for(n=0;n<l;n++)o=(r=this.objectsList[n]).id,r.mouseover&&(a[o]||(r.triggerEventHandlers(["mouseout","out"],[i]),r.mouseover=!1))},saveStartPos:function(i,s){var n,r,o=[];if(i.type===e.OBJECT_TYPE_TICKS)o.push([1,NaN,NaN]);else if(i.elementClass===e.OBJECT_CLASS_LINE)o.push(i.point1.coords.usrCoords),o.push(i.point2.coords.usrCoords);else if(i.elementClass===e.OBJECT_CLASS_CIRCLE)o.push(i.center.coords.usrCoords),"twoPoints"===i.method&&o.push(i.point2.coords.usrCoords);else if(i.type===e.OBJECT_TYPE_POLYGON)for(r=i.vertices.length-1,n=0;n<r;n++)o.push(i.vertices[n].coords.usrCoords);else if(i.type===e.OBJECT_TYPE_SECTOR)o.push(i.point1.coords.usrCoords),o.push(i.point2.coords.usrCoords),o.push(i.point3.coords.usrCoords);else if(u.isPoint(i)||i.type===e.OBJECT_TYPE_GLIDER)o.push(i.coords.usrCoords);else if(i.elementClass===e.OBJECT_CLASS_CURVE)i.points.length>0&&o.push(i.points[0].usrCoords);else try{o.push(i.coords.usrCoords)}catch(e){t.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+e)}for(r=o.length,n=0;n<r;n++)s.Zstart.push(o[n][0]),s.Xstart.push(o[n][1]),s.Ystart.push(o[n][2])},mouseOriginMoveStart:function(t){var e,i;return(e=this._isRequiredKeyPressed(t,"pan"))&&(i=this.getMousePosition(t),this.initMoveOrigin(i[0],i[1])),e},mouseOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t),this.moveOrigin(e[0],e[1],!0)),i},touchOriginMoveStart:function(e){var i,s;return(i=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&1==e[t.touchProperty].length)&&(s=this.getMousePosition(e,0),this.initMoveOrigin(s[0],s[1])),i},touchOriginMove:function(t){var e,i=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return i&&(e=this.getMousePosition(t,0),this.moveOrigin(e[0],e[1],!0)),i},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){f.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),null!==this.containerObj&&(this.containerObj.oncontextmenu=function(t){return u.exists(t)&&t.preventDefault(),!1})},addPointerEventHandlers:function(){!this.hasPointerHandlers&&f.isBrowser&&(window.navigator.msPointerEnabled?(f.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),f.addEvent(this.containerObj,"MSPointerMove",this.pointerMoveListener,this)):(f.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),f.addEvent(this.containerObj,"pointermove",this.pointerMoveListener,this)),f.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),f.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),null!==this.containerObj&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0)},addMouseEventHandlers:function(){!this.hasMouseHandlers&&f.isBrowser&&(f.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),f.addEvent(this.containerObj,"mousemove",this.mouseMoveListener,this),f.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),f.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0)},addTouchEventHandlers:function(t){!this.hasTouchHandlers&&f.isBrowser&&(f.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),f.addEvent(this.containerObj,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0)},removePointerEventHandlers:function(){this.hasPointerHandlers&&f.isBrowser&&(window.navigator.msPointerEnabled?(f.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),f.removeEvent(this.containerObj,"MSPointerMove",this.pointerMoveListener,this)):(f.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),f.removeEvent(this.containerObj,"pointermove",this.pointerMoveListener,this)),f.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),f.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasPointerUp&&(window.navigator.msPointerEnabled?f.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):f.removeEvent(this.document,"pointerup",this.pointerUpListener,this),this.hasPointerUp=!1),this.hasPointerHandlers=!1)},removeMouseEventHandlers:function(){this.hasMouseHandlers&&f.isBrowser&&(f.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),f.removeEvent(this.containerObj,"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(f.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),f.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),f.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1)},removeTouchEventHandlers:function(){this.hasTouchHandlers&&f.isBrowser&&(f.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),f.removeEvent(this.containerObj,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(f.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1)},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers()},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(t){var s,n,r,a,l,h,c,d,u,p=this.attr.zoom.factorx,f=this.attr.zoom.factory;return this.mode!==this.BOARD_MODE_ZOOM||(t.preventDefault(),s=new i(e.COORDS_BY_SCREEN,this.getMousePosition(t,0),this),r=o.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),void 0===t.scale&&(t.scale=r/this.prevDist),n=t.scale/this.prevScale,this.prevScale=t.scale,this.attr.pan.enabled&&this.attr.pan.needtwofingers&&Math.abs(t.scale-1)<.4&&this._num_pan>=.8*this._num_zoom?(this._num_pan++,this.moveOrigin(s.scrCoords[1],s.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(n-1)<.5&&(this._num_zoom++,(this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(a=Math.abs(t.touches[0].clientX-t.touches[1].clientX),l=Math.abs(t.touches[0].clientY-t.touches[1].clientY),h=Math.abs(Math.atan2(l,a)),u=Math.PI*this.attr.zoom.pinchsensitivity/90),this.attr.zoom.pinchhorizontal&&h<u?(this.attr.zoom.factorx=n,this.attr.zoom.factory=1,c=0,d=0):this.attr.zoom.pinchvertical&&Math.abs(h-.5*Math.PI)<u?(this.attr.zoom.factorx=1,this.attr.zoom.factory=n,c=0,d=0):(this.attr.zoom.factorx=n,this.attr.zoom.factory=n,c=s.usrCoords[1],d=s.usrCoords[2]),this.zoomIn(c,d),this.attr.zoom.factorx=p,this.attr.zoom.factory=f),!1)},gestureStartListener:function(t){var e;return t.preventDefault(),this.prevScale=1,this.prevDist=o.distance([t.touches[0].clientX,t.touches[0].clientY],[t.touches[1].clientX,t.touches[1].clientY],2),e=this.getMousePosition(t,0),this.initMoveOrigin(e[0],e[1]),this._num_zoom=this._num_pan=0,this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(t,e){var i=this.attr[e];return!!i.enabled&&!(!(i.needshift&&t.shiftKey||!i.needshift&&!t.shiftKey)||!(i.needctrl&&t.ctrlKey||!i.needctrl&&!t.ctrlKey))},_pointerAddBoardTouches:function(t){var e,i;for(e=0,i=!1;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches[e].clientX=t.clientX,this._board_touches[e].clientY=t.clientY,i=!0;break}return i||this._board_touches.push({pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY}),this},_pointerRemoveBoardTouches:function(t){var e;for(e=0;e<this._board_touches.length;e++)if(this._board_touches[e].pointerId===t.pointerId){this._board_touches.splice(e,1);break}return this},pointerDownListener:function(t,e){var i,s,n,r,o,a,l,h,c=this.options.precision.touch;if(this.hasPointerUp||(window.navigator.msPointerEnabled?f.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):f.addEvent(this.document,"pointerup",this.pointerUpListener,this),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&u.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(a=window.getSelection()).removeAllRanges)try{a.removeAllRanges()}catch(t){}if(f.isBrowser&&("touch"===t.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)&&(this.options.precision.hasPoint=c),r=this.getMousePosition(t),this._testForSelection(t),this.selectingMode)return this._startSelecting(r),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[t]);if(e?(o=[e],this.mode=this.BOARD_MODE_DRAG):o=this.initMoveObject(r[0],r[1],t,"mouse"),o.length>0){for(h=o[o.length-1],l=!1,i=0;i<this.touches.length;i++)if(this.touches[i].obj===h){s=i,n=this.touches[i].targets.push({num:t.pointerId,X:r[0],Y:r[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]})-1,l=!0;break}l||(n=0,s=this.touches.push({obj:h,targets:[{num:t.pointerId,X:r[0],Y:r[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]}]})-1),this.dehighlightAll(),h.highlight(!0),this.saveStartPos(h,this.touches[s].targets[n]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)}return this.touches.length>0&&(t.preventDefault(),t.stopPropagation()),this.options.precision.hasPoint=this.options.precision.mouse,f.isBrowser&&"touch"!==t.pointerType?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(t):(this._pointerAddBoardTouches(t),t.touches=this._board_touches,this.mode===this.BOARD_MODE_NONE&&this.touchOriginMoveStart(t)||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||2!=t.touches.length||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(t))),this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[t]),!1},pointerMoveListener:function(t){var e,i,s;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.showInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(t.preventDefault(),t.stopPropagation()),f.isBrowser&&("touch"===t.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)&&(this.options.precision.hasPoint=this.options.precision.touch),this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode)s=this.getMousePosition(t),this._moveSelecting(s),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[t,this.mode]);else if(!this.mouseOriginMove(t))if(this.mode===this.BOARD_MODE_DRAG){for(e=0;e<this.touches.length;e++)for(i=0;i<this.touches[e].targets.length;i++)if(this.touches[e].targets[i].num===t.pointerId){1===this.touches[e].targets.length?(this.touches[e].targets[i].X=t.pageX,this.touches[e].targets[i].Y=t.pageY,s=this.getMousePosition(t),this.moveObject(s[0],s[1],this.touches[e],t,"touch")):2===this.touches[e].targets.length&&this.touches[e].targets[0].num>-1&&this.touches[e].targets[1].num>-1&&(this.touches[e].targets[i].X=t.pageX,this.touches[e].targets[i].Y=t.pageY,this.twoFingerMove(this.getMousePosition({clientX:this.touches[e].targets[0].X,clientY:this.touches[e].targets[0].Y}),this.getMousePosition({clientX:this.touches[e].targets[1].X,clientY:this.touches[e].targets[1].Y}),this.touches[e],t));break}}else"touch"==t.pointerType?(this._pointerAddBoardTouches(t),2==this._board_touches.length&&(t.touches=this._board_touches,this.gestureChangeListener(t))):(s=this.getMousePosition(t),this.highlightElements(s[0],s[1],t,-1));return this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchmove","move","pointermove","MSPointerMove"],[t,this.mode]),this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(t){var e,i,s;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.showInfobox(!1),t)for(e=0;e<this.touches.length;e++)for(i=0;i<this.touches[e].targets.length;i++)if(this.touches[e].targets[i].num===t.pointerId){this.touches[e].targets.splice(i,1),0===this.touches[e].targets.length&&this.touches.splice(e,1);break}if(this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[t]);else for(e=this.downObjects.length-1;e>-1;e--){for(s=!1,i=0;i<this.touches.length;i++)this.touches[i].obj.id===this.downObjects[e].id&&(s=!0);s||(this.downObjects[e].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[t]),this.downObjects[e].snapToGrid(),this.downObjects[e].snapToPoints(),this.downObjects.splice(e,1))}return this._pointerRemoveBoardTouches(t),0===this._board_touches.length&&(this.hasPointerUp&&(window.navigator.msPointerEnabled?f.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):f.removeEvent(this.document,"pointerup",this.pointerUpListener,this),this.hasPointerUp=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this.originMoveEnd(),this.update()),!0},touchStartListener:function(i){var n,r,o,a,l,h,c,d,p,m=this.options.precision.touch,g=i[t.touchProperty];for(this.hasTouchEnd||(f.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&u.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this.options.precision.hasPoint=this.options.precision.touch,n=0;n<g.length;n++)g[n].jxg_isused=!1;for(n=0;n<this.touches.length;n++)for(a=0;a<this.touches[n].targets.length;a++){this.touches[n].targets[a].num=-1,m=this.options.precision.touch;do{for(l=0;l<g.length;l++)if(Math.abs(Math.pow(g[l].screenX-this.touches[n].targets[a].X,2)+Math.pow(g[l].screenY-this.touches[n].targets[a].Y,2))<m*m){this.touches[n].targets[a].num=l,this.touches[n].targets[a].X=g[l].screenX,this.touches[n].targets[a].Y=g[l].screenY,g[l].jxg_isused=!0;break}m*=2}while(-1===this.touches[n].targets[a].num&&m<this.options.precision.touchMax);-1===this.touches[n].targets[a].num&&(t.debug("i couldn't find a targettouches for target no "+a+" on "+this.touches[n].obj.name+" ("+this.touches[n].obj.id+"). Removed the target."),t.debug("eps = "+m+", touchMax = "+s.precision.touchMax),this.touches[n].targets.splice(n,1))}for(n=0;n<g.length;n++)if(!g[n].jxg_isused){if(r=this.getMousePosition(i,n),this.selectingMode)return this._startSelecting(r),this.triggerEventHandlers(["touchstartselecting","startselecting"],[i]),i.preventDefault(),i.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(0!==(o=this.initMoveObject(r[0],r[1],i,"touch")).length)if(u.isPoint(h=o[o.length-1])||h.elementClass===e.OBJECT_CLASS_TEXT||h.type===e.OBJECT_TYPE_TICKS||h.type===e.OBJECT_TYPE_IMAGE)this.saveStartPos(h,(d=[{num:n,X:g[n].screenX,Y:g[n].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]}])[0]),this.touches.push({obj:h,targets:d}),h.highlight(!0);else if(h.elementClass===e.OBJECT_CLASS_LINE||h.elementClass===e.OBJECT_CLASS_CIRCLE||h.elementClass===e.OBJECT_CLASS_CURVE||h.type===e.OBJECT_TYPE_POLYGON){for(c=!1,a=0;a<this.touches.length;a++)h.id===this.touches[a].obj.id&&(c=!0,1===this.touches[a].targets.length&&(this.saveStartPos(h,p={num:n,X:g[n].screenX,Y:g[n].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]}),this.touches[a].targets.push(p)),g[n].jxg_isused=!0);c||(this.saveStartPos(h,(d=[{num:n,X:g[n].screenX,Y:g[n].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]}])[0]),this.touches.push({obj:h,targets:d}),h.highlight(!0))}g[n].jxg_isused=!0}return this.touches.length>0&&(i.preventDefault(),i.stopPropagation()),this.mode===this.BOARD_MODE_NONE&&this.touchOriginMoveStart(i)||2!=g.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(i)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[i]),!1},touchMoveListener:function(e){var i,s,n,r=e[t.touchProperty];if(this.mode!==this.BOARD_MODE_NONE&&(e.preventDefault(),e.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&this.showInfobox(!1),this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(i=0;i<r.length;i++)if(!r[i].jxg_isused){s=this.getMousePosition(e,i),this._moveSelecting(s),this.triggerEventHandlers(["touchmoves","moveselecting"],[e,this.mode]);break}}else if(!this.touchOriginMove(e))if(this.mode===this.BOARD_MODE_DRAG){for(i=0;i<this.touches.length;i++)if(1===this.touches[i].targets.length){if(r[this.touches[i].targets[0].num]){if((s=this.getMousePosition(e,this.touches[i].targets[0].num))[0]<0||s[0]>this.canvasWidth||s[1]<0||s[1]>this.canvasHeight)return;this.touches[i].targets[0].X=r[this.touches[i].targets[0].num].screenX,this.touches[i].targets[0].Y=r[this.touches[i].targets[0].num].screenY,this.moveObject(s[0],s[1],this.touches[i],e,"touch")}}else if(2===this.touches[i].targets.length&&this.touches[i].targets[0].num>-1&&this.touches[i].targets[1].num>-1&&r[this.touches[i].targets[0].num]&&r[this.touches[i].targets[1].num]){if(s=this.getMousePosition(e,this.touches[i].targets[0].num),n=this.getMousePosition(e,this.touches[i].targets[1].num),s[0]<0||s[0]>this.canvasWidth||s[1]<0||s[1]>this.canvasHeight||n[0]<0||n[0]>this.canvasWidth||n[1]<0||n[1]>this.canvasHeight)return;this.touches[i].targets[0].X=r[this.touches[i].targets[0].num].screenX,this.touches[i].targets[0].Y=r[this.touches[i].targets[0].num].screenY,this.touches[i].targets[1].X=r[this.touches[i].targets[1].num].screenX,this.touches[i].targets[1].Y=r[this.touches[i].targets[1].num].screenY,this.twoFingerMove(s,n,this.touches[i],e)}}else 2==r.length&&this.gestureChangeListener(e);return this.mode!==this.BOARD_MODE_DRAG&&this.showInfobox(!1),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchmove","move"],[e,this.mode]),this.mode===this.BOARD_MODE_NONE},touchEndListener:function(i){var s,n,r,o,a,l=this.options.precision.touch,h=[],c=i&&i[t.touchProperty];if(this.triggerEventHandlers(["touchend","up"],[i]),this.showInfobox(!1),this.selectingMode)this._stopSelecting(i),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[i]);else if(c&&c.length>0){for(s=0;s<this.touches.length;s++)h[s]=this.touches[s];for(this.touches.length=0,s=0;s<c.length;s++)c[s].jxg_isused=!1;for(s=0;s<h.length;s++){for(o=!1,a=0,n=0;n<h[s].targets.length;n++)for(h[s].targets[n].found=!1,r=0;r<c.length;r++)if(Math.abs(Math.pow(c[r].screenX-h[s].targets[n].X,2)+Math.pow(c[r].screenY-h[s].targets[n].Y,2))<l*l){h[s].targets[n].found=!0,h[s].targets[n].num=r,h[s].targets[n].X=c[r].screenX,h[s].targets[n].Y=c[r].screenY,a+=1;break}if(u.isPoint(h[s].obj)?o=h[s].targets[0]&&h[s].targets[0].found:h[s].obj.elementClass===e.OBJECT_CLASS_LINE?o=h[s].targets[0]&&h[s].targets[0].found||h[s].targets[1]&&h[s].targets[1].found:h[s].obj.elementClass===e.OBJECT_CLASS_CIRCLE&&(o=1===a||3===a),o)for(this.touches.push({obj:h[s].obj,targets:[]}),n=0;n<h[s].targets.length;n++)h[s].targets[n].found&&this.touches[this.touches.length-1].targets.push({num:h[s].targets[n].num,X:h[s].targets[n].screenX,Y:h[s].targets[n].screenY,Xprev:NaN,Yprev:NaN,Xstart:h[s].targets[n].Xstart,Ystart:h[s].targets[n].Ystart,Zstart:h[s].targets[n].Zstart});else h[s].obj.noHighlight()}}else this.touches.length=0;for(s=this.downObjects.length-1;s>-1;s--){for(o=!1,n=0;n<this.touches.length;n++)this.touches[n].obj.id===this.downObjects[s].id&&(o=!0);o||(this.downObjects[s].triggerEventHandlers(["touchup","up"],[i]),this.downObjects[s].snapToGrid(),this.downObjects[s].snapToPoints(),this.downObjects.splice(s,1))}return c&&0!==c.length||(this.hasTouchEnd&&(f.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),this.update()),!0},mouseDownListener:function(t){var e,i,s;if(this.document.selection&&u.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return f.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,e=this.getMousePosition(t),this._testForSelection(t),this.selectingMode?(this._startSelecting(e),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[t])):(0===(i=this.initMoveObject(e[0],e[1],t,"mouse")).length?(this.mode=this.BOARD_MODE_NONE,s=!0):(this.mouse={obj:null,targets:[{X:e[0],Y:e[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=i[i.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),t&&t.preventDefault?t.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(s=this.mouseOriginMoveStart(t)),this.triggerEventHandlers(["mousedown","down"],[t]),s)},mouseMoveListener:function(t){var e;e=this.getMousePosition(t),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.showInfobox(!1)),this.selectingMode?(this._moveSelecting(e),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[t,this.mode])):this.mouseOriginMove(t)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(e[0],e[1],this.mouse,t,"mouse"):this.highlightElements(e[0],e[1],t,-1),this.triggerEventHandlers(["mousemove","move"],[t,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(t){var e;if(!1===this.selectingMode&&this.triggerEventHandlers(["mouseup","up"],[t]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints()),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(t),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[t]);else for(e=0;e<this.downObjects.length;e++)this.downObjects[e].triggerEventHandlers(["mouseup","up"],[t]);this.downObjects.length=0,this.hasMouseUp&&(f.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(t){if(!this.attr.zoom.wheel||!this._isRequiredKeyPressed(t,"zoom"))return!0;var s=(t=t||window.event).detail?-t.detail:t.wheelDelta/40,n=new i(e.COORDS_BY_SCREEN,this.getMousePosition(t),this);return s>0?this.zoomIn(n.usrCoords[1],n.usrCoords[2]):this.zoomOut(n.usrCoords[1],n.usrCoords[2]),this.triggerEventHandlers(["mousewheel"],[t]),t.preventDefault(),!1},initInfobox:function(){var t=u.copyAttributes({},this.options,"infobox");return t.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],t),this.infobox.distanceX=-20,this.infobox.distanceY=25,this.infobox.dump=!1,this.showInfobox(!1),this},updateInfobox:function(t){var e,i,s,n,r;return u.evaluate(t.visProp.showinfobox)?(u.isPoint(t)&&(s=t.coords.usrCoords[1],n=t.coords.usrCoords[2],r=u.evaluate(t.visProp.infoboxdigits),this.infobox.setCoords(s+this.infobox.distanceX/this.unitX,n+this.infobox.distanceY/this.unitY),"string"!=typeof t.infoboxText?("auto"===r?(e=u.autoDigits(s),i=u.autoDigits(n)):u.isNumber(r)?(e=u.toFixed(s,r),i=u.toFixed(n,r)):(e=s,i=n),this.highlightInfobox(e,i,t)):this.highlightCustomInfobox(t.infoboxText,t),this.showInfobox(!0)),this):this},showInfobox:function(t){return this.infobox.hiddenByParent==t&&(this.infobox.hiddenByParent=!t,this.infobox.prepareUpdate().updateVisibility(t).updateRenderer()),this},highlightInfobox:function(t,e,i){return this.highlightCustomInfobox("("+t+", "+e+")",i),this},highlightCustomInfobox:function(t,e){return this.infobox.setText(t),this},dehighlightAll:function(){var t,e=!1;for(t in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(t)&&((this.hasMouseHandlers||this.hasPointerHandlers)&&this.highlightedObjects[t].noHighlight(),e=!0);return this.highlightedObjects={},"canvas"===this.renderer.type&&e&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(t,e){return[t,e]},getUsrCoordsOfMouse:function(t){var s=this.getCoordsTopLeftCorner(),n=f.getPosition(t,null,this.document);return new i(e.COORDS_BY_SCREEN,[n[0]-s[0],n[1]-s[1]],this).usrCoords.slice(1)},getAllUnderMouse:function(t){var e=this.getAllObjectsUnderMouse(t);return e.push(this.getUsrCoordsOfMouse(t)),e},getAllObjectsUnderMouse:function(t){var e,i,s=this.getCoordsTopLeftCorner(),n=f.getPosition(t,null,this.document),r=n[0]-s[0],o=n[1]-s[1],a=[],l=this.objectsList.length;for(e=0;e<l;e++)(i=this.objectsList[e]).visPropCalc.visible&&i.hasPoint&&i.hasPoint(r,o)&&(a[a.length]=i);return a},updateCoords:function(){var t,e,i=this.objectsList.length;for(e=0;e<i;e++)u.exists((t=this.objectsList[e]).coords)&&(u.evaluate(t.visProp.frozen)?t.coords.screen2usr():t.coords.usr2screen());return this},moveOrigin:function(t,e,i){return u.exists(t)&&u.exists(e)&&(this.origin.scrCoords[1]=t,this.origin.scrCoords[2]=e,i&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(i){var s,n,r,o,a,l,h,c=[],p=i.indexOf("<data>"),f=i.indexOf("</data>"),m=function(t,i,s,n){return function(){var r,o;o=(r=t.select(i.id)).coords.usrCoords[n],r.setPositionDirectly(e.COORDS_BY_USER,2===n?[s(),o]:[o,s()]),r.prepareUpdate().update()}},g=function(t,e,i,s){return function(){var n,r;n=t.select(e.id),r=i(),"strokewidth"===s?n.visProp.strokewidth=r:(r=d.rgba2rgbo(r),n.visProp[s+"color"]=r[0],n.visProp[s+"opacity"]=r[1])}};if(!(p<0)){for(;p>=0;){if(n=(s=i.slice(p+6,f)).indexOf("="),r=s.slice(0,n),o=s.slice(n+1),n=r.indexOf("."),a=r.slice(0,n),l=this.elementsByName[u.unescapeHTML(a)],h=r.slice(n+1).replace(/\s+/g,"").toLowerCase(),o=u.createFunction(o,this,"",!0),u.exists(this.elementsByName[a]))switch(h){case"x":c.push(m(this,l,o,2));break;case"y":c.push(m(this,l,o,1));break;case"visible":c.push(function(t,e,i){return function(){var s,n;s=t.select(e.id),n=i(),s.setAttribute({visible:n})}}(this,l,o));break;case"position":c.push(function(t,e,i){return function(){t.select(e.id).position=i()}}(this,l,o));break;case"stroke":c.push(g(this,l,o,"stroke"));break;case"style":c.push(function(t,e,i){return function(){t.select(e.id).setStyle(i())}}(this,l,o));break;case"strokewidth":c.push(g(this,l,o,"strokewidth"));break;case"fill":c.push(g(this,l,o,"fill"));break;case"label":break;default:t.debug("property '"+h+"' in conditions not yet implemented:"+o)}else t.debug("debug conditions: |"+a+"| undefined");p=(i=i.slice(f+7)).indexOf("<data>"),f=i.indexOf("</data>")}this.updateConditions=function(){var t;for(t=0;t<c.length;t++)c[t]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var t=new i(e.COORDS_BY_USER,[0,0],this),s=new i(e.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),n=t.scrCoords[1]-s.scrCoords[1],r=t.scrCoords[2]-s.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;Math.abs(n)>25;)this.options.grid.snapSizeX*=2,n/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;Math.abs(r)>25;)this.options.grid.snapSizeY*=2,r/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(t,e){var i=this.getBoundingBox(),s=this.attr.zoom.factorx,n=this.attr.zoom.factory,r=(i[2]-i[0])*(1-1/s),o=(i[1]-i[3])*(1-1/n),a=.5,l=.5,h=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&s>1||this.zoomY>this.attr.zoom.max&&n>1||this.zoomX<h&&s<1||this.zoomY<h&&n<1?this:(u.isNumber(t)&&u.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+r*a,i[1]-o*l,i[2]-r*(1-a),i[3]+o*(1-l)],!1),this.zoomX*=s,this.zoomY*=n,this.applyZoom())},zoomOut:function(t,e){var i=this.getBoundingBox(),s=this.attr.zoom.factorx,n=this.attr.zoom.factory,r=(i[2]-i[0])*(1-s),o=(i[1]-i[3])*(1-n),a=.5,l=.5,h=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<h||this.zoomY<h?this:(u.isNumber(t)&&u.isNumber(e)&&(a=(t-i[0])/(i[2]-i[0]),l=(i[1]-e)/(i[1]-i[3])),this.setBoundingBox([i[0]+r*a,i[1]-o*l,i[2]-r*(1-a),i[3]+o*(1-l)],!1),this.zoomX/=s,this.zoomY/=n,this.applyZoom())},zoom100:function(){var t=this.getBoundingBox(),e=(t[2]-t[0])*(1-this.zoomX)*.5,i=(t[1]-t[3])*(1-this.zoomY)*.5;return this.setBoundingBox([t[0]+e,t[1]-i,t[2]-e,t[3]+i],!1),this.zoomX=1,this.zoomY=1,this.applyZoom()},zoomAllPoints:function(){var t,e,i,s,n=0,r=0,o=0,a=0,l=this.objectsList.length;for(t=0;t<l;t++)u.isPoint(s=this.objectsList[t])&&s.visPropCalc.visible&&(s.coords.usrCoords[1]<n?n=s.coords.usrCoords[1]:s.coords.usrCoords[1]>r&&(r=s.coords.usrCoords[1]),s.coords.usrCoords[2]>a?a=s.coords.usrCoords[2]:s.coords.usrCoords[2]<o&&(o=s.coords.usrCoords[2]));return e=50/this.unitX,i=50/this.unitY,this.zoomX=1,this.zoomY=1,this.setBoundingBox([n-e,a+i,r+e,o-i],!0),this.applyZoom()},zoomElements:function(t){var e,i,s,n=[0,0,0,0],r=[1,-1,-1,1];if(!u.isArray(t)||0===t.length)return this;for(e=0;e<t.length;e++)if(s=this.select(t[e]).bounds(),u.isArray(s))if(u.isArray(n))for(i=0;i<4;i++)r[i]*s[i]<r[i]*n[i]&&(n[i]=s[i]);else n=s;if(u.isArray(n)){for(i=0;i<4;i++)n[i]-=r[i];this.zoomX=1,this.zoomY=1,this.setBoundingBox(n,!0)}return this},setZoom:function(t,e){var i=this.attr.zoom.factorx,s=this.attr.zoom.factory;return this.attr.zoom.factorx=t/this.zoomX,this.attr.zoom.factory=e/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=i,this.attr.zoom.factory=s,this},removeObject:function(i){var s,n;if(u.isArray(i)){for(n=0;n<i.length;n++)this.removeObject(i[n]);return this}if(i=this.select(i),!u.exists(i)||u.isString(i))return this;try{for(s in i.childElements)i.childElements.hasOwnProperty(s)&&i.childElements[s].board.removeObject(i.childElements[s]);for(s in i.objects)i.objects.hasOwnProperty(s)&&i.objects[s].board.removeObject(i.objects[s]);for(s in this.objects)this.objects.hasOwnProperty(s)&&u.exists(this.objects[s].childElements)&&(delete this.objects[s].childElements[i.id],delete this.objects[s].descendants[i.id]);if(i._pos>-1)for(this.objectsList.splice(i._pos,1),s=i._pos;s<this.objectsList.length;s++)this.objectsList[s]._pos--;else i.type!==e.OBJECT_TYPE_TURTLE&&t.debug("Board.removeObject: object "+i.id+" not found in list.");delete this.objects[i.id],delete this.elementsByName[i.name],i.visProp&&u.evaluate(i.visProp.trace)&&i.clearTrace(),u.exists(i.remove)&&i.remove()}catch(e){t.debug(i.id+": Could not be removed: "+e)}return this.update(),this},removeAncestors:function(t){var e;for(e in t.ancestors)t.ancestors.hasOwnProperty(e)&&this.removeAncestors(t.ancestors[e]);return this.removeObject(t),this},initGeonextBoard:function(){var t,e,i;return t=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),e=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),i=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[t,e],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[t,i],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(t,e,i,s){var n;return s||(n=this.getBoundingBox()),this.canvasWidth=parseInt(t,10),this.canvasHeight=parseInt(e,10),i||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),s||this.setBoundingBox(n,this.keepaspectratio),this},showDependencies:function(){var t,e,i,s,n;for(t in e="<p>\n",this.objects)if(this.objects.hasOwnProperty(t)){for(i in n=0,this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(n+=1);for(i in n>=0&&(e+="<strong>"+this.objects[t].id+":</strong> "),this.objects[t].childElements)this.objects[t].childElements.hasOwnProperty(i)&&(e+=this.objects[t].childElements[i].id+"("+this.objects[t].childElements[i].name+"), ");e+="<p>\n"}return e+="</p>\n",(s=window.open()).document.open(),s.document.write(e),s.document.close(),this},showXML:function(){var t=window.open("");return t.document.open(),t.document.write("<pre>"+u.escapeHTML(this.xmlString)+"</pre>"),t.document.close(),this},prepareUpdate:function(){var t,e,i=this.objectsList.length;for(t=0;t<i;t++)(e=this.objectsList[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate;for(t in this.groups)this.groups.hasOwnProperty(t)&&((e=this.groups[t]).needsUpdate=e.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(t){var e,i;for(t=this.select(t),e=0;e<this.objectsList.length;e++)(i=this.objectsList[e]).update(!u.exists(t)||i.id!==t.id).updateVisibility();for(e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].update(t);return this},updateRenderer:function(){var t,e=this.objectsList.length;if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(t=0;t<e;t++)this.objectsList[t].updateRenderer();return this},updateRendererCanvas:function(){var t,e,i,s,n,r=this.objectsList.length,o=this.options.layer,a=this.options.layer.numlayers,l=Number.NEGATIVE_INFINITY;for(i=0;i<a;i++){for(n in s=Number.POSITIVE_INFINITY,o)o.hasOwnProperty(n)&&o[n]>l&&o[n]<s&&(s=o[n]);for(l=s,t=0;t<r;t++)(e=this.objectsList[t]).visProp.layer===s&&e.prepareUpdate().updateRenderer()}return this},addHook:function(e,i,s){return t.deprecated("Board.addHook()","Board.on()"),i=u.def(i,"update"),s=u.def(s,this),this.hooks.push([i,e]),this.on(i,e,s),this.hooks.length-1},addEvent:t.shortcut(t.Board.prototype,"on"),removeHook:function(e){return t.deprecated("Board.removeHook()","Board.off()"),this.hooks[e]&&(this.off(this.hooks[e][0],this.hooks[e][1]),this.hooks[e]=null),this},removeEvent:t.shortcut(t.Board.prototype,"off"),updateHooks:function(e){var i=Array.prototype.slice.call(arguments,0);return t.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),i[0]=u.def(i[0],"update"),this.triggerEventHandlers([i[0]],arguments),this},addChild:function(t){return u.exists(t)&&u.exists(t.containerObj)&&(this.dependentBoards.push(t),this.update()),this},removeChild:function(t){var e;for(e=this.dependentBoards.length-1;e>=0;e--)this.dependentBoards[e]===t&&this.dependentBoards.splice(e,1);return this},update:function(t){var e,i,s,n;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(n=this.renderer.removeToInsertLater(this.containerObj)),"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(n=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(t).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),n&&n(),i=this.dependentBoards.length,e=0;e<i;e++)u.exists(s=this.dependentBoards[e])&&s!==this&&(s.updateQuality=this.updateQuality,s.prepareUpdate().updateElements().updateConditions(),s.renderer.suspendRedraw(),s.updateRenderer(),s.renderer.unsuspendRedraw(),s.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var t;for(t=0;t<this.grids.length;t++)this.removeObject(this.grids[t]);return this.grids.length=0,this.update(),this},create:function(e,i,s){var n,r;for(e=e.toLowerCase(),u.exists(i)||(i=[]),u.exists(s)||(s={}),r=0;r<i.length;r++)u.isString(i[r])&&("text"!==e||2!==r)&&("input"!==e&&"checkbox"!==e&&"button"!==e||2!==r&&3!==r)&&(i[r]=this.select(i[r]));if(!u.isFunction(t.elements[e]))throw new Error("JSXGraph: create: Unknown element type given: "+e);return n=t.elements[e](this,i,s),u.exists(n)?(n.prepareUpdate&&n.update&&n.updateRenderer&&n.fullUpdate(),n):(t.debug("JSXGraph: create: failure creating "+e),n)},createElement:function(){return t.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var t;for(t=0;t<this.objectsList.length;t++)this.objectsList[t].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(t,e){var i,s,n=f.getDimensions(this.container,this.document);return u.isArray(t)?(this.plainBB=t,this.canvasWidth=parseInt(n.width,10),this.canvasHeight=parseInt(n.height,10),s=this.canvasWidth,i=this.canvasHeight,e?(this.unitX=s/(t[2]-t[0]),this.unitY=i/(t[1]-t[3]),Math.abs(this.unitX)<Math.abs(this.unitY)?this.unitY=Math.abs(this.unitX)*this.unitY/Math.abs(this.unitY):this.unitX=Math.abs(this.unitY)*this.unitX/Math.abs(this.unitX),this.keepaspectratio=!0):(this.unitX=s/(t[2]-t[0]),this.unitY=i/(t[1]-t[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*t[0],this.unitY*t[1]),this):this},getBoundingBox:function(){var t=new i(e.COORDS_BY_SCREEN,[0,0],this),s=new i(e.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this);return[t.usrCoords[1],t.usrCoords[2],s.usrCoords[1],s.usrCoords[2]]},addAnimation:function(t){var e=this;return this.animationObjects[t.id]=t,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){e.animate()},t.board.attr.animationdelay)),this},stopAllAnimation:function(){var t;for(t in this.animationObjects)this.animationObjects.hasOwnProperty(t)&&u.exists(this.animationObjects[t])&&(this.animationObjects[t]=null,delete this.animationObjects[t]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var t,i,s,n,r,o,a,l,h=0,c=null;for(i in this.animationObjects)if(this.animationObjects.hasOwnProperty(i)&&u.exists(this.animationObjects[i])){if(h+=1,(s=this.animationObjects[i]).animationPath&&(n=u.isFunction(s.animationPath)?s.animationPath((new Date).getTime()-s.animationStart):s.animationPath.pop(),!u.exists(n)||!u.isArray(n)&&isNaN(n)?delete s.animationPath:(s.setPositionDirectly(e.COORDS_BY_USER,n),s.fullUpdate(),c=s)),s.animationData){for(r in a=0,s.animationData)s.animationData.hasOwnProperty(r)&&(o=s.animationData[r].pop(),u.exists(o)?(a+=1,(t={})[r]=o,s.setAttribute(t)):delete s.animationData[o]);0===a&&delete s.animationData}u.exists(s.animationData)||u.exists(s.animationPath)||(this.animationObjects[i]=null,delete this.animationObjects[i],u.exists(s.animationCallback)&&(l=s.animationCallback,s.animationCallback=null,l()))}return 0===h?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(c),this},migratePoint:function(t,e,i){var s,n,r,o,a,l,h=!1;for(n in t=this.select(t),e=this.select(e),u.exists(t.label)&&(l=t.label.id,h=!0,this.removeObject(t.label)),t.childElements)if(t.childElements.hasOwnProperty(n)){for(r in o=!1,s=t.childElements[n])s.hasOwnProperty(r)&&s[r]===t&&(s[r]=e,o=!0);for(o&&delete t.childElements[n],a=0;a<s.parents.length;a++)s.parents[a]===t.id&&(s.parents[a]=e.id);e.addChild(s)}return i&&(h&&(delete e.childElements[l],delete e.descendants[l]),e.label&&this.removeObject(e.label),delete this.elementsByName[e.name],e.name=t.name,h&&e.createLabel()),this.removeObject(t),u.exists(e.name)&&""!==e.name&&(this.elementsByName[e.name]=e),this.fullUpdate(),this},emulateColorblindness:function(e){var i,s;if(u.exists(e)||(e="none"),this.currentCBDef===e)return this;for(i in this.objects)this.objects.hasOwnProperty(i)&&(s=this.objects[i],"none"!==e?("none"===this.currentCBDef&&(s.visPropOriginal={strokecolor:s.visProp.strokecolor,fillcolor:s.visProp.fillcolor,highlightstrokecolor:s.visProp.highlightstrokecolor,highlightfillcolor:s.visProp.highlightfillcolor}),s.setAttribute({strokecolor:d.rgb2cb(u.evaluate(s.visPropOriginal.strokecolor),e),fillcolor:d.rgb2cb(u.evaluate(s.visPropOriginal.fillcolor),e),highlightstrokecolor:d.rgb2cb(u.evaluate(s.visPropOriginal.highlightstrokecolor),e),highlightfillcolor:d.rgb2cb(u.evaluate(s.visPropOriginal.highlightfillcolor),e)})):u.exists(s.visPropOriginal)&&t.extend(s.visProp,s.visPropOriginal));return this.currentCBDef=e,this.update(),this},select:function(t){var e,i,s,n,r=t;if(null===r)return r;if(u.isString(r)&&""!==r)u.exists(this.objects[r])?r=this.objects[r]:u.exists(this.elementsByName[r])?r=this.elementsByName[r]:u.exists(this.groups[r])&&(r=this.groups[r]);else if(u.isFunction(r)||u.isObject(r)&&!u.isFunction(r.setAttribute)){for(i={},n=(e=u.filterElements(this.objectsList,r)).length,s=0;s<n;s++)i[e[s].id]=e[s];r=new C(i)}else u.isObject(r)&&u.exists(r.id)&&!u.exists(this.objects[r.id])&&(r=null);return r},hasPoint:function(t,e){var i=t,s=e,n=this.getBoundingBox();return u.exists(t)&&u.isArray(t.usrCoords)&&(i=t.usrCoords[1],s=t.usrCoords[2]),!!(u.isNumber(i)&&u.isNumber(s)&&n[0]<i&&i<n[2]&&n[1]>s&&s>n[3])},updateCSSTransforms:function(){var t=this.containerObj,e=t,i=t;for(this.cssTransMat=f.getCSSTransformMatrix(e),e=e.offsetParent;e;){for(this.cssTransMat=r.matMatMult(f.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;i!==e;)this.cssTransMat=r.matMatMult(f.getCSSTransformMatrix(e),this.cssTransMat),i=i.parentNode;e=e.offsetParent}return this.cssTransMat=r.inverse(this.cssTransMat),this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(t){this.isSelecting=!0,this.selectingBox=[[t[0],t[1]],[t[0],t[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(t){this.isSelecting&&(this.selectingBox[1]=[t[0],t[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(t){var e=this.getMousePosition(t);this.isSelecting=!1,this.selectingBox[1]=[e[0],e[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var e=this.selectingBox[0],i=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(t.COORDS_BY_SCREEN,[e[0],e[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(t.COORDS_BY_SCREEN,[e[0],i[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(t.COORDS_BY_SCREEN,[i[0],i[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(t.COORDS_BY_SCREEN,[i[0],e[1]])},_testForSelection:function(t){this._isRequiredKeyPressed(t,"selection")&&(u.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(t){var e;return u.exists(this.selectionPolygon)||!0===(e=u.copyAttributes(t,s,"board","selection")).enabled&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],e)),this},__evt__down:function(t){},__evt__mousedown:function(t){},__evt__pointerdown:function(t){},__evt__touchstart:function(t){},__evt__up:function(t){},__evt__mouseup:function(t){},__evt__pointerup:function(t){},__evt__touchend:function(t){},__evt__move:function(t,e){},__evt__mousemove:function(t,e){},__evt__pointermove:function(t,e){},__evt__touchmove:function(t,e){},__evt__hit:function(t,e,i){},__evt__mousehit:function(t,e,i){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},createRoulette:function(t,e,i,s,r,o,l){var h=this;return new function(){var c,d=0,u=0,p=0,f=i,m=n.root(function(i){var s=t.X(f),n=t.Y(f),r=e.X(i),o=e.Y(i);return(s-r)*(s-r)+(n-o)*(n-o)},[0,2*Math.PI]),g=0,b=0,y=h.create("transform",[function(){return d}],{type:"rotate"}),v=h.create("transform",[function(){return d},function(){return t.X(f)},function(){return t.Y(f)}],{type:"rotate"}),C=h.create("transform",[function(){return u},function(){return p}],{type:"translate"}),x=function(t,e,i){var s=n.D(t.X)(e),r=n.D(t.Y)(e),o=n.D(t.X)(i),a=n.D(t.Y)(i),l=n.D(t.X)(.5*(e+i)),h=n.D(t.Y)(.5*(e+i)),c=Math.sqrt(s*s+r*r),d=Math.sqrt(o*o+a*a);return(c+4*Math.sqrt(l*l+h*h)+d)*(i-e)/6},_=function(t){return c-x(e,m,t)},P=Math.PI/18,S=9*P,w=null;return this.rolling=function(){var i,o,w,E,k;c=x(t,f,g=f+r*s),b=n.root(_,m),i=new a(t.X(g),t.Y(g)),o=new a(e.X(b),e.Y(b)),w=new a(n.D(t.X)(g),n.D(t.Y)(g)),E=new a(n.D(e.X)(b),n.D(e.Y)(b)),k=a.C.div(w,E),d=Math.atan2(k.imaginary,k.real),k.div(a.C.abs(k)),k.mult(o),u=i.real-k.real,p=i.imaginary-k.imaginary,d<-P&&d>-S?(d=-P,v.applyOnce(l)):d>P&&d<S?(d=P,v.applyOnce(l)):(y.applyOnce(l),C.applyOnce(l),f=g,m=b),h.update()},this.start=function(){return o>0&&(w=window.setInterval(this.rolling,o)),this},this.stop=function(){return window.clearInterval(w),this},this}}}),t.Board}),define("renderer/svg",["jxg","options","renderer/abstract","base/constants","utils/type","utils/env","utils/color","utils/base64","math/numerics"],function(t,e,i,s,n,r,o,a,l){"use strict";return t.SVGRenderer=function(t,i){var s;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.resize(i.width,i.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.filter=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter"),this.filter.setAttributeNS(null,"id",this.container.id+"_f1"),this.filter.setAttributeNS(null,"width","300%"),this.filter.setAttributeNS(null,"height","300%"),this.filter.setAttributeNS(null,"filterUnits","userSpaceOnUse"),this.feOffset=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset"),this.feOffset.setAttributeNS(null,"result","offOut"),this.feOffset.setAttributeNS(null,"in","SourceAlpha"),this.feOffset.setAttributeNS(null,"dx","5"),this.feOffset.setAttributeNS(null,"dy","5"),this.filter.appendChild(this.feOffset),this.feGaussianBlur=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur"),this.feGaussianBlur.setAttributeNS(null,"result","blurOut"),this.feGaussianBlur.setAttributeNS(null,"in","offOut"),this.feGaussianBlur.setAttributeNS(null,"stdDeviation","3"),this.filter.appendChild(this.feGaussianBlur),this.feBlend=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend"),this.feBlend.setAttributeNS(null,"in","SourceGraphic"),this.feBlend.setAttributeNS(null,"in2","blurOut"),this.feBlend.setAttributeNS(null,"mode","normal"),this.filter.appendChild(this.feBlend),this.defs.appendChild(this.filter),this.layer=[],s=0;s<e.layer.numlayers;s++)this.layer[s]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[s]);this.supportsForeignObject=document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility","1.1"),this.supportsForeignObject&&(this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.container.id+"_foreignObj"),this.svgRoot.appendChild(this.foreignObjLayer)),this.dashArray=["2, 2","5, 5","10, 10","20, 20","20, 10, 10, 10","20, 5, 10, 5"]},t.SVGRenderer.prototype=new i,t.extend(t.SVGRenderer.prototype,{_createArrowHead:function(e,i){var s,r,o=e.id+"Triangle",a=null,l=n.evaluate(e.visProp.firstarrow),h=n.evaluate(e.visProp.lastarrow);return n.exists(i)&&(o+=i),(s=this.createPrim("marker",o)).setAttributeNS(null,"stroke",n.evaluate(e.visProp.strokecolor)),s.setAttributeNS(null,"stroke-opacity",n.evaluate(e.visProp.strokeopacity)),s.setAttributeNS(null,"fill",n.evaluate(e.visProp.strokecolor)),s.setAttributeNS(null,"fill-opacity",n.evaluate(e.visProp.strokeopacity)),s.setAttributeNS(null,"stroke-width",0),s.setAttributeNS(null,"orient","auto"),s.setAttributeNS(null,"markerUnits","strokeWidth"),r=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),"End"===i?(t.exists(l.type)&&(a=n.evaluate(l.type)),s.setAttributeNS(null,"refY",5),2===a?(s.setAttributeNS(null,"refX",4.9),r.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z")):3===a?(s.setAttributeNS(null,"refX",3.33),r.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):(s.setAttributeNS(null,"refX",9.9),r.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"))):(t.exists(h.type)&&(a=n.evaluate(h.type)),s.setAttributeNS(null,"refY",5),2===a?(s.setAttributeNS(null,"refX",5.1),r.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z")):3===a?(s.setAttributeNS(null,"refX",.1),r.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):(s.setAttributeNS(null,"refX",.1),r.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"))),s.appendChild(r),s},_setArrowColor:function(t,e,i,s){t&&(n.isString(e)&&this._setAttribute(function(){t.setAttributeNS(null,"stroke",e),t.setAttributeNS(null,"fill",e),t.setAttributeNS(null,"stroke-opacity",i),t.setAttributeNS(null,"fill-opacity",i)},s.visPropOld.fillcolor),this.isIE&&s.rendNode.parentNode.insertBefore(s.rendNode,s.rendNode))},_setArrowWidth:function(t,e,i,s){var n,r;t&&(0===e?t.setAttributeNS(null,"display","none"):(r=(n=e)*s,t.setAttributeNS(null,"viewBox","0 0 "+10*n+" "+10*n),t.setAttributeNS(null,"markerHeight",r),t.setAttributeNS(null,"markerWidth",r),t.setAttributeNS(null,"display","inherit")),this.isIE&&i.parentNode.insertBefore(i,i))},updateTicks:function(t){var e,i,s,r,o,a="",l=t.ticks.length;for(e=0;e<l;e++)o=(i=t.ticks[e])[1],n.isNumber((r=i[0])[0])&&n.isNumber(r[1])&&(a+="M "+r[0]+" "+o[0]+" L "+r[1]+" "+o[1]+" ");n.exists(s=t.rendNode)||(s=this.createPrim("path",t.id),this.appendChildPrim(s,n.evaluate(t.visProp.layer)),t.rendNode=s),s.setAttributeNS(null,"stroke",n.evaluate(t.visProp.strokecolor)),s.setAttributeNS(null,"stroke-opacity",n.evaluate(t.visProp.strokeopacity)),s.setAttributeNS(null,"stroke-width",n.evaluate(t.visProp.strokewidth)),this.updatePathPrim(s,a,t.board)},displayCopyright:function(t,e){var i,s=this.createPrim("text","licenseText");s.setAttributeNS(null,"x","20px"),s.setAttributeNS(null,"y",2+e+"px"),s.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+e+"px; fill:#356AA0;  opacity:0.3;"),i=this.container.ownerDocument.createTextNode(t),s.appendChild(i),this.appendChildPrim(s,0)},drawInternalText:function(t){var e=this.createPrim("text",t.id);return e.style.whiteSpace="nowrap",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,n.evaluate(t.visProp.layer)),e},updateInternalText:function(t){var e,i=t.plaintext,s=t.getAnchorX(),r=t.getAnchorY();t.rendNode.getAttributeNS(null,"class")!==t.visProp.cssclass&&(t.rendNode.setAttributeNS(null,"class",n.evaluate(t.visProp.cssclass)),t.needsSizeUpdate=!0),isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])||(t.visPropOld.left!==s+(e=t.coords.scrCoords[1])&&(t.rendNode.setAttributeNS(null,"x",e+"px"),"left"===s?t.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===s?t.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===s&&t.rendNode.setAttributeNS(null,"text-anchor","middle"),t.visPropOld.left=s+e),t.visPropOld.top!==r+(e=t.coords.scrCoords[2])&&(t.rendNode.setAttributeNS(null,"y",e+.5*this.vOffsetText+"px"),"bottom"===r?t.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===r?t.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===r&&t.rendNode.setAttributeNS(null,"dy","0.6ex"),t.visPropOld.top=r+e)),t.htmlStr!==i&&(t.rendNodeText.data=i,t.htmlStr=i),this.transformImage(t,t.transformations)},updateInternalTextStyle:function(t,e,i,s){this.setObjectFillColor(t,e,i)},drawImage:function(t){var e=this.createPrim("image",t.id);e.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(e,n.evaluate(t.visProp.layer)),t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,s,n=t.rendNode,r="";e.length>0&&(i=[(s=this.joinTransforms(t,e))[1][1],s[2][1],s[1][2],s[2][2],s[1][0],s[2][0]].join(","),n.setAttributeNS(null,"transform",r+=" matrix("+i+") "))},updateImageURL:function(t){var e=n.evaluate(t.url);t.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",e)},updateImageStyle:function(t,e){var i=n.evaluate(e?t.visProp.highlightcssclass:t.visProp.cssclass);t.rendNode.setAttributeNS(null,"class",i)},appendChildPrim:function(t,i){return n.exists(i)?i>=e.layer.numlayers&&(i=e.layer.numlayers-1):i=0,this.layer[i].appendChild(t),t},createPrim:function(t,e){var i=this.container.ownerDocument.createElementNS(this.svgNamespace,t);return i.setAttributeNS(null,"id",this.container.id+"_"+e),i.style.position="absolute","path"===t&&(i.setAttributeNS(null,"stroke-linecap","round"),i.setAttributeNS(null,"stroke-linejoin","round")),i},remove:function(t){n.exists(t)&&n.exists(t.parentNode)&&t.parentNode.removeChild(t)},makeArrows:function(t){var e,i=n.evaluate(t.visProp.firstarrow),s=n.evaluate(t.visProp.lastarrow);t.visPropOld.firstarrow!==i||t.visPropOld.lastarrow!==s?(i?n.exists(e=t.rendNodeTriangleStart)?this.defs.appendChild(e):(e=this._createArrowHead(t,"End"),this.defs.appendChild(e),t.rendNodeTriangleStart=e,t.rendNode.setAttributeNS(null,"marker-start","url(#"+this.container.id+"_"+t.id+"TriangleEnd)")):n.exists(e=t.rendNodeTriangleStart)&&this.remove(e),s?n.exists(e=t.rendNodeTriangleEnd)?this.defs.appendChild(e):(e=this._createArrowHead(t,"Start"),this.defs.appendChild(e),t.rendNodeTriangleEnd=e,t.rendNode.setAttributeNS(null,"marker-end","url(#"+this.container.id+"_"+t.id+"TriangleStart)")):n.exists(e=t.rendNodeTriangleEnd)&&this.remove(e),t.visPropOld.firstarrow=i,t.visPropOld.lastarrow=s):this.isIE&&t.visPropCalc.visible&&(i||s)&&t.rendNode.parentNode.insertBefore(t.rendNode,t.rendNode)},updateEllipsePrim:function(t,e,i,s,n){var r;r=2e5,e=Math.abs(e)<r?e:r*e/Math.abs(e),i=Math.abs(i)<r?i:r*i/Math.abs(i),s=Math.abs(s)<r?s:r*s/Math.abs(s),n=Math.abs(n)<r?n:r*n/Math.abs(n),t.setAttributeNS(null,"cx",e),t.setAttributeNS(null,"cy",i),t.setAttributeNS(null,"rx",Math.abs(s)),t.setAttributeNS(null,"ry",Math.abs(n))},updateLinePrim:function(t,e,i,s,n){var r;r=2e5,isNaN(e+i+s+n)||(e=Math.abs(e)<r?e:r*e/Math.abs(e),i=Math.abs(i)<r?i:r*i/Math.abs(i),s=Math.abs(s)<r?s:r*s/Math.abs(s),n=Math.abs(n)<r?n:r*n/Math.abs(n),t.setAttributeNS(null,"x1",e),t.setAttributeNS(null,"y1",i),t.setAttributeNS(null,"x2",s),t.setAttributeNS(null,"y2",n))},updatePathPrim:function(t,e){""===e&&(e="M 0 0"),t.setAttributeNS(null,"d",e)},updatePathStringPoint:function(t,e,i){var s="",n=t.coords.scrCoords,r=e*Math.sqrt(3)*.5,o=.5*e;return"x"===i?s=" M "+(n[1]-e)+" "+(n[2]-e)+" L "+(n[1]+e)+" "+(n[2]+e)+" M "+(n[1]+e)+" "+(n[2]-e)+" L "+(n[1]-e)+" "+(n[2]+e):"+"===i?s=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+e)+" "+n[2]+" M "+n[1]+" "+(n[2]-e)+" L "+n[1]+" "+(n[2]+e):"<>"===i?s=" M "+(n[1]-e)+" "+n[2]+" L "+n[1]+" "+(n[2]+e)+" L "+(n[1]+e)+" "+n[2]+" L "+n[1]+" "+(n[2]-e)+" Z ":"^"===i?s=" M "+n[1]+" "+(n[2]-e)+" L "+(n[1]-r)+" "+(n[2]+o)+" L "+(n[1]+r)+" "+(n[2]+o)+" Z ":"v"===i?s=" M "+n[1]+" "+(n[2]+e)+" L "+(n[1]-r)+" "+(n[2]-o)+" L "+(n[1]+r)+" "+(n[2]-o)+" Z ":">"===i?s=" M "+(n[1]+e)+" "+n[2]+" L "+(n[1]-o)+" "+(n[2]-r)+" L "+(n[1]-o)+" "+(n[2]+r)+" Z ":"<"===i&&(s=" M "+(n[1]-e)+" "+n[2]+" L "+(n[1]+o)+" "+(n[2]-r)+" L "+(n[1]+o)+" "+(n[2]+r)+" Z "),s},updatePathStringPrim:function(t){var e,i,s,n=" M ",r="";if(t.numberPoints<=0)return"";if(s=Math.min(t.points.length,t.numberPoints),1===t.bezierDegree)for(e=0;e<s;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?n=" M ":(i[1]=Math.max(Math.min(i[1],5e3),-5e3),i[2]=Math.max(Math.min(i[2],5e3),-5e3),r+=n+i[1]+" "+i[2],n=" L ");else if(3===t.bezierDegree)for(e=0;e<s;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?n=" M ":(r+=n+i[1]+" "+i[2]," C "===n&&(r+=" "+(i=t.points[e+=1].scrCoords)[1]+" "+i[2],r+=" "+(i=t.points[e+=1].scrCoords)[1]+" "+i[2]),n=" C "),e+=1;return r},updatePathStringBezierPrim:function(t){var e,i,s,r,o,a,h,c=" M ",d="",u=n.evaluate(t.visProp.strokewidth),p="plot"!==n.evaluate(t.visProp.curvetype);if(t.numberPoints<=0)return"";for(p&&t.board.options.curve.RDPsmoothing&&(t.points=l.RamerDouglasPeucker(t.points,.5)),h=Math.min(t.points.length,t.numberPoints),i=1;i<3;i++)for(c=" M ",e=0;e<h;e++)r=t.points[e].scrCoords,isNaN(r[1])||isNaN(r[2])?c=" M ":(r[1]=Math.max(Math.min(r[1],5e3),-5e3),r[2]=Math.max(Math.min(r[2],5e3),-5e3),d+=" M "===c?c+r[1]+" "+r[2]:[c,o+.333*(r[1]-o)+u*((s=2*i)*Math.random()-i)," ",a+.333*(r[2]-a)+u*(s*Math.random()-i)," ",o+.666*(r[1]-o)+u*(s*Math.random()-i)," ",a+.666*(r[2]-a)+u*(s*Math.random()-i)," ",r[1]," ",r[2]].join(""),c=" C ",o=r[1],a=r[2]);return d},updatePolygonPrim:function(t,e){var i,s,n="",r=e.vertices.length;for(t.setAttributeNS(null,"stroke","none"),i=0;i<r-1;i++){if(!e.vertices[i].isReal)return void t.setAttributeNS(null,"points","");n=n+(s=e.vertices[i].coords.scrCoords)[1]+","+s[2],i<r-2&&(n+=" ")}-1===n.indexOf("NaN")&&t.setAttributeNS(null,"points",n)},updateRectPrim:function(t,e,i,s,n){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",i),t.setAttributeNS(null,"width",s),t.setAttributeNS(null,"height",n)},setPropertyPrim:function(t,e,i){"stroked"!==e&&t.setAttributeNS(null,e,i)},display:function(t,e){var i;t&&t.rendNode&&(t.visPropOld.visible=e,i=t.rendNode,e?(i.setAttributeNS(null,"display","inline"),i.style.visibility="inherit"):(i.setAttributeNS(null,"display","none"),i.style.visibility="hidden"))},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(e,!0)},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(e,!1)},setBuffering:function(t,e){t.rendNode.setAttribute("buffered-rendering",e)},setDashStyle:function(t){var e=n.evaluate(t.visProp.dash),i=t.rendNode;e>0?i.setAttributeNS(null,"stroke-dasharray",this.dashArray[e-1]):i.hasAttributeNS(null,"stroke-dasharray")&&i.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(t){var e,i,s,r,o,a=t.rendNode,l=n.evaluate(t.visProp.gradient);i=(i=n.evaluate(t.visProp.fillopacity))>0?i:0,e=n.evaluate(t.visProp.fillcolor),"linear"===l?((s=this.createPrim("linearGradient",t.id+"_gradient")).setAttributeNS(null,"x1","0%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y1","0%"),s.setAttributeNS(null,"y2","0%"),(r=this.createPrim("stop",t.id+"_gradient1")).setAttributeNS(null,"offset","0%"),r.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i),(o=this.createPrim("stop",t.id+"_gradient2")).setAttributeNS(null,"offset","100%"),o.setAttributeNS(null,"style","stop-color:"+n.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+n.evaluate(t.visProp.gradientsecondopacity)),s.appendChild(r),s.appendChild(o),this.defs.appendChild(s),a.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+t.id+"_gradient)"),t.gradNode1=r,t.gradNode2=o):"radial"===l?((s=this.createPrim("radialGradient",t.id+"_gradient")).setAttributeNS(null,"cx","50%"),s.setAttributeNS(null,"cy","50%"),s.setAttributeNS(null,"r","50%"),s.setAttributeNS(null,"fx",100*n.evaluate(t.visProp.gradientpositionx)+"%"),s.setAttributeNS(null,"fy",100*n.evaluate(t.visProp.gradientpositiony)+"%"),(r=this.createPrim("stop",t.id+"_gradient1")).setAttributeNS(null,"offset","0%"),r.setAttributeNS(null,"style","stop-color:"+n.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+n.evaluate(t.visProp.gradientsecondopacity)),(o=this.createPrim("stop",t.id+"_gradient2")).setAttributeNS(null,"offset","100%"),o.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i),s.appendChild(r),s.appendChild(o),this.defs.appendChild(s),a.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+t.id+"_gradient)"),t.gradNode1=r,t.gradNode2=o):a.removeAttributeNS(null,"style")},updateGradient:function(t){var e,i,s=t.gradNode1,r=t.gradNode2,o=n.evaluate(t.visProp.gradient);n.exists(s)&&n.exists(r)&&(i=(i=n.evaluate(t.visProp.fillopacity))>0?i:0,e=n.evaluate(t.visProp.fillcolor),"linear"===o?(s.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i),r.setAttributeNS(null,"style","stop-color:"+n.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+n.evaluate(t.visProp.gradientsecondopacity))):"radial"===o&&(s.setAttributeNS(null,"style","stop-color:"+n.evaluate(t.visProp.gradientsecondcolor)+";stop-opacity:"+n.evaluate(t.visProp.gradientsecondopacity)),r.setAttributeNS(null,"style","stop-color:"+e+";stop-opacity:"+i)))},setObjectTransition:function(t,e){var i,r,o,a=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===e&&(e=n.evaluate(t.visProp.transitionduration)),e!==t.visPropOld.transitionduration){for(i=t.elementClass===s.OBJECT_CLASS_TEXT&&"html"===n.evaluate(t.visProp.display)?" color "+e+"ms, opacity "+e+"ms":" fill "+e+"ms, fill-opacity "+e+"ms, stroke "+e+"ms, stroke-opacity "+e+"ms",o=a.length,r=0;r<o;++r)t[a[r]]&&(t[a[r]].style.transition=i);t.visPropOld.transitionduration=e}},_setAttribute:function(t,e){""===e?t():setTimeout(t,1)},setObjectFillColor:function(e,i,s,r){var a,l,h,c,d=n.evaluate(i),u=n.evaluate(s);u=u>0?u:0,e.visPropOld.fillcolor===d&&e.visPropOld.fillopacity===u||(n.exists(d)&&!1!==d&&(9!==d.length?(l=d,c=u):(h=o.rgba2rgbo(d),l=h[0],c=u*h[1]),a=void 0===r?e.rendNode:r,"none"!==l&&this._setAttribute(function(){a.setAttributeNS(null,"fill",l)},e.visPropOld.fillcolor),e.type===t.OBJECT_TYPE_IMAGE?this._setAttribute(function(){a.setAttributeNS(null,"opacity",c)},e.visPropOld.fillopacity):("none"===l&&(c=0),this._setAttribute(function(){a.setAttributeNS(null,"fill-opacity",c)},e.visPropOld.fillopacity)),n.exists(e.visProp.gradient)&&this.updateGradient(e)),e.visPropOld.fillcolor=d,e.visPropOld.fillopacity=u)},setObjectStrokeColor:function(t,e,i){var r,a,l,h,c=n.evaluate(e),d=n.evaluate(i);d=d>0?d:0,t.visPropOld.strokecolor===c&&t.visPropOld.strokeopacity===d||(n.exists(c)&&!1!==c&&(9!==c.length?(r=c,l=d):(a=o.rgba2rgbo(c),r=a[0],l=d*a[1]),h=t.rendNode,t.elementClass===s.OBJECT_CLASS_TEXT?"html"===n.evaluate(t.visProp.display)?this._setAttribute(function(){h.style.color=r,h.style.opacity=l},t.visPropOld.strokecolor):this._setAttribute(function(){h.setAttributeNS(null,"style","fill:"+r),h.setAttributeNS(null,"style","fill-opacity:"+l)},t.visPropOld.strokecolor):this._setAttribute(function(){h.setAttributeNS(null,"stroke",r),h.setAttributeNS(null,"stroke-opacity",l)},t.visPropOld.strokecolor),t.elementClass!==s.OBJECT_CLASS_CURVE&&t.elementClass!==s.OBJECT_CLASS_LINE||(n.evaluate(t.visProp.firstarrow)&&this._setArrowColor(t.rendNodeTriangleStart,r,l,t),n.evaluate(t.visProp.lastarrow)&&this._setArrowColor(t.rendNodeTriangleEnd,r,l,t))),t.visPropOld.strokecolor=c,t.visPropOld.strokeopacity=d)},setObjectStrokeWidth:function(t,e){var i,s=n.evaluate(e);isNaN(s)||t.visPropOld.strokewidth===s||(this.setPropertyPrim(i=t.rendNode,"stroked","true"),n.exists(s)&&this.setPropertyPrim(i,"stroke-width",s+"px"),t.visPropOld.strokewidth=s)},setLineCap:function(t){var e=n.evaluate(t.visProp.linecap);void 0!==e&&""!==e&&t.visPropOld.linecap!==e&&n.exists(t.rendNode)&&(this.setPropertyPrim(t.rendNode,"stroke-linecap",e),t.visPropOld.linecap=e)},setShadow:function(t){var e=n.evaluate(t.visProp.shadow);t.visPropOld.shadow!==e&&(n.exists(t.rendNode)&&(e?t.rendNode.setAttributeNS(null,"filter","url(#"+this.container.id+"_f1)"):t.rendNode.removeAttributeNS(null,"filter")),t.visPropOld.shadow=e)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(t,e){this.svgRoot.style.width=parseFloat(t)+"px",this.svgRoot.style.height=parseFloat(e)+"px",this.svgRoot.setAttribute("width",parseFloat(t)),this.svgRoot.setAttribute("height",parseFloat(e))},createTouchpoints:function(t){var e,i;for(this.touchpoints=[],e=0;e<t;e++)i=this.createPrim("path","touchpoint1_"+e),this.appendChildPrim(i,19),i.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(i),this.setPropertyPrim(i,"stroked","true"),this.setPropertyPrim(i,"stroke-width","1px"),i.setAttributeNS(null,"stroke","#000000"),i.setAttributeNS(null,"stroke-opacity",1),i.setAttributeNS(null,"display","none"),i=this.createPrim("ellipse","touchpoint2_"+e),this.appendChildPrim(i,19),this.updateEllipsePrim(i,0,0,0,0),this.touchpoints.push(i),this.setPropertyPrim(i,"stroked","true"),this.setPropertyPrim(i,"stroke-width","1px"),i.setAttributeNS(null,"stroke","#000000"),i.setAttributeNS(null,"stroke-opacity",1),i.setAttributeNS(null,"fill","#ffffff"),i.setAttributeNS(null,"fill-opacity",0),i.setAttributeNS(null,"display","none")},showTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","inline"),this.touchpoints[2*t+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(t){this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"display","none"),this.touchpoints[2*t+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(t,e){var i,s;this.touchpoints&&t>=0&&2*t<this.touchpoints.length&&(this.touchpoints[2*t].setAttributeNS(null,"d","M "+((i=e[0])-37)+" "+(s=e[1])+" L "+(i+37)+" "+s+" M "+i+" "+(s-37)+" L "+i+" "+(s+37)),this.updateEllipsePrim(this.touchpoints[2*t+1],e[0],e[1],25,25))},dumpToCanvas:function(t,e,i,s){var r,o,l,h,c,d,u=this.svgRoot,p=window.btoa||a.encode;if(this.container.hasChildNodes()&&n.exists(this.foreignObjLayer)){for(;u.nextSibling;)this.foreignObjLayer.appendChild(u.nextSibling);!0===s&&this.container.ownerDocument.createElement("div").appendChild(this.foreignObjLayer)}if(u.setAttribute("xmlns","http://www.w3.org/2000/svg"),c=u.getAttribute("width"),d=u.getAttribute("height"),((r=(new XMLSerializer).serializeToString(u)).match(/xmlns=\"http:\/\/www.w3.org\/2000\/svg\"/g)||[]).length>1&&(r=r.replace(/xmlns=\"http:\/\/www.w3.org\/2000\/svg\"/g,"")),r=r.replace(/&nbsp;/g," "),(l=document.getElementById(t)).width=l.width,h=l.getContext("2d"),void 0!==e&&void 0!==i&&(l.style.width=parseFloat(e)+"px",l.style.height=parseFloat(i)+"px",l.setAttribute("width",2*parseFloat(c)),l.setAttribute("height",2*parseFloat(d)),h.scale(2*c/e,2*d/i)),(o=new Image).src="data:image/svg+xml;base64,"+p(unescape(encodeURIComponent(r))),o.onload=function(){setTimeout(function(){h.drawImage(o,0,0,e,i)},200)},n.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes())for(!0===s&&u.appendChild(this.foreignObjLayer);this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);return this},screenshot:function(t,e,i){var s,r,o,a,l,h,c,d,u,p,f,m=this.container.ownerDocument,g=this.container.parentNode,b=t.attr.screenshot,y=!1;return"no"===this.type?this:(d=b.scale*parseFloat(this.container.style.width),u=b.scale*parseFloat(this.container.style.height),void 0===e||""===e?(y=!0,(l=new Image).style.width=d+"px",l.style.height=u+"px"):(y=!1,l=m.getElementById(e)),y&&((s=m.createElement("div")).style.cssText=b.css,s.style.width=d+"px",s.style.height=u+"px",s.style.zIndex=this.container.style.zIndex+120,r=t.getCoordsTopLeftCorner(),s.style.position="absolute",s.style.left=r[0]+"px",s.style.top=r[1]+"px"),o=m.createElement("canvas"),a=Math.random().toString(36).substr(2,5),o.setAttribute("id",a),o.setAttribute("width",d),o.setAttribute("height",u),o.style.width=d+"px",o.style.height=d+"px",o.style.display="none",g.append(o),y&&(h=m.createElement("span"),c=m.createTextNode("\u2716"),h.style.cssText=b.cssButton,h.appendChild(c),h.onclick=function(){s.parentNode.removeChild(s)},s.appendChild(l),s.appendChild(h),g.appendChild(s)),p=document.getElementById(this.container.id+"_navigationbar"),n.exists(p)&&(f=p.style.display,p.style.display="none"),this.dumpToCanvas(a,d,u,i),setTimeout(function(){l.src=o.toDataURL("image/png"),g.removeChild(o)},400),n.exists(p)&&(p.style.display=f),this)}}),t.SVGRenderer}),define("renderer/vml",["jxg","renderer/abstract","base/constants","utils/type","utils/color","math/math","math/numerics"],function(t,e,i,s,n,r,o){"use strict";return t.VMLRenderer=function(e){this.type="vml",this.container=e,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,s.exists(t.vmlStylesheet)||(e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),t.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),t.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{e.ownerDocument.namespaces.jxgvml||e.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(t){return e.ownerDocument.createElement("<jxgvml:"+t+' class="jxgvml">')}}catch(t){this.createNode=function(t){return e.ownerDocument.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},t.VMLRenderer.prototype=new e,t.extend(t.VMLRenderer.prototype,{_setAttr:function(e,i,s,n){try{8===this.container.ownerDocument.documentMode?e[i]=s:e.setAttribute(i,s,n)}catch(e){t.debug("_setAttr: "+i+" "+s+"<br>\n")}},updateTicks:function(t){var e,i,n,r,o,a=this.resolution,l=[];for(i=t.ticks.length,e=0;e<i;e++)o=(n=t.ticks[e])[1],s.isNumber((r=n[0])[0])&&s.isNumber(r[1])&&l.push(" m "+Math.round(a*r[0])+", "+Math.round(a*o[0])+" l "+Math.round(a*r[1])+", "+Math.round(a*o[1])+" ");s.exists(t.rendNode)||(t.rendNode=this.createPrim("path",t.id),this.appendChildPrim(t.rendNode,s.evaluate(t.visProp.layer))),this._setAttr(t.rendNode,"stroked","true"),this._setAttr(t.rendNode,"strokecolor",s.evaluate(t.visProp.strokecolor),1),this._setAttr(t.rendNode,"strokeweight",s.evaluate(t.visProp.strokewidth)),this._setAttr(t.rendNodeStroke,"opacity",100*s.evaluate(t.visProp.strokeopacity)+"%"),this.updatePathPrim(t.rendNode,l,t.board)},displayCopyright:function(t,e){var i,s;(i=this.createNode("textbox")).style.position="absolute",this._setAttr(i,"id",this.container.id+"_licenseText"),i.style.left=20,i.style.top=2,i.style.fontSize=e,i.style.color="#356AA0",i.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(i,"opacity","30%"),i.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",s=this.container.ownerDocument.createTextNode(t),i.appendChild(s),this.appendChildPrim(i,0)},drawInternalText:function(t){var e;return(e=this.createNode("textbox")).style.position="absolute",t.rendNodeText=this.container.ownerDocument.createTextNode(""),e.appendChild(t.rendNodeText),this.appendChildPrim(e,9),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",e},updateInternalText:function(t){var e,i,s,n,o,a,l=t.plaintext,h=this.joinTransforms(t,t.transformations),c=[0,0],d=t.rendNode,u=[],p=t.getAnchorX(),f=t.getAnchorY();if(!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])){for("right"===p?c[0]=1:"middle"===p&&(c[0]=.5),"bottom"===f?c[1]=1:"middle"===f&&(c[1]=.5),u[0]=r.matVecMult(h,[1,t.coords.scrCoords[1]-c[0]*t.size[0],t.coords.scrCoords[2]+(1-c[1])*t.size[1]+this.vOffsetText]),u[0][1]/=u[0][0],u[0][2]/=u[0][0],u[1]=r.matVecMult(h,[1,t.coords.scrCoords[1]+(1-c[0])*t.size[0],t.coords.scrCoords[2]+(1-c[1])*t.size[1]+this.vOffsetText]),u[1][1]/=u[1][0],u[1][2]/=u[1][0],u[2]=r.matVecMult(h,[1,t.coords.scrCoords[1]+(1-c[0])*t.size[0],t.coords.scrCoords[2]-c[1]*t.size[1]+this.vOffsetText]),u[2][1]/=u[2][0],u[2][2]/=u[2][0],u[3]=r.matVecMult(h,[1,t.coords.scrCoords[1]-c[0]*t.size[0],t.coords.scrCoords[2]-c[1]*t.size[1]+this.vOffsetText]),u[3][1]/=u[3][0],u[3][2]/=u[3][0],i=u[0][1],n=u[0][1],s=u[0][2],o=u[0][2],a=1;a<4;a++)i=Math.max(i,u[a][1]),n=Math.min(n,u[a][1]),s=Math.max(s,u[a][2]),o=Math.min(o,u[a][2]);e=1===c[0]?Math.floor(t.board.canvasWidth-i):Math.floor(n),t.visPropOld.left!==p+e&&(1===c[0]?(t.rendNode.style.right=e+"px",t.rendNode.style.left="auto"):(t.rendNode.style.left=e+"px",t.rendNode.style.right="auto"),t.visPropOld.left=p+e),e=1===c[1]?Math.floor(t.board.canvasHeight-s):Math.floor(o),t.visPropOld.top!==f+e&&(1===c[1]?(t.rendNode.style.bottom=e+"px",t.rendNode.style.top="auto"):(t.rendNode.style.top=e+"px",t.rendNode.style.bottom="auto"),t.visPropOld.top=f+e)}t.htmlStr!==l&&(t.rendNodeText.data=l,t.htmlStr=l),d.filters.item(0).M11=h[1][1],d.filters.item(0).M12=h[1][2],d.filters.item(0).M21=h[2][1],d.filters.item(0).M22=h[2][2],d.filters.item(0).enabled=!0},drawImage:function(t){var e;(e=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(e,"id",this.container.id+"_"+t.id),this.container.appendChild(e),this.appendChildPrim(e,s.evaluate(t.visProp.layer)),e.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",t.rendNode=e,this.updateImage(t)},transformImage:function(t,e){var i,s,n,o,a,l,h=t.rendNode,c=[];if(e.length>0){for(i=this.joinTransforms(t,e),c[0]=r.matVecMult(i,t.coords.scrCoords),c[0][1]/=c[0][0],c[0][2]/=c[0][0],c[1]=r.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]]),c[1][1]/=c[1][0],c[1][2]/=c[1][0],c[2]=r.matVecMult(i,[1,t.coords.scrCoords[1]+t.size[0],t.coords.scrCoords[2]-t.size[1]]),c[2][1]/=c[2][0],c[2][2]/=c[2][0],c[3]=r.matVecMult(i,[1,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1]]),c[3][1]/=c[3][0],c[3][2]/=c[3][0],s=c[0][1],o=c[0][1],n=c[0][2],a=c[0][2],l=1;l<4;l++)s=Math.max(s,c[l][1]),o=Math.min(o,c[l][1]),n=Math.max(n,c[l][2]),a=Math.min(a,c[l][2]);h.style.left=Math.floor(o)+"px",h.style.top=Math.floor(a)+"px",h.filters.item(0).M11=i[1][1],h.filters.item(0).M12=i[1][2],h.filters.item(0).M21=i[2][1],h.filters.item(0).M22=i[2][2],h.filters.item(0).enabled=!0}},updateImageURL:function(t){var e=s.evaluate(t.url);this._setAttr(t.rendNode,"src",e)},appendChildPrim:function(t,e){return s.exists(e)||(e=0),t.style.zIndex=e,this.container.appendChild(t),t},appendNodesToElement:function(t,e){"shape"!==e&&"path"!==e&&"polygon"!==e||(t.rendNodePath=this.getElementById(t.id+"_path")),t.rendNodeFill=this.getElementById(t.id+"_fill"),t.rendNodeStroke=this.getElementById(t.id+"_stroke"),t.rendNodeShadow=this.getElementById(t.id+"_shadow"),t.rendNode=this.getElementById(t.id)},createPrim:function(t,e){var i,s,n=this.createNode("fill"),r=this.createNode("stroke"),o=this.createNode("shadow");return this._setAttr(n,"id",this.container.id+"_"+e+"_fill"),this._setAttr(r,"id",this.container.id+"_"+e+"_stroke"),this._setAttr(o,"id",this.container.id+"_"+e+"_shadow"),"circle"===t||"ellipse"===t?((i=this.createNode("oval")).appendChild(n),i.appendChild(r),i.appendChild(o)):"polygon"===t||"path"===t||"shape"===t||"line"===t?((i=this.createNode("shape")).appendChild(n),i.appendChild(r),i.appendChild(o),s=this.createNode("path"),this._setAttr(s,"id",this.container.id+"_"+e+"_path"),i.appendChild(s)):((i=this.createNode(t)).appendChild(n),i.appendChild(r),i.appendChild(o)),i.style.position="absolute",i.style.left="0px",i.style.top="0px",this._setAttr(i,"id",this.container.id+"_"+e),i},remove:function(t){s.exists(t)&&t.removeNode(!0)},makeArrows:function(t){var e,i=s.evaluate(t.visProp.firstarrow),n=s.evaluate(t.visProp.lastarrow);t.visPropOld.firstarrow===i&&t.visPropOld.lastarrow===n||(i?(this._setAttr(e=t.rendNodeStroke,"startarrow","block"),this._setAttr(e,"startarrowlength","long")):s.exists(e=t.rendNodeStroke)&&this._setAttr(e,"startarrow","none"),n?(this._setAttr(e=t.rendNodeStroke,"id",this.container.id+"_"+t.id+"stroke"),this._setAttr(e,"endarrow","block"),this._setAttr(e,"endarrowlength","long")):s.exists(e=t.rendNodeStroke)&&this._setAttr(e,"endarrow","none"),t.visPropOld.firstarrow=i,t.visPropOld.lastarrow=n)},updateEllipsePrim:function(t,e,i,s,n){t.style.left=Math.floor(e-s)+"px",t.style.top=Math.floor(i-n)+"px",t.style.width=Math.floor(2*Math.abs(s))+"px",t.style.height=Math.floor(2*Math.abs(n))+"px"},updateLinePrim:function(t,e,i,s,n,r){var o,a=this.resolution;isNaN(e+i+s+n)||(o=["m ",Math.floor(a*e),", ",Math.floor(a*i)," l ",Math.floor(a*s),", ",Math.floor(a*n)],this.updatePathPrim(t,o,r))},updatePathPrim:function(t,e,i){var s=i.canvasWidth,n=i.canvasHeight;e.length<=0&&(e=["m 0,0"]),t.style.width=s,t.style.height=n,this._setAttr(t,"coordsize",[Math.floor(this.resolution*s),Math.floor(this.resolution*n)].join(",")),this._setAttr(t,"path",e.join(""))},updatePathStringPoint:function(t,e,i){var s=[],n=Math.round,r=t.coords.scrCoords,o=e*Math.sqrt(3)*.5,a=.5*e,l=this.resolution;return"x"===i?s.push([" m ",n(l*(r[1]-e)),", ",n(l*(r[2]-e))," l ",n(l*(r[1]+e)),", ",n(l*(r[2]+e))," m ",n(l*(r[1]+e)),", ",n(l*(r[2]-e))," l ",n(l*(r[1]-e)),", ",n(l*(r[2]+e))].join("")):"+"===i?s.push([" m ",n(l*(r[1]-e)),", ",n(l*r[2])," l ",n(l*(r[1]+e)),", ",n(l*r[2])," m ",n(l*r[1]),", ",n(l*(r[2]-e))," l ",n(l*r[1]),", ",n(l*(r[2]+e))].join("")):"<>"===i?s.push([" m ",n(l*(r[1]-e)),", ",n(l*r[2])," l ",n(l*r[1]),", ",n(l*(r[2]+e))," l ",n(l*(r[1]+e)),", ",n(l*r[2])," l ",n(l*r[1]),", ",n(l*(r[2]-e))," x e "].join("")):"^"===i?s.push([" m ",n(l*r[1]),", ",n(l*(r[2]-e))," l ",n(l*(r[1]-o)),", ",n(l*(r[2]+a))," l ",n(l*(r[1]+o)),", ",n(l*(r[2]+a))," x e "].join("")):"v"===i?s.push([" m ",n(l*r[1]),", ",n(l*(r[2]+e))," l ",n(l*(r[1]-o)),", ",n(l*(r[2]-a))," l ",n(l*(r[1]+o)),", ",n(l*(r[2]-a))," x e "].join("")):">"===i?s.push([" m ",n(l*(r[1]+e)),", ",n(l*r[2])," l ",n(l*(r[1]-a)),", ",n(l*(r[2]-o))," l ",n(l*(r[1]-a)),", ",n(l*(r[2]+o))," l ",n(l*(r[1]+e)),", ",n(l*r[2])].join("")):"<"===i&&s.push([" m ",n(l*(r[1]-e)),", ",n(l*r[2])," l ",n(l*(r[1]+a)),", ",n(l*(r[2]-o))," l ",n(l*(r[1]+a)),", ",n(l*(r[2]+o))," x e "].join("")),s},updatePathStringPrim:function(t){var e,i,s=[],n=this.resolution,r=Math.round,o=" m ",a=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";if(a=Math.min(a,t.points.length),1===t.bezierDegree)for(e=0;e<a;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o=" m ":(i[1]>2e4?i[1]=2e4:i[1]<-2e4&&(i[1]=-2e4),i[2]>2e4?i[2]=2e4:i[2]<-2e4&&(i[2]=-2e4),s.push([o,r(n*i[1]),", ",r(n*i[2])].join("")),o=" l ");else if(3===t.bezierDegree)for(e=0;e<a;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o=" m ":(s.push([o,r(n*i[1]),", ",r(n*i[2])].join(""))," c "===o&&(s.push([" ",r(n*(i=t.points[e+=1].scrCoords)[1]),", ",r(n*i[2])].join("")),s.push([" ",r(n*(i=t.points[e+=1].scrCoords)[1]),", ",r(n*i[2])].join(""))),o=" c "),e+=1;return s.push(" e"),s},updatePathStringBezierPrim:function(t){var e,i,n,r,a,l,h=[],c=s.evaluate(t.visProp.strokewidth),d=this.resolution,u=Math.round,p=" m ",f="plot"!==s.evaluate(t.visProp.curvetype),m=Math.min(t.numberPoints,8192);if(t.numberPoints<=0)return"";for(f&&t.board.options.curve.RDPsmoothing&&(t.points=o.RamerDouglasPeucker(t.points,1)),m=Math.min(m,t.points.length),i=1;i<3;i++)for(p=" m ",e=0;e<m;e++)r=t.points[e].scrCoords,isNaN(r[1])||isNaN(r[2])?p=" m ":(r[1]>2e4?r[1]=2e4:r[1]<-2e4&&(r[1]=-2e4),r[2]>2e4?r[2]=2e4:r[2]<-2e4&&(r[2]=-2e4),h.push(" m "===p?[p,u(d*r[1])," ",u(d*r[2])].join(""):[p,u(d*(a+.333*(r[1]-a)+c*((n=2*i)*Math.random()-i)))," ",u(d*(l+.333*(r[2]-l)+c*(n*Math.random()-i)))," ",u(d*(a+.666*(r[1]-a)+c*(n*Math.random()-i)))," ",u(d*(l+.666*(r[2]-l)+c*(n*Math.random()-i)))," ",u(d*r[1])," ",u(d*r[2])].join("")),p=" c ",a=r[1],l=r[2]);return h.push(" e"),h},updatePolygonPrim:function(t,e){var i,s,n=e.vertices.length,r=this.resolution,o=[];if(this._setAttr(t,"stroked","false"),s=e.vertices[0].coords.scrCoords,!isNaN(s[1]+s[2])){for(o.push(["m ",Math.floor(r*s[1]),",",Math.floor(r*s[2])," l "].join("")),i=1;i<n-1;i++){if(!e.vertices[i].isReal)return void this.updatePathPrim(t,"",e.board);if(s=e.vertices[i].coords.scrCoords,isNaN(s[1]+s[2]))return;o.push(Math.floor(r*s[1])+","+Math.floor(r*s[2])),i<n-2&&o.push(", ")}o.push(" x e"),this.updatePathPrim(t,o,e.board)}},updateRectPrim:function(t,e,i,s,n){t.style.left=Math.floor(e)+"px",t.style.top=Math.floor(i)+"px",s>=0&&(t.style.width=s+"px"),n>=0&&(t.style.height=n+"px")},setPropertyPrim:function(t,e,i){var n,r="";switch(e){case"stroke":r="strokecolor";break;case"stroke-width":r="strokeweight";break;case"stroke-dasharray":r="dashstyle"}""!==r&&(n=s.evaluate(i),this._setAttr(t,r,n))},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="inherit")},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),e&&e.rendNode&&(e.rendNode.style.visibility="hidden")},setDashStyle:function(t,e){e.dash>=0&&this._setAttr(t.rendNodeStroke,"dashstyle",this.dashArray[e.dash])},setGradient:function(t){var e=t.rendNodeFill,i=s.evaluate(t.visProp.gradient);"linear"===i?(this._setAttr(e,"type","gradient"),this._setAttr(e,"color2",s.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",s.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"angle",s.evaluate(t.visProp.gradientangle))):"radial"===i?(this._setAttr(e,"type","gradientradial"),this._setAttr(e,"color2",s.evaluate(t.visProp.gradientsecondcolor)),this._setAttr(e,"opacity2",s.evaluate(t.visProp.gradientsecondopacity)),this._setAttr(e,"focusposition",100*s.evaluate(t.visProp.gradientpositionx)+"%,"+100*s.evaluate(t.visProp.gradientpositiony)+"%"),this._setAttr(e,"focussize","0,0")):this._setAttr(e,"type","solid")},setObjectFillColor:function(t,e,r){var o,a,l,h=s.evaluate(e),c=s.evaluate(r),d=t.rendNode;c=c>0?c:0,t.visPropOld.fillcolor===h&&t.visPropOld.fillopacity===c||(s.exists(h)&&!1!==h&&(9!==h.length?(o=h,l=c):(o=(a=n.rgba2rgbo(h))[0],l=c*a[1]),"none"===o||!1===o?this._setAttr(t.rendNode,"filled","false"):(this._setAttr(t.rendNode,"filled","true"),this._setAttr(t.rendNode,"fillcolor",o),s.exists(l)&&t.rendNodeFill&&this._setAttr(t.rendNodeFill,"opacity",100*l+"%")),t.type===i.OBJECT_TYPE_IMAGE&&d.filters.length>1&&(d.filters.item(1).opacity=Math.round(100*l),d.filters.item(1).enabled=!0)),t.visPropOld.fillcolor=h,t.visPropOld.fillopacity=c)},setObjectStrokeColor:function(t,e,n){var r,o,a,l,h=s.evaluate(e),c=s.evaluate(n),d=t.rendNode;c=c>0?c:0,t.visPropOld.strokecolor===h&&t.visPropOld.strokeopacity===c||(s.exists(h)&&!1!==h&&(9!==h.length?(r=h,a=c):(r=(o=e.rgba2rgbo(h))[0],a=c*o[1]),t.elementClass===i.OBJECT_CLASS_TEXT?(d.filters.length>1&&(d.filters.item(1).opacity=Math.round(100*a),d.filters.item(1).enabled=!0),d.style.color=r):(!1!==r&&(this._setAttr(d,"stroked","true"),this._setAttr(d,"strokecolor",r)),l=t.rendNodeStroke,s.exists(a)&&t.type!==i.OBJECT_TYPE_IMAGE&&this._setAttr(l,"opacity",100*a+"%"))),t.visPropOld.strokecolor=h,t.visPropOld.strokeopacity=c)},setObjectStrokeWidth:function(t,e){var i,n=s.evaluate(e);isNaN(n)||t.visPropOld.strokewidth===n||(this.setPropertyPrim(i=t.rendNode,"stroked","true"),s.exists(n)&&(this.setPropertyPrim(i,"stroke-width",n),0===n&&s.exists(t.rendNodeStroke)&&this._setAttr(i,"stroked","false")),t.visPropOld.strokewidth=n)},setShadow:function(t){var e=t.rendNodeShadow,i=s.evaluate(t.visProp.shadow);e&&t.visPropOld.shadow!==i&&(i?(this._setAttr(e,"On","True"),this._setAttr(e,"Offset","3pt,3pt"),this._setAttr(e,"Opacity","60%"),this._setAttr(e,"Color","#aaaaaa")):this._setAttr(e,"On","False"),t.visPropOld.shadow=i)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}}),t.VMLRenderer}),define("renderer/canvas",["jxg","renderer/abstract","base/constants","utils/env","utils/type","utils/uuid","utils/color","base/coords","math/math","math/geometry","math/numerics"],function(t,e,i,s,n,r,o,a,l,h,c){"use strict";return t.CanvasRenderer=function(t,e){this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=r.genUUID(),this.canvasNamespace=null,s.isBrowser?(this.container=t,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',e.width,'px" height="',e.height,'px"><',"/canvas>"].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.context=this.canvasRoot.getContext("2d")):s.isNode()&&(this.canvasId="object"==typeof module?module.require("canvas"):require("canvas"),this.canvasRoot=new this.canvasId(500,500),this.context=this.canvasRoot.getContext("2d")),this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5]]},t.CanvasRenderer.prototype=new e,t.extend(t.CanvasRenderer.prototype,{_drawFilledPolygon:function(t){var e,i=t.length,s=this.context;if(i>0){for(s.beginPath(),s.moveTo(t[0][0],t[0][1]),e=0;e<i;e++)e>0&&s.lineTo(t[e][0],t[e][1]);s.lineTo(t[0][0],t[0][1]),s.fill()}},_fill:function(t){var e=this.context;e.save(),this._setColor(t,"fill")&&e.fill(),e.restore()},_rotatePoint:function(t,e,i){return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]},_rotateShape:function(t,e){var i,s=[],n=t.length;if(n<=0)return t;for(i=0;i<n;i++)s.push(this._rotatePoint(e,t[i][0],t[i][1]));return s},_setColor:function(t,e,i){var s,r,a,l,h,c,d,u=!0,p=!1,f=t.visProp;return e=e||"stroke",i=i||e,n.exists(t.board)&&n.exists(t.board.highlightedObjects)||(p=!0),s=!p&&n.exists(t.board.highlightedObjects[t.id])?"highlight":"","none"!==(a=n.evaluate(f[s+e+"color"]))&&!1!==a?(c=(c=n.evaluate(f[s+e+"opacity"]))>0?c:0,9!==a.length?(h=a,d=c):(h=(l=o.rgba2rgbo(a))[0],d=c*l[1]),this.context.globalAlpha=d,this.context[i+"Style"]=h):u=!1,r=parseFloat(n.evaluate(f.strokewidth)),"stroke"!==e||isNaN(r)||(0===r?this.context.globalAlpha=0:this.context.lineWidth=r),"stroke"===e&&void 0!==f.linecap&&""!==f.linecap&&(this.context.lineCap=f.linecap),u},_stroke:function(t){var e=this.context,i=n.evaluate(t.visProp.dash);e.save(),i>0?e.setLineDash&&e.setLineDash(this.dashArray[i]):this.context.lineDashArray=[],this._setColor(t,"stroke")&&e.stroke(),e.restore()},_translateShape:function(t,e,i){var s,n=[],r=t.length;if(r<=0)return t;for(s=0;s<r;s++)n.push([t[s][0]+e,t[s][1]+i]);return n},drawPoint:function(t){var e=n.evaluate(t.visProp.face),i=n.evaluate(t.visProp.size),s=t.coords.scrCoords,r=i*Math.sqrt(3)*.5,o=.5*i,a=parseFloat(n.evaluate(t.visProp.strokewidth))/2,l=this.context;if(t.visPropCalc.visible)switch(e){case"cross":case"x":l.beginPath(),l.moveTo(s[1]-i,s[2]-i),l.lineTo(s[1]+i,s[2]+i),l.moveTo(s[1]+i,s[2]-i),l.lineTo(s[1]-i,s[2]+i),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(t);break;case"circle":case"o":l.beginPath(),l.arc(s[1],s[2],i+1+a,0,2*Math.PI,!1),l.closePath(),this._fill(t),this._stroke(t);break;case"square":case"[]":if(i<=0)break;l.save(),this._setColor(t,"stroke","fill")&&l.fillRect(s[1]-i-a,s[2]-i-a,2*i+3*a,2*i+3*a),l.restore(),l.save(),this._setColor(t,"fill"),l.fillRect(s[1]-i+a,s[2]-i+a,2*i-a,2*i-a),l.restore();break;case"plus":case"+":l.beginPath(),l.moveTo(s[1]-i,s[2]),l.lineTo(s[1]+i,s[2]),l.moveTo(s[1],s[2]-i),l.lineTo(s[1],s[2]+i),l.lineCap="round",l.lineJoin="round",l.closePath(),this._stroke(t);break;case"diamond":case"<>":l.beginPath(),l.moveTo(s[1]-i,s[2]),l.lineTo(s[1],s[2]+i),l.lineTo(s[1]+i,s[2]),l.lineTo(s[1],s[2]-i),l.closePath(),this._fill(t),this._stroke(t);break;case"triangleup":case"a":case"^":l.beginPath(),l.moveTo(s[1],s[2]-i),l.lineTo(s[1]-r,s[2]+o),l.lineTo(s[1]+r,s[2]+o),l.closePath(),this._fill(t),this._stroke(t);break;case"triangledown":case"v":l.beginPath(),l.moveTo(s[1],s[2]+i),l.lineTo(s[1]-r,s[2]-o),l.lineTo(s[1]+r,s[2]-o),l.closePath(),this._fill(t),this._stroke(t);break;case"triangleleft":case"<":l.beginPath(),l.moveTo(s[1]-i,s[2]),l.lineTo(s[1]+o,s[2]-r),l.lineTo(s[1]+o,s[2]+r),l.closePath(),this.fill(t),this._stroke(t);break;case"triangleright":case">":l.beginPath(),l.moveTo(s[1]+i,s[2]),l.lineTo(s[1]-o,s[2]-r),l.lineTo(s[1]-o,s[2]+r),l.closePath(),this._fill(t),this._stroke(t)}},updatePoint:function(t){this.drawPoint(t)},drawLine:function(t){var e,s=new a(i.COORDS_BY_USER,t.point1.coords.usrCoords,t.board),r=new a(i.COORDS_BY_USER,t.point2.coords.usrCoords,t.board),o=null,l=n.evaluate(t.visProp.firstarrow),c=n.evaluate(t.visProp.lastarrow);t.visPropCalc.visible&&((l||c)&&(o=-4),h.calcStraight(t,s,r,o),e=this.getPositionArrowHead(t,s,r),this.context.beginPath(),this.context.moveTo(e.c1.scrCoords[1]+e.d1x,e.c1.scrCoords[2]+e.d1y),this.context.lineTo(e.c2.scrCoords[1]-e.d2x,e.c2.scrCoords[2]-e.d2y),this._stroke(t),(l&&e.sFirst>0||c&&e.sLast>0)&&this.makeArrows(t,e.c1,e.c2))},updateLine:function(t){this.drawLine(t)},drawTicks:function(){},updateTicks:function(t){var e,i,s,n,r=t.ticks.length,o=this.context;for(o.beginPath(),e=0;e<r;e++)o.moveTo((s=(i=t.ticks[e])[0])[0],(n=i[1])[0]),o.lineTo(s[1],n[1]);for(e=0;e<r;e++)i=t.ticks[e].scrCoords,t.ticks[e].major&&(t.board.needsFullUpdate||t.needsRegularUpdate)&&t.labels[e]&&t.labels[e].visPropCalc.visible&&this.updateText(t.labels[e]);o.lineCap="round",this._stroke(t)},drawCurve:function(t){n.evaluate(t.visProp.handdrawing)?this.updatePathStringBezierPrim(t):this.updatePathStringPrim(t),t.numberPoints>1&&this.makeArrows(t)},updateCurve:function(t){this.drawCurve(t)},drawEllipse:function(t){var e=t.center.coords.scrCoords[1],i=t.center.coords.scrCoords[2],s=t.board.unitX,n=t.board.unitY,r=2*t.Radius(),o=2*t.Radius(),a=r*s,l=o*n,h=e-a/2,c=i-l/2,d=a/2*.5522848,u=l/2*.5522848,p=h+a,f=c+l,m=h+a/2,g=c+l/2,b=this.context;r>0&&o>0&&!isNaN(e+i)&&(b.beginPath(),b.moveTo(h,g),b.bezierCurveTo(h,g-u,m-d,c,m,c),b.bezierCurveTo(m+d,c,p,g-u,p,g),b.bezierCurveTo(p,g+u,m+d,f,m,f),b.bezierCurveTo(m-d,f,h,g+u,h,g),b.closePath(),this._fill(t),this._stroke(t))},updateEllipse:function(t){return this.drawEllipse(t)},displayCopyright:function(t,e){var i=this.context;i.save(),i.font=e+"px Arial",i.fillStyle="#aaa",i.lineWidth=.5,i.fillText(t,10,2+e),i.restore()},drawInternalText:function(t){var e=n.evaluate(t.visProp.fontsize),i=t.getAnchorX(),s=t.getAnchorY(),r=this.context;return r.save(),this._setColor(t,"stroke","fill")&&!isNaN(t.coords.scrCoords[1]+t.coords.scrCoords[2])&&(r.font=(e>0?e:0)+"px Arial",this.transformImage(t,t.transformations),"left"===i?r.textAlign="left":"right"===i?r.textAlign="right":"middle"===i&&(r.textAlign="center"),"bottom"===s?r.textBaseline="bottom":"top"===s?r.textBaseline="top":"middle"===s&&(r.textBaseline="middle"),r.fillText(t.plaintext,t.coords.scrCoords[1],t.coords.scrCoords[2])),r.restore(),null},updateInternalText:function(t){this.drawInternalText(t)},setObjectStrokeColor:function(t,e,s){var r,a,l,h,c=n.evaluate(e),d=n.evaluate(s);d=d>0?d:0,t.visPropOld.strokecolor===c&&t.visPropOld.strokeopacity===d||(n.exists(c)&&!1!==c&&(9!==c.length?(r=c,l=d):(r=(a=o.rgba2rgbo(c))[0],l=d*a[1]),h=t.rendNode,t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===n.evaluate(t.visProp.display)&&(h.style.color=r,h.style.opacity=l)),t.visPropOld.strokecolor=c,t.visPropOld.strokeopacity=d)},drawImage:function(t){t.rendNode=new Image,t._src="",this.updateImage(t)},updateImage:function(t){var e=this.context,i=n.evaluate(t.visProp.fillopacity),s=n.bind(function(){t.imgIsLoaded=!0,t.size[0]<=0||t.size[1]<=0||(e.save(),e.globalAlpha=i,this.transformImage(t,t.transformations),e.drawImage(t.rendNode,t.coords.scrCoords[1],t.coords.scrCoords[2]-t.size[1],t.size[0],t.size[1]),e.restore())},this);this.updateImageURL(t)?t.rendNode.onload=s:t.imgIsLoaded&&s()},transformImage:function(t,e){var i,s=this.context;e.length>0&&(i=this.joinTransforms(t,e),Math.abs(c.det(i))>=l.eps&&s.transform(i[1][1],i[2][1],i[1][2],i[2][2],i[1][0],i[2][0]))},updateImageURL:function(t){var e;return e=n.evaluate(t.url),t._src!==e&&(t.imgIsLoaded=!1,t.rendNode.src=e,t._src=e,!0)},remove:function(t){n.exists(t)&&n.exists(t.parentNode)&&t.parentNode.removeChild(t)},makeArrows:function(t,e,s){var r,o,a,l,h,c,d,u,p=n.evaluate(t.visProp.strokewidth),f=this.context,m=n.evaluate(t.visProp.firstarrow),g=n.evaluate(t.visProp.lastarrow);if("none"!==n.evaluate(t.visProp.strokecolor)&&(m||g)){if(t.elementClass!==i.OBJECT_CLASS_LINE)return r=t.points[0].scrCoords[1],o=t.points[0].scrCoords[2],a=t.points[t.points.length-1].scrCoords[1],void(l=t.points[t.points.length-1].scrCoords[2]);r=e.scrCoords[1],o=e.scrCoords[2],a=s.scrCoords[1],l=s.scrCoords[2],m&&n.exists(m.type)&&(p*=n.exists(m.size)?n.evaluate(m.size):3,d=2===(u=n.evaluate(m.type))?[[p,.5*-p],[0,0],[p,.5*p],[.5*p,0]]:3===u?[[p/3,.5*-p],[0,.5*-p],[0,.5*p],[p/3,.5*p]]:[[p,.5*-p],[0,0],[p,.5*p]]),g&&n.exists(g.type)&&(p*=n.exists(g.size)?n.evaluate(g.size):3,c=2===(u=n.evaluate(g.type))?[[-p,.5*-p],[0,0],[-p,.5*p],[.5*-p,0]]:3===u?[[-p/3,.5*-p],[0,.5*-p],[0,.5*p],[-p/3,.5*p]]:[[-p,.5*-p],[0,0],[-p,.5*p]]),f.save(),this._setColor(t,"stroke","fill")&&(h=Math.atan2(l-o,a-r),g&&this._drawFilledPolygon(this._translateShape(this._rotateShape(c,h),a,l)),m&&this._drawFilledPolygon(this._translateShape(this._rotateShape(d,h),r,o))),f.restore()}},updatePathStringPrim:function(t){var e,i,s,n,r,o="M",a=this.context;if(!(t.numberPoints<=0)){if(r=Math.min(t.points.length,t.numberPoints),a.beginPath(),1===t.bezierDegree)for(e=0;e<r;e++)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o="M":(i[1]>5e3?i[1]=5e3:i[1]<-5e3&&(i[1]=-5e3),i[2]>5e3?i[2]=5e3:i[2]<-5e3&&(i[2]=-5e3),"M"===o?a.moveTo(i[1],i[2]):a.lineTo(i[1],i[2]),o="L");else if(3===t.bezierDegree)for(e=0;e<r;)i=t.points[e].scrCoords,isNaN(i[1])||isNaN(i[2])?o="M":("M"===o?a.moveTo(i[1],i[2]):a.bezierCurveTo(i[1],i[2],(s=t.points[e+=1].scrCoords)[1],s[2],(n=t.points[e+=1].scrCoords)[1],n[2]),o="C"),e+=1;a.lineCap="round",this._fill(t),this._stroke(t)}},updatePathStringBezierPrim:function(t){var e,i,s,r,o,a,l,h="M",d=n.evaluate(t.visProp.strokewidth),u="plot"!==n.evaluate(t.visProp.curvetype),p=this.context;if(!(t.numberPoints<=0)){for(u&&t.board.options.curve.RDPsmoothing&&(t.points=c.RamerDouglasPeucker(t.points,.5)),l=Math.min(t.points.length,t.numberPoints),p.beginPath(),i=1;i<3;i++)for(h="M",e=0;e<l;e++)r=t.points[e].scrCoords,isNaN(r[1])||isNaN(r[2])?h="M":(r[1]>5e3?r[1]=5e3:r[1]<-5e3&&(r[1]=-5e3),r[2]>5e3?r[2]=5e3:r[2]<-5e3&&(r[2]=-5e3),"M"===h?p.moveTo(r[1],r[2]):p.bezierCurveTo(o+.333*(r[1]-o)+d*((s=2*i)*Math.random()-i),a+.333*(r[2]-a)+d*(s*Math.random()-i),o+.666*(r[1]-o)+d*(s*Math.random()-i),a+.666*(r[2]-a)+d*(s*Math.random()-i),r[1],r[2]),h="C",o=r[1],a=r[2]);p.lineCap="round",this._fill(t),this._stroke(t)}},updatePolygonPrim:function(t,e){var i,s,n,r=e.vertices.length,o=this.context,a=!0;if(!(r<=0)&&e.visPropCalc.visible){for(o.beginPath(),s=0;!e.vertices[s].isReal&&s<r-1;)s++,a=!1;for(o.moveTo((i=e.vertices[s].coords.scrCoords)[1],i[2]),n=s;n<r-1;n++)e.vertices[n].isReal||(a=!1),o.lineTo((i=e.vertices[n].coords.scrCoords)[1],i[2]);o.closePath(),a&&this._fill(e)}},display:function(t,e){t&&t.rendNode&&(t.visPropOld.visible=e,t.rendNode.style.visibility=e?"inherit":"hidden")},show:function(e){t.deprecated("Board.renderer.show()","Board.renderer.display()"),n.exists(e.rendNode)&&(e.rendNode.style.visibility="inherit")},hide:function(e){t.deprecated("Board.renderer.hide()","Board.renderer.display()"),n.exists(e.rendNode)&&(e.rendNode.style.visibility="hidden")},setGradient:function(t){var e;e=(e=n.evaluate(t.visProp.fillopacity))>0?e:0,n.evaluate(t.visProp.fillcolor)},setShadow:function(t){t.visPropOld.shadow!==t.visProp.shadow&&(t.visPropOld.shadow=t.visProp.shadow)},highlight:function(t){return t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===n.evaluate(t.visProp.display)?this.updateTextStyle(t,!0):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},noHighlight:function(t){return t.elementClass===i.OBJECT_CLASS_TEXT&&"html"===n.evaluate(t.visProp.display)?this.updateTextStyle(t,!1):(t.board.prepareUpdate(),t.board.renderer.suspendRedraw(t.board),t.board.updateRenderer(),t.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(e){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),e&&e.attr.showcopyright&&this.displayCopyright(t.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(t,e){this.container?(this.canvasRoot.style.width=parseFloat(t)+"px",this.canvasRoot.style.height=parseFloat(e)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(t)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(e)+"px")):(this.canvasRoot.width=2*parseFloat(t),this.canvasRoot.height=2*parseFloat(e)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}}),t.CanvasRenderer}),define("jsxgraph",["jxg","utils/env","utils/type","base/board","reader/file","options","renderer/svg","renderer/vml","renderer/canvas","renderer/no"],function(t,e,i,s,n,r,o,a,l,h){"use strict";return t.JSXGraph={rendererType:(r.board.renderer="no",e.supportsVML()&&(r.board.renderer="vml",document.onmousemove=function(){var t;return document.body&&(t=document.body.scrollLeft,t+=document.body.scrollTop),t}),e.supportsCanvas()&&(r.board.renderer="canvas"),e.supportsSVG()&&(r.board.renderer="svg"),e.isNode()&&e.supportsCanvas()&&(r.board.renderer="canvas"),(e.isNode()||"no"===r.renderer)&&(r.text.display="internal",r.infobox.display="internal"),r.board.renderer),initRenderer:function(t,e,s,n){var r;if(i.exists(s)&&!1!==s||"object"!=typeof document||(s=document),"object"==typeof s&&null!==t)for(r=s.getElementById(t);r.firstChild;)r.removeChild(r.firstChild);else r=t;return void 0!==n&&"auto"!==n||(n=this.rendererType),"svg"===n?new o(r,e):"vml"===n?new a(r):"canvas"===n?new l(r,e):new h},initBoard:function(n,o){var a,l,h,c,d,u,p,f,m,g,b,y,v,C;return(g=i.copyAttributes(o=o||{},r,"board")).zoom=i.copyAttributes(g,r,"board","zoom"),g.pan=i.copyAttributes(g,r,"board","pan"),g.selection=i.copyAttributes(g,r,"board","selection"),g.navbar=i.copyAttributes(g.navbar,r,"navbar"),f=e.getDimensions(n,g.document),g.unitx||g.unity?(a=i.def(g.originx,150),l=i.def(g.originy,150),h=i.def(g.unitx,50),c=i.def(g.unity,50)):(m=g.boundingbox,u=parseInt(f.width,10),p=parseInt(f.height,10),i.exists(m)&&g.keepaspectratio?(h=u/(m[2]-m[0]),c=p/(m[1]-m[3]),Math.abs(h)<Math.abs(c)?c=Math.abs(h)*c/Math.abs(c):h=Math.abs(c)*h/Math.abs(h)):(h=u/(m[2]-m[0]),c=p/(m[1]-m[3])),a=-h*m[0],l=c*m[1]),d=this.initRenderer(n,f,g.document,g.renderer),C=new s(n,d,g.id,[a,l],g.zoomfactor*g.zoomx,g.zoomfactor*g.zoomy,h,c,f.width,f.height,g),t.boards[C.id]=C,C.keepaspectratio=g.keepaspectratio,C.resizeContainer(f.width,f.height,!0,!0),C.suspendUpdate(),C.initInfobox(),g.axis&&(y=i.deepCopy(r.board.defaultAxes.x,b="object"==typeof g.axis?g.axis:{}),v=i.deepCopy(r.board.defaultAxes.y,b),g.defaultaxes.x&&(y=i.deepCopy(y,g.defaultaxes.x)),g.defaultaxes.y&&(v=i.deepCopy(v,g.defaultaxes.y)),C.defaultAxes={},C.defaultAxes.x=C.create("axis",[[0,0],[1,0]],y),C.defaultAxes.y=C.create("axis",[[0,0],[0,1]],v)),g.grid&&C.create("grid",[],"object"==typeof g.grid?g.grid:{}),C._createSelectionPolygon(g),C.renderer.drawZoomBar(C,g.navbar),C.unsuspendUpdate(),C},loadBoardFromFile:function(o,a,l,h,c){var d,u,p,f,m;return(d=i.copyAttributes(h=h||{},r,"board")).zoom=i.copyAttributes(h,r,"board","zoom"),d.pan=i.copyAttributes(h,r,"board","pan"),d.selection=i.copyAttributes(d,r,"board","selection"),d.navbar=i.copyAttributes(d.navbar,r,"navbar"),f=e.getDimensions(o,d.document),u=this.initRenderer(o,f,d.document,d.renderer),(p=new s(o,u,"",[150,150],1,1,50,50,f.width,f.height,d)).initInfobox(),p.resizeContainer(f.width,f.height,!0,!0),n.parseFileContent(a,p,l,!0,c),m=i.copyAttributes(d,r,"board","selection"),p.selectionPolygon=p.create("polygon",[[0,0],[0,0],[0,0],[0,0]],m),p.renderer.drawZoomBar(p,d.navbar),t.boards[p.id]=p,p},loadBoardFromString:function(o,a,l,h,c){var d,u,p,f,m;return(d=i.copyAttributes(h=h||{},r,"board")).zoom=i.copyAttributes(h,r,"board","zoom"),d.pan=i.copyAttributes(h,r,"board","pan"),d.selection=i.copyAttributes(d,r,"board","selection"),d.navbar=i.copyAttributes(d.navbar,r,"navbar"),p=e.getDimensions(o,d.document),u=this.initRenderer(o,p,d.document),(f=new s(o,u,"",[150,150],1,1,50,50,p.width,p.height,d)).initInfobox(),f.resizeContainer(p.width,p.height,!0,!0),n.parseString(a,f,l,!0,c),m=i.copyAttributes(d,r,"board","selection"),f.selectionPolygon=f.create("polygon",[[0,0],[0,0],[0,0],[0,0]],m),f.renderer.drawZoomBar(f,d.navbar),t.boards[f.id]=f,f},freeBoard:function(e){var i;for(i in"string"==typeof e&&(e=t.boards[e]),e.removeEventHandlers(),e.suspendUpdate(),e.objects)e.objects.hasOwnProperty(i)&&e.objects[i].remove();for(;e.containerObj.firstChild;)e.containerObj.removeChild(e.containerObj.firstChild);for(i in e.objects)e.objects.hasOwnProperty(i)&&delete e.objects[i];delete e.renderer,e.jc.creator.clearCache(),delete e.jc,delete t.boards[e.id]},registerElement:function(e,i){t.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),t.registerElement(e,i)}},e.isBrowser&&"object"==typeof window&&"object"==typeof document&&e.addEvent(window,"load",function(){var e,s,n,r,o,a,l,h,c,d,u,p,f=document.getElementsByTagName("script"),m=function(e,i,s){var n=t.JSXGraph.initBoard(o,{boundingbox:s,keepaspectratio:!0,grid:u,axis:d,showReload:!0});if(i.toLowerCase().indexOf("script")>-1)n.construct(e);else try{n.jc.parse(e)}catch(e){t.debug(e)}return n},g=function(e,i,s,n){return function(){var r;t.JSXGraph.freeBoard(e),(r=m(i,s,n)).reload=g(r,i,s,n)}};for(s=0;s<f.length;s++)if(e=f[s].getAttribute("type",!1),i.exists(e)&&("text/jessiescript"===e.toLowerCase()||"jessiescript"===e.toLowerCase()||"text/jessiecode"===e.toLowerCase()||"jessiecode"===e.toLowerCase())){if(l=f[s].getAttribute("width",!1)||"500px",h=f[s].getAttribute("height",!1)||"500px",c=f[s].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",o=f[s].getAttribute("container",!1),4!==(c=c.split(",")).length)c=[-5,5,5,-5];else for(n=0;n<c.length;n++)c[n]=parseFloat(c[n]);if(d=i.str2Bool(f[s].getAttribute("axis",!1)||"false"),u=i.str2Bool(f[s].getAttribute("grid",!1)||"false"),i.exists(o))r=document.getElementById(o);else{o="jessiescript_autgen_jxg_"+s,(r=document.createElement("div")).setAttribute("id",o),r.setAttribute("style","width:"+l+"; height:"+h+"; float:left"),r.setAttribute("class","jxgbox");try{document.body.insertBefore(r,f[s])}catch(t){"object"==typeof jQuery&&jQuery(r).insertBefore(f[s])}}document.getElementById(o)?(p=(p=f[s].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),f[s].innerHTML=p,(a=m(p,e,c)).reload=g(a,p,e,c)):t.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),t.JSXGraph}),define("base/group",["jxg","base/constants","math/math","math/geometry","utils/type"],function(t,e,i,s,n){"use strict";return t.Group=function(t,i,s,r,o){var a,l,h,c;for(this.board=t,this.objects={},a=this.board.numObjects,this.board.numObjects+=1,this.id=""!==i&&n.exists(i)?i:this.board.id+"Group"+a,this.board.groups[this.id]=this,this.type=e.OBJECT_TYPE_POINT,this.elementClass=e.OBJECT_CLASS_POINT,this.name=""!==s&&n.exists(s)?s:"group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=o.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],l=n.isArray(r)?r:Array.prototype.slice.call(arguments,3),h=0;h<l.length;h++)c=this.board.select(l[h]),!n.evaluate(c.visProp.fixed)&&n.exists(c.coords)&&this.addPoint(c);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},t.extend(t.Group.prototype,{ungroup:function(){var t,e,i;for(t in this.objects)this.objects.hasOwnProperty(t)&&n.isArray((e=this.objects[t].point).groups)&&(i=n.indexOf(e.groups,this.id))>=0&&delete e.groups[i];return this.objects={},this},addParents:function(t){var e,i,s;for(i=(s=n.isArray(t)?t:arguments).length,e=0;e<i;++e)n.isId(this.board,s[e])?this.parents.push(s[e]):n.exists(s[e].id)&&this.parents.push(s[e].id);this.parents=n.uniqueArray(this.parents)},setParents:function(t){this.parents=[],this.addParents(t)},getParents:function(){return n.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(t){var e;""!==t&&n.exists(this.objects[t])&&(this.coords[(e=this.objects[t].point).id]={usrCoords:e.coords.usrCoords.slice(0)})},update:function(t){var e,r,o,a,l,h,c,d,u,p=null;if(!this.needsUpdate)return this;if("nothing"===(t=this._update_find_drag_type()).action)return this._updateCoordsCache(t.id),this;if(p=this.objects[t.id].point,"translation"===t.action)d=[p.coords.usrCoords[1]-this.coords[t.id].usrCoords[1],p.coords.usrCoords[2]-this.coords[t.id].usrCoords[2]];else if("rotation"===t.action||"scaling"===t.action){if(n.isPoint(this[r="rotation"===t.action?"rotationCenter":"scaleCenter"]))u=this[r].coords.usrCoords.slice(1);else if("centroid"===this[r])u=this._update_centroid_center();else if(n.isArray(this[r]))u=this[r];else{if(!n.isFunction(this[r]))return this;u=this[r]()}if("rotation"===t.action)c=s.rad(this.coords[t.id].usrCoords.slice(1),u,this.objects[t.id].point),(d=this.board.create("transform",[c,u[0],u[1]],{type:"rotate"})).update();else{if("scaling"!==t.action)return this;if(a=s.distance(this.coords[t.id].usrCoords.slice(1),u),Math.abs(a)<i.eps)return this;a=s.distance(p.coords.usrCoords.slice(1),u)/a,l=this.scaleDirections[t.id].indexOf("x")>=0?a:1,h=this.scaleDirections[t.id].indexOf("y")>=0?a:1,(d=this.board.create("transform",[1,0,0,u[0]*(1-l),l,0,u[1]*(1-h),0,h],{type:"generic"})).update()}}for(e in this._update_apply_transformation(t,d),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(e))for(o in this.objects[e].descendants)this.objects[e].descendants.hasOwnProperty(o)&&(this.objects[e].descendants.needsUpdate=this.objects[e].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(e in this.board.updateElements(t),this.objects)this.objects.hasOwnProperty(e)&&this._updateCoordsCache(e);return this},_update_find_drag_type:function(){var t,s,r,o="nothing",a=[];for(t in this.objects)this.objects.hasOwnProperty(t)&&(s=this.objects[t].point).coords.distance(e.COORDS_BY_USER,this.coords[t])>i.eps&&a.push(s.id);return 0===a.length?{action:o,id:"",changed:a}:(s=this.objects[r=a[0]].point,a.length>1?o="translation":n.isInArray(this.rotationPoints,s)&&n.exists(this.rotationCenter)?o="rotation":n.isInArray(this.scalePoints,s)&&n.exists(this.scaleCenter)?o="scaling":n.isInArray(this.translationPoints,s)&&(o="translation"),{action:o,id:r,changed:a})},_update_centroid_center:function(){var t,e,i;for(i in t=[0,0],e=0,this.coords)this.coords.hasOwnProperty(i)&&(t[0]+=this.coords[i].usrCoords[1],t[1]+=this.coords[i].usrCoords[2],++e);return e>0&&(t[0]/=e,t[1]/=e),t},_update_apply_transformation:function(t,s){var r,o;for(r in this.objects)this.objects.hasOwnProperty(r)&&(n.exists(this.board.objects[r])?(o=this.objects[r].point).id!==t.id?"translation"===t.action?n.isInArray(t.changed,o.id)||o.coords.setCoordinates(e.COORDS_BY_USER,[this.coords[r].usrCoords[1]+s[0],this.coords[r].usrCoords[2]+s[1]]):"rotation"!==t.action&&"scaling"!==t.action||s.applyOnce([o]):"rotation"!==t.action&&"scaling"!==t.action||o.coords.setCoordinates(e.COORDS_BY_USER,i.matVecMult(s.matrix,this.coords[o.id].usrCoords)):delete this.objects[r])},addPoint:function(t){return this.objects[t.id]={point:this.board.select(t)},this._updateCoordsCache(t.id),this.translationPoints.push(t),t.groups.push(this.id),t.groups=n.uniqueArray(t.groups),this},addPoints:function(t){var e;for(e=0;e<t.length;e++)this.addPoint(t[e]);return this},addGroup:function(t){var e;for(e in t.objects)t.objects.hasOwnProperty(e)&&this.addPoint(t.objects[e].point);return this},removePoint:function(t){return delete this.objects[t.id],this},setRotationCenter:function(t){return this.rotationCenter=t,this},setRotationPoints:function(t){return this._setActionPoints("rotation",t)},addRotationPoint:function(t){return this._addActionPoint("rotation",t)},removeRotationPoint:function(t){return this._removeActionPoint("rotation",t)},setTranslationPoints:function(t){return this._setActionPoints("translation",t)},addTranslationPoint:function(t){return this._addActionPoint("translation",t)},removeTranslationPoint:function(t){return this._removeActionPoint("translation",t)},setScaleCenter:function(t){return this.scaleCenter=t,this},setScalePoints:function(t,e){var i,s,r;for(r=(i=n.isArray(t)?t:arguments).length,s=0;s<r;++s)this.scaleDirections[this.board.select(i[s]).id]=e||"xy";return this._setActionPoints("scale",t)},addScalePoint:function(t,e){return this._addActionPoint("scale",t),this.scaleDirections[this.board.select(t).id]=e||"xy",this},removeScalePoint:function(t){return this._removeActionPoint("scale",t)},_setActionPoints:function(t,e){var i,s,r;for(r=(i=n.isArray(e)?e:arguments).length,this[t+"Points"]=[],s=0;s<r;++s)this._addActionPoint(t,i[s]);return this},_addActionPoint:function(t,e){return this[t+"Points"].push(this.board.select(e)),this},_removeActionPoint:function(t,e){var i=this[t+"Points"].indexOf(this.board.select(e));return i>-1&&this[t+"Points"].splice(i,1),this},setProperty:function(){t.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var t;for(t in this.objects)this.objects.hasOwnProperty(t)&&this.objects[t].point.setAttribute.apply(this.objects[t].point,arguments);return this}}),t.createGroup=function(e,i,s){var r=n.copyAttributes(s,e.options,"group"),o=new t.Group(e,r.id,r.name,i,r);return o.elType="group",o.setParents(i),o},t.registerElement("group",t.createGroup),{Group:t.Group,createGroup:t.createGroup}}),define("element/locus",["jxg","math/symbolic","utils/type","base/constants","base/curve"],function(t,e,i,s,n){"use strict";return t.createLocus=function(t,s,n){var r,o;if(!i.isArray(s)||1!==s.length||!i.isPoint(s[0]))throw new Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return o=s[0],(r=t.create("curve",[[null],[null]],n)).dontCallServer=!1,r.elType="locus",r.setParents([o.id]),r.updateDataArray=function(){var i,s,n;r.board.mode>0||(i=e.generatePolynomials(t,o,!0).join("|"))!==r.spe&&(r.spe=i,(s=function(t,e,i,s){r.dataX=t,r.dataY=e,r.eq=i,r.ctime=s,r.generatePolynomial=function(t){return function(e){var i,s="("+e.symbolic.x+")",n="("+e.symbolic.y+")",r=[];for(i=0;i<t.length;i++)r[i]=t[i].replace(/\*\*/g,"^").replace(/x/g,s).replace(/y/g,n);return r}}(i)})((n=e.geometricLocusByGroebnerBase(t,o,s)).datax,n.datay,n.polynomial,n.exectime))},r},t.registerElement("locus",t.createLocus),{createLocus:t.createLocus}}),define("base/image",["jxg","base/constants","base/coords","base/element","math/math","math/statistics","utils/type","base/coordselement"],function(t,e,i,s,n,r,o,a){"use strict";return t.Image=function(i,s,n,r,a){this.constructor(i,n,e.OBJECT_TYPE_IMAGE,e.OBJECT_CLASS_OTHER),this.element=this.board.select(n.anchor),this.coordsConstructor(s),this.W=o.createFunction(a[0],this.board,""),this.H=o.createFunction(a[1],this.board,""),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*i.unitX),Math.abs(this.usrSize[1]*i.unitY)],this.url=r,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=t.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},t.Image.prototype=new s,o.copyPrototypeMethods(t.Image,a,"coordsConstructor"),t.extend(t.Image.prototype,{hasPoint:function(t,s){var r,o,a,l,h,c,d;return 0===this.transformations.length?(o=this.coords.scrCoords[2]-s,(r=t-this.coords.scrCoords[1])>=-(a=this.board.options.precision.hasPoint)&&r-this.size[0]<=a&&o>=-a&&o-this.size[1]<=a):(l=new i(e.COORDS_BY_SCREEN,[t,s],this.board),0<=(c=(d=n.innerProduct)(h=[(l=l.usrCoords)[0]-this.span[0][0],l[1]-this.span[0][1],l[2]-this.span[0][2]],this.span[1]))&&c<=d(this.span[1],this.span[1])&&0<=(c=d(h,this.span[2]))&&c<=d(this.span[2],this.span[2]))},update:function(t){return this.needsUpdate?(this.updateCoords(t),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var t,e,i=this.transformations.length,s=[];if(0===i)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(s[0]=[this.Z(),this.X(),this.Y()],s[1]=[this.Z(),this.X()+this.W(),this.Y()],s[2]=[this.Z(),this.X(),this.Y()+this.H()],t=0;t<i;t++)for(e=0;e<3;e++)s[e]=n.matVecMult(this.transformations[t].matrix,s[e]);for(e=0;e<3;e++)s[e][1]/=s[e][0],s[e][2]/=s[e][0],s[e][0]/=s[e][0];for(e=1;e<3;e++)s[e][0]-=s[0][0],s[e][1]-=s[0][1],s[e][2]-=s[0][2];this.span=s}return this},addTransform:function(t){var e;if(o.isArray(t))for(e=0;e<t.length;e++)this.transformations.push(t[e]);else this.transformations.push(t);return this},getParents:function(){var t=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(t=this.parents),t},setSize:function(t,e){return this.W=o.createFunction(t,this.board,""),this.H=o.createFunction(e,this.board,""),this},W:function(){},H:function(){}}),t.createImage=function(e,i,s){var n,r,l=i[0],h=i[1],c=i[2];if(n=o.copyAttributes(s,e.options,"image"),!(r=a.create(t.Image,e,h,n,l,c)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof i[0]+"' and '"+typeof i[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==o.evaluate(n.rotate)&&r.addRotation(o.evaluate(n.rotate)),r},t.registerElement("image",t.createImage),{Image:t.Image,createImage:t.createImage}}),define("base/ticks",["jxg","math/math","math/geometry","base/constants","base/element","base/coords","utils/type","base/text"],function(t,e,i,s,n,r,o,a){"use strict";return t.Ticks=function(t,i,n){if(this.constructor(t.board,n,s.OBJECT_TYPE_TICKS,s.OBJECT_CLASS_OTHER),this.line=t,this.board=this.line.board,this.ticksFunction=null,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],o.isFunction(i))throw this.ticksFunction=i,new Error("Function arguments are no longer supported.");o.isArray(i)?this.fixedTicks=i:((Math.abs(i)<e.eps||i<0)&&(i=n.defaultdistance),this.ticksFunction=this.makeTicksFunction(i),this.equidistant=!0),this.minTicksDistance=n.minticksdistance,this.ticks=[],this.ticksDelta=1,this.labels=[],this.labelData=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},t.Ticks.prototype=new n,t.extend(t.Ticks.prototype,{makeTicksFunction:function(t){return function(){var e,i,s;return o.evaluate(this.visProp.insertticks)?((s=(i=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance")).upper-i.lower)<=6*(e=Math.pow(10,Math.floor(Math.log(.6*s)/Math.LN10)))&&(e*=.5),e):t}},hasPoint:function(t,i){var n,r,a=this.ticks&&this.ticks.length||0,l=this.board.options.precision.hasPoint+.5*o.evaluate(this.visProp.strokewidth);if(!o.evaluate(this.line.visProp.scalable))return!1;if(0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==s.OBJECT_TYPE_AXIS)return!1;for(n=0;n<a;n++)if((r=this.ticks[n])[2]&&!(0===this.line.stdform[1]&&Math.abs(r[0][0]-this.line.point1.coords.scrCoords[1])<e.eps||0===this.line.stdform[2]&&Math.abs(r[1][0]-this.line.point1.coords.scrCoords[2])<e.eps)&&(Math.abs(r[0][0]-r[0][1])>=1||Math.abs(r[1][0]-r[1][1])>=1))if(0===this.line.stdform[1]){if(Math.abs(i-.5*(r[1][0]+r[1][1]))<2*l&&r[0][0]-l<t&&t<r[0][1]+l)return!0}else if(0===this.line.stdform[2]&&Math.abs(t-.5*(r[0][0]+r[0][1]))<2*l&&r[1][0]-l<i&&i<r[1][1]+l)return!0;return!1},setPositionDirectly:function(t,i,s){var n,a,l=new r(t,i,this.board),h=new r(t,s,this.board),c=this.board.getBoundingBox();return o.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<e.eps&&Math.abs(l.usrCoords[1]*h.usrCoords[1])>e.eps?(c[0]*=n=h.usrCoords[1]/l.usrCoords[1],c[2]*=n,this.board.setBoundingBox(c,!1)):Math.abs(this.line.stdform[2])<e.eps&&Math.abs(l.usrCoords[2]*h.usrCoords[2])>e.eps&&(c[3]*=a=h.usrCoords[2]/l.usrCoords[2],c[1]*=a,this.board.setBoundingBox(c,!1)),this):this},calculateTicksCoordinates:function(){var t,i;if(this.setTicksSizeVariables(),!(Math.abs(this.dx)<e.eps&&Math.abs(this.dy)<e.eps))return t=this.getZeroCoordinates(),i=this.getLowerAndUpperBounds(t),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(t,i):this.generateFixedTicks(t,i),this},setTicksSizeVariables:function(){var t,e=.5*o.evaluate(this.visProp.majorheight),i=.5*o.evaluate(this.visProp.minorheight);this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2],this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,t=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY),this.dxMaj*=e/t*this.board.unitX,this.dyMaj*=e/t*this.board.unitY,this.dxMin*=i/t*this.board.unitX,this.dyMin*=i/t*this.board.unitY,this.minStyle=o.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=o.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var t,e,n,a,l,h,c=o.evaluate(this.visProp.anchor);return this.line.type===s.OBJECT_TYPE_AXIS?i.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(n=this.line.point1.coords.usrCoords[0],t=this.line.point1.coords.usrCoords[1],e=this.line.point1.coords.usrCoords[2],h=this.line.point2.coords.usrCoords[0],a=this.line.point2.coords.usrCoords[1],l=this.line.point2.coords.usrCoords[2],"right"===c?this.line.point2.coords:"middle"===c?new r(s.COORDS_BY_USER,[.5*(n+h),.5*(t+a),.5*(e+l)],this.board):o.isNumber(c)?new r(s.COORDS_BY_USER,[n+(h-n)*c,t+(a-t)*c,e+(l-e)*c],this.board):this.line.point1.coords)},getLowerAndUpperBounds:function(t,n){var a,l,h,c,d,u=new r(s.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),p=new r(s.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),f=Math.abs(u.usrCoords[0])>=e.eps&&u.scrCoords[1]>=0&&u.scrCoords[1]<=this.board.canvasWidth&&u.scrCoords[2]>=0&&u.scrCoords[2]<=this.board.canvasHeight,m=Math.abs(p.usrCoords[0])>=e.eps&&p.scrCoords[1]>=0&&p.scrCoords[1]<=this.board.canvasWidth&&p.scrCoords[2]>=0&&p.scrCoords[2]<=this.board.canvasHeight,g=o.evaluate(this.line.visProp.straightfirst),b=o.evaluate(this.line.visProp.straightlast),y=o.evaluate(this.visProp.includeboundaries);return o.exists(n)||"tickdistance"===n?i.calcStraight(this.line,u,p,o.evaluate(this.line.visProp.margin)):i.calcLineDelimitingPoints(this.line,u,p),d=this.board.renderer.getPositionArrowHead(this.line,u,p,o.evaluate(this.line.visProp.strokewidth)),u.setCoordinates(s.COORDS_BY_SCREEN,[u.scrCoords[1]-d.d1x,u.scrCoords[2]-d.d1y]),p.setCoordinates(s.COORDS_BY_SCREEN,[p.scrCoords[1]-d.d2x,p.scrCoords[2]-d.d2y]),(h=this.getDistanceFromZero(t,u))<(c=this.getDistanceFromZero(t,p))?(a=h,g||!f||y||(a+=e.eps),l=c,b||!m||y||(l-=e.eps)):c<h?(a=c,b||!m||y||(a+=e.eps),l=h,g||!f||y||(l-=e.eps)):(a=0,l=0),{lower:a,upper:l}},getDistanceFromZero:function(t,n){var r=e.eps,a=t.distance(s.COORDS_BY_USER,n);return this.line.type===s.OBJECT_TYPE_AXIS?(e.relDif(t.usrCoords[1],n.usrCoords[1])>r&&t.usrCoords[1]-n.usrCoords[1]>r||e.relDif(t.usrCoords[2],n.usrCoords[2])>r&&t.usrCoords[2]-n.usrCoords[2]>r)&&(a*=-1):"right"===o.evaluate(this.visProp.anchor)?i.isSameDirection(t,this.line.point1.coords,n)&&(a*=-1):i.isSameDirection(t,this.line.point2.coords,n)||(a*=-1),a},generateEquidistantTicks:function(t,i){var s,n=this.getXandYdeltas(),r=this.equidistant?this.ticksFunction(1):this.ticksDelta,a=o.evaluate(this.visProp.insertticks),l=o.evaluate(this.visProp.minorticks);if(r*=o.evaluate(this.visProp.scale),a&&this.minTicksDistance>e.eps?(r=this.adjustTickDistance(r,t,n),r/=l+1):a||(r/=l+1),this.ticksDelta=r,!(r<e.eps)){for(s=0,o.evaluate(this.visProp.drawzero)||(s=r);s<=i.upper;)s>=i.lower&&this.processTickPosition(t,s,r,n),s+=r;for(s=-r;s>=i.lower;)s<=i.upper&&this.processTickPosition(t,s,r,n),s-=r}},adjustTickDistance:function(t,e,i){var n,a=1,l=o.evaluate(this.visProp.minorticks);for(this.getLowerAndUpperBounds(e,"ticksdistance"),n=e.distance(s.COORDS_BY_SCREEN,new r(s.COORDS_BY_USER,[e.usrCoords[1]+i.x*t,e.usrCoords[2]+i.y*t],this.board));n/(l+1)<this.minTicksDistance;)t*=1===a?2:5,a*=-1,n=e.distance(s.COORDS_BY_SCREEN,new r(s.COORDS_BY_USER,[e.usrCoords[1]+i.x*t,e.usrCoords[2]+i.y*t],this.board));return t},processTickPosition:function(t,e,i,n){var a,l;(a=new r(s.COORDS_BY_USER,[t.usrCoords[1]+e*n.x,t.usrCoords[2]+e*n.y],this.board)).major=Math.round(e/i)%(o.evaluate(this.visProp.minorticks)+1)==0,3===(l=this.tickEndings(a,a.major)).length&&(this.ticks.push(l),a.major&&o.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(a,t),a,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(t,e){var i,n,a,l,h=o.isArray(this.visProp.labels),c=this.getXandYdeltas(),d=o.evaluate(this.visProp.drawlabels);for(a=0;a<this.fixedTicks.length;a++)i=new r(s.COORDS_BY_USER,[t.usrCoords[1]+this.fixedTicks[a]*c.x,t.usrCoords[2]+this.fixedTicks[a]*c.y],this.board),3===(l=this.tickEndings(i,!0)).length&&this.fixedTicks[a]>=e.lower&&this.fixedTicks[a]<=e.upper&&(this.ticks.push(l),d&&(h||o.exists(this.visProp.labels[a]))?(n=h?o.evaluate(this.visProp.labels[a]):this.fixedTicks[a],this.labelsData.push(this.generateLabelData(this.generateLabelText(i,t,n),i,a))):this.labelsData.push(null))},getXandYdeltas:function(){var t,i,n=this.line.point1.Dist(this.line.point2);return this.line.type===s.OBJECT_TYPE_AXIS?((t=this.line.point1.coords.usrCoords)[1]>(i=this.line.point2.coords.usrCoords)[1]||Math.abs(t[1]-i[1])<e.eps&&t[2]>i[2])&&(t=this.line.point2.coords.usrCoords,i=this.line.point1.coords.usrCoords):(t=this.line.point1.coords.usrCoords,i=this.line.point2.coords.usrCoords),{x:(i[1]-t[1])/n,y:(i[2]-t[2])/n}},_isInsideCanvas:function(t,e,i){var s=this.board.canvasWidth,n=this.board.canvasHeight;return void 0===i&&(i=0),t[0]>=i&&t[0]<=s-i&&e[0]>=i&&e[0]<=n-i||t[1]>=i&&t[1]<=s-i&&e[1]>=i&&e[1]<=n-i},tickEndings:function(t,e){var s,n,r,a,l,h=[-2e6,-2e6],c=[-2e6,-2e6];return s=t.scrCoords,e?(r=this.dxMaj,a=this.dyMaj,l=this.majStyle):(r=this.dxMin,a=this.dyMin,l=this.minStyle),"infinite"===l?(n=i.meetLineBoard([-a*s[1]-r*s[2],a,r],this.board),h[0]=n[0].scrCoords[1],h[1]=n[1].scrCoords[1],c[0]=n[0].scrCoords[2],c[1]=n[1].scrCoords[2]):(h[0]=s[1]+r*o.evaluate(this.visProp.tickendings[0]),c[0]=s[2]-a*o.evaluate(this.visProp.tickendings[0]),h[1]=s[1]-r*o.evaluate(this.visProp.tickendings[1]),c[1]=s[2]+a*o.evaluate(this.visProp.tickendings[1])),this._isInsideCanvas(h,c)?[h,c,e]:[]},formatLabelText:function(t){var e=t.toString(),i=o.evaluate(this.visProp.scalesymbol);return o.isNumber(t)&&((e.length>o.evaluate(this.visProp.maxlabellength)||-1!==e.indexOf("e"))&&(e=t.toPrecision(o.evaluate(this.visProp.precision)).toString()),e.indexOf(".")>-1&&-1===e.indexOf("e")&&(e=(e=e.replace(/0+$/,"")).replace(/\.$/,""))),i.length>0&&("1"===e?e=i:"-1"===e?e="-"+i:"0"!==e&&(e+=i)),o.evaluate(this.visProp.useunicodeminus)&&(e=e.replace(/-/g,"\u2212")),e},generateLabelText:function(t,i,s){var n,r=this.getDistanceFromZero(i,t);return Math.abs(r)<e.eps?n="0":(o.exists(s)||(s=r/o.evaluate(this.visProp.scale)),n=this.formatLabelText(s)),n},generateLabelData:function(t,e,i){var s,n,r,a;return r=void 0===(a=o.evaluate(this.visProp.label.fontsize))?12:a,this._isInsideCanvas(s=[e.scrCoords[1],e.scrCoords[1]],n=[e.scrCoords[2],e.scrCoords[2]],r*=1.5)?(s=o.evaluate(this.visProp.label.offset[0]),n=o.evaluate(this.visProp.label.offset[1]),{x:e.usrCoords[1]+s/this.board.unitX,y:e.usrCoords[2]+n/this.board.unitY,t,i}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var t,e,i,s,n,r,l,h;for(i=this.labelsData.length,s=this.labels.length,t=0,e=0;t<i;t++)null!==this.labelsData[t]&&(l=this.labelsData[t],e<s?((r=this.labels[e]).setText(l.t),r.setCoords(l.x,l.y),e++):(this.labelCounter+=1,(n=o.deepCopy(n={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},this.visProp.label)).id=this.id+l.i+"Label"+this.labelCounter,(r=a.createText(this.board,[l.x,l.y,l.t],n)).isDraggable=!1,r.dump=!1,this.labels.push(r)),"inherit"===(h=o.evaluate(this.visProp.label.visible))&&(h=this.visPropCalc.visible),r.prepareUpdate().updateVisibility(h).updateRenderer(),r.distanceX=o.evaluate(this.visProp.label.offset[0]),r.distanceY=o.evaluate(this.visProp.label.offset[1]));for(e=i=e;e<s;e++)this.board.renderer.display(this.labels[e],!1),this.labels[e].visProp.visible=!1;return this},hideElement:function(){var e;for(t.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)o.exists(this.labels[e])&&this.labels[e].hideElement();return this},showElement:function(){var e;for(t.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),e=0;e<this.labels.length;e++)o.exists(this.labels[e])&&this.labels[e].showElement();return this}}),t.createTicks=function(e,i,n){var r,a,l=o.copyAttributes(n,e.options,"ticks");if(a=i.length<2?l.ticksdistance:i[1],i[0].elementClass!==s.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof i[0]+"'.");return r=new t.Ticks(i[0],a,l),o.isFunction(l.generatelabelvalue)&&(r.generateLabelText=l.generatelabelvalue),o.isFunction(l.generatelabeltext)&&(r.generateLabelText=l.generatelabeltext),r.setParents(i[0]),r.isDraggable=!0,r.fullUpdate(i[0].visPropCalc.visible),r},t.createHatchmark=function(t,e,i){var n,r,a,l,h,c=[],d=o.copyAttributes(i,t.options,"hatch");if(e[0].elementClass!==s.OBJECT_CLASS_LINE||"number"!=typeof e[1])throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof e[0]+"' and '"+typeof e[1]+" and ''"+typeof e[2]+"'.");for(a=-((n=e[1])-1)*(l=d.ticksdistance)*.5,r=0;r<n;r++)c[r]=a+r*l;return(h=t.create("ticks",[e[0],c],d)).elType="hatch",h},t.registerElement("ticks",t.createTicks),t.registerElement("hash",t.createHatchmark),t.registerElement("hatch",t.createHatchmark),{Ticks:t.Ticks,createTicks:t.createTicks,createHashmark:t.createHatchmark,createHatchmark:t.createHatchmark}}),define("element/slider",["jxg","math/math","base/constants","utils/type","base/point","base/group","base/element","base/line","base/ticks","base/text"],function(t,e,i,s,n,r,o,a,l,h){"use strict";return t.createSlider=function(t,r,o){var a,l,h,c,d,u,p,f,m,g,b,y,v,C,x,_,P,S,w,E;return P=(w=s.copyAttributes(o,t.options,"slider")).withticks,_=w.withlabel,S=w.snapwidth,E=w.precision,w=s.copyAttributes(o,t.options,"slider","point1"),p=t.create("point",r[0],w),w=s.copyAttributes(o,t.options,"slider","point2"),f=t.create("point",r[1],w),w=s.copyAttributes(o,t.options,"slider","baseline"),(m=t.create("segment",[p,f],w)).updateStdform(),a=p.coords.usrCoords.slice(1),l=f.coords.usrCoords.slice(1),u=(d=r[2][2])-(h=r[2][0]),b=a[0]+(l[0]-a[0])*((c=r[2][1])-h)/(d-h),y=a[1]+(l[1]-a[1])*(c-h)/(d-h),(w=s.copyAttributes(o,t.options,"slider")).withLabel=!1,(v=t.create("glider",[b,y,m],w)).setAttribute({snapwidth:S}),w=s.copyAttributes(o,t.options,"slider","highline"),C=t.create("segment",[p,v],w),v.Value=function(){var t=this._smax-this._smin,e=s.evaluate(this.visProp.snapwidth);return-1===e?this.position*t+this._smin:Math.round((this.position*t+this._smin)/e)*e},v.methodMap=s.deepCopy(v.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),v._smax=d,v._smin=h,v.setMax=function(t){return this._smax=t,this},v.setValue=function(t){var i=this._smax-this._smin;return this.position=Math.abs(i)>e.eps?(t-this._smin)/i:0,this.position=Math.max(0,Math.min(1,this.position)),this},v.setMin=function(t){return this._smin=t,this},_&&(w=s.copyAttributes(o,t.options,"slider","label"),x=t.create("text",[function(){return.05*(f.X()-p.X())+f.X()},function(){return.05*(f.Y()-p.Y())+f.Y()},function(){var t,e=s.evaluate(v.visProp.suffixlabel),i=s.evaluate(v.visProp.unitlabel),n=s.evaluate(v.visProp.postlabel);return t=null!==e?e:v.name&&""!==v.name?v.name+" = ":"",t+=s.toFixed(v.Value(),E),null!==i&&(t+=i),null!==n&&(t+=n),t}],w),v.label=x,v.visProp.withlabel=!0,v.hasLabel=!0),v.point1=p,v.point2=f,v.baseline=m,v.highline=C,P&&(w=s.copyAttributes(o,t.options,"slider","ticks"),s.exists(w.generatelabeltext)||(w.generateLabelText=function(t,i,s){var n=v.point1.Dist(v.point2),r=v._smin,o=v._smax,a=this.getDistanceFromZero(i,t)*(o-r)/n+r;return n<e.eps||Math.abs(a)<e.eps?"0":this.formatLabelText(a)}),g=t.create("ticks",[v.baseline,v.point1.Dist(p)/2,function(t){var s=v.point1.Dist(v.point2),n=v.point1.coords.distance(i.COORDS_BY_USER,t);return s<e.eps?0:n/s*u+h}],w),v.ticks=g),v.remove=function(){_&&t.removeObject(x),t.removeObject(C),t.removeObject(m),t.removeObject(f),t.removeObject(p),n.Point.prototype.remove.call(v)},p.dump=!1,f.dump=!1,m.dump=!1,C.dump=!1,v.elType="slider",v.parents=r,v.subs={point1:p,point2:f,baseLine:m,highLine:C},v.inherits.push(p,f,m,C),P&&(g.dump=!1,v.subs.ticks=g,v.inherits.push(g)),v},t.registerElement("slider",t.createSlider),{createSlider:t.createSlider}}),define("element/measure",["jxg","utils/type","base/element","base/point","base/line","base/ticks"],function(t,e,i,s,n,r){"use strict";return t.createTapemeasure=function(s,n,r){var o,a,l,h,c,d,u,p,f,m,g;return o=n[0],a=n[1],l=e.copyAttributes(r,s.options,"tapemeasure","point1"),p=s.create("point",o,l),l=e.copyAttributes(r,s.options,"tapemeasure","point2"),f=s.create("point",a,l),p.setAttribute({ignoredSnapToPoints:[f]}),f.setAttribute({ignoredSnapToPoints:[p]}),l=e.copyAttributes(r,s.options,"tapemeasure"),h=l.withticks,d=l.precision,(c=l.withlabel)&&(l.withlabel=!0),u=s.create("segment",[p,f],l),c&&(m=r.name&&""!==r.name?r.name+" = ":"",u.label.setText(function(){return m+e.toFixed(p.Dist(f),d)})),h&&(l=e.copyAttributes(r,s.options,"tapemeasure","ticks"),g=s.create("ticks",[u,.1],l),u.inherits.push(g)),u.remove=function(){h&&u.removeTicks(g),s.removeObject(f),s.removeObject(p),i.prototype.remove.call(this)},u.Value=function(){return p.Dist(f)},p.dump=!1,f.dump=!1,u.elType="tapemeasure",u.getParents=function(){return[[p.X(),p.Y()],[f.X(),f.Y()]]},u.subs={point1:p,point2:f},h&&(g.dump=!1),u.methodMap=t.deepCopy(u.methodMap,{Value:"Value"}),u.prepareUpdate().update(),s.isSuspendedUpdate||(u.updateVisibility().updateRenderer(),u.point1.updateVisibility().updateRenderer(),u.point2.updateVisibility().updateRenderer()),u},t.registerElement("tapemeasure",t.createTapemeasure),{createTapemeasure:t.createTapemeasure}}),define("parser/datasource",["jxg","utils/type"],function(t,e){"use strict";return t.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},t.extend(t.DataSource.prototype,{loadFromArray:function(t,i,s){var n,r,o;if(e.isArray(i)&&(this.columnHeaders=i,i=!1),e.isArray(s)&&(this.rowHeaders=s,s=!1),this.data=[],i&&(this.columnHeaders=[]),s&&(this.rowHeaders=[]),e.exists(t)){for(this.data=[],n=0;n<t.length;n++)for(this.data[n]=[],r=0;r<t[n].length;r++)o=t[n][r],this.data[n][r]=parseFloat(o).toString()===o?parseFloat(o):"-"!==o?o:NaN;if(i&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),s)for(this.rowHeaders=[],n=0;n<this.data.length;n++)this.rowHeaders.push(this.data[n][0]),this.data[n]=this.data[n].slice(1)}return this},loadFromTable:function(t,i,s){var n,r,o,a,l;if(e.isArray(i)&&(this.columnHeaders=i,i=!1),e.isArray(s)&&(this.rowHeaders=s,s=!1),this.data=[],i&&(this.columnHeaders=[]),s&&(this.rowHeaders=[]),t=document.getElementById(t),e.exists(t)){for(n=t.getElementsByTagName("tr"),this.data=[],r=0;r<n.length;r++)for(a=n[r].getElementsByTagName("td"),this.data[r]=[],o=0;o<a.length;o++)l=a[o].innerHTML,this.data[r][o]=parseFloat(l).toString()===l?parseFloat(l):"-"!==l?l:NaN;if(i&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),s)for(this.rowHeaders=[],r=0;r<this.data.length;r++)this.rowHeaders.push(this.data[r][0]),this.data[r]=this.data[r].slice(1)}return this},addColumn:function(t,e,i){throw new Error("not implemented")},addRow:function(t,e,i){throw new Error("not implemented")},getColumn:function(t){var i,s=[];if(e.isString(t))for(i=0;i<this.columnHeaders.length;i++)if(t===this.columnHeaders[i]){t=i;break}for(i=0;i<this.data.length;i++)this.data[i].length>t&&(s[i]=parseFloat(this.data[i][t]));return s},getRow:function(t){var i,s;if(e.isString(t))for(s=0;s<this.rowHeaders.length;s++)if(t===this.rowHeaders[s]){t=s;break}for(i=[],s=0;s<this.data[t].length;s++)i[s]=this.data[t][s];return i}}),t.DataSource}),define("base/chart",["jxg","math/numerics","math/statistics","base/constants","base/coords","base/element","parser/datasource","utils/color","utils/type","utils/env","base/curve","base/point","base/text","base/polygon","element/sector","base/transformation","base/line","base/circle"],function(t,e,i,s,n,r,o,a,l,h,c,d,u,p,f,m,g,b){"use strict";return t.Chart=function(t,e,i){var s,n,r,o,a,h;if(this.constructor(t,i),!l.isArray(e)||0===e.length)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],l.isNumber(e[0]))for(n=e,s=[],r=0;r<n.length;r++)s[r]=r+1;else if(1===e.length&&l.isArray(e[0]))for(s=[],h=l.evaluate(n=e[0]).length,r=0;r<h;r++)s[r]=r+1;else 2===e.length&&(h=Math.min(e[0].length,e[1].length),s=e[0].slice(0,h),n=e[1].slice(0,h));if(l.isArray(n)&&0===n.length)throw new Error("JSXGraph: Can't create charts without data.");for(a=i.chartstyle.replace(/ /g,"").split(","),r=0;r<a.length;r++){switch(a[r]){case"bar":o=this.drawBar(t,s,n,i);break;case"line":o=this.drawLine(t,s,n,i);break;case"fit":o=this.drawFit(t,s,n,i);break;case"spline":o=this.drawSpline(t,s,n,i);break;case"pie":o=this.drawPie(t,n,i);break;case"point":o=this.drawPoints(t,s,n,i);break;case"radar":o=this.drawRadar(t,e,i)}this.elements.push(o)}return this.id=this.board.setId(this,"Chart"),this.elements},t.Chart.prototype=new r,t.extend(t.Chart.prototype,{drawLine:function(t,e,i,s){return s.fillcolor="none",s.highlightfillcolor="none",t.create("curve",[e,i],s)},drawSpline:function(t,e,i,s){return s.fillColor="none",s.highlightfillcolor="none",t.create("spline",[e,i],s)},drawFit:function(t,i,s,n){var r=n.degree;return r=Math.max(parseInt(r,10),1)||1,n.fillcolor="none",n.highlightfillcolor="none",t.create("functiongraph",[e.regressionPolynomial(r,i,s)],n)},drawBar:function(t,e,i,s){var n,r,o,a,h,c,d,u,p,f,m=[],g=[],b=function(t,i){return function(){return e[t]()-i*o}},y={fixed:!0,withLabel:!1,visible:!1,name:""};if((p=l.copyAttributes(s,t.options,"chart"))&&p.width)o=p.width;else{if(e.length<=1)o=1;else for(o=e[1]-e[0],n=1;n<e.length-1;n++)o=e[n+1]-e[n]<o?e[n+1]-e[n]:o;o*=.8}for(f=l.copyAttributes(s,t.options,"chart","label"),n=0;n<e.length;n++)l.isFunction(e[n])?(a=b(n,-.5),h=b(n,0),c=b(n,.5)):(a=e[n]-.5*o,h=e[n],c=e[n]+.5*o),l.isFunction(i[n])&&i[n](),d=i[n],"horizontal"===p.dir?(g[0]=t.create("point",[0,a],y),g[1]=t.create("point",[d,a],y),g[2]=t.create("point",[d,c],y),g[3]=t.create("point",[0,c],y),l.exists(p.labels)&&l.exists(p.labels[n])&&(f.anchorY="middle",(r=t.create("text",[d,h,p.labels[n]],f)).visProp.anchorx=function(t){return function(){return t.X()>=0?"left":"right"}}(r))):(g[0]=t.create("point",[a,0],y),g[1]=t.create("point",[a,d],y),g[2]=t.create("point",[c,d],y),g[3]=t.create("point",[c,0],y),l.exists(p.labels)&&l.exists(p.labels[n])&&(f.anchorX="middle",(r=t.create("text",[h,d,p.labels[n]],f)).visProp.anchory=function(t){return function(){return t.Y()>=0?"bottom":"top"}}(r))),l.isArray(p.colors)&&(p.fillcolor=(u=p.colors)[n%u.length]),m[n]=t.create("polygon",g,p),l.exists(p.labels)&&l.exists(p.labels[n])&&(m[n].text=r);return m},drawPoints:function(t,e,i,s){var n,r=[],o=s.infoboxarray;for(s.fixed=!0,s.name="",n=0;n<e.length;n++)s.infoboxtext=!!o&&o[n%o.length],r[n]=t.create("point",[e[n],i[n]],s);return r},drawPie:function(t,e,r){var o,a,h=[],c=[],d=(i.sum(e),r.colors),u=r.highlightcolors,p=r.labels,f=r.radius||4,m=f,g=r.center||[0,0],b=g[0],y=g[1],v=function(t,i,s){return function(){var n,r,o,a=0;for(r=0;r<=t;r++)a+=parseFloat(l.evaluate(e[r]));for(n=a,r=t+1;r<e.length;r++)n+=parseFloat(l.evaluate(e[r]));return o=0!==n?2*Math.PI*a/n:0,m()*Math[i](o)+s}},C=function(t,e){var i=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],r=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];l.exists(this.label)&&(this.label.rendNode.style.fontSize=e*l.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new n(s.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+i*t,this.point1.coords.usrCoords[2]+r*t],this.board),this.fullUpdate()},x=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),C.call(this,1.1,2))},_=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),C.call(this,.9090909,1))},P={fixed:!0,withLabel:!1,visible:!1,name:""};if(!l.isArray(p))for(p=[],o=0;o<e.length;o++)p[o]="";for(l.isFunction(f)||(m=function(){return f}),r.highlightonsector=r.highlightonsector||!1,r.straightfirst=!1,r.straightlast=!1,a=t.create("point",[b,y],P),h[0]=t.create("point",[function(){return m()+b},function(){return y}],P),o=0;o<e.length;o++)h[o+1]=t.create("point",[v(o,"cos",b),v(o,"sin",y)],P),r.name=p[o],r.withlabel=""!==r.name,r.fillcolor=d&&d[o%d.length],r.labelcolor=d&&d[o%d.length],r.highlightfillcolor=u&&u[o%u.length],c[o]=t.create("sector",[a,h[o],h[o+1]],r),r.highlightonsector&&(c[o].hasPoint=c[o].hasPointSector),r.highlightbysize&&(c[o].highlight=x,c[o].noHighlight=_);return{sectors:c,points:h,midpoint:a}},drawRadar:function(e,i,r){var o,a,h,c,d,u,p,f,m,g,b,y,v,C,x,_,P,S,w,E,k,A,T,M,O,N,L,D,j,I,R,B,F,Y,z,X,U,G,H,q=i.length,J=function(){var t,e,i,r,o=l.evaluate(this.visProp.label.offset).slice(0);return t=this.point1.X(),e=this.point2.X(),i=this.point1.Y(),r=this.point2.Y(),e<t&&(o[0]=-o[0]),r<i&&(o[1]=-o[1]),this.setLabelRelativeCoords(o),new n(s.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},V=function(t,i){var s,n,r;return s=e.create("transform",[-(x[i]-v[i]),0],{type:"translate"}),n=e.create("transform",[w/(_[i]+C[i]-(x[i]-v[i])),1],{type:"scale"}),s.melt(n),r=e.create("transform",[t],{type:"rotate"}),s.melt(r),s};if(q<=0)t.debug("No data");else if(l.exists(h=r.paramarray))if((c=h.length)<=1)t.debug("Need more than 1 param");else{for(o=0;o<q;o++)if(c!==i[o].length)return void t.debug("Use data length equal to number of params ("+i[o].length+" != "+c+")");for(d=[],u=[],a=0;a<c;a++)d[a]=i[0][a],u[a]=d[a];for(o=1;o<q;o++)for(a=0;a<c;a++)i[o][a]>d[a]&&(d[a]=i[o][a]),i[o][a]<u[a]&&(u[a]=i[o][a]);for(p=[],f=[],o=0;o<q;o++)p[o]="",f[o]=[];for(m=[],g=[],b=r.startshiftratio||0,y=r.endshiftratio||0,o=0;o<c;o++)m[o]=(d[o]-u[o])*b,g[o]=(d[o]-u[o])*y;if(v=r.startshiftarray||m,C=r.endshiftarray||g,x=r.startarray||u,l.exists(r.start))for(o=0;o<c;o++)x[o]=r.start;if(_=r.endarray||d,l.exists(r.end))for(o=0;o<c;o++)_[o]=r.end;if(v.length===c)if(C.length===c)if(x.length===c){if(_.length===c){for(P=r.labelarray||p,S=r.colors,w=r.radius||10,H=r.strokewidth||1,l.exists(r.highlightonsector)||(r.highlightonsector=!1),E={name:r.name,id:r.id,strokewidth:H,polystrokewidth:r.polystrokewidth||H,strokecolor:r.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:r.fillColor||"#FFFF88",fillopacity:r.fillOpacity||.4,highlightfillcolor:r.highlightFillColor||"#FF7400",highlightstrokecolor:r.highlightStrokeColor||"black",gradient:r.gradient||"none"},M=e.create("point",[A=(k=r.center||[0,0])[0],T=k[1]],{name:"",fixed:!0,withlabel:!1,visible:!1}),Math,Math,N=O=r.startangle||0,L=[],D=[],o=0;o<c;o++)for(N+=2*Math.PI/c,I=w*Math.cos(N)+A,R=w*Math.sin(N)+T,L[o]=e.create("point",[I,R],{name:"",fixed:!0,withlabel:!1,visible:!1}),D[o]=e.create("line",[M,L[o]],{name:h[o],strokeColor:E.strokecolor,strokeWidth:E.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:E.highlightstrokecolor}),D[o].getLabelAnchor=J,j=V(N,o),a=0;a<i.length;a++)f[a][o]=e.create("point",[i[a][o],0],{name:"",fixed:!0,withlabel:!1,visible:!1}),f[a][o].addTransform(f[a][o],j);for(B=[],o=0;o<q;o++)for(E.labelcolor=S&&S[o%S.length],E.strokecolor=S&&S[o%S.length],E.fillcolor=S&&S[o%S.length],B[o]=e.create("polygon",f[o],{withLines:!0,withLabel:!1,fillColor:E.fillcolor,fillOpacity:E.fillopacity,highlightFillColor:E.highlightfillcolor}),a=0;a<c;a++)B[o].borders[a].setAttribute("strokecolor:"+S[o%S.length]),B[o].borders[a].setAttribute("strokewidth:"+E.polystrokewidth);switch(r.legendposition||"none"){case"right":this.legend=e.create("legend",[A+w+(r.legendleftoffset||2),T+w-(r.legendtopoffset||1)],{labels:P,colors:S});break;case"none":break;default:t.debug("Unknown legend position")}if(F=[],r.showcircles){for(Y=[],o=0;o<6;o++)Y[o]=20*o;if(Y[0]="0",(X=(z=r.circlelabelarray||Y).length)<2)return void t.debug("Too less circles");for(U=[],j=V(O+Math.PI/c,0),E.fillcolor="none",E.highlightfillcolor="none",E.strokecolor=r.strokecolor||"black",E.strokewidth=r.circlestrokewidth||.5,E.layer=0,G=(_[0]-x[0])/(X-1),o=0;o<X;o++)U[o]=e.create("point",[x[0]+o*G,0],{name:z[o],size:0,fixed:!0,withLabel:!0,visible:!0}),U[o].addTransform(U[o],j),F[o]=e.create("circle",[M,U[o]],E)}return this.rendNode=B[0].rendNode,{circles:F,lines:D,points:f,midpoint:M,polygons:B}}t.debug("Ends length is not equal to number of parameters")}else t.debug("Starts length is not equal to number of parameters");else t.debug("End shifts length is not equal to number of parameters");else t.debug("Start shifts length is not equal to number of parameters")}else t.debug("Need paramArray attribute")},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){}}),t.createChart=function(e,i,s){var n,r,c,d,u,p,f,m,g,b,y,v,C,x,_,P,S=[],w=h.isBrowser?e.document.getElementById(i[0]):null;if(1===i.length&&l.isString(i[0])){if(l.exists(w)){if(g=l.copyAttributes(s,e.options,"chart"),n=(w=(new o).loadFromTable(i[0],g.withheaders,g.withheaders)).data,u=w.columnHeaders,r=w.rowHeaders,b=g.width,y=g.name,v=g.strokecolor,C=g.fillcolor,x=g.highlightstrokecolor,_=g.highlightfillcolor,e.suspendUpdate(),P=n.length,m=[],g.rows&&l.isArray(g.rows)){for(c=0;c<P;c++)for(d=0;d<g.rows.length;d++)if(g.rows[d]===c||g.withheaders&&g.rows[d]===r[c]){m.push(n[c]);break}}else m=n;for(P=m.length,c=0;c<P;c++){if(f=[],g.chartstyle&&-1!==g.chartstyle.indexOf("bar")){for(f.push(1-(p=b||.8)/2+(c+.5)*p/P),d=1;d<m[c].length;d++)f.push(f[d-1]+1);g.width=p/P}y&&y.length===P?g.name=y[c]:g.withheaders&&(g.name=u[c]),g.strokecolor=v&&v.length===P?v[c]:a.hsv2rgb((c+1)/P*360,.9,.6),g.fillcolor=C&&C.length===P?C[c]:a.hsv2rgb((c+1)/P*360,.9,1),g.highlightstrokecolor=x&&x.length===P?x[c]:a.hsv2rgb((c+1)/P*360,.9,1),g.highlightfillcolor=_&&_.length===P?_[c]:a.hsv2rgb((c+1)/P*360,.9,.6),g.chartstyle&&-1!==g.chartstyle.indexOf("bar")?S.push(new t.Chart(e,[f,m[c]],g)):S.push(new t.Chart(e,[m[c]],g))}e.unsuspendUpdate()}return S}return g=l.copyAttributes(s,e.options,"chart"),new t.Chart(e,i,g)},t.registerElement("chart",t.createChart),t.Legend=function(t,e,i){var r;if(this.constructor(),r=l.copyAttributes(i,t.options,"legend"),this.board=t,this.coords=new n(s.COORDS_BY_USER,e,this.board),this.myAtts={},this.label_array=r.labelarray||r.labels,this.color_array=r.colorarray||r.colors,this.lines=[],this.myAtts.strokewidth=r.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=r.legendstyle||r.style,"vertical"!==this.style)throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(t,r)},t.Legend.prototype=new r,t.Legend.prototype.drawVerticalLegend=function(t,e){var i,r=e.linelength||1,o=(e.rowheight||20)/this.board.unitY,a=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new n(s.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(i=0;i<this.label_array.length;i++)this.myAtts.strokecolor=this.color_array[i],this.myAtts.highlightstrokecolor=this.color_array[i],this.myAtts.name=this.label_array[i],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[i],strokeWidth:this.myAtts.strokewidth},this.lines[i]=t.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-i*o],[this.coords.usrCoords[1]+r,this.coords.usrCoords[2]-i*o]],this.myAtts),this.lines[i].getLabelAnchor=a},t.createLegend=function(e,i,s){var n=[0,0];return l.exists(i)&&2===i.length&&(n=i),new t.Legend(e,n,s)},t.registerElement("legend",t.createLegend),{Chart:t.Chart,Legend:t.Legend,createChart:t.createChart,createLegend:t.createLegend}}),define("base/turtle",["jxg","base/constants","base/element","utils/type","base/curve","base/point","base/line","base/transformation"],function(t,e,i,s,n,r,o,a){"use strict";return t.Turtle=function(t,i,n){var r,o,a;return this.constructor(t,n,e.OBJECT_TYPE_TURTLE,e.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=t,this.visProp.curveType="plot",this._attributes=s.copyAttributes(this.visProp,t.options,"turtle"),delete this._attributes.id,r=0,o=0,a=90,0!==i.length&&(3===i.length?(r=i[0],o=i[1],a=i[2]):2===i.length?s.isArray(i[0])?(r=i[0][0],o=i[0][1],a=i[1]):(r=i[0],o=i[1]):(r=i[0][0],o=i[0][1])),this.init(r,o,a),this.methodMap=s.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},t.Turtle.prototype=new i,t.extend(t.Turtle.prototype,{init:function(t,e,i){var s={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY),this.pos=[t,e],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,s),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],s),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-i),this.board.update()},forward:function(t){if(0===t)return this;var e,i=t*Math.cos(this.dir*Math.PI/180),s=t*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((e=this.board.create("transform",[i,s],{type:"translate"})).applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=i,this.pos[1]+=s,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(t){return this.forward(-t)},right:function(t){return this.dir-=t,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-t*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(t){return this.right(-t)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var t,i;for(t=0;t<this.objects.length;t++)(i=this.objects[t]).type===e.OBJECT_TYPE_CURVE&&(this.board.removeObject(i),this.objects.splice(t,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var t,e=this.objects.length;for(t=0;t<e;t++)this.board.removeObject(this.objects[t]);return this.init(0,0,90),this},setPos:function(t,i){return this.pos=s.isArray(t)?t:[t,i],this.turtleIsHidden||(this.turtle.setPositionDirectly(e.COORDS_BY_USER,[t,i]),this.turtle2.setPositionDirectly(e.COORDS_BY_USER,[t,i+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",t)),this.objects.push(this.curve),this},setPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",t)),this.objects.push(this.curve),this},setHighlightPenColor:function(t){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",t)),this.objects.push(this.curve),this},setAttribute:function(t){var i,n,r,o=this.objects.length;for(i=0;i<o;i++)(n=this.objects[i]).type===e.OBJECT_TYPE_CURVE&&n.setAttribute(t);return r=this.visProp.id,this.visProp=s.deepCopy(this.curve.visProp),this.visProp.id=r,this._attributes=s.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(t,e){return this._attributes[t.toLowerCase()]=e,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var t=this.stack.pop();return this.pos[0]=t[0],this.pos[1]=t[1],this.dir=t[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(t){var e;return s.isArray(t)?(e=Math.atan2(t[1]-this.pos[1],t[0]-this.pos[0]),this.right(this.dir-180*e/Math.PI)):s.isNumber(t)&&this.right(this.dir-t),this},moveTo:function(t){var e;return s.isArray(t)&&(this.turtleIsHidden||((e=this.board.create("transform",[t[0]-this.pos[0],t[1]-this.pos[1]],{type:"translate"})).applyOnce(this.turtle),e.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=t[0],this.pos[1]=t[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(t){return this.forward(t)},bk:function(t){return this.back(t)},lt:function(t){return this.left(t)},rt:function(t){return this.right(t)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(t,i){var s,n,r,o=this.objects.length;for(s=0,n=0;s<o;s++)if((r=this.objects[s]).elementClass===e.OBJECT_CLASS_CURVE){if(n<=t&&t<n+r.numberPoints)return r[i](t-n);n+=r.numberPoints}return this[i]()},X:function(t){return s.exists(t)?this.evalAt(t,"X"):this.pos[0]},Y:function(t){return s.exists(t)?this.evalAt(t,"Y"):this.pos[1]},Z:function(t){return 1},minX:function(){return 0},maxX:function(){var t,i=this.objects.length,s=0;for(t=0;t<i;t++)this.objects[t].elementClass===e.OBJECT_CLASS_CURVE&&(s+=this.objects[t].numberPoints);return s},hasPoint:function(t,i){var s,n;for(s=0;s<this.objects.length;s++)if((n=this.objects[s]).type===e.OBJECT_TYPE_CURVE&&n.hasPoint(t,i))return!0;return!1}}),t.createTurtle=function(e,i,n){var r;return i=i||[],r=s.copyAttributes(n,e.options,"turtle"),new t.Turtle(e,i,r)},t.registerElement("turtle",t.createTurtle),{Turtle:t.Turtle,createTurtle:t.createTurtle}}),define("parser/ca",["jxg","base/constants","base/text","math/math","math/geometry","math/statistics","utils/type","utils/env"],function(t,e,i,s,n,r,o,a){"use strict";return t.CA=function(t,e,i){this.node=t,this.createNode=e,this.parser=i},t.extend(t.CA.prototype,{findMapNode:function(t,e){var i,s,n;if("op_assign"===e.value&&e.children[0].value===t)return e.children[1];if(e.children)for(s=e.children.length,i=0;i<s;++i)if(null!==(n=this.findMapNode(t,e.children[i])))return n;return null},setMath:function(t){var e,i;if(("node_op"!=t.type||"op_add"!=t.value&&"op_sub"!=t.value&&"op_mul"!=t.value&&"op_div"!=t.value&&"op_neg"!=t.value&&"op_execfun"!=t.value&&"op_exp"!=t.value)&&"node_var"!=t.type&&"node_const"!=t.type||(t.isMath=!0),t.children)for(i=t.children.length,e=0;e<i;++e)this.setMath(t.children[e])},deriveElementary:function(t,e){var i,s=t.children[0].value,n=t.children[1];switch(s){case"abs":i=this.createNode("node_op","op_div",n[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0]))]));break;case"sqrt":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(t.type,t.value,o.deepCopy(t.children[0]),o.deepCopy(t.children[1]))));break;case"sin":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),o.deepCopy(n));break;case"cos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),o.deepCopy(n)));break;case"tan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),o.deepCopy(n)),this.createNode("node_const",2)));break;case"exp":i=this.createNode(t.type,t.value,o.deepCopy(t.children[0]),o.deepCopy(t.children[1]));break;case"pow":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",o.deepCopy(t.children[0]),o.deepCopy(t.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[1][0],e),this.createNode("node_op","op_div",o.deepCopy(t.children[1][1]),o.deepCopy(t.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1][1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[o.deepCopy(t.children[1][0])]))));break;case"log":case"ln":i=this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(n[0]));break;case"log2":case"lb":case"ld":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(n[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":i=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),o.deepCopy(n[0])),this.createNode("node_const",.43429448190325176));break;case"asin":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0])))]));break;case"acos":i=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0])))])));break;case"atan":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0]))));break;case"sinh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[o.deepCopy(n[0])]);break;case"cosh":i=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[o.deepCopy(n[0])]);break;case"tanh":i=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[o.deepCopy(n[0])]),this.createNode("node_const",2)));break;case"asinh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"acosh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0])),this.createNode("node_const",1))]));break;case"atanh":i=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",o.deepCopy(n[0]),o.deepCopy(n[0]))));break;default:i=this.createNode("node_const",0),this._error('Derivative of "'+s+'" not yet implemented')}return i},derivative:function(t,e){var i;switch(t.type){case"node_op":switch(t.value){case"op_execfun":i="pow"==t.children[0].value?this.deriveElementary(t,e):this.createNode("node_op","op_mul",this.deriveElementary(t,e),this.derivative(t.children[1][0],e));break;case"op_div":i=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),o.deepCopy(t.children[1])),this.createNode("node_op","op_mul",o.deepCopy(t.children[0]),this.derivative(t.children[1],e))),this.createNode("node_op","op_mul",o.deepCopy(t.children[1]),o.deepCopy(t.children[1])));break;case"op_mul":i=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",o.deepCopy(t.children[0]),this.derivative(t.children[1],e)),this.createNode("node_op","op_mul",this.derivative(t.children[0],e),o.deepCopy(t.children[1])));break;case"op_neg":i=this.createNode("node_op","op_neg",this.derivative(t.children[0],e));break;case"op_add":case"op_sub":i=this.createNode("node_op",t.value,this.derivative(t.children[0],e),this.derivative(t.children[1],e));break;case"op_exp":i=this.createNode("node_op","op_mul",o.deepCopy(t),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(t.children[0],e),this.createNode("node_op","op_div",o.deepCopy(t.children[1]),o.deepCopy(t.children[0]))),this.createNode("node_op","op_mul",this.derivative(t.children[1],e),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[o.deepCopy(t.children[0])]))))}break;case"node_var":i=this.createNode("node_const",t.value===e?1:0);break;case"node_const":i=this.createNode("node_const",0)}return i},expandDerivatives:function(t,e,i){var s,n,r,a,l,h,c,d,u,p;if(!t)return 0;for(this.line=t.line,this.col=t.col,s=t.children.length,n=0;n<s;++n)if(t.children[n]&&t.children[n].type)t.children[n]=this.expandDerivatives(t.children[n],t,i);else if(o.isArray(t.children[n]))for(r=0;r<t.children[n].length;++r)t.children[n][r]&&t.children[n][r].type&&(t.children[n][r]=this.expandDerivatives(t.children[n][r],t,i));switch(t.type){case"node_op":switch(t.value){case"op_execfun":if(t.children[0]&&"D"===t.children[0].value){if("node_var"==t.children[1][0].type?(u=(a=this.findMapNode(t.children[1][0].value,i)).children[0],d=t.children[1].length>=2?t.children[1][1].value:a.children[0][0],l=a.children[1]):(l=t.children[1][0],u=["x"],d=t.children[1].length>=2?t.children[1][1].value:"x"),c=l,(p=t.children[1].length>=3?t.children[1][2].value:1)>=1)for(;p>=1;)c=this.derivative(c,d),c=this.removeTrivialNodes(c),p--;h="node_op"==e.type&&"op_assign"==e.value?this.createNode("node_op","op_map",u,c):c,this.setMath(h),t.type=h.type,t.value=h.value,t.children[0]=h.children[0],t.children[1]=h.children[1]}}}return t},removeTrivialNodes:function(t){var e,i,s,n,r;if(o.isArray(t))for(i=t.length,e=0;e<i;++e)t[e]=this.removeTrivialNodes(t[e]);if("node_op"!=t.type||!t.children)return t;for(i=t.children.length,e=0;e<i;++e){this.mayNotBeSimplified=!1;do{t.children[e]=this.removeTrivialNodes(t.children[e])}while(this.mayNotBeSimplified)}switch(t.value){case"op_map":if(s=t.children[0],"node_var"==(n=t.children[1]).type)for(e=0;e<s.length;++e)if(s[e]==n.value){n.isMath=!0;break}break;case"op_add":if(n=t.children[1],"node_const"==(s=t.children[0]).type&&0===s.value)return n;if("node_const"==n.type&&0===n.value)return s;if("node_const"==s.type&&"node_const"==n.type)return s.value+=n.value,s;break;case"op_mul":if(n=t.children[1],"node_const"==(s=t.children[0]).type&&1==s.value)return n;if("node_const"==n.type&&1==n.value)return s;if("node_const"==s.type&&0===s.value)return s;if("node_const"==n.type&&0===n.value)return n;if("node_const"==n.type&&0===n.value)return n;if("node_op"==s.type&&"op_neg"==s.value&&"node_op"==n.type&&"op_neg"==n.value)return t.children=[s.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==s.value&&"op_neg"!=n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",s.children[0],n)],this.mayNotBeSimplified=!0,t;if("op_neg"!=s.value&&"op_neg"==n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_mul",s,n.children[0])],this.mayNotBeSimplified=!0,t;if("op_div"==s.value&&"node_const"==s.children[0].type&&1==s.children[0].value)return t.type="node_op",t.value="op_div",t.children=[n,s.children[1]],this.mayNotBeSimplified=!0,t;if("op_div"==n.value&&"node_const"==n.children[0].type&&1==n.children[0].value)return t.type="node_op",t.value="op_div",t.children=[s,n.children[1]],this.mayNotBeSimplified=!0,t;if("node_const"!=s.type&&"node_const"==n.type)return t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_const"!=s.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_const"==n.children[0].type)return t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_execfun"!=s.value&&("node_var"==n.type||"node_op"==n.type&&"op_execfun"==n.value))return t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_op"!=s.type&&"node_op"==n.type&&"op_neg"==n.value&&"node_var"==n.children[0].type)return t.children=[n,s],this.mayNotBeSimplified=!0,t;if("node_const"!=s.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return r=n.children[0],n.children[0]=s,t.children=[r,n],this.mayNotBeSimplified=!0,t;if("node_const"!=n.type&&"node_op"==s.type&&"op_mul"==s.value&&"node_const"==s.children[0].type)return t.children=[s.children[0],this.createNode("node_op","op_mul",s.children[1],n)],this.mayNotBeSimplified=!0,t;if("node_const"==s.type&&"node_const"==n.type)return s.value*=n.value,s;if("node_const"==s.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=s.value,n;if(s.hash=this.parser.compile(s),n.hash=this.parser.compile(n),s.hash===n.hash)return t.value="op_exp",t.children[1]=this.createNode("node_const",2),t;if("node_const"==s.type&&"node_op"==n.type&&("op_mul"==n.value||"op_div"==n.value)&&"node_const"==n.children[0].type)return n.children[0].value*=s.value,n;if("node_op"==n.type&&"op_exp"==n.value&&(s.hash||(s.hash=this.parser.compile(s)),n.children[0].hash||(n.children[0].hash=this.parser.compile(n.children[0])),s.hash===n.children[0].hash))return n.children[1]=this.createNode("node_op","op_add",n.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n;if("node_op"==s.type&&"op_exp"==s.value&&"node_op"==n.type&&"op_exp"==n.value&&(s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash===n.children[0].hash))return s.children[1]=this.createNode("node_op","op_add",s.children[1],n.children[1]),this.mayNotBeSimplified=!0,s;break;case"op_sub":if(n=t.children[1],"node_const"==(s=t.children[0]).type&&0===s.value)return t.value="op_neg",t.children[0]=n,t;if("node_const"==n.type&&0===n.value)return s;if("node_const"==s.type&&"node_const"==n.type&&s.value==n.value)return this.createNode("node_const",0);if("node_var"==s.type&&"node_var"==n.type&&s.value==n.value)return this.createNode("node_const",0);if("node_const"==s.type&&"node_const"==n.type)return s.value-=n.value,s;if("node_op"==s.type&&"op_mul"==s.value&&"node_op"==n.type&&"op_mul"==n.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash===n.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",s.children[0],n.children[0]),s.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",s.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,t;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),n.children[0]),s],this.mayNotBeSimplified=!0,t;break;case"op_neg":if("node_const"==(s=t.children[0]).type&&0===s.value)return s;if("node_op"==s.type&&"op_neg"==s.value)return s.children[0];break;case"op_div":if(n=t.children[1],"node_const"==(s=t.children[0]).type&&"node_const"==n.type&&s.value==n.value&&0!==s.value)return s.value=1,s;if("node_const"==s.type&&0===s.value&&"node_const"==n.type&&0!==n.value)return s.value=0,s;if("node_const"==s.type&&0===s.value&&("node_op"==n.type||"node_var"==n.type))return t.type="node_const",t.value=0,t;if("node_var"==s.type&&"node_var"==n.type&&s.value==n.value)return this.createNode("node_const",1);if("node_const"==s.type&&0!==s.value&&"node_const"==n.type&&0===n.value)return s.value=s.value>0?1/0:-1/0,s;if("node_op"==s.type&&"op_neg"==s.value&&"node_op"==n.type&&"op_neg"==n.value)return t.children=[s.children[0],n.children[0]],this.mayNotBeSimplified=!0,t;if("op_neg"==s.value&&"op_neg"!=n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",s.children[0],n)],this.mayNotBeSimplified=!0,t;if("op_neg"!=s.value&&"op_neg"==n.value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_op","op_div",s,n.children[0])],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_exp"==s.value&&(n.hash||(n.hash=this.parser.compile(n)),s.children[0].hash||(s.children[0].hash=this.parser.compile(s.children[0])),n.hash===s.children[0].hash))return s.children[1]=this.createNode("node_op","op_sub",s.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,s;if("node_const"!=n.type&&"node_op"==s.type&&"op_mul"==s.value&&"node_const"==s.children[0].type)return t.value="op_mul",t.children=[s.children[0],this.createNode("node_op","op_div",s.children[1],n)],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_exp"==s.value&&"node_op"==n.type&&"op_exp"==n.value&&(s.children[0].hash=this.parser.compile(s.children[0]),n.children[0].hash=this.parser.compile(n.children[0]),s.children[0].hash===n.children[0].hash))return s.children[1]=this.createNode("node_op","op_sub",s.children[1],n.children[1]),this.mayNotBeSimplified=!0,s;break;case"op_exp":if(s=t.children[0],"node_const"==(n=t.children[1]).type&&0===n.value)return n.value=1,n;if("node_const"==n.type&&1==n.value)return s;if("node_const"==s.type&&1==s.value)return s;if("node_const"==s.type&&0===s.value&&"node_const"==n.type&&0!==n.value)return s;if("node_op"==s.type&&"op_exp"==s.value)return t.children=[s.children[0],this.createNode("node_op","op_mul",s.children[1],n)],t}switch(t.value){case"op_add":if(n=t.children[1],"node_const"==(s=t.children[0]).type&&"node_const"==n.type&&s.value==n.value)return s.value+=n.value,s;if("node_var"==s.type&&"node_var"==n.type&&s.value==n.value)return t.children[0]=this.createNode("node_const",2),t.value="op_mul",t;if("node_op"==s.type&&"op_neg"==s.value)return t.value="op_sub",t.children[0]=n,t.children[1]=s.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==n.type&&"op_neg"==n.value)return t.value="op_sub",t.children[1]=n.children[0],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&"node_op"==n.type&&"op_mul"==n.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.children[1].hash=this.parser.compile(n.children[1]),s.children[1].hash===n.children[1].hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",s.children[0],n.children[0]),s.children[1]],this.mayNotBeSimplified=!0,t;if("node_op"==s.type&&"op_mul"==s.value&&(s.children[1].hash=this.parser.compile(s.children[1]),n.hash=this.parser.compile(n),s.children[1].hash===n.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",s.children[0],this.createNode("node_const",1)),n],this.mayNotBeSimplified=!0,t;if("node_op"==n.type&&"op_mul"==n.value&&(n.children[1].hash=this.parser.compile(n.children[1]),s.hash=this.parser.compile(s),n.children[1].hash===s.hash))return t.value="op_mul",t.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),n.children[0]),s],this.mayNotBeSimplified=!0,t;break;case"op_sub":if(s=t.children[0],"node_op"==(n=t.children[1]).type&&"op_neg"==n.value)return t.value="op_add",t.children[1]=n.children[0],this.mayNotBeSimplified=!0,t;break;case"op_execfun":return this.simplifyElementary(t)}return t},simplifyElementary:function(t){var e=t.children[1];if(0==e.length)return t;switch(t.children[0].value){case"sin":case"tan":if("node_const"==e[0].type&&0===e[0].value)return t.type="node_const",t.value=0,t;if("node_var"==e[0].type&&"PI"==e[0].value)return t.type="node_const",t.value=0,t;if("node_op"==e[0].type&&"op_mul"==e[0].value&&"node_const"==e[0].children[0].type&&e[0].children[0].value%1==0&&"node_var"==e[0].children[1].type&&"PI"==e[0].children[1].value)return t.type="node_const",t.value=0,t;break;case"cos":if("node_const"==e[0].type&&0===e[0].value)return t.type="node_const",t.value=1,t;if("node_var"==e[0].type&&"PI"==e[0].value)return t.type="node_op",t.value="op_neg",t.children=[this.createNode("node_const",1)],t;break;case"exp":if("node_const"==e[0].type&&0===e[0].value)return t.type="node_const",t.value=1,t;break;case"pow":if("node_const"==e[1].type&&0===e[1].value)return t.type="node_const",t.value=1,t}return t}}),t.CA}),define("utils/dump",["jxg","utils/type"],function(t,e){"use strict";return t.Dump={addMarkers:function(t,i,s){var n,r,o;for(n in e.isArray(i)||(i=[i]),e.isArray(s)||(s=[s]),r=Math.min(i.length,s.length),i.length=r,s.length=r,t.objects)if(t.objects.hasOwnProperty(n))for(o=0;o<r;o++)t.objects[n][i[o]]=s[o]},deleteMarkers:function(t,i){var s,n,r;for(s in e.isArray(i)||(i=[i]),i.length=n=i.length,t.objects)if(t.objects.hasOwnProperty(s))for(r=0;r<n;r++)delete t.objects[s][i[r]]},str:function(t){return"string"==typeof t&&"function"!==t.substr(0,7)&&(t='"'+t+'"'),t},minimizeObject:function(i,s){var n,r,o,a={},l=e.deepCopy(i),h=[];for(o=1;o<arguments.length;o++)h.push(arguments[o]);for(a=e.deepCopy(a,t.Options.elements,!0),o=h.length;o>0;o--)a=e.deepCopy(a,h[o-1],!0);for(n in a)a.hasOwnProperty(n)&&(r=n.toLowerCase(),"object"!=typeof a[n]&&a[n]===l[r]&&(console.log("delete",n),delete l[r]));return l},prepareAttributes:function(e,i){var s,n;for(n in s=this.minimizeObject(i.getAttributes(),t.Options[i.elType]),i.subs)i.subs.hasOwnProperty(n)&&(s[n]=this.minimizeObject(i.subs[n].getAttributes(),t.Options[i.elType][n],t.Options[i.subs[n].elType]),s[n].id=i.subs[n].id,s[n].name=i.subs[n].name);return s.id=i.id,s.name=i.name,s},setBoundingBox:function(t,e,i){return t.push({obj:i,method:"setBoundingBox",params:[e.getBoundingBox(),!0]}),t},dump:function(t){var i,s,n,r,o=[],a=[],l=t.objectsList.length;for(this.addMarkers(t,"dumped",!1),i=0;i<l;i++)if(n={},!(s=t.objectsList[i]).dumped&&s.dump){for(n.type=s.getType(),n.parents=s.getParents().slice(),"point"===n.type&&1===n.parents[0]&&(n.parents=n.parents.slice(1)),r=0;r<n.parents.length;r++)e.isString(n.parents[r])&&"'"!==n.parents[r][0]&&'"'!==n.parents[r][0]?n.parents[r]='"'+n.parents[r]+'"':e.isArray(n.parents[r])&&(n.parents[r]="["+n.parents[r].toString()+"]");n.attributes=this.prepareAttributes(t,s),"glider"===n.type&&s.onPolygon&&o.push({obj:s.id,prop:"onPolygon",val:!0}),a.push(n)}return this.deleteMarkers(t,"dumped"),{elements:a,props:o,methods:[]}},arrayToParamStr:function(t,e){var i,s=[];for(i=0;i<t.length;i++)s.push(e.call(this,t[i]));return s.join(", ")},toJCAN:function(t){var i,s,n;switch(typeof t){case"object":if(t){if(s=[],e.isArray(t)){for(i=0;i<t.length;i++)s.push(this.toJCAN(t[i]));return"["+s.join(",")+"]"}for(n in t)t.hasOwnProperty(n)&&s.push(n+": "+this.toJCAN(t[n]));return"<<"+s.join(", ")+">> "}return"null";case"string":return"'"+t.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return t.toString();case"null":return"null"}},toJessie:function(t){var e,i,s=this.dump(t),n=[];for(s.methods=this.setBoundingBox(s.methods,t,"$board"),i=s.elements,e=0;e<i.length;e++)i[e].attributes.name.length>0&&n.push("// "+i[e].attributes.name),n.push("s"+e+" = "+i[e].type+"("+i[e].parents.join(", ")+") "+this.toJCAN(i[e].attributes).replace(/\n/,"\\n")+";"),n.push("");for(e=0;e<s.methods.length;e++)n.push(s.methods[e].obj+"."+s.methods[e].method+"("+this.arrayToParamStr(s.methods[e].params,this.toJCAN)+");"),n.push("");for(e=0;e<s.props.length;e++)n.push(s.props[e].obj+"."+s.props[e].prop+" = "+this.toJCAN(s.props[e].val)+";"),n.push("");return n.join("\n")},toJavaScript:function(t){var i,s,n=this.dump(t),r=[];for(n.methods=this.setBoundingBox(n.methods,t,"board"),s=n.elements,i=0;i<s.length;i++)r.push('board.create("'+s[i].type+'", ['+s[i].parents.join(", ")+"], "+e.toJSON(s[i].attributes)+");");for(i=0;i<n.methods.length;i++)r.push(n.methods[i].obj+"."+n.methods[i].method+"("+this.arrayToParamStr(n.methods[i].params,e.toJSON)+");"),r.push("");for(i=0;i<n.props.length;i++)r.push(n.props[i].obj+"."+n.props[i].prop+" = "+e.toJSON(n.props[i].val)+";"),r.push("");return r.join("\n")}},t.Dump}),define("element/comb",["jxg","options","utils/type","base/constants","base/line","base/polygon","base/point"],function(t,e,i,s,n,r,o){"use strict";return t.createComb=function(t,e,s){var n,r,a,l,h,c,d,u,p;if(2!==e.length)throw h=e.map(function(t){return"'"+typeof t+"'"}),new Error("JSXGraph: Can't create comb with parent types "+h.join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(i.isArray(e[0])&&e[0].length>1)l=i.copyAttributes(s,t.options,"comb","point1"),n=t.create("point",e[0],l);else if(i.isString(e[0])||i.isPoint(e[0]))n=t.select(e[0]);else if(i.isFunction(e[0])&&i.isPoint(e[0]()))n=e[0]();else{if(!(i.isFunction(e[0])&&e[0]().length&&e[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");l=i.copyAttributes(s,t.options,"comb","point1"),n=o.createPoint(t,e[0](),l)}if(i.isArray(e[1])&&e[1].length>1)l=i.copyAttributes(s,t.options,"comb","point2"),r=t.create("point",e[1],l);else if(i.isString(e[1])||i.isPoint(e[1]))r=t.select(e[1]);else if(i.isFunction(e[1])&&i.isPoint(e[1]()))r=e[1]();else{if(!(i.isFunction(e[1])&&e[1]().length&&e[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof e[0]+"' and '"+typeof e[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");l=i.copyAttributes(s,t.options,"comb","point2"),r=o.createPoint(t,e[1](),l)}return l=i.copyAttributes(s,t.options,"comb","curve"),a=t.create("curve",[[0],[0]],l),l=i.copyAttributes(s,t.options,"comb"),c=l.frequency,d=-l.angle,u=l.width,l.reverse&&(p=n,n=r,r=p,d=-d),a.updateDataArray=function(){var t,e,i,s=0,o=n.Dist(r),a=Math.cos(d),l=Math.sin(d),h=(r.X()-n.X())/o,p=(r.Y()-n.Y())/o;for(a*=u/Math.abs(l),l*=u/Math.abs(l),this.dataX=[],this.dataY=[];s<o;)t=n.X()+h*s,e=n.Y()+p*s,l*=i=Math.min(a,o-s)/Math.abs(a),a*=i,this.dataX.push(t),this.dataY.push(e),this.dataX.push(t+h*a+p*l),this.dataY.push(e-h*l+p*a),this.dataX.push(NaN),this.dataY.push(NaN),s+=c},a},t.registerElement("comb",t.createComb),{createComb:t.createComb}}),define("element/slopetriangle",["jxg","options","utils/type","base/constants","base/line","base/polygon","base/point","base/element"],function(t,e,i,s,n,r,o,a){"use strict";var l={removeSlopeTriangle:function(){r.Polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},Value:function(){return this.tangent.getSlope()}};return t.createSlopeTriangle=function(e,n,r){var o,a,h,c,d,u,p,f,m,g=!1;if(1===n.length&&n[0].type===s.OBJECT_TYPE_TANGENT)h=(a=n[0]).glider;else if(1===n.length&&n[0].type===s.OBJECT_TYPE_GLIDER)h=n[0],m=i.copyAttributes(r,e.options,"slopetriangle","tangent"),a=e.create("tangent",[h],m),g=!0;else{if(2!==n.length||n[0].elementClass!==s.OBJECT_CLASS_LINE||!i.isPoint(n[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof n[0]+"'.");a=n[0],h=n[1]}return m=i.copyAttributes(r,e.options,"slopetriangle","basepoint"),p=e.create("point",[function(){return[h.X()+1,h.Y()]}],m),m=i.copyAttributes(r,e.options,"slopetriangle","baseline"),u=e.create("line",[h,p],m),m=i.copyAttributes(r,e.options,"slopetriangle","glider"),c=e.create("glider",[h.X()+1,h.Y(),u],m),m=i.copyAttributes(r,e.options,"slopetriangle","toppoint"),d=e.create("point",[function(){return[c.X(),c.Y()+(c.X()-h.X())*a.getSlope()]}],m),(m=i.copyAttributes(r,e.options,"slopetriangle")).borders=i.copyAttributes(m.borders,e.options,"slopetriangle","borders"),(o=e.create("polygon",[h,c,d],m)).Value=l.Value,o.tangent=a,o._isPrivateTangent=g,o.borders[2].setArrow(!1,!1),m=i.copyAttributes(r,e.options,"slopetriangle","label"),(f=e.create("text",[function(){return c.X()+.1},function(){return.5*(c.Y()+d.Y())},function(){return""}],m))._setText(function(){return i.toFixed(o.Value(),i.evaluate(f.visProp.digits))}),f.fullUpdate(),o.glider=c,o.basepoint=p,o.baseline=u,o.toppoint=d,o.label=f,o.subs={glider:c,basePoint:p,baseLine:u,topPoint:d,label:f},o.inherits.push(c,p,u,d,f),o.methodMap=t.deepCopy(o.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),o.remove=l.removeSlopeTriangle,o},t.registerElement("slopetriangle",t.createSlopeTriangle),{createSlopeTriangle:t.createSlopeTriangle}}),define("element/checkbox",["jxg","utils/env","utils/type"],function(t,e,i){"use strict";var s=function(){this._value=this.rendNodeCheckbox.checked,this.board.update()};return t.createCheckbox=function(n,r,o){var a,l=i.copyAttributes(o,n.options,"checkbox");return(a=n.create("text",[r[0],r[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],l)).type=i.OBJECT_TYPE_CHECKBOX,a.rendNodeCheckbox=a.rendNode.childNodes[0].childNodes[0],a.rendNodeLabel=a.rendNode.childNodes[0].childNodes[1],a.rendNodeTag=a.rendNodeCheckbox,a.rendNodeTag.disabled=!!l.disabled,a.rendNodeLabel.innerHTML=r[2],a.rendNodeCheckbox.id=a.rendNode.id+"_checkbox",a.rendNodeLabel.id=a.rendNode.id+"_label",a.rendNodeLabel.setAttribute("for",a.rendNodeCheckbox.id),a.visPropOld.fontsize="0px",n.renderer.updateTextStyle(a,!1),a.rendNodeCheckbox.checked=l.checked,a._value=l.checked,a.Value=function(){return this._value},a.update=function(){return this.needsUpdate&&(t.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},e.addEvent(a.rendNodeCheckbox,"change",s,a),a},t.registerElement("checkbox",t.createCheckbox),{createCheckbox:t.createCheckbox}}),define("element/input",["jxg","utils/env","utils/type"],function(t,e,i){"use strict";var s=function(t){this._value=this.rendNodeInput.value,this.board.update()};return t.createInput=function(n,r,o){var a,l=i.copyAttributes(o,n.options,"input");return(a=n.create("text",[r[0],r[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+l.maxlength+'" style="width:100%"/></span>'],l)).type=i.OBJECT_TYPE_INPUT,a.rendNodeLabel=a.rendNode.childNodes[0].childNodes[0],a.rendNodeInput=a.rendNode.childNodes[0].childNodes[1],a.rendNodeLabel.innerHTML=r[3],a.rendNodeInput.value=r[2],a.rendNodeTag=a.rendNodeInput,a.rendNodeTag.disabled=!!l.disabled,a.rendNodeLabel.id=a.rendNode.id+"_label",a.rendNodeInput.id=a.rendNode.id+"_input",a._value=r[2],a.update=function(){return this.needsUpdate&&(t.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},a.Value=function(){return this._value},e.addEvent(a.rendNodeInput,"input",s,a),e.addEvent(a.rendNodeInput,"mousedown",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),e.addEvent(a.rendNodeInput,"touchstart",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),e.addEvent(a.rendNodeInput,"pointerdown",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),a.visPropOld.fontsize="0px",n.renderer.updateTextStyle(a,!1),a},t.registerElement("input",t.createInput),{createInput:t.createInput}}),define("element/button",["jxg","utils/env","utils/type"],function(t,e,i){"use strict";var s=function(){this._handler&&this._handler(),this.board.update()};return t.createButton=function(n,r,o){var a,l=i.copyAttributes(o,n.options,"button");return(a=n.create("text",[r[0],r[1],'<button type="button" style="width:100%;"></button>'],l)).type=i.OBJECT_TYPE_BUTTON,a.rendNodeButton=a.rendNode.childNodes[0],a.rendNodeButton.id=a.rendNode.id+"_button",a.rendNodeButton.innerHTML=r[2],a.rendNodeTag=a.rendNodeButton,a.rendNodeTag.disabled=!!l.disabled,a.visPropOld.fontsize="0px",n.renderer.updateTextStyle(a,!1),r[3]&&(i.isString(r[3])?(a._jc=new t.JessieCode,a._jc.use(n),a._handler=function(){a._jc.parse(r[3])}):a._handler=r[3]),e.addEvent(a.rendNodeButton,"click",s,a),e.addEvent(a.rendNodeButton,"mousedown",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),e.addEvent(a.rendNodeButton,"touchstart",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),e.addEvent(a.rendNodeButton,"pointerdown",function(t){i.exists(t.stopPropagation)&&t.stopPropagation()},a),a},t.registerElement("button",t.createButton),{createButton:t.createButton}}),define("../build/core.deps.js",["jxg","utils/env","base/constants","utils/type","utils/xml","utils/event","utils/expect","math/math","math/qdt","math/numerics","math/statistics","math/symbolic","math/geometry","math/poly","math/complex","renderer/abstract","renderer/no","reader/file","parser/geonext","base/board","options","jsxgraph","base/element","base/coords","base/point","base/line","base/group","base/circle","element/conic","base/polygon","base/curve","element/arc","element/sector","base/composition","element/composition","element/locus","base/text","base/image","element/slider","element/measure","base/chart","base/transformation","base/turtle","utils/color","base/ticks","utils/zip","utils/base64","utils/uuid","utils/encoding","server/server","parser/datasource","parser/jessiecode","parser/ca","utils/dump","renderer/svg","renderer/vml","renderer/canvas","renderer/no","element/comb","element/slopetriangle","element/checkbox","element/input","element/button"],function(t,e){"use strict";return e.isBrowser?window.JXG=t:e.isNode()&&"object"==typeof module?module.exports=t:e.isWebWorker()&&(self.JXG=t),t}),require("../build/core.deps.js")});
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},crnd:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},yLV6:function(e,t,n){var i;!function(s,r,o,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=r.createElement("div"),u="function",d=Math.round,p=Math.abs,m=Date.now;function f(e,t,n){return setTimeout(x(e,n),t)}function g(e,t,n){return!!Array.isArray(e)&&(_(e,n[t],n),!0)}function _(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function b(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=s.console&&(s.console.warn||s.console.log);return r&&r.call(s.console,i,n),e.apply(this,arguments)}}l="function"!=typeof Object.assign?function(e){if(e===a||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:Object.assign;var y=b(function(e,t,n){for(var i=Object.keys(t),s=0;s<i.length;)(!n||n&&e[i[s]]===a)&&(e[i[s]]=t[i[s]]),s++;return e},"extend","Use `assign`."),v=b(function(e,t){return y(e,t,!0)},"merge","Use `assign`.");function w(e,t,n){var i,s=t.prototype;(i=e.prototype=Object.create(s)).constructor=e,i._super=s,n&&l(i,n)}function x(e,t){return function(){return e.apply(t,arguments)}}function C(e,t){return typeof e==u?e.apply(t&&t[0]||a,t):e}function E(e,t){return e===a?t:e}function k(e,t,n){_(A(t),function(t){e.addEventListener(t,n,!1)})}function S(e,t,n){_(A(t),function(t){e.removeEventListener(t,n,!1)})}function T(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function I(e,t){return e.indexOf(t)>-1}function A(e){return e.trim().split(/\s+/g)}function D(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function R(e){return Array.prototype.slice.call(e,0)}function O(e,t,n){for(var i=[],s=[],r=0;r<e.length;){var o=t?e[r][t]:e[r];D(s,o)<0&&i.push(e[r]),s[r]=o,r++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function P(e,t){for(var n,i,s=t[0].toUpperCase()+t.slice(1),r=0;r<c.length;){if((i=(n=c[r])?n+s:t)in e)return i;r++}return a}var N=1;function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||s}var F="ontouchstart"in s,L=P(s,"PointerEvent")!==a,V=F&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=25,j=1,H=4,B=8,$=1,U=2,q=4,G=8,W=16,K=U|q,Z=G|W,Q=K|Z,X=["x","y"],Y=["clientX","clientY"];function J(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){C(e.options.enable,[e])&&n.handler(t)},this.init()}function ee(e,t,n){var i=n.pointers.length,s=n.changedPointers.length,r=t&j&&i-s==0,o=t&(H|B)&&i-s==0;n.isFirst=!!r,n.isFinal=!!o,r&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,s=i.length;n.firstInput||(n.firstInput=te(t)),s>1&&!n.firstMultiple?n.firstMultiple=te(t):1===s&&(n.firstMultiple=!1);var r=n.firstInput,o=n.firstMultiple,l=o?o.center:r.center,c=t.center=ne(i);t.timeStamp=m(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=oe(l,c),t.distance=re(l,c),function(e,t){var n=t.center,i=e.offsetDelta||{},s=e.prevDelta||{},r=e.prevInput||{};t.eventType!==j&&r.eventType!==H||(s=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=s.x+(n.x-i.x),t.deltaY=s.y+(n.y-i.y)}(n,t),t.offsetDirection=se(t.deltaX,t.deltaY);var h,u,d=ie(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,t.scale=o?(h=o.pointers,re((u=i)[0],u[1],Y)/re(h[0],h[1],Y)):1,t.rotation=o?function(e,t){return oe(i[1],i[0],Y)+oe(e[1],e[0],Y)}(o.pointers):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,s,r,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=B&&(l>z||o.velocity===a)){var c=t.deltaX-o.deltaX,h=t.deltaY-o.deltaY,u=ie(l,c,h);i=u.x,s=u.y,n=p(u.x)>p(u.y)?u.x:u.y,r=se(c,h),e.lastInterval=t}else n=o.velocity,i=o.velocityX,s=o.velocityY,r=o.direction;t.velocity=n,t.velocityX=i,t.velocityY=s,t.direction=r}(n,t);var f=e.element;T(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function te(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)},n++;return{timeStamp:m(),pointers:t,center:ne(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ne(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var n=0,i=0,s=0;s<t;)n+=e[s].clientX,i+=e[s].clientY,s++;return{x:d(n/t),y:d(i/t)}}function ie(e,t,n){return{x:t/e||0,y:n/e||0}}function se(e,t){return e===t?$:p(e)>=p(t)?e<0?U:q:t<0?G:W}function re(e,t,n){n||(n=X);var i=t[n[0]]-e[n[0]],s=t[n[1]]-e[n[1]];return Math.sqrt(i*i+s*s)}function oe(e,t,n){return n||(n=X),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}J.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(M(this.element),this.evWin,this.domHandler)}};var ae={mousedown:j,mousemove:2,mouseup:H},le="mousedown",ce="mousemove mouseup";function he(){this.evEl=le,this.evWin=ce,this.pressed=!1,J.apply(this,arguments)}w(he,J,{handler:function(e){var t=ae[e.type];t&j&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=H),this.pressed&&(t&H&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var ue={pointerdown:j,pointermove:2,pointerup:H,pointercancel:B,pointerout:B},de={2:"touch",3:"pen",4:"mouse",5:"kinect"},pe="pointerdown",me="pointermove pointerup pointercancel";function fe(){this.evEl=pe,this.evWin=me,J.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(pe="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),w(fe,J,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),s=ue[i],r=de[e.pointerType]||e.pointerType,o="touch"==r,a=D(t,e.pointerId,"pointerId");s&j&&(0===e.button||o)?a<0&&(t.push(e),a=t.length-1):s&(H|B)&&(n=!0),a<0||(t[a]=e,this.callback(this.manager,s,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(a,1))}});var ge={touchstart:j,touchmove:2,touchend:H,touchcancel:B},_e="touchstart",be="touchstart touchmove touchend touchcancel";function ye(){this.evTarget=_e,this.evWin=be,this.started=!1,J.apply(this,arguments)}w(ye,J,{handler:function(e){var t=ge[e.type];if(t===j&&(this.started=!0),this.started){var n=(function(e,t){var n=R(e.touches),i=R(e.changedTouches);return t&(H|B)&&(n=O(n.concat(i),"identifier",!0)),[n,i]}).call(this,e,t);t&(H|B)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ve={touchstart:j,touchmove:2,touchend:H,touchcancel:B},we="touchstart touchmove touchend touchcancel";function xe(){this.evTarget=we,this.targetIds={},J.apply(this,arguments)}w(xe,J,{handler:function(e){var t=ve[e.type],n=(function(e,t){var n=R(e.touches),i=this.targetIds;if(t&(2|j)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var s,r,o=R(e.changedTouches),a=[],l=this.target;if(r=n.filter(function(e){return T(e.target,l)}),t===j)for(s=0;s<r.length;)i[r[s].identifier]=!0,s++;for(s=0;s<o.length;)i[o[s].identifier]&&a.push(o[s]),t&(H|B)&&delete i[o[s].identifier],s++;return a.length?[O(r.concat(a),"identifier",!0),a]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var Ce=2500;function Ee(){J.apply(this,arguments);var e=x(this.handler,this);this.touch=new xe(this.manager,e),this.mouse=new he(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ke(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)},Ce)}}w(Ee,J,{handler:function(e,t,n){var i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(e,t){e&j?(this.primaryTouch=t.changedPointers[0].identifier,ke.call(this,t)):e&(H|B)&&ke.call(this,t)}).call(this,t,n);else if(i&&(function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var s=this.lastTouches[i],r=Math.abs(t-s.x),o=Math.abs(n-s.y);if(r<=25&&o<=25)return!0}return!1}).call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Se=P(h.style,"touchAction"),Te=Se!==a,Ie=function(){if(!Te)return!1;var e={},t=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||s.CSS.supports("touch-action",n)}),e}();function Ae(e,t){this.manager=e,this.set(t)}Ae.prototype={set:function(e){"compute"==e&&(e=this.compute()),Te&&this.manager.element.style&&Ie[e]&&(this.manager.element.style[Se]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return _(this.manager.recognizers,function(t){C(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(I(e,"none"))return"none";var t=I(e,"pan-x"),n=I(e,"pan-y");return t&&n?"none":t||n?t?"pan-x":"pan-y":I(e,"manipulation")?"manipulation":"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,s=I(i,"none")&&!Ie.none,r=I(i,"pan-y")&&!Ie["pan-y"],o=I(i,"pan-x")&&!Ie["pan-x"];if(s&&1===e.pointers.length&&e.distance<2&&e.deltaTime<250)return;if(!o||!r)return s||r&&n&K||o&&n&Z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var De=1,Re=2,Oe=4,Pe=8,Ne=Pe,Me=16;function Fe(e){this.options=l({},this.defaults,e||{}),this.id=N++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=De,this.simultaneous={},this.requireFail=[]}function Le(e){return e&Me?"cancel":e&Pe?"end":e&Oe?"move":e&Re?"start":""}function Ve(e){return e==W?"down":e==G?"up":e==U?"left":e==q?"right":""}function ze(e,t){var n=t.manager;return n?n.get(e):e}function je(){Fe.apply(this,arguments)}function He(){je.apply(this,arguments),this.pX=null,this.pY=null}function Be(){je.apply(this,arguments)}function $e(){Fe.apply(this,arguments),this._timer=null,this._input=null}function Ue(){je.apply(this,arguments)}function qe(){je.apply(this,arguments)}function Ge(){Fe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function We(e,t){return(t=t||{}).recognizers=E(t.recognizers,We.defaults.preset),new Ke(e,t)}function Ke(e,t){var n;this.options=l({},We.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(L?fe:V?xe:F?Ee:he))(n,ee),this.touchAction=new Ae(this,this.options.touchAction),Ze(this,!0),_(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Ze(e,t){var n,i=e.element;i.style&&(_(e.options.cssProps,function(s,r){n=P(i.style,r),t?(e.oldCssProps[n]=i.style[n],i.style[n]=s):i.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}Fe.prototype={defaults:{},set:function(e){return l(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(g(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ze(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return g(e,"dropRecognizeWith",this)?this:(e=ze(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(g(e,"requireFailure",this))return this;var t=this.requireFail;return-1===D(t,e=ze(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this))return this;e=ze(e,this);var t=D(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<Pe&&i(t.options.event+Le(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=Pe&&i(t.options.event+Le(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|De)))return!1;e++}return!0},recognize:function(e){var t=l({},e);if(!C(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(Ne|Me|32)&&(this.state=De),this.state=this.process(t),this.state&(Re|Oe|Pe|Me)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(je,Fe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(Re|Oe),s=this.attrTest(e);return i&&(n&B||!s)?t|Me:i||s?n&H?t|Pe:t&Re?t|Oe:Re:32}}),w(He,je,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var e=this.options.direction,t=[];return e&K&&t.push("pan-y"),e&Z&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,s=e.direction,r=e.deltaX,o=e.deltaY;return s&t.direction||(t.direction&K?(s=0===r?$:r<0?U:q,n=r!=this.pX,i=Math.abs(e.deltaX)):(s=0===o?$:o<0?G:W,n=o!=this.pY,i=Math.abs(e.deltaY))),e.direction=s,n&&i>t.threshold&&s&t.direction},attrTest:function(e){return je.prototype.attrTest.call(this,e)&&(this.state&Re||!(this.state&Re)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ve(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(Be,je,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Re)},emit:function(e){1!==e.scale&&(e.additionalEvent=this.options.event+(e.scale<1?"in":"out")),this._super.emit.call(this,e)}}),w($e,Fe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,s=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(H|B)&&!s)this.reset();else if(e.eventType&j)this.reset(),this._timer=f(function(){this.state=Ne,this.tryEmit()},t.time,this);else if(e.eventType&H)return Ne;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Ne&&(e&&e.eventType&H?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),w(Ue,je,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Re)}}),w(qe,je,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|Z,pointers:1},getTouchAction:function(){return He.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(K|Z)?t=e.overallVelocity:n&K?t=e.overallVelocityX:n&Z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&e.eventType&H},emit:function(e){var t=Ve(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Ge,Fe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,s=e.deltaTime<t.time;if(this.reset(),e.eventType&j&&0===this.count)return this.failTimeout();if(i&&s&&n){if(e.eventType!=H)return this.failTimeout();var r=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||re(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&r?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Ne,this.tryEmit()},t.interval,this),Re):Ne}return 32},failTimeout:function(){return this._timer=f(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ne&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),We.VERSION="2.0.7",We.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ue,{enable:!1}],[Be,{enable:!1},["rotate"]],[qe,{direction:K}],[He,{direction:K},["swipe"]],[Ge],[Ge,{event:"doubletap",taps:2},["tap"]],[$e]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ke.prototype={set:function(e){return l(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,s=t.curRecognizer;(!s||s&&s.state&Ne)&&(s=t.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===t.stopped||s&&n!=s&&!n.canRecognizeWith(s)?n.reset():n.recognize(e),!s&&n.state&(Re|Oe|Pe)&&(s=t.curRecognizer=n),r++}},get:function(e){if(e instanceof Fe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(g(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(g(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=D(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return _(A(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==a){var n=this.handlers;return _(A(e),function(e){t?n[e]&&n[e].splice(D(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=r.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&Ze(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(We,{INPUT_START:j,INPUT_MOVE:2,INPUT_END:H,INPUT_CANCEL:B,STATE_POSSIBLE:De,STATE_BEGAN:Re,STATE_CHANGED:Oe,STATE_ENDED:Pe,STATE_RECOGNIZED:Ne,STATE_CANCELLED:Me,STATE_FAILED:32,DIRECTION_NONE:$,DIRECTION_LEFT:U,DIRECTION_RIGHT:q,DIRECTION_UP:G,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Z,DIRECTION_ALL:Q,Manager:Ke,Input:J,TouchAction:Ae,TouchInput:xe,MouseInput:he,PointerEventInput:fe,TouchMouseInput:Ee,SingleTouchInput:ye,Recognizer:Fe,AttrRecognizer:je,Tap:Ge,Pan:He,Swipe:qe,Pinch:Be,Rotate:Ue,Press:$e,on:k,off:S,each:_,merge:v,extend:y,assign:l,inherit:w,bindFn:x,prefixed:P}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=We,(i=(function(){return We}).call(t,n,t,e))===a||(e.exports=i)}(window,document)},zUnb:function(e,t,n){"use strict";function i(e){return"function"==typeof e}n.r(t);let s=!1;const r={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(r.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},l=Array.isArray||(e=>e&&"number"==typeof e.length);function c(e){return null!==e&&"object"==typeof e}function h(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}h.prototype=Object.create(Error.prototype);const u=h;class d{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_unsubscribe:n,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof d)t.remove(this);else if(null!==t)for(let i=0;i<t.length;++i)t[i].remove(this);if(i(n))try{n.call(this)}catch(r){e=r instanceof u?p(r.errors):[r]}if(l(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(r){e=e||[],r instanceof u?e=e.concat(p(r.errors)):e.push(r)}}}if(e)throw new u(e)}add(e){let t=e;if(!e)return d.EMPTY;switch(typeof e){case"function":t=new d(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof d)){const e=t;(t=new d)._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof d){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}function p(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}d.EMPTY=function(e){return e.closed=!0,e}(new d);const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class f extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,e,t,n)}}[m](){return this}static create(e,t,n){const i=new f(e,t,n);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class g extends f{constructor(e,t,n,s){let r;super(),this._parentSubscriber=e;let o=this;i(t)?r=t:t&&(r=t.next,n=t.error,s=t.complete,t!==a&&(i((o=Object.create(t)).unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=r,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;r.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=r;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);r.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),r.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(e,t,n){if(!r.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(i){return r.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const _="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(){}class y{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const t=new y;return t.source=this,t.operator=e,t}subscribe(e,t,n){const{operator:i}=this,s=function(e,t,n){if(e){if(e instanceof f)return e;if(e[m])return e[m]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(s.add(i?i.call(s,this.source):this.source||r.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),r.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(t){r.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=v(t))((t,n)=>{let i;i=this.subscribe(t=>{try{e(t)}catch(s){n(s),i&&i.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[_](){return this}pipe(...e){return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)}:b)(this);var t}toPromise(e){return new(e=v(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}function v(e){if(e||(e=r.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function w(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}y.create=(e=>new y(e)),w.prototype=Object.create(Error.prototype);const x=w;class C extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class E extends f{constructor(e){super(e),this.destination=e}}class k extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[m](){return new E(this)}lift(e){const t=new S(this,this);return t.operator=e,t}next(e){if(this.closed)throw new x;if(!this.isStopped){const{observers:t}=this,n=t.length,i=t.slice();for(let s=0;s<n;s++)i[s].next(e)}}error(e){if(this.closed)throw new x;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,i=t.slice();for(let s=0;s<n;s++)i[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new x;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let i=0;i<t;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new x;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new x;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new C(this,e))}asObservable(){const e=new y;return e.source=this,e}}k.create=((e,t)=>new S(e,t));class S extends k{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}function T(e){return e&&"function"==typeof e.schedule}class I extends f{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const A=e=>t=>{for(let n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()};function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=D(),O=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function P(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const N=e=>{if(e&&"function"==typeof e[_])return(e=>t=>{const n=e[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if(O(e))return A(e);if(P(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(e);if(e&&"function"==typeof e[R])return(e=>t=>{const n=e[R]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function M(e,t,n,i,s=new I(e,n,i)){if(!s.closed)return t instanceof y?t.subscribe(s):N(t)(s)}class F extends f{notifyNext(e,t,n,i,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function L(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(e,t))}}class V{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new z(e,this.project,this.thisArg))}}class z extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function j(e,t){return new y(n=>{const i=new d;let s=0;return i.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function H(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[_]}(e))return function(e,t){return new y(n=>{const i=new d;return i.add(t.schedule(()=>{const s=e[_]();i.add(s.subscribe({next(e){i.add(t.schedule(()=>n.next(e)))},error(e){i.add(t.schedule(()=>n.error(e)))},complete(){i.add(t.schedule(()=>n.complete()))}}))})),i})}(e,t);if(P(e))return function(e,t){return new y(n=>{const i=new d;return i.add(t.schedule(()=>e.then(e=>{i.add(t.schedule(()=>{n.next(e),i.add(t.schedule(()=>n.complete()))}))},e=>{i.add(t.schedule(()=>n.error(e)))}))),i})}(e,t);if(O(e))return j(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new y(n=>{const i=new d;let s;return i.add(()=>{s&&"function"==typeof s.return&&s.return()}),i.add(t.schedule(()=>{s=e[R](),i.add(t.schedule(function(){if(n.closed)return;let e,t;try{const r=s.next();e=r.value,t=r.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof y?e:new y(N(e))}function B(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(B((n,i)=>H(e(n,i)).pipe(L((e,s)=>t(n,e,i,s))),n)):("number"==typeof t&&(n=t),t=>t.lift(new $(e,n)))}class ${constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new U(e,this.project,this.concurrent))}}class U extends F{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const i=new I(this,void 0,void 0);this.destination.add(i),M(this,e,t,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,i,s){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(e){return e}function G(e=Number.POSITIVE_INFINITY){return B(q,e)}function W(e,t){return t?j(e,t):new y(A(e))}function K(...e){let t=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return T(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof i&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof y?e[0]:G(t)(W(e,n))}function Z(){return function(e){return e.lift(new Q(e))}}class Q{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const i=new X(e,n),s=t.subscribe(i);return i.closed||(i.connection=n.connect()),s}}class X extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}const Y=class extends y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new ee(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}refCount(){return Z()(this)}}.prototype,J={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Y._subscribe},_isComplete:{value:Y._isComplete,writable:!0},getSubject:{value:Y.getSubject},connect:{value:Y.connect},refCount:{value:Y.refCount}};class ee extends E{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function te(){return new k}function ne(){return e=>Z()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,J);return i.source=t,i.subjectFactory=n,i}}(te)(e))}function ie(e){for(let t in e)if(e[t]===ie)return t;throw Error("Could not find renamed property on target object.")}const se=ie({ngInjectableDef:ie});function re(e){return{providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function oe(e){return e.hasOwnProperty(se)?e[se]:null}class ae{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0!==t?re({providedIn:t.providedIn||"root",factory:t.factory}):void 0}toString(){return`InjectionToken ${this._desc}`}}const le="__annotations__",ce="__parameters__",he="__prop__metadata__";function ue(e,t,n){const i=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function s(...e){if(this instanceof s)return i.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,i){const s=e.hasOwnProperty(ce)?e[ce]:Object.defineProperty(e,ce,{value:[]})[ce];for(;s.length<=i;)s.push(null);return(s[i]=s[i]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}const de=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),pe="undefined"!=typeof window&&window,me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fe="undefined"!=typeof global&&global||pe||me,ge=Promise.resolve(0);let _e=null;function be(){if(!_e){const e=fe.Symbol;if(e&&e.iterator)_e=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_e=n)}}}return _e}function ye(e){"undefined"==typeof Zone?ge.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function ve(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function we(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(we).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}const xe=ue("Inject",e=>({token:e})),Ce=ue("Optional"),Ee=ue("Self"),ke=ue("SkipSelf"),Se=function(){var e={Default:0,Host:1,Self:2,SkipSelf:4,Optional:8};return e[e.Default]="Default",e[e.Host]="Host",e[e.Self]="Self",e[e.SkipSelf]="SkipSelf",e[e.Optional]="Optional",e}();let Te,Ie=void 0;function Ae(e){const t=Ie;return Ie=e,t}function De(e,t=Se.Default){return(Te||function(e,t=Se.Default){if(void 0===Ie)throw new Error("inject() must be called from an injection context");return null===Ie?function(e,t,n){const i=oe(e);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&Se.Optional)return null;throw new Error(`Injector: NOT_FOUND [${we(e)}]`)}(e,0,t):Ie.get(e,t&Se.Optional?null:void 0,t)})(e,t)}function Re(e,t){const n=Ne(e),i=Ne(t);if(n&&i)return function(e,t,n){const i=e[be()](),s=t[be()]();for(;;){const e=i.next(),t=s.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Re);{const s=e&&("object"==typeof e||"function"==typeof e),r=t&&("object"==typeof t||"function"==typeof t);return!(n||!s||i||!r)||ve(e,t)}}class Oe{constructor(e){this.wrapped=e}static wrap(e){return new Oe(e)}static unwrap(e){return Oe.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Oe}}class Pe{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ne(e){return!!Me(e)&&(Array.isArray(e)||!(e instanceof Map)&&be()in e)}function Me(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Fe(...e){}const Le=ie({__forward_ref__:ie});function Ve(e){return e.__forward_ref__=Ve,e.toString=function(){return we(this())},e}function ze(e){const t=e;return"function"==typeof t&&t.hasOwnProperty(Le)&&t.__forward_ref__===Ve?t():e}const je="__source",He=new Object,Be=He,$e=new ae("INJECTOR");class Ue{get(e,t=He){if(t===He)throw new Error(`NullInjectorError: No provider for ${we(e)}!`);return t}}class qe{static create(e,t){return Array.isArray(e)?new it(e,t):new it(e.providers,e.parent,e.name||null)}}qe.THROW_IF_NOT_FOUND=He,qe.NULL=new Ue,qe.ngInjectableDef=re({providedIn:"any",factory:()=>De($e)}),qe.__NG_ELEMENT_ID__=(()=>Ge());const Ge=Fe,We=function(e){return e},Ke=[],Ze=We,Qe=function(){return Array.prototype.slice.call(arguments)},Xe=ie({provide:String,useValue:ie}),Ye="ngTokenPath",Je="ngTempTokenPath",et=qe.NULL,tt=/\n/gm,nt="\u0275";class it{constructor(e,t=et,n=null){this.parent=t,this.source=n;const i=this._records=new Map;i.set(qe,{token:qe,fn:We,deps:Ke,value:this,useNew:!1}),i.set($e,{token:$e,fn:We,deps:Ke,value:this,useNew:!1}),function e(t,n){if(n)if((n=ze(n))instanceof Array)for(let i=0;i<n.length;i++)e(t,n[i]);else{if("function"==typeof n)throw ot("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw ot("Unexpected provider",n);{let e=ze(n.provide);const i=function(e){const t=function(e){let t=Ke;const n=e.deps;if(n&&n.length){t=[];for(let e=0;e<n.length;e++){let i=6,s=ze(n[e]);if(s instanceof Array)for(let e=0,t=s;e<t.length;e++){const n=t[e];n instanceof Ce||n==Ce?i|=1:n instanceof ke||n==ke?i&=-3:n instanceof Ee||n==Ee?i&=-5:s=n instanceof xe?n.token:ze(n)}t.push({token:s,options:i})}}else if(e.useExisting)t=[{token:ze(e.useExisting),options:6}];else if(!(n||Xe in e))throw ot("'deps' required",e);return t}(e);let n=We,i=Ke,s=!1,r=ze(e.provide);if(Xe in e)i=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)s=!0,n=ze(e.useClass);else{if("function"!=typeof r)throw ot("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);s=!0,n=r}return{deps:t,fn:n,useNew:s,value:i}}(n);if(!0===n.multi){let i=t.get(e);if(i){if(i.fn!==Qe)throw st(e)}else t.set(e,i={token:n.provide,deps:[],useNew:!1,fn:Qe,value:Ke});i.deps.push({token:e=n,options:6})}const s=t.get(e);if(s&&s.fn==Qe)throw st(e);t.set(e,i)}}}(i,e)}get(e,t,n=Se.Default){const i=this._records.get(e);try{return function e(t,n,i,s,r,o){try{return function(t,n,i,s,r,o){let a;if(!n||o&Se.SkipSelf)o&Se.Self||(a=s.get(t,r,Se.Default));else{if((a=n.value)==Ze)throw Error(nt+"Circular dependency");if(a===Ke){n.value=Ze;let t=void 0,r=n.useNew,o=n.fn,l=n.deps,c=Ke;if(l.length){c=[];for(let t=0;t<l.length;t++){const n=l[t],r=n.options,o=2&r?i.get(n.token):void 0;c.push(e(n.token,o,i,o||4&r?s:et,1&r?null:qe.THROW_IF_NOT_FOUND,Se.Default))}}n.value=a=r?new o(...c):o.apply(t,c)}}return a}(t,n,i,s,r,o)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[Je]=a[Je]||[]).unshift(t),n&&n.value==Ze&&(n.value=Ke),a}}(e,i,this._records,this.parent,t,n)}catch(s){const t=s[Je];throw e[je]&&t.unshift(e[je]),s.message=rt("\n"+s.message,t,this.source),s[Ye]=t,s[Je]=null,s}}toString(){const e=[];return this._records.forEach((t,n)=>e.push(we(n))),`StaticInjector[${e.join(", ")}]`}}function st(e){return ot("Cannot mix multi providers and regular providers",e)}function rt(e,t,n=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==nt?e.substr(2):e;let i=we(t);if(t instanceof Array)i=t.map(we).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push(n+":"+("string"==typeof i?JSON.stringify(i):we(i)))}i=`{${e.join(", ")}}`}return`StaticInjectorError${n?"("+n+")":""}[${i}]: ${e.replace(tt,"\n  ")}`}function ot(e,t){return new Error(rt(e,t))}class at{}class lt{}const ct=new ae("The presence of this token marks an injector as being the root injector.");class ht{}class ut{}function dt(e){const t=Error(`No component factory found for ${we(e)}. Did you add it to @NgModule.entryComponents?`);return t[pt]=e,t}const pt="ngComponent";class mt{resolveComponentFactory(e){throw dt(e)}}class ft{}ft.NULL=new mt;class gt{constructor(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(let i=0;i<e.length;i++){const t=e[i];this._factories.set(t.componentType,t)}}resolveComponentFactory(e){let t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw dt(e);return new _t(t,this._ngModule)}}class _t extends ut{constructor(e,t){super(),this.factory=e,this.ngModule=t,this.selector=e.selector,this.componentType=e.componentType,this.ngContentSelectors=e.ngContentSelectors,this.inputs=e.inputs,this.outputs=e.outputs}create(e,t,n,i){return this.factory.create(e,t,n,i||this.ngModule)}}class bt{constructor(e){this.nativeElement=e}}bt.__NG_ELEMENT_ID__=(()=>yt(bt));const yt=Fe;class vt{}class wt{}const xt=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();class Ct{}Ct.__NG_ELEMENT_ID__=(()=>Et());const Et=Fe;class kt{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const St=new kt("7.1.4");let Tt=!0,It=!1;function At(){return It=!0,Tt}class Dt{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e),this.inertBodyElement=this.inertDocument.createElement("body"),e.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(i){return null}const t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);const n=t.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(e){e="<body><remove></remove>"+e+"</body>";try{const n=(new window.DOMParser).parseFromString(e,"text/html").body;return n.removeChild(n.firstChild),n}catch(t){return null}}getInertBodyElement_InertDocument(e){const t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const n=t.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Rt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Ot=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pt(e){return(e=String(e)).match(Rt)||e.match(Ot)?e:(At()&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see http://g.co/ng/security#xss)`),"unsafe:"+e)}function Nt(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Mt(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Ft=Nt("area,br,col,hr,img,wbr"),Lt=Nt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vt=Nt("rp,rt"),zt=Mt(Vt,Lt),jt=Mt(Ft,Mt(Lt,Nt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mt(Vt,Nt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zt),Ht=Nt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Bt=Nt("srcset"),$t=Mt(Ht,Bt,Nt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"));class Ut{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!jt.hasOwnProperty(t))return this.sanitizedSomething=!0,!1;this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let s=0;s<n.length;s++){const e=n.item(s),t=e.name,r=t.toLowerCase();if(!$t.hasOwnProperty(r)){this.sanitizedSomething=!0;continue}let o=e.value;Ht[r]&&(o=Pt(o)),Bt[r]&&(i=o,o=(i=String(i)).split(",").map(e=>Pt(e.trim())).join(", ")),this.buf.push(" ",t,'="',Wt(o),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();jt.hasOwnProperty(t)&&!Ft.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Wt(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const qt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gt=/([^\#-~ |!])/g;function Wt(e){return e.replace(/&/g,"&amp;").replace(qt,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Gt,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kt;function Zt(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}class Qt extends k{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let i,s=e=>null,r=()=>null;e&&"object"==typeof e?(i=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(s=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(r=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(s=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(r=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const o=super.subscribe(i,s,r);return e instanceof d&&e.add(o),o}}class Xt{}Xt.__NG_ELEMENT_ID__=(()=>Yt(Xt,bt));const Yt=Fe,Jt=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();class en{}const tn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),nn=/^url\(([^)]+)\)$/,sn=Function;function rn(e){return"function"==typeof e}const on=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,an=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ln=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/;class cn{constructor(e){this._reflect=e||fe.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=void 0===e?new Array(t.length):new Array(e.length);for(let i=0;i<n.length;i++)n[i]=void 0===e?[]:e[i]!=Object?[e[i]]:[],t&&null!=t[i]&&(n[i]=n[i].concat(t[i]));return n}_ownParameters(e,t){const n=e.toString();if(on.exec(n)||an.exec(n)&&!ln.exec(n))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const i=e.ctorParameters;if(i&&i!==t.ctorParameters){const e="function"==typeof i?i():i,t=e.map(e=>e&&e.type),n=e.map(e=>e&&hn(e.decorators));return this._zipTypesAndAnnotations(t,n)}const s=e.hasOwnProperty(ce)&&e[ce],r=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return r||s?this._zipTypesAndAnnotations(r,s):new Array(e.length).fill(void 0)}parameters(e){if(!rn(e))return[];const t=un(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?hn(e.decorators):e.hasOwnProperty(le)?e[le]:null}annotations(e){if(!rn(e))return[];const t=un(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach(e=>{n[e]=hn(t[e])}),n}return e.hasOwnProperty(he)?e[he]:null}propMetadata(e){if(!rn(e))return{};const t=un(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach(t=>{n[t]=e[t]})}const i=this._ownPropMetadata(e,t);return i&&Object.keys(i).forEach(e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...i[e]),n[e]=t}),n}hasLifecycleHook(e,t){return e instanceof sn&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${we(e)}`}resourceUri(e){return`./${we(e)}`}resolveIdentifier(e,t,n,i){return i}resolveEnum(e,t){return e[t]}}function hn(e){return e?e.map(e=>new(0,e.type.annotationCls)(...e.args?e.args:[])):[]}function un(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const dn="ngDebugContext",pn="ngOriginalError",mn="ngErrorLogger";function fn(e){return e[dn]}function gn(e){return e[pn]}function _n(e,...t){e.error(...t)}class bn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),i=function(e){return e[mn]||_n}(e);i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?fn(e)?fn(e):this._findContext(gn(e)):null}_findOriginalError(e){let t=gn(e);for(;t&&gn(t);)t=gn(t);return t}}function yn(e){return e.length>1?" ("+function(e){const t=[];for(let n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(e=>we(e.token)).join(" -> ")+")":""}function vn(e,t,n,i){const s=[t],r=n(s),o=i?function(e,t){const n=`${r} caused by: ${t instanceof Error?t.message:t}`,i=Error(n);return i[pn]=t,i}(0,i):Error(r);return o.addKey=wn,o.keys=s,o.injectors=[e],o.constructResolvingMessage=n,o[pn]=i,o}function wn(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function xn(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const e=t[i];n.push(e&&0!=e.length?e.map(we).join(" "):"?")}return Error("Cannot resolve all parameters for '"+we(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+we(e)+"' is decorated with Injectable.")}class Cn{constructor(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=we(this.token)}static get(e){return kn.get(ze(e))}static get numberOfKeys(){return kn.numberOfKeys}}class En{constructor(){this._allKeys=new Map}get(e){if(e instanceof Cn)return e;if(this._allKeys.has(e))return this._allKeys.get(e);const t=new Cn(e,Cn.numberOfKeys);return this._allKeys.set(e,t),t}get numberOfKeys(){return this._allKeys.size}}const kn=new En;class Sn{constructor(e){this.reflectionCapabilities=e}updateCapabilities(e){this.reflectionCapabilities=e}factory(e){return this.reflectionCapabilities.factory(e)}parameters(e){return this.reflectionCapabilities.parameters(e)}annotations(e){return this.reflectionCapabilities.annotations(e)}propMetadata(e){return this.reflectionCapabilities.propMetadata(e)}hasLifecycleHook(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)}getter(e){return this.reflectionCapabilities.getter(e)}setter(e){return this.reflectionCapabilities.setter(e)}method(e){return this.reflectionCapabilities.method(e)}importUri(e){return this.reflectionCapabilities.importUri(e)}resourceUri(e){return this.reflectionCapabilities.resourceUri(e)}resolveIdentifier(e,t,n,i){return this.reflectionCapabilities.resolveIdentifier(e,t,n,i)}resolveEnum(e,t){return this.reflectionCapabilities.resolveEnum(e,t)}}const Tn=new Sn(new cn);class In{constructor(e,t,n){this.key=e,this.optional=t,this.visibility=n}static fromKey(e){return new In(e,!1,null)}}const An=[];class Dn{constructor(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class Rn{constructor(e,t){this.factory=e,this.dependencies=t}}function On(e){let t,n;if(e.useClass){const i=ze(e.useClass);t=Tn.factory(i),n=Nn(i)}else e.useExisting?(t=(e=>e),n=[In.fromKey(Cn.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){const n=t.map(e=>[e]);return t.map(t=>Mn(e,t,n))}return Nn(e)}(e.useFactory,e.deps)):(t=(()=>e.useValue),n=An);return new Rn(t,n)}function Pn(e){return new Dn(Cn.get(e.provide),[On(e)],e.multi||!1)}function Nn(e){const t=Tn.parameters(e);if(!t)return[];if(t.some(e=>null==e))throw xn(e,t);return t.map(n=>Mn(e,n,t))}function Mn(e,t,n){let i=null,s=!1;if(!Array.isArray(t))return Fn(t instanceof xe?t.token:t,s,null);let r=null;for(let o=0;o<t.length;++o){const e=t[o];e instanceof sn?i=e:e instanceof xe?i=e.token:e instanceof Ce?s=!0:e instanceof Ee||e instanceof ke?r=e:e instanceof ae&&(i=e)}if(null!=(i=ze(i)))return Fn(i,s,r);throw xn(e,n)}function Fn(e,t,n){return new In(Cn.get(e),t,n)}const Ln=new Object;class Vn{static resolve(e){return function(e){const t=function(e,t){for(let n=0;n<e.length;n++){const i=e[n],s=t.get(i.key.id);if(s){if(i.multiProvider!==s.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${s} ${i}`);if(i.multiProvider)for(let e=0;e<i.resolvedFactories.length;e++)s.resolvedFactories.push(i.resolvedFactories[e]);else t.set(i.key.id,i)}else{let e;e=i.multiProvider?new Dn(i.key,i.resolvedFactories.slice(),i.multiProvider):i,t.set(i.key.id,e)}}return t}(function e(t,n){return t.forEach(t=>{if(t instanceof sn)n.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)n.push(t);else{if(!(t instanceof Array))throw function(e){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${t}`)}();e(t,n)}}),n}(e,[]).map(Pn),new Map);return Array.from(t.values())}(e)}static resolveAndCreate(e,t){const n=Vn.resolve(e);return Vn.fromResolvedProviders(n,t)}static fromResolvedProviders(e,t){return new zn(e,t)}}class zn{constructor(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;const n=e.length;this.keyIds=new Array(n),this.objs=new Array(n);for(let i=0;i<n;i++)this.keyIds[i]=e[i].key.id,this.objs[i]=Ln}get(e,t=Be){return this._getByKey(Cn.get(e),null,t)}resolveAndCreateChild(e){const t=Vn.resolve(e);return this.createChildFromResolved(t)}createChildFromResolved(e){const t=new zn(e);return t.parent=this,t}resolveAndInstantiate(e){return this.instantiateResolved(Vn.resolve([e])[0])}instantiateResolved(e){return this._instantiateProvider(e)}getProviderAtIndex(e){if(e<0||e>=this._providers.length)throw function(e){return Error(`Index ${e} is out-of-bounds.`)}(e);return this._providers[e]}_new(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw vn(this,e.key,function(e){return`Cannot instantiate cyclic dependency!${yn(e)}`});return this._instantiateProvider(e)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(e){if(e.multiProvider){const t=new Array(e.resolvedFactories.length);for(let n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])}_instantiate(e,t){const n=t.factory;let i,s;try{i=t.dependencies.map(e=>this._getByReflectiveDependency(e))}catch(o){throw o.addKey&&o.addKey(this,e.key),o}try{s=n(...i)}catch(o){throw vn(this,e.key,function(e){const t=we(e[0].token);return`${r.message}: Error during instantiation of ${t}!${yn(e)}.`},r=o)}var r;return s}_getByReflectiveDependency(e){return this._getByKey(e.key,e.visibility,e.optional?null:Be)}_getByKey(e,t,n){return e===zn.INJECTOR_KEY?this:t instanceof Ee?this._getByKeySelf(e,n):this._getByKeyDefault(e,n,t)}_getObjByKeyId(e){for(let t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===Ln&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return Ln}_throwOrNull(e,t){if(t!==Be)return t;throw function(e,t){return vn(e,t,function(e){return`No provider for ${we(e[0].token)}!${yn(e)}`})}(this,e)}_getByKeySelf(e,t){const n=this._getObjByKeyId(e.id);return n!==Ln?n:this._throwOrNull(e,t)}_getByKeyDefault(e,t,n){let i;for(i=n instanceof ke?this.parent:this;i instanceof zn;){const t=i,n=t._getObjByKeyId(e.id);if(n!==Ln)return n;i=t.parent}return null!==i?i.get(e.token,t):this._throwOrNull(e,t)}get displayName(){return`ReflectiveInjector(providers: [${function(e,t){const n=new Array(e._providers.length);for(let i=0;i<e._providers.length;++i)n[i]=t(e.getProviderAtIndex(i));return n}(this,e=>' "'+e.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}function jn(e){return!!e&&"function"==typeof e.then}function Hn(e){return!!e&&"function"==typeof e.subscribe}zn.INJECTOR_KEY=Cn.get(qe);const Bn=new ae("Application Initializer");class $n{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();jn(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}const Un=new ae("AppId");function qn(){return`${Gn()}${Gn()}${Gn()}`}function Gn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wn=new ae("Platform Initializer"),Kn=new ae("Platform ID"),Zn=new ae("appBootstrapListener");class Qn{log(e){console.log(e)}warn(e){console.warn(e)}}function Xn(){throw new Error("Runtime compiler is not loaded")}class Yn{compileModuleSync(e){throw Xn()}compileModuleAsync(e){throw Xn()}compileModuleAndAllComponentsSync(e){throw Xn()}compileModuleAndAllComponentsAsync(e){throw Xn()}clearCache(){}clearCacheFor(e){}getModuleId(e){}}class Jn{}let ei,ti;function ni(){const e=fe.wtf;return!(!e||!(ei=e.trace)||(ti=ei.events,0))}const ii=ni(),si=ii?function(e,t=null){return ti.createScope(e,t)}:(e,t)=>(function(e,t){return null}),ri=ii?function(e,t){return ei.leaveScope(e,t),t}:(e,t)=>t;class oi{constructor({enableLongStackTrace:e=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qt(!1),this.onMicrotaskEmpty=new Qt(!1),this.onStable=new Qt(!1),this.onError=new Qt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var t;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,i,s,r,o)=>{try{return hi(t),e.invokeTask(i,s,r,o)}finally{ui(t)}},onInvoke:(e,n,i,s,r,o,a)=>{try{return hi(t),e.invoke(i,s,r,o,a)}finally{ui(t)}},onHasTask:(e,n,i,s)=>{e.hasTask(i,s),n===i&&("microTask"==s.change?(t.hasPendingMicrotasks=s.microTask,ci(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,i,s)=>(e.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){const s=this._inner,r=s.scheduleEventTask("NgZoneEvent: "+i,e,li,ai,ai);try{return s.runTask(r,t,n)}finally{s.cancelTask(r)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function ai(){}const li={};function ci(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function hi(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ui(e){e._nesting--,ci(e)}class di{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qt,this.onMicrotaskEmpty=new Qt,this.onStable=new Qt,this.onError=new Qt}run(e){return e()}runGuarded(e){return e()}runOutsideAngular(e){return e()}runTask(e){return e()}}class pi{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oi.assertNotInAngularZone(),ye(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ye(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let i=-1;t&&t>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==i),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}class mi{constructor(){this._applications=new Map,_i.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return _i.findTestabilityInTree(this,e,t)}}mi.ctorParameters=(()=>[]);class fi{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let gi,_i=new fi,bi=function(e,t,n){return e.get(Jn).createCompiler([t]).compileModuleAsync(n)};const yi=new ae("AllowMultipleToken");class vi{constructor(e,t){this.name=e,this.token=t}}function wi(e,t,n=[]){const i=`Platform: ${t}`,s=new ae(i);return(t=[])=>{let r=xi();if(!r||r.injector.get(yi,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0});!function(e){if(gi&&!gi.destroyed&&!gi.injector.get(yi,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");gi=e.get(Ci);const t=e.get(Wn,null);t&&t.forEach(e=>e())}(qe.create({providers:e,name:i}))}return function(e){const t=xi();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function xi(){return gi&&!gi.destroyed?gi:null}class Ci{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n="noop"===(s=t?t.ngZone:void 0)?new di:("zone.js"===s?void 0:s)||new oi({enableLongStackTrace:At()}),i=[{provide:oi,useValue:n}];var s;return n.run(()=>{const t=qe.create({providers:i,parent:this.injector,name:e.moduleType.name}),s=e.create(t),r=s.injector.get(bn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return s.onDestroy(()=>Si(this._modules,s)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{r.handleError(e)}})),function(e,t,n){try{const s=n();return jn(s)?s.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):s}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}(r,n,()=>{const e=s.injector.get($n);return e.runInitializers(),e.donePromise.then(()=>(this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=Ei({},t);return bi(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(ki);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${we(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Ei(e,t){return Array.isArray(t)?t.reduce(Ei,e):Object.assign({},e,t)}class ki{constructor(e,t,n,i,s,r){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=At(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{oi.assertNotInAngularZone(),ye(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{oi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=K(o,a.pipe(ne()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof ut?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const i=n instanceof _t?null:this._injector.get(at),s=n.create(qe.NULL,[],t||n.selector,i);s.onDestroy(()=>{this._unloadComponent(s)});const r=s.injector.get(pi,null);return r&&s.injector.get(mi).registerApplication(s.location.nativeElement,r),this._loadComponent(s),At()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=ki._tickScope();try{this._runningTick=!0,this._views.forEach(e=>e.detectChanges()),this._enforceNoNewChanges&&this._views.forEach(e=>e.checkNoChanges())}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1,ri(e)}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Si(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Zn,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Si(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}function Si(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}ki._tickScope=si("ApplicationRef#tick()");class Ti{constructor(){this.dirty=!0,this._results=[],this.changes=new Qt,this.length=0}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}[be()](){return this._results[be()]()}toString(){return this._results.toString()}reset(e){this._results=function e(t){return t.reduce((t,n)=>{const i=Array.isArray(n)?e(n):n;return t.concat(i)},[])}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ii{}Ii.__NG_ELEMENT_ID__=(()=>Ai(Ii,bt));const Ai=Fe;class Di{}Di.__NG_ELEMENT_ID__=(()=>Ri());const Ri=(...e)=>{};class Oi{constructor(e,t){this.name=e,this.callback=t}}class Pi{constructor(e,t,n){this.nativeNode=e,this._debugContext=n,this.listeners=[],this.parent=null,t&&t instanceof Ni&&t.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Ni extends Pi{constructor(e,t,n){super(e,t,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}addChild(e){e&&(this.childNodes.push(e),e.parent=this)}removeChild(e){const t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))}insertChildrenAfter(e,t){const n=this.childNodes.indexOf(e);-1!==n&&(this.childNodes.splice(n+1,0,...t),t.forEach(e=>{e.parent&&e.parent.removeChild(e),e.parent=this}))}insertBefore(e,t){const n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return function e(t,n,i){t.childNodes.forEach(t=>{t instanceof Ni&&(n(t)&&i.push(t),e(t,n,i))})}(this,e,t),t}queryAllNodes(e){const t=[];return function e(t,n,i){t instanceof Ni&&t.childNodes.forEach(t=>{n(t)&&i.push(t),t instanceof Ni&&e(t,n,i)})}(this,e,t),t}get children(){return this.childNodes.filter(e=>e instanceof Ni)}triggerEventHandler(e,t){this.listeners.forEach(n=>{n.name==e&&n.callback(t)})}}const Mi=new Map;function Fi(e){return Mi.get(e)||null}function Li(e){Mi.set(e.nativeNode,e)}class Vi{constructor(){}supports(e){return Ne(e)}create(e){return new ji(e)}}const zi=(e,t)=>t;class ji{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zi}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,s=null;for(;t||n;){const r=!n||t&&t.currentIndex<Ui(n,i,s)?t:n,o=Ui(r,i,s),a=r.currentIndex;if(r===n)i--,n=n._nextRemoved;else if(t=t._next,null==r.previousIndex)i++;else{s||(s=[]);const e=o-i,t=a-i;if(e!=t){for(let n=0;n<e;n++){const i=n<s.length?s[n]:s[n]=0,r=i+n;t<=r&&r<e&&(s[n]=i+1)}s[r.previousIndex]=t-e}}o!==a&&e(r,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ne(e))throw new Error(`Error trying to diff '${we(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,i,s=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)i=this._trackByFn(t,n=e[t]),null!==s&&ve(s.trackById,i)?(r&&(s=this._verifyReinsertion(s,n,i,t)),ve(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,i,t),r=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[be()]();let i;for(;!(i=n.next()).done;)t(i.value)}}(e,e=>{i=this._trackByFn(t,e),null!==s&&ve(s.trackById,i)?(r&&(s=this._verifyReinsertion(s,e,i,t)),ve(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,i,t),r=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(ve(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ve(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):e=this._addAfter(new Hi(t,n),s,i),e}_verifyReinsertion(e,t,n,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new $i),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $i),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Hi{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Bi{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ve(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class $i{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Bi,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ui(e,t,n){const i=e.previousIndex;if(null===i)return i;let s=0;return n&&i<n.length&&(s=n[i]),i+t+s}class qi{constructor(){}supports(e){return e instanceof Map||Me(e)}create(){return new Gi}}class Gi{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Me(e)))throw new Error(`Error trying to diff '${we(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const i=n._prev,s=n._next;return i&&(i._next=s),s&&(s._prev=i),n._next=null,n._prev=null,n}const n=new Wi(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){ve(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Wi{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}class Ki{constructor(e){this.factories=e}static create(e,t){if(null!=t){const n=t.factories.slice();e=e.concat(n)}return new Ki(e)}static extend(e){return{provide:Ki,useFactory:t=>{if(!t)throw new Error("Cannot extend IterableDiffers without a parent injector");return Ki.create(e,t)},deps:[[Ki,new ke,new Ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}Ki.ngInjectableDef=re({providedIn:"root",factory:()=>new Ki([new Vi])});class Zi{constructor(e){this.factories=e}static create(e,t){if(t){const n=t.factories.slice();e=e.concat(n)}return new Zi(e)}static extend(e){return{provide:Zi,useFactory:t=>{if(!t)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return Zi.create(e,t)},deps:[[Zi,new ke,new Ce]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}Zi.ngInjectableDef=re({providedIn:"root",factory:()=>new Zi([new qi])});const Qi=[new qi],Xi=new Ki([new Vi]),Yi=new Zi(Qi),Ji=wi(null,"core",[{provide:Kn,useValue:"unknown"},{provide:Ci,deps:[qe]},{provide:mi,deps:[]},{provide:Qn,deps:[]}]),es=new ae("LocaleId");function ts(){return Xi}function ns(){return Yi}function is(e){return e||"en-US"}class ss{constructor(e){}}const rs=!1;function os(e,t,n){const i=e.state,s=1792&i;return s===t?(e.state=-1793&i|n,e.initIndex=-1,!0):s===n}function as(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function ls(e,t){return e.nodes[t]}function cs(e,t){return e.nodes[t]}function hs(e,t){return e.nodes[t]}function us(e,t){return e.nodes[t]}function ds(e,t){return e.nodes[t]}const ps={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0};function ms(e,t,n,i){let s=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${t}'. Current value: '${n}'.`;return i&&(s+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){const n=new Error(e);return fs(n,t),n}(s,e)}function fs(e,t){e[dn]=t,e[mn]=t.logError.bind(t)}function gs(e){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${e}`)}const _s=()=>{},bs=new Map;function ys(e){let t=bs.get(e);return t||(t=we(e)+"_"+bs.size,bs.set(e,t)),t}function vs(e,t,n,i){if(Oe.isWrapped(i)){i=Oe.unwrap(i);const s=e.def.nodes[t].bindingIndex+n,r=Oe.unwrap(e.oldValues[s]);e.oldValues[s]=new Oe(r)}return i}const ws="$$undefined",xs="$$empty";function Cs(e){return{id:ws,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}let Es=0;function ks(e,t,n,i){return!(!(2&e.state)&&ve(e.oldValues[t.bindingIndex+n],i))}function Ss(e,t,n,i){return!!ks(e,t,n,i)&&(e.oldValues[t.bindingIndex+n]=i,!0)}function Ts(e,t,n,i){const s=e.oldValues[t.bindingIndex+n];if(1&e.state||!Re(s,i)){const r=t.bindings[n].name;throw ms(ps.createDebugContext(e,t.nodeIndex),`${r}: ${s}`,`${r}: ${i}`,0!=(1&e.state))}}function Is(e){let t=e;for(;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function As(e,t){let n=e;for(;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Ds(e,t,n,i){try{return Is(33554432&e.def.nodes[t].flags?cs(e,t).componentView:e),ps.handleEvent(e,t,n,i)}catch(s){e.root.errorHandler.handleError(s)}}function Rs(e){return e.parent?cs(e.parent,e.parentNodeDef.nodeIndex):null}function Os(e){return e.parent?e.parentNodeDef.parent:null}function Ps(e,t){switch(201347067&t.flags){case 1:return cs(e,t.nodeIndex).renderElement;case 2:return ls(e,t.nodeIndex).renderText}}function Ns(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function Ms(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Fs(e){return 1<<e%32}function Ls(e){const t={};let n=0;const i={};return e&&e.forEach(([e,s])=>{"number"==typeof e?(t[e]=s,n|=Fs(e)):i[e]=s}),{matchedQueries:t,references:i,matchedQueryIds:n}}function Vs(e,t){return e.map(e=>{let n,i;return Array.isArray(e)?[i,n]=e:(i=0,n=e),n&&("function"==typeof n||"object"==typeof n)&&t&&Object.defineProperty(n,je,{value:t,configurable:!0}),{flags:i,token:n,tokenKey:ys(n)}})}function zs(e,t,n){let i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===de.Native?cs(e,n.renderParent.nodeIndex).renderElement:void 0:t}const js=new WeakMap;function Hs(e){let t=js.get(e);return t||((t=e(()=>_s)).factory=e,js.set(e,t)),t}function Bs(e,t,n,i,s){3===t&&(n=e.renderer.parentNode(Ps(e,e.def.lastRenderRootNode))),$s(e,t,0,e.def.nodes.length-1,n,i,s)}function $s(e,t,n,i,s,r,o){for(let a=n;a<=i;a++){const n=e.def.nodes[a];11&n.flags&&qs(e,n,t,s,r,o),a+=n.childCount}}function Us(e,t,n,i,s,r){let o=e;for(;o&&!Ns(o);)o=o.parent;const a=o.parent,l=Os(o),c=l.nodeIndex+l.childCount;for(let h=l.nodeIndex+1;h<=c;h++){const e=a.def.nodes[h];e.ngContentIndex===t&&qs(a,e,n,i,s,r),h+=e.childCount}if(!a.parent){const o=e.root.projectableNodes[t];if(o)for(let t=0;t<o.length;t++)Gs(e,o[t],n,i,s,r)}}function qs(e,t,n,i,s,r){if(8&t.flags)Us(e,t.ngContent.index,n,i,s,r);else{const o=Ps(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Gs(e,o,n,i,s,r),32&t.bindingFlags&&Gs(cs(e,t.nodeIndex).componentView,o,n,i,s,r)):Gs(e,o,n,i,s,r),16777216&t.flags){const o=cs(e,t.nodeIndex).viewContainer._embeddedViews;for(let e=0;e<o.length;e++)Bs(o[e],n,i,s,r)}1&t.flags&&!t.element.name&&$s(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,i,s,r)}}function Gs(e,t,n,i,s,r){const o=e.renderer;switch(n){case 1:o.appendChild(i,t);break;case 2:o.insertBefore(i,t,s);break;case 3:o.removeChild(i,t);break;case 0:r.push(t)}}const Ws=/^:([^:]+):(.+)$/;function Ks(e){if(":"===e[0]){const t=e.match(Ws);return[t[1],t[2]]}return["",e]}function Zs(e){let t=0;for(let n=0;n<e.length;n++)t|=e[n].flags;return t}function Qs(e,t,n,i,s,r,o,a,l,c,h,u,d,p,m,f,g,_,b,y){switch(e){case 1:return t+Xs(n)+i;case 2:return t+Xs(n)+i+Xs(s)+r;case 3:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a;case 4:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c;case 5:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c+Xs(h)+u;case 6:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c+Xs(h)+u+Xs(d)+p;case 7:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c+Xs(h)+u+Xs(d)+p+Xs(m)+f;case 8:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c+Xs(h)+u+Xs(d)+p+Xs(m)+f+Xs(g)+_;case 9:return t+Xs(n)+i+Xs(s)+r+Xs(o)+a+Xs(l)+c+Xs(h)+u+Xs(d)+p+Xs(m)+f+Xs(g)+_+Xs(b)+y;default:throw new Error("Does not support more than 9 expressions")}}function Xs(e){return null!=e?e.toString():""}function Ys(e,t,n,i,s,r){e|=1;const{matchedQueries:o,references:a,matchedQueryIds:l}=Ls(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:r?Hs(r):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:s||_s},provider:null,text:null,query:null,ngContent:null}}function Js(e,t,n,i,s,r,o=[],a,l,c,h,u){c||(c=_s);const{matchedQueries:d,references:p,matchedQueryIds:m}=Ls(n);let f=null,g=null;r&&([f,g]=Ks(r)),a=a||[];const _=new Array(a.length);for(let v=0;v<a.length;v++){const[e,t,n]=a[v],[i,s]=Ks(t);let r=void 0,o=void 0;switch(15&e){case 4:o=n;break;case 1:case 8:r=n}_[v]={flags:e,ns:i,name:s,nonMinifiedName:s,securityContext:r,suffix:o}}l=l||[];const b=new Array(l.length);for(let v=0;v<l.length;v++){const[e,t]=l[v];b[v]={type:0,target:e,eventName:t,propName:null}}const y=(o=o||[]).map(([e,t])=>{const[n,i]=Ks(e);return[n,i,t]});return u=function(e){if(e&&e.id===ws){const t=null!=e.encapsulation&&e.encapsulation!==de.None||e.styles.length||Object.keys(e.data).length;e.id=t?`c${Es++}`:xs}return e&&e.id===xs&&(e=null),e||null}(u),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:m,references:p,ngContentIndex:i,childCount:s,bindings:_,bindingFlags:Zs(_),outputs:b,element:{ns:f,name:g,attrs:y,template:null,componentProvider:null,componentView:h||null,componentRendererType:u,publicProviders:null,allProviders:null,handleEvent:c||_s},provider:null,text:null,query:null,ngContent:null}}function er(e,t,n){const i=n.element,s=e.root.selectorOrNode,r=e.renderer;let o;if(e.parent||!s){o=i.name?r.createElement(i.name,i.ns):r.createComment("");const s=zs(e,t,n);s&&r.appendChild(s,o)}else o=r.selectRootElement(s,!!i.componentRendererType&&i.componentRendererType.encapsulation===de.ShadowDom);if(i.attrs)for(let a=0;a<i.attrs.length;a++){const[e,t,n]=i.attrs[a];r.setAttribute(o,t,n,e)}return o}function tr(e,t,n,i){for(let o=0;o<n.outputs.length;o++){const a=n.outputs[o],l=nr(e,n.nodeIndex,(r=a.eventName,(s=a.target)?`${s}:${r}`:r));let c=a.target,h=e;"component"===a.target&&(c=null,h=t);const u=h.renderer.listen(c||i,a.eventName,l);e.disposables[n.outputIndex+o]=u}var s,r}function nr(e,t,n){return i=>Ds(e,t,n,i)}function ir(e,t,n,i){if(!Ss(e,t,n,i))return!1;const s=t.bindings[n],r=cs(e,t.nodeIndex),o=r.renderElement,a=s.name;switch(15&s.flags){case 1:!function(e,t,n,i,s,r){const o=t.securityContext;let a=o?e.root.sanitizer.sanitize(o,r):r;a=null!=a?a.toString():null;const l=e.renderer;null!=r?l.setAttribute(n,s,a,i):l.removeAttribute(n,s,i)}(e,s,o,s.ns,a,i);break;case 2:!function(e,t,n,i){const s=e.renderer;i?s.addClass(t,n):s.removeClass(t,n)}(e,o,a,i);break;case 4:!function(e,t,n,i,s){let r=e.root.sanitizer.sanitize(Jt.STYLE,s);if(null!=r){r=r.toString();const e=t.suffix;null!=e&&(r+=e)}else r=null;const o=e.renderer;null!=r?o.setStyle(n,i,r):o.removeStyle(n,i)}(e,s,o,a,i);break;case 8:!function(e,t,n,i,s){const r=t.securityContext;let o=r?e.root.sanitizer.sanitize(r,s):s;e.renderer.setProperty(n,i,o)}(33554432&t.flags&&32&s.flags?r.componentView:e,s,o,a,i)}return!0}const sr=new Object,rr=ys(qe),or=ys($e),ar=ys(at);function lr(e,t,n,i){return n=ze(n),{index:-1,deps:Vs(i,we(t)),flags:e,token:t,value:n}}function cr(e,t,n=qe.THROW_IF_NOT_FOUND){const i=Ae(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);const o=t.tokenKey;switch(o){case rr:case or:case ar:return e}const a=e._def.providersByKey[o];let l;if(a){let t=e._providers[a.index];return void 0===t&&(t=e._providers[a.index]=hr(e,a)),t===sr?void 0:t}if((l=oe(t.token))&&(s=e,null!=(r=l).providedIn&&(function(e,t){return e._def.modules.indexOf(r.providedIn)>-1}(s)||"root"===r.providedIn&&s._def.isRoot))){const n=e._providers.length;return e._def.providersByKey[t.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:t.token},e._providers[n]=sr,e._providers[n]=hr(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{Ae(i)}var s,r}function hr(e,t){let n;switch(201347067&t.flags){case 512:n=function(e,t,n){const i=n.length;switch(i){case 0:return new t;case 1:return new t(cr(e,n[0]));case 2:return new t(cr(e,n[0]),cr(e,n[1]));case 3:return new t(cr(e,n[0]),cr(e,n[1]),cr(e,n[2]));default:const s=new Array(i);for(let t=0;t<i;t++)s[t]=cr(e,n[t]);return new t(...s)}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){const i=n.length;switch(i){case 0:return t();case 1:return t(cr(e,n[0]));case 2:return t(cr(e,n[0]),cr(e,n[1]));case 3:return t(cr(e,n[0]),cr(e,n[1]),cr(e,n[2]));default:const s=Array(i);for(let t=0;t<i;t++)s[t]=cr(e,n[t]);return t(...s)}}(e,t.value,t.deps);break;case 2048:n=cr(e,t.deps[0]);break;case 256:n=t.value}return n===sr||null==n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?sr:n}function ur(e,t){const n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;const i=n[t];return i.viewContainerParent=null,fr(n,t),ps.dirtyParentQueries(i),pr(i),i}function dr(e,t,n){const i=t?Ps(t,t.def.lastRenderRootNode):e.renderElement,s=n.renderer.parentNode(i),r=n.renderer.nextSibling(i);Bs(n,2,s,r,void 0)}function pr(e){Bs(e,3,null,null,void 0)}function mr(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function fr(e,t){t>=e.length-1?e.pop():e.splice(t,1)}const gr=new Object;function _r(e,t,n,i,s,r){return new br(e,t,n,i,s,r)}class br extends ut{constructor(e,t,n,i,s,r){super(),this.selector=e,this.componentType=t,this._inputs=i,this._outputs=s,this.ngContentSelectors=r,this.viewDefFactory=n}get inputs(){const e=[],t=this._inputs;for(let n in t)e.push({propName:n,templateName:t[n]});return e}get outputs(){const e=[];for(let t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e}create(e,t,n,i){if(!i)throw new Error("ngModule should be provided");const s=Hs(this.viewDefFactory),r=s.nodes[0].element.componentProvider.nodeIndex,o=ps.createRootView(e,t||[],n,s,i,gr),a=hs(o,r).instance;return n&&o.renderer.setAttribute(cs(o,0).renderElement,"ng-version",St.full),new yr(o,new Cr(o),a)}}class yr extends ht{constructor(e,t,n){super(),this._view=e,this._viewRef=t,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=t,this.changeDetectorRef=t,this.instance=n}get location(){return new bt(cs(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Tr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(e){this._viewRef.onDestroy(e)}}function vr(e,t,n){return new wr(e,t,n)}class wr{constructor(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}get element(){return new bt(this._data.renderElement)}get injector(){return new Tr(this._view,this._elDef)}get parentInjector(){let e=this._view,t=this._elDef.parent;for(;!t&&e;)t=Os(e),e=e.parent;return e?new Tr(e,t):new Tr(this._view,null)}clear(){for(let e=this._embeddedViews.length-1;e>=0;e--){const t=ur(this._data,e);ps.destroyView(t)}}get(e){const t=this._embeddedViews[e];if(t){const e=new Cr(t);return e.attachToViewContainerRef(this),e}return null}get length(){return this._embeddedViews.length}createEmbeddedView(e,t,n){const i=e.createEmbeddedView(t||{});return this.insert(i,n),i}createComponent(e,t,n,i,s){const r=n||this.parentInjector;s||e instanceof _t||(s=r.get(at));const o=e.create(r,i,void 0,s);return this.insert(o.hostView,t),o}insert(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=e;return function(e,t,n,i){let s=t.viewContainer._embeddedViews;null==n&&(n=s.length),i.viewContainerParent=e,mr(s,n,i),function(e,t){const n=Rs(t);if(!n||n===e||16&t.state)return;t.state|=16;let i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(t),function(e,n){if(4&n.flags)return;t.parent.def.nodeFlags|=4,n.flags|=4;let i=n.parent;for(;i;)i.childFlags|=4,i=i.parent}(0,t.parentNodeDef)}(t,i),ps.dirtyParentQueries(i),dr(t,n>0?s[n-1]:null,i)}(this._view,this._data,t,n._view),n.attachToViewContainerRef(this),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(e._view);return function(e,t,i){const s=e.viewContainer._embeddedViews,r=s[n];fr(s,n),null==i&&(i=s.length),mr(s,i,r),ps.dirtyParentQueries(r),pr(r),dr(e,i>0?s[i-1]:null,r)}(this._data,0,t),e}indexOf(e){return this._embeddedViews.indexOf(e._view)}remove(e){const t=ur(this._data,e);t&&ps.destroyView(t)}detach(e){const t=ur(this._data,e);return t?new Cr(t):null}}function xr(e){return new Cr(e)}class Cr{constructor(e){this._view=e,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(e){const t=[];return Bs(e,0,void 0,void 0,t),t}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){Is(this._view)}detach(){this._view.state&=-5}detectChanges(){const e=this._view.root.rendererFactory;e.begin&&e.begin();try{ps.checkAndUpdateView(this._view)}finally{e.end&&e.end()}}checkNoChanges(){ps.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),ps.destroyView(this._view)}detachFromAppRef(){this._appRef=null,pr(this._view),ps.dirtyParentQueries(this._view)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}}function Er(e,t){return new kr(e,t)}class kr extends Xt{constructor(e,t){super(),this._parentView=e,this._def=t}createEmbeddedView(e){return new Cr(ps.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))}get elementRef(){return new bt(cs(this._parentView,this._def.nodeIndex).renderElement)}}function Sr(e,t){return new Tr(e,t)}class Tr{constructor(e,t){this.view=e,this.elDef=t}get(e,t=qe.THROW_IF_NOT_FOUND){return ps.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:ys(e)},t)}}function Ir(e,t){const n=e.def.nodes[t];if(1&n.flags){const t=cs(e,n.nodeIndex);return n.element.template?t.template:t.renderElement}if(2&n.flags)return ls(e,n.nodeIndex).renderText;if(20240&n.flags)return hs(e,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${t}`)}function Ar(e){return new Dr(e.renderer)}class Dr{constructor(e){this.delegate=e}selectRootElement(e){return this.delegate.selectRootElement(e)}createElement(e,t){const[n,i]=Ks(t),s=this.delegate.createElement(i,n);return e&&this.delegate.appendChild(e,s),s}createViewRoot(e){return e}createTemplateAnchor(e){const t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t}createText(e,t){const n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n}projectNodes(e,t){for(let n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])}attachViewAfter(e,t){const n=this.delegate.parentNode(e),i=this.delegate.nextSibling(e);for(let s=0;s<t.length;s++)this.delegate.insertBefore(n,t[s],i)}detachView(e){for(let t=0;t<e.length;t++){const n=e[t],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}destroyView(e,t){for(let n=0;n<t.length;n++)this.delegate.destroyNode(t[n])}listen(e,t,n){return this.delegate.listen(e,t,n)}listenGlobal(e,t,n){return this.delegate.listen(e,t,n)}setElementProperty(e,t,n){this.delegate.setProperty(e,t,n)}setElementAttribute(e,t,n){const[i,s]=Ks(t);null!=n?this.delegate.setAttribute(e,s,n,i):this.delegate.removeAttribute(e,s,i)}setBindingDebugInfo(e,t,n){}setElementClass(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)}setElementStyle(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)}invokeElementMethod(e,t,n){e[t].apply(e,n)}setText(e,t){this.delegate.setValue(e,t)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Rr(e,t,n,i){return new Or(e,t,n,i)}class Or{constructor(e,t,n,i){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){const t=e._def,n=e._providers=new Array(t.providers.length);for(let i=0;i<t.providers.length;i++){const s=t.providers[i];4096&s.flags||void 0===n[i]&&(n[i]=hr(e,s))}}(this)}get(e,t=qe.THROW_IF_NOT_FOUND,n=Se.Default){let i=0;return n&Se.SkipSelf?i|=1:n&Se.Self&&(i|=4),cr(this,{token:e,tokenKey:ys(e),flags:i},t)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(ft)}destroy(){if(this._destroyed)throw new Error(`The ng module ${we(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(e,t){const n=e._def,i=new Set;for(let s=0;s<n.providers.length;s++)if(131072&n.providers[s].flags){const t=e._providers[s];if(t&&t!==sr){const e=t.ngOnDestroy;"function"!=typeof e||i.has(t)||(e.apply(t),i.add(t))}}}(this),this._destroyListeners.forEach(e=>e())}onDestroy(e){this._destroyListeners.push(e)}}const Pr=ys(vt),Nr=ys(Ct),Mr=ys(bt),Fr=ys(Ii),Lr=ys(Xt),Vr=ys(Di),zr=ys(qe),jr=ys($e);function Hr(e,t,n,i,s,r,o,a){const l=[];if(o)for(let h in o){const[e,t]=o[h];l[e]={flags:8,name:h,nonMinifiedName:t,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let h in a)c.push({type:1,propName:h,target:null,eventName:a[h]});return Ur(e,t|=16384,n,i,s,s,r,l,c)}function Br(e,t,n){return Ur(-1,e|=16,null,0,t,t,n)}function $r(e,t,n,i,s){return Ur(-1,e,t,0,n,i,s)}function Ur(e,t,n,i,s,r,o,a,l){const{matchedQueries:c,references:h,matchedQueryIds:u}=Ls(n);l||(l=[]),a||(a=[]),r=ze(r);const d=Vs(o,we(s));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:u,references:h,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:Zs(a),outputs:l,element:null,provider:{token:s,value:r,deps:d},text:null,query:null,ngContent:null}}function qr(e,t){return Zr(e,t)}function Gr(e,t){let n=e;for(;n.parent&&!Ns(n);)n=n.parent;return Qr(n.parent,Os(n),!0,t.provider.value,t.provider.deps)}function Wr(e,t){const n=Qr(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(let i=0;i<t.outputs.length;i++){const s=t.outputs[i],r=n[s.propName];if(!Hn(r))throw new Error(`@Output ${s.propName} not initialized in '${n.constructor.name}'.`);{const n=r.subscribe(Kr(e,t.parent.nodeIndex,s.eventName));e.disposables[t.outputIndex+i]=n.unsubscribe.bind(n)}}return n}function Kr(e,t,n){return i=>Ds(e,t,n,i)}function Zr(e,t){const n=(8192&t.flags)>0,i=t.provider;switch(201347067&t.flags){case 512:return Qr(e,t.parent,n,i.value,i.deps);case 1024:return function(e,t,n,i,s){const r=s.length;switch(r){case 0:return i();case 1:return i(Yr(e,t,n,s[0]));case 2:return i(Yr(e,t,n,s[0]),Yr(e,t,n,s[1]));case 3:return i(Yr(e,t,n,s[0]),Yr(e,t,n,s[1]),Yr(e,t,n,s[2]));default:const o=Array(r);for(let i=0;i<r;i++)o[i]=Yr(e,t,n,s[i]);return i(...o)}}(e,t.parent,n,i.value,i.deps);case 2048:return Yr(e,t.parent,n,i.deps[0]);case 256:return i.value}}function Qr(e,t,n,i,s){const r=s.length;switch(r){case 0:return new i;case 1:return new i(Yr(e,t,n,s[0]));case 2:return new i(Yr(e,t,n,s[0]),Yr(e,t,n,s[1]));case 3:return new i(Yr(e,t,n,s[0]),Yr(e,t,n,s[1]),Yr(e,t,n,s[2]));default:const o=new Array(r);for(let i=0;i<r;i++)o[i]=Yr(e,t,n,s[i]);return new i(...o)}}const Xr={};function Yr(e,t,n,i,s=qe.THROW_IF_NOT_FOUND){if(8&i.flags)return i.token;const r=e;2&i.flags&&(s=null);const o=i.tokenKey;o===Vr&&(n=!(!t||!t.element.componentView)),t&&1&i.flags&&(n=!1,t=t.parent);let a=e;for(;a;){if(t)switch(o){case Pr:return Ar(Jr(a,t,n));case Nr:return Jr(a,t,n).renderer;case Mr:return new bt(cs(a,t.nodeIndex).renderElement);case Fr:return cs(a,t.nodeIndex).viewContainer;case Lr:if(t.element.template)return cs(a,t.nodeIndex).template;break;case Vr:return xr(Jr(a,t,n));case zr:case jr:return Sr(a,t);default:const e=(n?t.element.allProviders:t.element.publicProviders)[o];if(e){let t=hs(a,e.nodeIndex);return t||(t={instance:Zr(a,e)},a.nodes[e.nodeIndex]=t),t.instance}}n=Ns(a),t=Os(a),a=a.parent,4&i.flags&&(a=null)}const l=r.root.injector.get(i.token,Xr);return l!==Xr||s===Xr?l:r.root.ngModule.injector.get(i.token,s)}function Jr(e,t,n){let i;if(n)i=cs(e,t.nodeIndex).componentView;else for(i=e;i.parent&&!Ns(i);)i=i.parent;return i}function eo(e,t,n,i,s,r){if(32768&n.flags){const t=cs(e,n.parent.nodeIndex).componentView;2&t.def.flags&&(t.state|=8)}if(t.instance[n.bindings[i].name]=s,524288&n.flags){r=r||{};const t=Oe.unwrap(e.oldValues[n.bindingIndex+i]);r[n.bindings[i].nonMinifiedName]=new Pe(t,s,0!=(2&e.state))}return e.oldValues[n.bindingIndex+i]=s,r}function to(e,t){if(!(e.def.nodeFlags&t))return;const n=e.def.nodes;let i=0;for(let s=0;s<n.length;s++){const r=n[s];let o=r.parent;for(!o&&r.flags&t&&io(e,s,r.flags&t,i++),0==(r.childFlags&t)&&(s+=r.childCount);o&&1&o.flags&&s===o.nodeIndex+o.childCount;)o.directChildFlags&t&&(i=no(e,o,t,i)),o=o.parent}}function no(e,t,n,i){for(let s=t.nodeIndex+1;s<=t.nodeIndex+t.childCount;s++){const t=e.def.nodes[s];t.flags&n&&io(e,s,t.flags&n,i++),s+=t.childCount}return i}function io(e,t,n,i){const s=hs(e,t);if(!s)return;const r=s.instance;r&&(ps.setCurrentNode(e,t),1048576&n&&as(e,512,i)&&r.ngAfterContentInit(),2097152&n&&r.ngAfterContentChecked(),4194304&n&&as(e,768,i)&&r.ngAfterViewInit(),8388608&n&&r.ngAfterViewChecked(),131072&n&&r.ngOnDestroy())}function so(e,t,n){let i=[];for(let s in n)i.push({propName:s,bindingType:n[s]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:Fs(t),bindings:i},ngContent:null}}function ro(e){const t=e.def.nodeMatchedQueries;for(;e.parent&&Ms(e);){let n=e.parentNodeDef;e=e.parent;const i=n.nodeIndex+n.childCount;for(let s=0;s<=i;s++){const i=e.def.nodes[s];67108864&i.flags&&536870912&i.flags&&(i.query.filterId&t)===i.query.filterId&&ds(e,s).setDirty(),!(1&i.flags&&s+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(s+=i.childCount)}}if(134217728&e.def.nodeFlags)for(let n=0;n<e.def.nodes.length;n++){const t=e.def.nodes[n];134217728&t.flags&&536870912&t.flags&&ds(e,n).setDirty(),n+=t.childCount}}function oo(e,t){const n=ds(e,t.nodeIndex);if(!n.dirty)return;let i,s=void 0;if(67108864&t.flags){const n=t.parent.parent;s=ao(e,n.nodeIndex,n.nodeIndex+n.childCount,t.query,[]),i=hs(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(s=ao(e,0,e.def.nodes.length-1,t.query,[]),i=e.component);n.reset(s);const r=t.query.bindings;let o=!1;for(let a=0;a<r.length;a++){const e=r[a];let t;switch(e.bindingType){case 0:t=n.first;break;case 1:t=n,o=!0}i[e.propName]=t}o&&n.notifyOnChanges()}function ao(e,t,n,i,s){for(let r=t;r<=n;r++){const t=e.def.nodes[r],n=t.matchedQueries[i.id];if(null!=n&&s.push(lo(e,t,n)),1&t.flags&&t.element.template&&(t.element.template.nodeMatchedQueries&i.filterId)===i.filterId){const n=cs(e,r);if((t.childMatchedQueries&i.filterId)===i.filterId&&(ao(e,r+1,r+t.childCount,i,s),r+=t.childCount),16777216&t.flags){const e=n.viewContainer._embeddedViews;for(let t=0;t<e.length;t++){const r=e[t],o=Rs(r);o&&o===n&&ao(r,0,r.def.nodes.length-1,i,s)}}const o=n.template._projectedViews;if(o)for(let e=0;e<o.length;e++){const t=o[e];ao(t,0,t.def.nodes.length-1,i,s)}}(t.childMatchedQueries&i.filterId)!==i.filterId&&(r+=t.childCount)}return s}function lo(e,t,n){if(null!=n)switch(n){case 1:return cs(e,t.nodeIndex).renderElement;case 0:return new bt(cs(e,t.nodeIndex).renderElement);case 2:return cs(e,t.nodeIndex).template;case 3:return cs(e,t.nodeIndex).viewContainer;case 4:return hs(e,t.nodeIndex).instance}}function co(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function ho(e,t,n){const i=zs(e,t,n);i&&Us(e,n.ngContent.index,1,i,null,void 0)}function uo(e,t){return fo(128,e,new Array(t+1))}function po(e,t){return fo(32,e,new Array(t))}function mo(e,t){const n=Object.keys(t),i=n.length,s=new Array(i);for(let r=0;r<i;r++){const e=n[r];s[t[e]]=e}return fo(64,e,s)}function fo(e,t,n){const i=new Array(n.length);for(let s=0;s<n.length;s++){const e=n[s];i[s]={flags:8,name:e,ns:null,nonMinifiedName:e,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:i,bindingFlags:Zs(i),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function go(e,t,n){const i=new Array(n.length-1);for(let s=1;s<n.length;s++)i[s-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[s]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function _o(e,t,n){let i;const s=e.renderer;i=s.createText(n.text.prefix);const r=zs(e,t,n);return r&&s.appendChild(r,i),{renderText:i}}function bo(e,t){return(null!=e?e.toString():"")+t.suffix}function yo(e,t,n,i){let s=0,r=0,o=0,a=0,l=0,c=null,h=null,u=!1,d=!1,p=null;for(let m=0;m<t.length;m++){const e=t[m];if(e.nodeIndex=m,e.parent=c,e.bindingIndex=s,e.outputIndex=r,e.renderParent=h,o|=e.flags,l|=e.matchedQueryIds,e.element){const t=e.element;t.publicProviders=c?c.element.publicProviders:Object.create(null),t.allProviders=t.publicProviders,u=!1,d=!1,e.element.template&&(l|=e.element.template.nodeMatchedQueries)}if(wo(c,e,t.length),s+=e.bindings.length,r+=e.outputs.length,!h&&3&e.flags&&(p=e),20224&e.flags){u||(u=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const t=0!=(32768&e.flags);0==(8192&e.flags)||t?c.element.publicProviders[ys(e.provider.token)]=e:(d||(d=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[ys(e.provider.token)]=e),t&&(c.element.componentProvider=e)}if(c?(c.childFlags|=e.flags,c.directChildFlags|=e.flags,c.childMatchedQueries|=e.matchedQueryIds,e.element&&e.element.template&&(c.childMatchedQueries|=e.element.template.nodeMatchedQueries)):a|=e.flags,e.childCount>0)c=e,vo(e)||(h=e);else for(;c&&m===c.nodeIndex+c.childCount;){const e=c.parent;e&&(e.childFlags|=c.childFlags,e.childMatchedQueries|=c.childMatchedQueries),h=(c=e)&&vo(c)?c.renderParent:c}}return{factory:null,nodeFlags:o,rootNodeFlags:a,nodeMatchedQueries:l,flags:e,nodes:t,updateDirectives:n||_s,updateRenderer:i||_s,handleEvent:(e,n,i,s)=>t[n].element.handleEvent(e,i,s),bindingCount:s,outputCount:r,lastRenderRootNode:p}}function vo(e){return 0!=(1&e.flags)&&null===e.element.name}function wo(e,t,n){const i=t.element&&t.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${t.nodeIndex}!`)}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${t.nodeIndex}!`);if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${t.nodeIndex}!`);if(134217728&t.flags&&e)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${t.nodeIndex}!`)}if(t.childCount){const i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${t.nodeIndex}!`)}}function xo(e,t,n,i){const s=ko(e.root,e.renderer,e,t,n);return So(s,e.component,i),To(s),s}function Co(e,t,n){const i=ko(e,e.renderer,null,null,t);return So(i,n,n),To(i),i}function Eo(e,t,n,i){const s=t.element.componentRendererType;let r;return r=s?e.root.rendererFactory.createRenderer(i,s):e.root.renderer,ko(e.root,r,e,t.element.componentProvider,n)}function ko(e,t,n,i,s){const r=new Array(s.nodes.length),o=s.outputCount?new Array(s.outputCount):null;return{def:s,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:r,state:13,root:e,renderer:t,oldValues:new Array(s.bindingCount),disposables:o,initIndex:-1}}function So(e,t,n){e.component=t,e.context=n}function To(e){let t;Ns(e)&&(t=cs(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);const n=e.def,i=e.nodes;for(let s=0;s<n.nodes.length;s++){const r=n.nodes[s];let o;switch(ps.setCurrentNode(e,s),201347067&r.flags){case 1:const n=er(e,t,r);let a=void 0;if(33554432&r.flags){const t=Hs(r.element.componentView);a=ps.createComponentView(e,r,t,n)}tr(e,a,r,n),o={renderElement:n,componentView:a,viewContainer:null,template:r.element.template?Er(e,r):void 0},16777216&r.flags&&(o.viewContainer=vr(e,r,o));break;case 2:o=_o(e,t,r);break;case 512:case 1024:case 2048:case 256:(o=i[s])||4096&r.flags||(o={instance:qr(e,r)});break;case 16:o={instance:Gr(e,r)};break;case 16384:(o=i[s])||(o={instance:Wr(e,r)}),32768&r.flags&&So(cs(e,r.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Ti;break;case 8:ho(e,t,r),o=void 0}i[s]=o}Fo(e,Mo.CreateViewNodes),jo(e,201326592,268435456,0)}function Io(e){Ro(e),ps.updateDirectives(e,1),Lo(e,Mo.CheckNoChanges),ps.updateRenderer(e,1),Fo(e,Mo.CheckNoChanges),e.state&=-97}function Ao(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,os(e,0,256),Ro(e),ps.updateDirectives(e,0),Lo(e,Mo.CheckAndUpdate),jo(e,67108864,536870912,0);let t=os(e,256,512);to(e,2097152|(t?1048576:0)),ps.updateRenderer(e,0),Fo(e,Mo.CheckAndUpdate),jo(e,134217728,536870912,0),to(e,8388608|((t=os(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,os(e,768,1024)}function Do(e,t,n,i,s,r,o,a,l,c,h,u,d){return 0===n?function(e,t,n,i,s,r,o,a,l,c,h,u){switch(201347067&t.flags){case 1:return function(e,t,n,i,s,r,o,a,l,c,h,u){const d=t.bindings.length;let p=!1;return d>0&&ir(e,t,0,n)&&(p=!0),d>1&&ir(e,t,1,i)&&(p=!0),d>2&&ir(e,t,2,s)&&(p=!0),d>3&&ir(e,t,3,r)&&(p=!0),d>4&&ir(e,t,4,o)&&(p=!0),d>5&&ir(e,t,5,a)&&(p=!0),d>6&&ir(e,t,6,l)&&(p=!0),d>7&&ir(e,t,7,c)&&(p=!0),d>8&&ir(e,t,8,h)&&(p=!0),d>9&&ir(e,t,9,u)&&(p=!0),p}(e,t,n,i,s,r,o,a,l,c,h,u);case 2:return function(e,t,n,i,s,r,o,a,l,c,h,u){let d=!1;const p=t.bindings,m=p.length;if(m>0&&Ss(e,t,0,n)&&(d=!0),m>1&&Ss(e,t,1,i)&&(d=!0),m>2&&Ss(e,t,2,s)&&(d=!0),m>3&&Ss(e,t,3,r)&&(d=!0),m>4&&Ss(e,t,4,o)&&(d=!0),m>5&&Ss(e,t,5,a)&&(d=!0),m>6&&Ss(e,t,6,l)&&(d=!0),m>7&&Ss(e,t,7,c)&&(d=!0),m>8&&Ss(e,t,8,h)&&(d=!0),m>9&&Ss(e,t,9,u)&&(d=!0),d){let d=t.text.prefix;m>0&&(d+=bo(n,p[0])),m>1&&(d+=bo(i,p[1])),m>2&&(d+=bo(s,p[2])),m>3&&(d+=bo(r,p[3])),m>4&&(d+=bo(o,p[4])),m>5&&(d+=bo(a,p[5])),m>6&&(d+=bo(l,p[6])),m>7&&(d+=bo(c,p[7])),m>8&&(d+=bo(h,p[8])),m>9&&(d+=bo(u,p[9]));const f=ls(e,t.nodeIndex).renderText;e.renderer.setValue(f,d)}return d}(e,t,n,i,s,r,o,a,l,c,h,u);case 16384:return function(e,t,n,i,s,r,o,a,l,c,h,u){const d=hs(e,t.nodeIndex),p=d.instance;let m=!1,f=void 0;const g=t.bindings.length;return g>0&&ks(e,t,0,n)&&(m=!0,f=eo(e,d,t,0,n,f)),g>1&&ks(e,t,1,i)&&(m=!0,f=eo(e,d,t,1,i,f)),g>2&&ks(e,t,2,s)&&(m=!0,f=eo(e,d,t,2,s,f)),g>3&&ks(e,t,3,r)&&(m=!0,f=eo(e,d,t,3,r,f)),g>4&&ks(e,t,4,o)&&(m=!0,f=eo(e,d,t,4,o,f)),g>5&&ks(e,t,5,a)&&(m=!0,f=eo(e,d,t,5,a,f)),g>6&&ks(e,t,6,l)&&(m=!0,f=eo(e,d,t,6,l,f)),g>7&&ks(e,t,7,c)&&(m=!0,f=eo(e,d,t,7,c,f)),g>8&&ks(e,t,8,h)&&(m=!0,f=eo(e,d,t,8,h,f)),g>9&&ks(e,t,9,u)&&(m=!0,f=eo(e,d,t,9,u,f)),f&&p.ngOnChanges(f),65536&t.flags&&as(e,256,t.nodeIndex)&&p.ngOnInit(),262144&t.flags&&p.ngDoCheck(),m}(e,t,n,i,s,r,o,a,l,c,h,u);case 32:case 64:case 128:return function(e,t,n,i,s,r,o,a,l,c,h,u){const d=t.bindings;let p=!1;const m=d.length;if(m>0&&Ss(e,t,0,n)&&(p=!0),m>1&&Ss(e,t,1,i)&&(p=!0),m>2&&Ss(e,t,2,s)&&(p=!0),m>3&&Ss(e,t,3,r)&&(p=!0),m>4&&Ss(e,t,4,o)&&(p=!0),m>5&&Ss(e,t,5,a)&&(p=!0),m>6&&Ss(e,t,6,l)&&(p=!0),m>7&&Ss(e,t,7,c)&&(p=!0),m>8&&Ss(e,t,8,h)&&(p=!0),m>9&&Ss(e,t,9,u)&&(p=!0),p){const p=us(e,t.nodeIndex);let f;switch(201347067&t.flags){case 32:f=new Array(d.length),m>0&&(f[0]=n),m>1&&(f[1]=i),m>2&&(f[2]=s),m>3&&(f[3]=r),m>4&&(f[4]=o),m>5&&(f[5]=a),m>6&&(f[6]=l),m>7&&(f[7]=c),m>8&&(f[8]=h),m>9&&(f[9]=u);break;case 64:f={},m>0&&(f[d[0].name]=n),m>1&&(f[d[1].name]=i),m>2&&(f[d[2].name]=s),m>3&&(f[d[3].name]=r),m>4&&(f[d[4].name]=o),m>5&&(f[d[5].name]=a),m>6&&(f[d[6].name]=l),m>7&&(f[d[7].name]=c),m>8&&(f[d[8].name]=h),m>9&&(f[d[9].name]=u);break;case 128:const e=n;switch(m){case 1:f=e.transform(n);break;case 2:f=e.transform(i);break;case 3:f=e.transform(i,s);break;case 4:f=e.transform(i,s,r);break;case 5:f=e.transform(i,s,r,o);break;case 6:f=e.transform(i,s,r,o,a);break;case 7:f=e.transform(i,s,r,o,a,l);break;case 8:f=e.transform(i,s,r,o,a,l,c);break;case 9:f=e.transform(i,s,r,o,a,l,c,h);break;case 10:f=e.transform(i,s,r,o,a,l,c,h,u)}}p.value=f}return p}(e,t,n,i,s,r,o,a,l,c,h,u);default:throw"unreachable"}}(e,t,i,s,r,o,a,l,c,h,u,d):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){let i=!1;for(let s=0;s<n.length;s++)ir(e,t,s,n[s])&&(i=!0);return i}(e,t,n);case 2:return function(e,t,n){const i=t.bindings;let s=!1;for(let r=0;r<n.length;r++)Ss(e,t,r,n[r])&&(s=!0);if(s){let s="";for(let e=0;e<n.length;e++)s+=bo(n[e],i[e]);s=t.text.prefix+s;const r=ls(e,t.nodeIndex).renderText;e.renderer.setValue(r,s)}return s}(e,t,n);case 16384:return function(e,t,n){const i=hs(e,t.nodeIndex),s=i.instance;let r=!1,o=void 0;for(let a=0;a<n.length;a++)ks(e,t,a,n[a])&&(r=!0,o=eo(e,i,t,a,n[a],o));return o&&s.ngOnChanges(o),65536&t.flags&&as(e,256,t.nodeIndex)&&s.ngOnInit(),262144&t.flags&&s.ngDoCheck(),r}(e,t,n);case 32:case 64:case 128:return function(e,t,n){const i=t.bindings;let s=!1;for(let r=0;r<n.length;r++)Ss(e,t,r,n[r])&&(s=!0);if(s){const s=us(e,t.nodeIndex);let r;switch(201347067&t.flags){case 32:r=n;break;case 64:r={};for(let t=0;t<n.length;t++)r[i[t].name]=n[t];break;case 128:const e=n[0],s=n.slice(1);r=e.transform(...s)}s.value=r}return s}(e,t,n);default:throw"unreachable"}}(e,t,i)}function Ro(e){const t=e.def;if(4&t.nodeFlags)for(let n=0;n<t.nodes.length;n++){const i=t.nodes[n];if(4&i.flags){const t=cs(e,n).template._projectedViews;if(t)for(let n=0;n<t.length;n++){const i=t[n];i.state|=32,As(i,e)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Oo(e,t,n,i,s,r,o,a,l,c,h,u,d){return 0===n?function(e,t,n,i,s,r,o,a,l,c,h,u){const d=t.bindings.length;d>0&&Ts(e,t,0,n),d>1&&Ts(e,t,1,i),d>2&&Ts(e,t,2,s),d>3&&Ts(e,t,3,r),d>4&&Ts(e,t,4,o),d>5&&Ts(e,t,5,a),d>6&&Ts(e,t,6,l),d>7&&Ts(e,t,7,c),d>8&&Ts(e,t,8,h),d>9&&Ts(e,t,9,u)}(e,t,i,s,r,o,a,l,c,h,u,d):function(e,t,n){for(let i=0;i<n.length;i++)Ts(e,t,i,n[i])}(e,t,i),!1}function Po(e,t){if(ds(e,t.nodeIndex).dirty)throw ms(ps.createDebugContext(e,t.nodeIndex),`Query ${t.query.id} not dirty`,`Query ${t.query.id} dirty`,0!=(1&e.state))}function No(e){if(!(128&e.state)){if(Lo(e,Mo.Destroy),Fo(e,Mo.Destroy),to(e,131072),e.disposables)for(let t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(!(16&e.state))return;const t=Rs(e);if(t){const n=t.template._projectedViews;n&&(fr(n,n.indexOf(e)),ps.dirtyParentQueries(e))}}(e),e.renderer.destroyNode&&function(e){const t=e.def.nodes.length;for(let n=0;n<t;n++){const t=e.def.nodes[n];1&t.flags?e.renderer.destroyNode(cs(e,n).renderElement):2&t.flags?e.renderer.destroyNode(ls(e,n).renderText):(67108864&t.flags||134217728&t.flags)&&ds(e,n).destroy()}}(e),Ns(e)&&e.renderer.destroy(),e.state|=128}}const Mo=function(){var e={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return e[e.CreateViewNodes]="CreateViewNodes",e[e.CheckNoChanges]="CheckNoChanges",e[e.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",e[e.Destroy]="Destroy",e}();function Fo(e,t){const n=e.def;if(33554432&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const s=n.nodes[i];33554432&s.flags?Vo(cs(e,i).componentView,t):0==(33554432&s.childFlags)&&(i+=s.childCount)}}function Lo(e,t){const n=e.def;if(16777216&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const s=n.nodes[i];if(16777216&s.flags){const n=cs(e,i).viewContainer._embeddedViews;for(let e=0;e<n.length;e++)Vo(n[e],t)}else 0==(16777216&s.childFlags)&&(i+=s.childCount)}}function Vo(e,t){const n=e.state;switch(t){case Mo.CheckNoChanges:0==(128&n)&&(12==(12&n)?Io(e):64&n&&zo(e,Mo.CheckNoChangesProjectedViews));break;case Mo.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?Io(e):64&n&&zo(e,t));break;case Mo.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ao(e):64&n&&zo(e,Mo.CheckAndUpdateProjectedViews));break;case Mo.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ao(e):64&n&&zo(e,t));break;case Mo.Destroy:No(e);break;case Mo.CreateViewNodes:To(e)}}function zo(e,t){Lo(e,t),Fo(e,t)}function jo(e,t,n,i){if(!(e.def.nodeFlags&t&&e.def.nodeFlags&n))return;const s=e.def.nodes.length;for(let r=0;r<s;r++){const s=e.def.nodes[r];if(s.flags&t&&s.flags&n)switch(ps.setCurrentNode(e,s.nodeIndex),i){case 0:oo(e,s);break;case 1:Po(e,s)}s.childFlags&t&&s.childFlags&n||(r+=s.childCount)}}let Ho=!1;function Bo(e,t,n,i,s,r){const o=s.injector.get(wt);return Co(Uo(e,s,o,t,n),i,r)}function $o(e,t,n,i,s,r){const o=s.injector.get(wt),a=Uo(e,s,new Ea(o),t,n),l=ea(i);return xa(oa.create,Co,null,[a,l,r])}function Uo(e,t,n,i,s){const r=t.injector.get(en),o=t.injector.get(bn),a=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:i,selectorOrNode:s,sanitizer:r,rendererFactory:n,renderer:a,errorHandler:o}}function qo(e,t,n,i){const s=ea(n);return xa(oa.create,xo,null,[e,t,s,i])}function Go(e,t,n,i){return n=Qo.get(t.element.componentProvider.provider.token)||ea(n),xa(oa.create,Eo,null,[e,t,n,i])}function Wo(e,t,n,i){return Rr(e,t,n,function(e){const{hasOverrides:t,hasDeprecatedOverrides:n}=function(e){let t=!1,n=!1;return 0===Ko.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(e=>{const i=Ko.get(e.token);3840&e.flags&&i&&(t=!0,n=n||i.deprecatedBehavior)}),e.modules.forEach(e=>{Zo.forEach((i,s)=>{oe(s).providedIn===e&&(t=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e);return t?(function(e){for(let t=0;t<e.providers.length;t++){const i=e.providers[t];n&&(i.flags|=4096);const s=Ko.get(i.token);s&&(i.flags=-3841&i.flags|s.flags,i.deps=Vs(s.deps),i.value=s.value)}if(Zo.size>0){let t=new Set(e.modules);Zo.forEach((i,s)=>{if(t.has(oe(s).providedIn)){let t={token:s,flags:i.flags|(n?4096:0),deps:Vs(i.deps),value:i.value,index:e.providers.length};e.providers.push(t),e.providersByKey[ys(s)]=t}})}}(e=e.factory(()=>_s)),e):e}(i))}const Ko=new Map,Zo=new Map,Qo=new Map;function Xo(e){let t;Ko.set(e.token,e),"function"==typeof e.token&&(t=oe(e.token))&&"function"==typeof t.providedIn&&Zo.set(e.token,e)}function Yo(e,t){const n=Hs(t.viewDefFactory),i=Hs(n.nodes[0].element.componentView);Qo.set(e,i)}function Jo(){Ko.clear(),Zo.clear(),Qo.clear()}function ea(e){if(0===Ko.size)return e;const t=function(e){const t=[];let n=null;for(let i=0;i<e.nodes.length;i++){const s=e.nodes[i];1&s.flags&&(n=s),n&&3840&s.flags&&Ko.has(s.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(()=>_s);for(let i=0;i<t.length;i++)n(e,t[i]);return e;function n(e,t){for(let n=t+1;n<e.nodes.length;n++){const t=e.nodes[n];if(1&t.flags)return;if(3840&t.flags){const e=t.provider,n=Ko.get(e.token);n&&(t.flags=-3841&t.flags|n.flags,e.deps=Vs(n.deps),e.value=n.value)}}}}function ta(e,t,n,i,s,r,o,a,l,c,h,u,d){const p=e.def.nodes[t];return Do(e,p,n,i,s,r,o,a,l,c,h,u,d),224&p.flags?us(e,t).value:void 0}function na(e,t,n,i,s,r,o,a,l,c,h,u,d){const p=e.def.nodes[t];return Oo(e,p,n,i,s,r,o,a,l,c,h,u,d),224&p.flags?us(e,t).value:void 0}function ia(e){return xa(oa.detectChanges,Ao,null,[e])}function sa(e){return xa(oa.checkNoChanges,Io,null,[e])}function ra(e){return xa(oa.destroy,No,null,[e])}const oa=function(){var e={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return e[e.create]="create",e[e.detectChanges]="detectChanges",e[e.checkNoChanges]="checkNoChanges",e[e.destroy]="destroy",e[e.handleEvent]="handleEvent",e}();let aa,la,ca;function ha(e,t){la=e,ca=t}function ua(e,t,n,i){return ha(e,t),xa(oa.handleEvent,e.def.handleEvent,null,[e,t,n,i])}function da(e,t){if(128&e.state)throw gs(oa[aa]);return ha(e,ba(e,0)),e.def.updateDirectives(function(e,n,i,...s){const r=e.def.nodes[n];return 0===t?ma(e,r,i,s):fa(e,r,i,s),16384&r.flags&&ha(e,ba(e,n)),224&r.flags?us(e,r.nodeIndex).value:void 0},e)}function pa(e,t){if(128&e.state)throw gs(oa[aa]);return ha(e,ya(e,0)),e.def.updateRenderer(function(e,n,i,...s){const r=e.def.nodes[n];return 0===t?ma(e,r,i,s):fa(e,r,i,s),3&r.flags&&ha(e,ya(e,n)),224&r.flags?us(e,r.nodeIndex).value:void 0},e)}function ma(e,t,n,i){if(Do(e,t,n,...i)){const o=1===n?i[0]:i;if(16384&t.flags){const n={};for(let e=0;e<t.bindings.length;e++){const i=t.bindings[e],a=o[e];8&i.flags&&(n[(s=i.nonMinifiedName,r=void 0,r=s.replace(/[$@]/g,"_"),`ng-reflect-${s=r.replace(ga,(...e)=>"-"+e[1].toLowerCase())}`)]=_a(a))}const i=t.parent,a=cs(e,i.nodeIndex).renderElement;if(i.element.name)for(let t in n){const i=n[t];null!=i?e.renderer.setAttribute(a,t,i):e.renderer.removeAttribute(a,t)}else e.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var s,r}function fa(e,t,n,i){Oo(e,t,n,...i)}const ga=/([A-Z])/g;function _a(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}function ba(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(16384&t.flags&&t.bindings&&t.bindings.length)return n}return null}function ya(e,t){for(let n=t;n<e.def.nodes.length;n++){const t=e.def.nodes[n];if(3&t.flags&&t.bindings&&t.bindings.length)return n}return null}class va{constructor(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];let n=this.nodeDef,i=e;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=Os(i),i=i.parent;this.elDef=n,this.elView=i}get elOrCompView(){return cs(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Sr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const e=[];if(this.elDef)for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e}get references(){const e={};if(this.elDef){wa(this.elView,this.elDef,e);for(let t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){const n=this.elView.def.nodes[t];20224&n.flags&&wa(this.elView,n,e),t+=n.childCount}}return e}get componentRenderElement(){const e=function(e){for(;e&&!Ns(e);)e=e.parent;return e.parent?cs(e.parent,Os(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?Ps(this.view,this.nodeDef):Ps(this.elView,this.elDef)}logError(e,...t){let n,i;2&this.nodeDef.flags?(n=this.view.def,i=this.nodeDef.nodeIndex):(n=this.elView.def,i=this.elDef.nodeIndex);const s=function(e,t){let n=-1;for(let i=0;i<=t;i++)3&e.nodes[i].flags&&n++;return n}(n,i);let r=-1;n.factory(()=>++r===s?e.error.bind(e,...t):_s),r<s&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error(...t))}}function wa(e,t,n){for(let i in t.references)n[i]=lo(e,t,t.references[i])}function xa(e,t,n,i){const s=aa,r=la,o=ca;try{aa=e;const l=t.apply(n,i);return la=r,ca=o,aa=s,l}catch(a){if(fn(a)||!la)throw a;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),fs(e,t),e}(a,Ca())}}function Ca(){return la?new va(la,ca):null}class Ea{constructor(e){this.delegate=e}createRenderer(e,t){return new ka(this.delegate.createRenderer(e,t))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class ka{constructor(e){this.delegate=e,this.debugContextFactory=Ca,this.data=this.delegate.data}createDebugContext(e){return this.debugContextFactory(e)}destroyNode(e){!function(e){Mi.delete(e.nativeNode)}(Fi(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)}destroy(){this.delegate.destroy()}createElement(e,t){const n=this.delegate.createElement(e,t),i=this.createDebugContext(n);if(i){const t=new Ni(n,null,i);t.name=e,Li(t)}return n}createComment(e){const t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&Li(new Pi(t,null,n)),t}createText(e){const t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&Li(new Pi(t,null,n)),t}appendChild(e,t){const n=Fi(e),i=Fi(t);n&&i&&n instanceof Ni&&n.addChild(i),this.delegate.appendChild(e,t)}insertBefore(e,t,n){const i=Fi(e),s=Fi(t),r=Fi(n);i&&s&&i instanceof Ni&&i.insertBefore(r,s),this.delegate.insertBefore(e,t,n)}removeChild(e,t){const n=Fi(e),i=Fi(t);n&&i&&n instanceof Ni&&n.removeChild(i),this.delegate.removeChild(e,t)}selectRootElement(e,t){const n=this.delegate.selectRootElement(e,t),i=Ca()||(rs?this.createDebugContext(n):null);return i&&Li(new Ni(n,null,i)),n}setAttribute(e,t,n,i){const s=Fi(e);s&&s instanceof Ni&&(s.attributes[i?i+":"+t:t]=n),this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){const i=Fi(e);i&&i instanceof Ni&&(i.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)}addClass(e,t){const n=Fi(e);n&&n instanceof Ni&&(n.classes[t]=!0),this.delegate.addClass(e,t)}removeClass(e,t){const n=Fi(e);n&&n instanceof Ni&&(n.classes[t]=!1),this.delegate.removeClass(e,t)}setStyle(e,t,n,i){const s=Fi(e);s&&s instanceof Ni&&(s.styles[t]=n),this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){const i=Fi(e);i&&i instanceof Ni&&(i.styles[t]=null),this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){const i=Fi(e);i&&i instanceof Ni&&(i.properties[t]=n),this.delegate.setProperty(e,t,n)}listen(e,t,n){if("string"!=typeof e){const i=Fi(e);i&&i.listeners.push(new Oi(t,n))}return this.delegate.listen(e,t,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setValue(e,t){return this.delegate.setValue(e,t)}}function Sa(e,t,n){return new Ta(e,t,n)}class Ta extends lt{constructor(e,t,n){super(),this.moduleType=e,this._bootstrapComponents=t,this._ngModuleDefFactory=n}create(e){!function(){if(Ho)return;Ho=!0;const e=At()?{setCurrentNode:ha,createRootView:$o,createEmbeddedView:qo,createComponentView:Go,createNgModuleRef:Wo,overrideProvider:Xo,overrideComponentView:Yo,clearOverrides:Jo,checkAndUpdateView:ia,checkNoChangesView:sa,destroyView:ra,createDebugContext:(e,t)=>new va(e,t),handleEvent:ua,updateDirectives:da,updateRenderer:pa}:{setCurrentNode:()=>{},createRootView:Bo,createEmbeddedView:xo,createComponentView:Eo,createNgModuleRef:Rr,overrideProvider:_s,overrideComponentView:_s,clearOverrides:_s,checkAndUpdateView:Ao,checkNoChangesView:Io,destroyView:No,createDebugContext:(e,t)=>new va(e,t),handleEvent:(e,t,n,i)=>e.def.handleEvent(e,t,n,i),updateDirectives:(e,t)=>e.def.updateDirectives(0===t?ta:na,e),updateRenderer:(e,t)=>e.def.updateRenderer(0===t?ta:na,e)};ps.setCurrentNode=e.setCurrentNode,ps.createRootView=e.createRootView,ps.createEmbeddedView=e.createEmbeddedView,ps.createComponentView=e.createComponentView,ps.createNgModuleRef=e.createNgModuleRef,ps.overrideProvider=e.overrideProvider,ps.overrideComponentView=e.overrideComponentView,ps.clearOverrides=e.clearOverrides,ps.checkAndUpdateView=e.checkAndUpdateView,ps.checkNoChangesView=e.checkNoChangesView,ps.destroyView=e.destroyView,ps.resolveDep=Yr,ps.createDebugContext=e.createDebugContext,ps.handleEvent=e.handleEvent,ps.updateDirectives=e.updateDirectives,ps.updateRenderer=e.updateRenderer,ps.dirtyParentQueries=ro}();const t=function(e){const t=Array.from(e.providers),n=Array.from(e.modules),i={};for(const s in e.providersByKey)i[s]=e.providersByKey[s];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:i}}(Hs(this._ngModuleDefFactory));return ps.createNgModuleRef(this.moduleType,e||qe.NULL,this._bootstrapComponents,t)}}n("yLV6");const Ia=Element.prototype,Aa=Ia.matches||Ia.matchesSelector||Ia.mozMatchesSelector||Ia.msMatchesSelector||Ia.oMatchesSelector||Ia.webkitMatchesSelector,Da={schedule(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)},scheduleBeforeRender(e){if("undefined"==typeof window)return Da.schedule(e,0);if(void 0===window.requestAnimationFrame)return Da.schedule(e,16);const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}};function Ra(e,t,n){let i=n;return function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}(e)&&t.some((t,n)=>!("*"===t||!function(t,n){return Aa.call(e,n)}(0,t)||(i=n,0))),i}const Oa=10;class Pa{constructor(e,t){this.component=e,this.injector=t,this.componentFactory=t.get(ft).resolveComponentFactory(e)}create(e){return new Na(this.componentFactory,e)}}class Na{constructor(e,t){this.componentFactory=e,this.injector=t,this.inputChanges=null,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.uninitializedInputs=new Set}connect(e){if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);this.componentRef||this.initializeComponent(e)}disconnect(){this.componentRef&&null===this.scheduledDestroyFn&&(this.scheduledDestroyFn=Da.schedule(()=>{this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},Oa))}getInputValue(e){return this.componentRef?this.componentRef.instance[e]:this.initialInputValues.get(e)}setInputValue(e,t){var n,i;(n=t)===(i=this.getInputValue(e))||n!=n&&i!=i||(this.componentRef?(this.recordInputChange(e,t),this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t))}initializeComponent(e){const t=qe.create({providers:[],parent:this.injector}),n=function(t,n){const i=e.childNodes,s=n.map(()=>[]);let r=-1;n.some((e,t)=>"*"===e&&(r=t,!0));for(let e=0,o=i.length;e<o;++e){const t=i[e],o=Ra(t,n,r);-1!==o&&s[o].push(t)}return s}(0,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,n,e),this.implementsOnChanges="function"==typeof this.componentRef.instance.ngOnChanges,this.initializeInputs(),this.initializeOutputs(),this.detectChanges(),this.injector.get(ki).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e})=>{const t=this.initialInputValues.get(e);t?this.setInputValue(e,t):this.uninitializedInputs.add(e)}),this.initialInputValues.clear()}initializeOutputs(){const e=this.componentFactory.outputs.map(({propName:e,templateName:t})=>this.componentRef.instance[e].pipe(L(e=>({name:t,value:e}))));this.events=K(...e)}callNgOnChanges(){if(!this.implementsOnChanges||null===this.inputChanges)return;const e=this.inputChanges;this.inputChanges=null,this.componentRef.instance.ngOnChanges(e)}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=Da.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(this.componentRef&&!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const n=this.inputChanges[e];if(n)return void(n.currentValue=t);const i=this.uninitializedInputs.has(e);this.uninitializedInputs.delete(e);const s=i?void 0:this.getInputValue(e);this.inputChanges[e]=new Pe(s,t,i)}detectChanges(){this.componentRef&&(this.callNgOnChanges(),this.componentRef.changeDetectorRef.detectChanges())}}class Ma extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function Fa(e,t){const n=function(e,n){return t.injector.get(ft).resolveComponentFactory(e).inputs}(e),i=t.strategyFactory||new Pa(e,t.injector),s=function(e){const t={};return e.forEach(({propName:e,templateName:n})=>{t[function(e){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}()]=e}),t}(n);class r extends Ma{constructor(e){super(),this.ngElementStrategy=i.create(e||t.injector)}attributeChangedCallback(e,n,r,o){this.ngElementStrategy||(this.ngElementStrategy=i.create(t.injector)),this.ngElementStrategy.setInputValue(s[e],r)}connectedCallback(){this.ngElementStrategy||(this.ngElementStrategy=i.create(t.injector)),this.ngElementStrategy.connect(this),this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(e=>{const t=function(e,t,n){if("function"!=typeof CustomEvent){const i=e.createEvent("CustomEvent");return i.initCustomEvent(t,!1,!1,n),i}return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:n})}(this.ownerDocument,e.name,e.value);this.dispatchEvent(t)})}disconnectedCallback(){this.ngElementStrategy&&this.ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}}return r.observedAttributes=Object.keys(s),n.map(({propName:e})=>e).forEach(e=>{Object.defineProperty(r.prototype,e,{get:function(){return this.ngElementStrategy.getInputValue(e)},set:function(t){this.ngElementStrategy.setInputValue(e,t)},configurable:!0,enumerable:!0})}),r}var La,Va=function(e,t){return(Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},za=new ae("NGX_MONACO_EDITOR_CONFIG"),ja=!1;function Ha(e,t,n,s){return i(n)&&(s=n,n=void 0),s?Ha(e,t,n).pipe(L(e=>l(e)?s(...e):s(e))):new y(i=>{!function e(t,n,i,s,r){let o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(n,i,r),o=(()=>e.removeEventListener(n,i,r))}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(n,i),o=(()=>e.off(n,i))}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(n,i),o=(()=>e.removeListener(n,i))}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,a=t.length;o<a;o++)e(t[o],n,i,s,r)}s.add(o)}(e,t,function(e){i.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},i,n)})}var Ba,$a,Ua,qa=function(e){function t(t,n){var i=e.call(this,n)||this;return i.zone=t,i.editorConfig=n,i._value="",i.propagateChange=function(e){},i.onTouched=function(){},i}return function(e,t){function n(){this.constructor=e}Va(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"model",{set:function(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(e){var t=this;this._value=e||"",setTimeout(function(){t._editor&&!t.options.model&&t._editor.setValue(t._value)})},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t.prototype.initMonaco=function(e){var t=this,n=!!e.model;n&&(e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)),this._editor=monaco.editor.create(this._editorContainer.nativeElement,e),n||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(function(e){var n=t._editor.getValue();t.propagateChange(n),t.zone.run(function(){return t._value=n})}),this._editor.onDidBlurEditor(function(e){t.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=Ha(window,"resize").subscribe(function(){return t._editor.layout()}),this.onInit.emit(this._editor)},t}(function(){function e(e){this.config=e,this.onInit=new Qt}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(e))},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;ja?La.then(function(){e.initMonaco(e.options)}):(ja=!0,La=new Promise(function(t){var n=e.config.baseUrl||"/assets";if("object"!=typeof window.monaco){var i=function(){window.require.config({paths:{vs:n+"/monaco/vs"}}),window.require(["vs/editor/editor.main"],function(){"function"==typeof e.config.onMonacoLoad&&e.config.onMonacoLoad(),e.initMonaco(e.options),t()})};if(window.require)i();else{var s=document.createElement("script");s.type="text/javascript",s.src=n+"/monaco/vs/loader.js",s.addEventListener("load",i),document.body.appendChild(s)}}else t()}))},e.prototype.ngOnDestroy=function(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)},e}()),Ga=function(){function e(){}return t=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[{provide:za,useValue:e}]}},e;var t}();class Wa{constructor(){this.text="\n    Lorem Ipsum is simply dummy text of the printing and typesetting industry.\n    Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,\n    when an unknown printer took a galley of type and scrambled it to make\n    a type specimen book. It has survived not only five centuries,\n    but also the leap into electronic typesetting, remaining essentially unchanged.\n    It was popularised in the 1960s with the release of Letraset sheets containing\n    Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker\n    including versions of Lorem Ipsum.\n    ",this.text2="The quick brown fox jumps over the lazy dog.",this.data1=[{text:"Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            Episode I - The Phantom Menace\n            "},{text:"Episode II - Attack of the Clones"},{text:"Episode III - Revenge of the Sith"},{text:"Episode IV - A New Hope"},{text:"Episode V - The Empire Strikes Back"},{text:"Episode VI - Return of the Jedi"},{text:"Episode VII - The Force Awakens",state:"success-state"},{text:"Episode VIII - The Last Jedi",state:"error-state"}],this.data2=[],this.radio=[{id:"Winter",label:"Winter",state:"error-state"},{id:"Spring",label:"Spring",state:"warning-state"},{id:"Summer",label:"Summer",state:"success-state"},{id:"Autumn",label:"Autumn"}],this.checkbox=[{id:"Winter",label:"Winter",state:"error-state"},{id:"Spring",label:"Spring",state:"warning-state"},{id:"Summer",label:"Summer",state:"success-state"},{id:"Autumn",label:"Autumn"}]}ngOnInit(){}}!function(e){e.display4="display4",e.display3="display3",e.display2="display2",e.display1="display1",e.headline="headline",e.title="title",e.subheading2="subheading2",e.subheading1="subheading1",e.body1="body1",e.body2="body2",e.caption="caption"}(Ba||(Ba={})),function(e){e.color="color",e.number="number",e.text="text",e.multiline="multiline"}($a||($a={})),function(e){e.requireNonNull=function(e,t){if(null==e)throw t=t||"require non null",new ReferenceError(t);return e},e.requireNonNullArray=function(e,t){return this.requireNonNull(e,t),e.forEach(e=>this.requireNonNull(e),t),e},e.requireNonNullString=function(e,t){if(null==e||0===e.trim().length)throw t=t||"'require non null or empty",new ReferenceError(t);return e},e.assert=function(e,t){if(!e)throw new Error(t)}}(Ua||(Ua={}));class Ka{constructor(e){this.changes=e,this.changed=new Qt,this.serialize=(()=>{const e={};return this.props().forEach(t=>{e[t.name]=this[t.name],null==e[t.name]&&null!=t.default&&(e[t.name]="function"==typeof t.default?t.default(this):t.default),e[t.name]=this.convertBool(e[t.name])}),e}),this.deserialize=(e=>{Ua.requireNonNull(e,"data"),this.props().forEach(t=>{this[t.name]=e[t.name],null==this[t.name]&&null!=t.default&&(this[t.name]="function"==typeof t.default?t.default(this):t.default),this[t.name]=this.convertBool(this[t.name])}),this.changed.emit(),this.changes.detectChanges()})}didChanged(){this.changed.emit()}detectChanges(){this.changes.detectChanges()}convertBool(e){if("boolean"==typeof e)return e?1:0;if("object"==typeof e)for(const t in e)e[t]=this.convertBool(e[t]);return e}props(){return[...this.properties,{name:"cid",default:""},{name:"debug",default:!1}]}}class Za extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"type",default:$a.text},{name:"value",default:""},{name:"placeholder",default:""}],this.type=$a.text,this.value="",this.placeholder=""}ngOnInit(){}}class Qa{constructor(e,t){this.el=e,this.renderer=t,this.events=[],this.dropped=new Qt,this.id="dnd-"+ ++Qa.NODE_ID}ngAfterContentInit(){const e=this.el.nativeElement;this.setDraggable(e),this.setDroppable(e)}ngOnDestroy(){this.events.forEach(e=>e())}setDraggable(e){this.renderer.setAttribute(e,"id",this.id),this.renderer.setProperty(e,"draggable",!0),e.addEventListener("dragstart",t=>(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("dnd-id",e.id),this.renderer.addClass(e,"dnd-drag"),!1),!1),e.addEventListener("dragend",t=>(this.renderer.removeClass(e,"dnd-drag"),!1),!1)}setDroppable(e){this.addListener(e,"dragover",t=>(t.dataTransfer.dropEffect="move",t.preventDefault&&t.preventDefault(),this.renderer.addClass(e,"dnd-over"),!1)),this.addListener(e,"dragenter",t=>(this.renderer.removeClass(e,"dnd-over"),!1)),this.addListener(e,"dragleave",t=>(this.renderer.removeClass(e,"dnd-over"),!1)),this.addListener(e,"drop",t=>{t.preventDefault(),this.renderer.removeClass(e,"dnd-over");const n=t.dataTransfer.getData("dnd-id");return n&&this.dropped.emit({source:n,destination:this.id}),!1})}addListener(e,t,n){this.renderer.listen(e,t,n),this.events.push(()=>{e.removeEventListener(t,n,!1)})}}Qa.NODE_ID=0;class Xa{constructor(){this.components={}}register(e,t){this.components[e]=t}unregister(e){delete this.components[e]}get(e){if(e)return this.components[e]}}Xa.ngInjectableDef=re({factory:function(){return new Xa},token:Xa,providedIn:"root"});class Ya extends Ka{constructor(e,t){super(e),this.dragdrop=t,this.properties=[{name:"disabled",default:!1},{name:"data",default:""},{name:"content",default:""},{name:"droppable",default:!1}],this.changed=new Qt,this.content=""}ngOnInit(){}ngOnDestroy(){this.directive&&this.dragdrop.unregister(this.directive.id)}ngAfterViewInit(){this.dragdrop.register(this.directive.id,this)}dropped(e){const{source:t,destination:n}=e;if(t!==n){const e=this.dragdrop.get(t),i=this.dragdrop.get(n);if(!i.droppable)return void(e.data===i.data&&(e.data=e.content=""));if(e.droppable&&e.content&&i.content){const t=e.content;e.content=i.content,i.content=t;const n=e.data;e.data=i.data,i.data=n}else i.content=e.content,i.data=e.data;setTimeout(()=>{this.didChanged(),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},100)}}}class Ja extends Ka{constructor(e){super(e),this.properties=[{name:"selectable",default:!1},{name:"text",default:""},{name:"selections",default:[]},{name:"typo",default:Ba.body1}]}get text(){return this._text||(this._text="")}set text(e){this._selections=[],this._text=e||""}get typo(){return this._typo||(this._typo=Ba.body1)}set typo(e){this._typo=e||Ba.body1}get selections(){return this._selections||(this._selections=[])}set selections(e){this._selections=e||[],setTimeout(()=>this.refresh(),200)}didSelect(e){if(this.selectable){const t=e.target,n=Number.parseInt(t.getAttribute("data-index"),10);if(!Number.isNaN(n)){let e=0;for(const i of this._selections){if(i.index===n)return this._selections.splice(e,1),void(t.className="");e++}t.className="highlight-state",this._selections.push({index:n})}}}refresh(){let e;const t=this.container.nativeElement.children;for(let n=0;n<t.length;n++)e=this._selections.find(e=>e.index===n),t.item(n).className="",e&&(t.item(n).className=e.state||"highlight-state")}}class el{}class tl{constructor(e){this._subject=new Qt,this._platformStrategy=e;const t=this._platformStrategy.getBaseHref();this._baseHref=tl.stripTrailingSlash(nl(t)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+tl.normalizeQueryParams(t))}normalize(e){return tl.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,nl(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}static normalizeQueryParams(e){return e&&"?"!==e[0]?"?"+e:e}static joinWithSlash(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}static stripTrailingSlash(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}}function nl(e){return e.replace(/\/index.html$/,"")}const il=void 0;var sl=["en",[["a","p"],["AM","PM"],il],[["AM","PM"],il,il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",il,"{1} 'at' {0}",il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];const rl={},ol=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),al=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ll=new ae("UseV4Plurals");class cl{}class hl extends cl{constructor(e,t){super(),this.locale=e,this.deprecatedPluralFn=t}getPluralCategory(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):function(e){return function(e){const t=e.toLowerCase().replace(/_/g,"-");let n=rl[t];if(n)return n;const i=t.split("-")[0];if(n=rl[i])return n;if("en"===i)return sl;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[18]}(t||this.locale)(e)){case ol.Zero:return"zero";case ol.One:return"one";case ol.Two:return"two";case ol.Few:return"few";case ol.Many:return"many";default:return"other"}}}class ul{constructor(e,t,n,i){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=i,this._initialClasses=[]}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Ne(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${we(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}class dl{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class pl{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){At()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(e)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,i)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new dl(null,this._ngForOf,-1,-1),i),s=new ml(e,n);t.push(s)}else if(null==i)this._viewContainer.remove(n);else{const s=this._viewContainer.get(n);this._viewContainer.move(s,i);const r=new ml(e,s);t.push(r)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=i,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}class ml{constructor(e,t){this.record=e,this.view=t}}class fl{constructor(e,t){this._viewContainer=e,this._context=new gl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){_l("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){_l("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateGuard_ngIf(e,t){return!0}}class gl{constructor(){this.$implicit=null,this.ngIf=null}}function _l(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${we(t)}'.`)}class bl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}class yl{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}}}class vl{constructor(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new bl(e,t)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class wl{constructor(e,t,n){n._addDefault(new bl(e,t))}}class xl{constructor(e,t,n){this._differs=e,this._ngEl=t,this._renderer=n}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_applyChanges(e){e.forEachRemovedItem(e=>this._setStyle(e.key,null)),e.forEachAddedItem(e=>this._setStyle(e.key,e.currentValue)),e.forEachChangedItem(e=>this._setStyle(e.key,e.currentValue))}_setStyle(e,t){const[n,i]=e.split(".");null!=(t=null!=t&&i?`${t}${i}`:t)?this._renderer.setStyle(this._ngEl.nativeElement,n,t):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}function Cl(e,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${we(e)}'`)}const El=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,kl={yMMMdjms:Fl(Ml([Pl("year",1),Nl("month",3),Pl("day",1),Pl("hour",1),Pl("minute",1),Pl("second",1)])),yMdjm:Fl(Ml([Pl("year",1),Pl("month",1),Pl("day",1),Pl("hour",1),Pl("minute",1)])),yMMMMEEEEd:Fl(Ml([Pl("year",1),Nl("month",4),Nl("weekday",4),Pl("day",1)])),yMMMMd:Fl(Ml([Pl("year",1),Nl("month",4),Pl("day",1)])),yMMMd:Fl(Ml([Pl("year",1),Nl("month",3),Pl("day",1)])),yMd:Fl(Ml([Pl("year",1),Pl("month",1),Pl("day",1)])),jms:Fl(Ml([Pl("hour",1),Pl("second",1),Pl("minute",1)])),jm:Fl(Ml([Pl("hour",1),Pl("minute",1)]))},Sl={yyyy:Fl(Pl("year",4)),yy:Fl(Pl("year",2)),y:Fl(Pl("year",1)),MMMM:Fl(Nl("month",4)),MMM:Fl(Nl("month",3)),MM:Fl(Pl("month",2)),M:Fl(Pl("month",1)),LLLL:Fl(Nl("month",4)),L:Fl(Nl("month",1)),dd:Fl(Pl("day",2)),d:Fl(Pl("day",1)),HH:Tl(Al(Fl(Ol(Pl("hour",2),!1)))),H:Al(Fl(Ol(Pl("hour",1),!1))),hh:Tl(Al(Fl(Ol(Pl("hour",2),!0)))),h:Al(Fl(Ol(Pl("hour",1),!0))),jj:Fl(Pl("hour",2)),j:Fl(Pl("hour",1)),mm:Tl(Fl(Pl("minute",2))),m:Fl(Pl("minute",1)),ss:Tl(Fl(Pl("second",2))),s:Fl(Pl("second",1)),sss:Fl(Pl("second",3)),EEEE:Fl(Nl("weekday",4)),EEE:Fl(Nl("weekday",3)),EE:Fl(Nl("weekday",2)),E:Fl(Nl("weekday",1)),a:Il(Fl(Ol(Pl("hour",1),!0))),Z:Rl("short"),z:Rl("long"),ww:Fl({}),w:Fl({}),G:Fl(Nl("era",1)),GG:Fl(Nl("era",2)),GGG:Fl(Nl("era",3)),GGGG:Fl(Nl("era",4))};function Tl(e){return function(t,n){const i=e(t,n);return 1==i.length?"0"+i:i}}function Il(e){return function(t,n){return e(t,n).split(" ")[1]}}function Al(e){return function(t,n){return e(t,n).split(" ")[0]}}function Dl(e,t,n){return new Intl.DateTimeFormat(t,n).format(e).replace(/[\u200e\u200f]/g,"")}function Rl(e){const t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,n){const i=Dl(e,n,t);return i?i.substring(3):""}}function Ol(e,t){return e.hour12=t,e}function Pl(e,t){const n={};return n[e]=2===t?"2-digit":"numeric",n}function Nl(e,t){const n={};return n[e]=t<4?t>1?"short":"narrow":"long",n}function Ml(e){return e.reduce((e,t)=>Object.assign({},e,t),{})}function Fl(e){return(t,n)=>Dl(t,n,e)}const Ll=new Map;class Vl{static format(e,t,n){return function(e,t,n){const i=kl[e];if(i)return i(t,n);const s=e;let r=Ll.get(s);if(!r){let t;r=[],El.exec(e);let n=e;for(;n;)(t=El.exec(n))?n=(r=r.concat(t.slice(1))).pop():(r.push(n),n=null);Ll.set(s,r)}return r.reduce((e,i)=>{const s=Sl[i];return e+(s?s(t,n):function(e){return"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(i))},"")}(n,e,t)}}class zl{constructor(e){this._locale=e}transform(e,t="mediumDate"){if(null==e||""===e||e!=e)return null;let n;if("string"==typeof e&&(e=e.trim()),jl(e))n=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){const[t,i,s]=e.split("-").map(e=>parseInt(e,10));n=new Date(t,i-1,s)}else n=new Date(e);else n=new Date(parseFloat(e));if(!jl(n)){let t;if("string"!=typeof e||!(t=e.match(al)))throw Cl(zl,e);n=function(e){const t=new Date(0);let n=0,i=0;const s=e[8]?t.setUTCFullYear:t.setFullYear,r=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),s.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));const o=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return r.call(t,o,a,l,c),t}(t)}return Vl.format(n,this._locale,zl._ALIASES[t]||t)}}function jl(e){return e instanceof Date&&!isNaN(e.valueOf())}zl._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"};class Hl{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Bl{createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const $l=new Bl,Ul=new Hl;class ql{constructor(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,Oe.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(e){if(jn(e))return $l;if(Hn(e))return Ul;throw Cl(ql,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}class Gl{transform(e){return JSON.stringify(e,null,2)}}class Wl{}const Kl=new ae("DocumentToken"),Zl="browser",Ql="server";let Xl,Yl;try{Xl="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(HC){Xl=!1}class Jl{constructor(e){this._platformId=e,this.isBrowser=this._platformId?this._platformId===Zl:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Xl)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}Jl.ngInjectableDef=re({factory:function(){return new Jl(De(Kn,8))},token:Jl,providedIn:"root"});class ec{}const tc=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function nc(){if(Yl)return Yl;if("object"!=typeof document||!document)return Yl=new Set(tc);let e=document.createElement("input");return Yl=new Set(tc.filter(t=>(e.setAttribute("type",t),e.type===t)))}let ic;function sc(e){return function(){if(null==ic&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ic=!0}))}finally{ic=ic||!1}return ic}()?e:!!e.capture}function rc(e){return null!=e&&"false"!==`${e}`}function oc(e,t=0){return function(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):t}function ac(e){return Array.isArray(e)?e:[e]}function lc(e){return null==e?"":"string"==typeof e?e:`${e}px`}function cc(e){return e instanceof bt?e.nativeElement:e}function hc(...e){let t=e[e.length-1];return T(t)?(e.pop(),j(e,t)):W(e)}class uc extends d{constructor(e,t){super()}schedule(e,t=0){return this}}class dc extends uc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i=void 0;try{this.work(e)}catch(s){n=!0,i=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class pc{constructor(e,t=pc.now){this.SchedulerAction=e,this.now=t}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}pc.now=(()=>Date.now());class mc extends pc{constructor(e,t=pc.now){super(e,()=>mc.delegate&&mc.delegate!==this?mc.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return mc.delegate&&mc.delegate!==this?mc.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}let fc=1;const gc={},_c={setImmediate(e){const t=fc++;return gc[t]=e,Promise.resolve().then(()=>(function(e){const t=gc[e];t&&t()})(t)),t},clearImmediate(e){delete gc[e]}};class bc extends dc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=_c.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(_c.clearImmediate(t),e.scheduled=void 0)}}class yc extends mc{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,i=-1,s=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this.active=!1,n){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw n}}}const vc=new yc(bc);class wc{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new xc(e,this.compare,this.keySelector))}}class xc extends f{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}const Cc=new mc(dc);class Ec{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new kc(e,this.durationSelector))}}class kc extends F{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:i}=this;n=i(e)}catch(t){return this.destination.error(t)}const i=M(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))}notifyNext(e,t,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Sc(e){return!l(e)&&e-parseFloat(e)+1>=0}function Tc(e){const{index:t,period:n,subscriber:i}=e;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}function Ic(e,t=Cc){return n=(()=>(function(e=0,t,n){let i=-1;return Sc(t)?i=Number(t)<1?1:Number(t):T(t)&&(n=t),T(n)||(n=Cc),new y(t=>{const s=Sc(e)?e:+e-n.now();return n.schedule(Tc,s,{index:0,period:i,subscriber:t})})})(e,t)),function(e){return e.lift(new Ec(n))};var n}function Ac(e,t){return function(n){return n.lift(new Dc(e,t))}}class Dc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Rc(e,this.predicate,this.thisArg))}}class Rc extends f{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function Oc(e){return t=>t.lift(new Pc(e))}class Pc{constructor(e){this.notifier=e}call(e,t){const n=new Nc(e),i=M(n,this.notifier);return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class Nc extends F{constructor(e){super(e),this.seenValue=!1}notifyNext(e,t,n,i,s){this.seenValue=!0,this.complete()}notifyComplete(){}}function Mc(...e){return G(1)(hc(...e))}function Fc(...e){const t=e[e.length-1];return T(t)?(e.pop(),n=>Mc(e,n,t)):t=>Mc(e,t)}class Lc{constructor(e){this.project=e}call(e,t){return t.subscribe(new Vc(e,this.project))}}class Vc extends F{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(i){return void this.destination.error(i)}this._innerSub(t,e,n)}_innerSub(e,t,n){const i=this.innerSubscription;i&&i.unsubscribe();const s=new I(this,void 0,void 0);this.destination.add(s),this.innerSubscription=M(this,e,t,n,s)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,n,i,s){this.destination.next(t)}}const zc=new y(e=>e.complete());function jc(e){return e?function(e){return new y(t=>e.schedule(()=>t.complete()))}(e):zc}function Hc(e,t){return new y(t?n=>t.schedule(Bc,0,{error:e,subscriber:n}):t=>t.error(e))}function Bc({error:e,subscriber:t}){t.error(e)}var $c;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}($c||($c={}));class Uc{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return hc(this.value);case"E":return Hc(this.error);case"C":return jc()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new Uc("N",e):Uc.undefinedValueNotification}static createError(e){return new Uc("E",void 0,e)}static createComplete(){return Uc.completeNotification}}Uc.completeNotification=new Uc("C"),Uc.undefinedValueNotification=new Uc("N",void 0);class qc{constructor(){this._listeners=[]}notify(e,t){for(let n of this._listeners)n(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(t=>e!==t)}}ngOnDestroy(){this._listeners=[]}}qc.ngInjectableDef=re({factory:function(){return new qc},token:qc,providedIn:"root"});const Gc=20;class Wc{constructor(e,t){this._ngZone=e,this._platform=t,this._scrolled=new k,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Gc){return this._platform.isBrowser?new y(t=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(Ic(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):hc()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){const n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(Ac(e=>!e||n.indexOf(e)>-1))}getAncestorScrollContainers(e){const t=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,e)&&t.push(i)}),t}_scrollableContainsElement(e,t){let n=t.nativeElement,i=e.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ha(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}Wc.ngInjectableDef=re({factory:function(){return new Wc(De(oi),De(Jl))},token:Wc,providedIn:"root"});class Kc{}const Zc=20;class Qc{constructor(e,t){this._platform=e,t.runOutsideAngular(()=>{this._change=e.isBrowser?K(Ha(window,"resize"),Ha(window,"orientationchange")):hc(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}change(e=Zc){return e>0?this._change.pipe(Ic(e)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}function Xc(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Qc.ngInjectableDef=re({factory:function(){return new Qc(De(Jl),De(oi))},token:Qc,providedIn:"root"}),Xc.prototype=Object.create(Error.prototype);const Yc=Xc;function Jc(e){return t=>0===e?jc():t.lift(new eh(e))}class eh{constructor(e){if(this.total=e,this.total<0)throw new Yc}call(e,t){return t.subscribe(new th(e,this.total))}}class th extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function nh(e,t,n){return function(i){return i.lift(new ih(e,t,n))}}class ih{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new sh(e,this.nextOrObserver,this.error,this.complete))}}class sh extends f{constructor(e,t,n,s){super(e),this._tapNext=b,this._tapError=b,this._tapComplete=b,this._tapError=n||b,this._tapComplete=s||b,i(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||b,this._tapError=t.error||b,this._tapComplete=t.complete||b)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}function rh(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function oh(e,t){const n=t?"":"none";rh(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function ah(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function lh(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}const ch=sc({passive:!0}),hh=sc({passive:!1}),uh=800;class dh{constructor(e,t,n,i,s,r){this._config=t,this._document=n,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=r,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new k,this._moveEventSubscriptions=0,this._pointerMoveSubscription=d.EMPTY,this._pointerUpSubscription=d.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this._disabled=!1,this.beforeStarted=new k,this.started=new k,this.released=new k,this.ended=new k,this.entered=new k,this.exited=new k,this.dropped=new k,this.moved=new y(e=>{const t=this._moveEvents.subscribe(e);return this._moveEventSubscriptions++,()=>{t.unsubscribe(),this._moveEventSubscriptions--}}),this._pointerDown=(e=>{if(this.beforeStarted.next(),this._handles.length){const t=this._handles.find(t=>{const n=e.target;return!!n&&(n===t||t.contains(n))});!t||this._disabledHandles.has(t)||this.disabled||this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)}),this._pointerMove=(e=>{if(!this._hasStartedDragging){const t=this._getPointerPositionOnPage(e);return void(Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold&&(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e))))}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,e.preventDefault(),this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t);else{const e=this._activeTransform;e.x=t.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=t.y-this._pickupPositionOnPage.y+this._passiveTransform.y;const n=ph(e.x,e.y);this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n,"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEventSubscriptions>0&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:e,delta:this._pointerDirectionDelta})})}),this._pointerUp=(e=>{if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging)){if(this.released.next({source:this}),!this._dropContainer)return this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>this.ended.next({source:this})),void this._dragDropRegistry.stopDragging(this);this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._dragDropRegistry.stopDragging(this)})}}),this.withRootElement(e),r.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=rc(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(e){return this._handles=e.map(e=>cc(e)),this._handles.forEach(e=>oh(e,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=cc(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),t.addEventListener("mousedown",this._pointerDown,hh),t.addEventListener("touchstart",this._pointerDown,ch),this._initialTransform=void 0,this._rootElement=t),this}withBoundaryElement(e){return this._boundaryElement=e?cc(e):null,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&gh(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){this._handles.indexOf(e)>-1&&this._disabledHandles.add(e)}enableHandle(e){this._disabledHandles.delete(e)}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}_destroyPreview(){this._preview&&gh(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&gh(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_startDragSequence(e){if(this.started.next({source:this}),_h(e)&&(this._lastTouchEventTime=Date.now()),this._dropContainer){const e=this._rootElement;this._nextSibling=e.nextSibling;const t=this._preview=this._createPreviewElement(),n=this._placeholder=this._createPlaceholderElement();e.style.display="none",this._document.body.appendChild(e.parentNode.replaceChild(n,e)),this._document.body.appendChild(t),this._dropContainer.start()}}_initializeDragSequence(e,t){t.stopPropagation();const n=this.isDragging(),i=_h(t),s=!i&&0!==t.button,r=this._rootElement,o=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+uh>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||o)return;null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._handles.length&&(this._rootElementTapHighlight=r.style.webkitTapHighlightColor,r.style.webkitTapHighlightColor="transparent"),this._toggleNativeDragInteractions(),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(e,t);const a=this._pickupPositionOnPage=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:a.x,y:a.y},this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),{x:i,y:s}=this._getPointerPositionOnPage(e),r=t._isOverContainer(i,s);this.ended.next({source:this}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialContainer.getItemIndex(this),container:t,previousContainer:this._initialContainer,isPointerOverContainer:r}),t.drop(this,n,this._initialContainer,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t}){let n=this._dropContainer._getSiblingContainerFromPosition(this,e,t)||this._initialContainer._getSiblingContainerFromPosition(this,e,t);!n&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(n=this._initialContainer),n&&n!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this.entered.next({item:this,container:n}),this._dropContainer=n,this._dropContainer.enter(this,e,t)}),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=ph(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){const e=this._previewTemplate,t=e?e.template:null;let n;if(t){const i=e.viewContainer.createEmbeddedView(t,e.context);n=i.rootNodes[0],this._previewRef=i,n.style.transform=ph(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const e=this._rootElement,t=e.getBoundingClientRect();(n=mh(e)).style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=ph(t.left,t.top)}return rh(n.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),oh(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=ph(e.left,e.top);const t=function(e){const t=getComputedStyle(e),n=lh(t,"transition-property"),i=n.find(e=>"transform"===e||"all"===e);if(!i)return 0;const s=n.indexOf(i),r=lh(t,"transition-duration"),o=lh(t,"transition-delay");return ah(r[s])+ah(o[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const n=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",n),e(),clearTimeout(i))},i=setTimeout(n,1.5*t);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),n=this._placeholderRef.rootNodes[0]):n=mh(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t){const n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,s=i?i.getBoundingClientRect():n,r=_h(t)?t.targetTouches[0]:t;return{x:s.left-n.left+(r.pageX-s.left-this._scrollPosition.left),y:s.top-n.top+(r.pageY-s.top-this._scrollPosition.top)}}_getPointerPositionOnPage(e){const t=_h(e)?e.touches[0]||e.changedTouches[0]:e;return{x:t.pageX-this._scrollPosition.left,y:t.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const t=this._getPointerPositionOnPage(e),n=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===n?t.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(t.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:e,y:n}=this._pickupPositionInElement,i=this._boundaryRect,s=this._previewRect,r=i.top+n,o=i.bottom-(s.height-n);t.x=fh(t.x,i.left+e,i.right-(s.width-e)),t.y=fh(t.y,r,o)}return t}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-s.x),o=Math.abs(n-s.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),o>this._config.pointerDirectionChangeThreshold&&(i.y=n>s.y?1:-1,s.y=n),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this.disabled||this._handles.length>0;e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,oh(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,hh),e.removeEventListener("touchstart",this._pointerDown,ch)}}function ph(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function mh(e){const t=e.cloneNode(!0);return t.removeAttribute("id"),t}function fh(e,t,n){return Math.max(t,Math.min(n,e))}function gh(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _h(e){return e.type.startsWith("touch")}function bh(e,t,n){const i=yh(t,e.length-1),s=yh(n,e.length-1);if(i===s)return;const r=e[i],o=s<i?-1:1;for(let a=i;a!==s;a+=o)e[a]=e[a+o];e[s]=r}function yh(e,t){return Math.max(0,Math.min(t,e))}let vh=0;const wh=.05;class xh{constructor(e,t,n){this._dragDropRegistry=t,this.id=`cdk-drop-list-ref-${vh++}`,this.disabled=!1,this.enterPredicate=(()=>!0),this.beforeStarted=new k,this.entered=new k,this.exited=new k,this.dropped=new k,this.sorted=new k,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",t.registerDropContainer(this),this._document=n,this.element=e instanceof bt?e.nativeElement:e}dispose(){this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this.beforeStarted.next(),this._isDragging=!0,this._activeDraggables=this._draggables.slice(),this._cacheOwnPosition(),this._cacheItemPositions(),this._siblings.forEach(e=>e._startReceiving(this))}enter(e,t,n){this.entered.next({item:e,container:this}),this.start();const i=this._getItemIndexFromPointerPosition(e,t,n),s=this._activeDraggables.indexOf(e),r=this._activeDraggables[i],o=e.getPlaceholderElement();if(s>-1&&this._activeDraggables.splice(s,1),r&&!this._dragDropRegistry.isDragging(r)){const t=r.getRootElement();t.parentElement.insertBefore(o,t),this._activeDraggables.splice(i,0,e)}else this.element.appendChild(o),this._activeDraggables.push(e);o.style.transform="",this._cacheItemPositions()}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,i){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n.getItemIndex(e),container:this,previousContainer:n,isPointerOverContainer:i})}withItems(e){return this._draggables=e,e.forEach(e=>e._withDropContainer(this)),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}getItemIndex(e){return this._isDragging?Eh("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,t=>t.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,i){if(!this._isPointerNearDropContainer(t,n))return;const s=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,n,i);if(-1===r&&s.length>0)return;const o="horizontal"===this._orientation,a=Eh(s,t=>t.drag===e),l=s[r],c=s[a].clientRect,h=l.clientRect,u=a>r?1:-1;this._previousSwap.drag=l.drag,this._previousSwap.delta=o?i.x:i.y;const d=this._getItemOffsetPx(c,h,u),p=this._getSiblingOffsetPx(a,s,u),m=s.slice();bh(s,a,r),this.sorted.next({previousIndex:a,currentIndex:r,container:this,item:e}),s.forEach((t,n)=>{if(m[n]===t)return;const i=t.drag===e,s=i?d:p,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=s,o?(r.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,Ch(t.clientRect,0,s)):(r.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,Ch(t.clientRect,s,0))})}_cacheOwnPosition(){this._clientRect=this.element.getBoundingClientRect()}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const t=(this._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement()).getBoundingClientRect();return{drag:e,offset:0,clientRect:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0}_getSiblingOffsetPx(e,t,n){const i="horizontal"===this._orientation,s=t[e].clientRect,r=t[e+-1*n];let o=s[i?"width":"height"]*n;if(r){const e=i?"left":"top",t=i?"right":"bottom";-1===n?o-=r.clientRect[e]-s[t]:o+=s[e]-r.clientRect[t]}return o}_isPointerNearDropContainer(e,t){const{top:n,right:i,bottom:s,left:r,width:o,height:a}=this._clientRect,l=o*wh,c=a*wh;return t>n-c&&t<s+c&&e>r-l&&e<i+l}_getItemOffsetPx(e,t,n){const i="horizontal"===this._orientation;let s=i?t.left-e.left:t.top-e.top;return-1===n&&(s+=i?t.width-e.width:t.height-e.height),s}_getItemIndexFromPointerPosition(e,t,n,i){const s="horizontal"===this._orientation;return Eh(this._itemPositions,({drag:r,clientRect:o},a,l)=>{if(r===e)return l.length<2;if(i){const e=s?i.x:i.y;if(r===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return s?t>=Math.floor(o.left)&&t<=Math.floor(o.right):n>=Math.floor(o.top)&&n<=Math.floor(o.bottom)})}_isOverContainer(e,t){return kh(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(i=>i._canReceive(e,t,n))}_canReceive(e,t,n){if(!this.enterPredicate(e,this)||!kh(this._clientRect,t,n))return!1;const i=this._document.elementFromPoint(t,n);return!!i&&(i===this.element||this.element.contains(i))}_startReceiving(e){const t=this._activeSiblings;t.has(e)||(t.add(e),this._cacheOwnPosition())}_stopReceiving(e){this._activeSiblings.delete(e)}}function Ch(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function Eh(e,t){for(let n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function kh(e,t,n){const{top:i,bottom:s,left:r,right:o}=e;return n>=i&&n<=s&&t>=r&&t<=o}const Sh=sc({passive:!1,capture:!0});class Th{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new k,this.pointerUp=new k,this._preventDefaultWhileDragging=(e=>{this._activeDragInstances.size&&e.preventDefault()}),this._document=t}registerDropContainer(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error(`Drop instance with id "${e.id}" has already been registered.`);this._dropInstances.add(e)}}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,Sh)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,Sh)}startDragging(e,t){if(this._activeDragInstances.add(e),1===this._activeDragInstances.size){const e=t.type.startsWith("touch"),n=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:Sh}).set(n,{handler:e=>this.pointerUp.next(e),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Sh}),e||this._globalListeners.set("wheel",{handler:this._preventDefaultWhileDragging,options:Sh}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}getDropContainer(e){return Array.from(this._dropInstances).find(t=>t.id===e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}Th.ngInjectableDef=re({factory:function(){return new Th(De(oi),De(Kl))},token:Th,providedIn:"root"});const Ih={dragStartThreshold:5,pointerDirectionChangeThreshold:5};class Ah{constructor(e,t,n,i){this._document=e,this._ngZone=t,this._viewportRuler=n,this._dragDropRegistry=i}createDrag(e,t=Ih){return new dh(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new xh(e,this._dragDropRegistry,this._document)}}Ah.ngInjectableDef=re({factory:function(){return new Ah(De(Kl),De(oi),De(Qc),De(Th))},token:Ah,providedIn:"root"});const Dh=new ae("CDK_DROP_LIST"),Rh=new ae("CDK_DRAG_PARENT"),Oh=new ae("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}});class Ph{constructor(e,t,n,i,s,r,o,a,l,c,h){this.element=e,this.dropContainer=t,this._document=n,this._ngZone=i,this._viewContainerRef=s,this._dir=l,this._changeDetectorRef=h,this._destroyed=new k,this._disabled=!1,this.started=new Qt,this.released=new Qt,this.ended=new Qt,this.entered=new Qt,this.exited=new Qt,this.dropped=new Qt,this.moved=new y(e=>{const t=this._dragRef.moved.pipe(L(e=>({source:this,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta}))).subscribe(e);return()=>{t.unsubscribe()}}),this._dragRef=c?c.createDrag(e,a):new dh(e,a,n,i,r,o),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=rc(e),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Jc(1),Oc(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Fc(this._handles),nh(e=>{const t=e.filter(e=>e._parentDrag===this).map(e=>e.element);this._dragRef.withHandles(t)}),function e(t,n){return"function"==typeof n?i=>i.pipe(e((e,i)=>H(t(e,i)).pipe(L((t,s)=>n(e,t,i,s))))):e=>e.lift(new Lc(t))}(e=>K(...e.map(e=>e._stateChanges))),Oc(this._destroyed)).subscribe(e=>{const t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)})})}ngOnChanges(e){const t=e.rootElementSelector;t&&!t.firstChange&&this._updateRootElement()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const e=this.element.nativeElement,t=this.rootElementSelector?Nh(e,this.rootElementSelector):e;if(t&&t.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${t.nodeName}".`);this._dragRef.withRootElement(t||e)}_getBoundaryElement(){const e=this.boundaryElementSelector;return e?Nh(this.element.nativeElement,e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,n=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,i=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(n).withPreviewTemplate(i),t&&e.withDirection(t.value)}})}_handleEvents(e){e.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}),e.released.subscribe(()=>{this.released.emit({source:this})}),e.ended.subscribe(()=>{this.ended.emit({source:this}),this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:e.container.data,item:this})}),e.exited.subscribe(e=>{this.exited.emit({container:e.container.data,item:this})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:this})})}}function Nh(e,t){let n=e.parentElement;for(;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}class Mh{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=rc(e)}ngOnDestroy(){this._items.clear()}}let Fh=0;class Lh{constructor(e,t,n,i,s,r,o){this.element=e,this._changeDetectorRef=n,this._dir=i,this._group=s,this._destroyed=new k,this.connectedTo=[],this.orientation="vertical",this.id=`cdk-drop-list-${Fh++}`,this._disabled=!1,this.enterPredicate=(()=>!0),this.dropped=new Qt,this.entered=new Qt,this.exited=new Qt,this.sorted=new Qt,this._dropListRef=o?o.createDropList(e):new xh(e,t,r||document),this._dropListRef.data=this,this._dropListRef.enterPredicate=((e,t)=>this.enterPredicate(e.data,t.data)),this._syncInputs(this._dropListRef),this._handleEvents(this._dropListRef),Lh._dropLists.push(this),s&&s._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._disabled=rc(e)}ngAfterContentInit(){this._draggables.changes.pipe(Fc(this._draggables),Oc(this._destroyed)).subscribe(e=>{this._dropListRef.withItems(e.map(e=>e._dragRef))})}ngOnDestroy(){const e=Lh._dropLists.indexOf(this);e>-1&&Lh._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}start(){this._dropListRef.start()}drop(e,t,n,i){this._dropListRef.drop(e._dragRef,t,n._dropListRef,i)}enter(e,t,n){this._dropListRef.enter(e._dragRef,t,n)}exit(e){this._dropListRef.exit(e._dragRef)}getItemIndex(e){return this._dropListRef.getItemIndex(e._dragRef)}_sortItem(e,t,n,i){return this._dropListRef._sortItem(e._dragRef,t,n,i)}_getSiblingContainerFromPosition(e,t,n){const i=this._dropListRef._getSiblingContainerFromPosition(e._dragRef,t,n);return i?i.data:null}_isOverContainer(e,t){return this._dropListRef._isOverContainer(e,t)}_syncInputs(e){this._dir&&this._dir.change.pipe(Fc(this._dir.value),Oc(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{const t=ac(this.connectedTo).map(e=>"string"==typeof e?Lh._dropLists.find(t=>t.id===e):e);this._group&&this._group._items.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),e.lockAxis=this.lockAxis,e.connectedTo(t.filter(e=>e&&e!==this).map(e=>e._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._changeDetectorRef.markForCheck()}),e.entered.subscribe(e=>{this.entered.emit({container:this,item:e.item.data})}),e.exited.subscribe(e=>{this.exited.emit({container:this,item:e.item.data})}),e.sorted.subscribe(e=>{this.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:this,item:e.item.data})}),e.dropped.subscribe(e=>{this.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer}),this._changeDetectorRef.markForCheck()})}}Lh._dropLists=[];class Vh{}class zh extends Ka{constructor(e){super(e),this.properties=[{name:"source",default:[]},{name:"disabled",default:!1}],this.source=[]}drop(e){bh(this.source,e.previousIndex,e.currentIndex),setTimeout(()=>{this.changed.emit(),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},100)}trackBy(e,t){return e}}class jh extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"leftSource",default:[]},{name:"rightSource",default:[]}],this.leftSource=[],this.rightSource=[]}drop(e){e.previousContainer===e.container?bh(e.container.data,e.previousIndex,e.currentIndex):function(t,n,i,s){const r=yh(e.previousIndex,t.length-1),o=yh(s,n.length);t.length&&n.splice(o,0,t.splice(r,1)[0])}(e.previousContainer.data,e.container.data,0,e.currentIndex),setTimeout(()=>{this.didChanged(),MathJax.Hub.Queue(["Typeset",MathJax.Hub])},100)}trackBy(e,t){return e}}const Hh=0,Bh=10;class $h extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"vertical",default:!1},{name:"step",default:""},{name:"min",default:Hh},{name:"max",default:Bh},{name:"value",default:Hh}],this.step=1}get min(){return this._min||(this._min=Hh)}set min(e){this._min=e,this.max<e&&(this.max=e+1)}get max(){return this._max||(this._max=Bh)}set max(e){this._max=e,this._min>e&&(this._min=e-1)}get value(){return this._value||(this._value=this.min)}set value(e){this._value=e,this._value>this.max?this.value=this.max:this.value<this.min&&(this._value=this.min)}}const Uh={keyboards:{elementary:{label:"El\xe9mentaire",tooltip:"El\xe9mentaire",layer:"elementary"},sets:{label:"Ensembles",tooltip:"Ensembles",layer:"sets"},functions:{label:"Fonctions",tooltip:"Fonctions",layer:"functions"}},layers:{elementary:{rows:[[{class:"keycap",label:"7"},{class:"keycap",label:"8"},{class:"keycap",label:"9"},{class:"keycap btn",insert:"/",label:"/"},{class:"keycap btn",insert:"\\frac{#0}{#?}",label:"<math><mfrac><mi mathsize='small'>&#11034;</mi><mi mathsize='small'>&#11034;</mi></mfrac></math>"},{class:"keycap",insert:"(",label:"("},{class:"keycap",label:")"}],[{class:"keycap",label:"4"},{class:"keycap",label:"5"},{class:"keycap",label:"6"},{class:"keycap btn",insert:"\\times ",latex:"\\times "},{class:"keycap btn",insert:"\\sqrt{#0}",label:"<math><msqrt><mi mathsize='small'>&#11034;</mi></msqrt></math>"},{class:"separator w20"}],[{class:"keycap",label:"1"},{class:"keycap",label:"2"},{class:"keycap",label:"3"},{class:"keycap btn",label:"-"},{class:"keycap btn",insert:"#@^{#?}",label:"<math><mi mathsize='small'>&#9633;</mi><sup><mi mathsize='small'>&#11034;</mi></sup></math>"},{class:"action font-glyph bottom right w20",command:"deletePreviousChar",label:"&#x232b;"}],[{class:"keycap",insert:"",key:"0",command:"",label:"0"},{class:"keycap",insert:"",key:"",command:"",label:"."},{class:"keycap",insert:"\\pi ",key:"",command:"",label:"<math>\u03c0</math>"},{class:"keycap btn",label:"+"},{class:"action",command:"moveToPreviousChar",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>"},{class:"action",command:"moveToNextChar",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>"},{class:"action",command:"moveToNextPlaceholder",label:"<svg><use xlink:href='#svg-tab' /></svg>"}]]},sets:{rows:[[{class:"keycap",label:"7"},{class:"keycap",label:"8"},{class:"keycap",label:"9"},{class:"keycap btn",insert:"/",label:"/"},{class:"keycap btn",insert:"\\frac{#0}{#?}",label:"<math><mfrac><mi mathsize='small'>&#11034;</mi><mi mathsize='small'>&#11034;</mi></mfrac></math>"},{class:"keycap",insert:"(",label:"("},{class:"keycap",label:")"},{class:"keycap btn",insert:"\\R",label:"<math>&#8477;</math>"},{class:"keycap btn",insert:"\\emptyset",label:"<math>&#8709;</math>"},{class:"separator w10"}],[{class:"keycap",label:"4"},{class:"keycap",label:"5"},{class:"keycap",label:"6"},{class:"keycap btn",insert:"\\times ",latex:"\\times "},{class:"keycap btn",insert:"\\sqrt{#0}",label:"<math><msqrt><mi mathsize='small'>&#11034;</mi></msqrt></math>"},{class:"keycap",insert:"\\lbrack",label:"["},{class:"keycap",insert:"\\rbrack",label:"]"},{class:"keycap",insert:"\\cup",label:"<math>&#8746;</math>"},{class:"keycap btn",insert:"\\setminus",label:"<math>&#8726;</math>"},{class:"separator w10"}],[{class:"keycap",label:"1"},{class:"keycap",label:"2"},{class:"keycap",label:"3"},{class:"keycap btn",label:"-"},{class:"keycap btn",insert:"#@^{#?}",label:"<math><mi mathsize='small'>&#9633;</mi><sup><mi mathsize='small'>&#11034;</mi></sup></math>"},{class:"keycap",insert:"\\{",label:"{"},{class:"keycap",insert:"\\}",label:"}"},{class:"separator w10"},{class:"action font-glyph bottom right w20",command:"deletePreviousChar",label:"&#x232b;"}],[{class:"keycap",insert:"",key:"0",command:"",label:"0"},{class:"keycap",insert:"",key:"",command:"",label:"."},{class:"keycap",insert:"\\pi ",key:"",command:"",label:"<math>\u03c0</math>"},{class:"keycap btn",label:"+"},{class:"keycap btn",label:","},{class:"keycap",insert:"-\\infty",label:"<math>- &#8734;</math>"},{class:"keycap",insert:"+\\infty",label:"<math>+ &#8734;</math>"},{class:"action",command:"moveToPreviousChar",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>"},{class:"action",command:"moveToNextChar",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>"},{class:"action",command:"moveToNextPlaceholder",label:"<svg><use xlink:href='#svg-tab' /></svg>"}]]},functions:{rows:[[{class:"keycap",label:"7"},{class:"keycap",label:"8"},{class:"keycap",label:"9"},{class:"keycap btn",insert:"/",label:"/"},{class:"keycap btn",insert:"\\frac{#0}{#?}",label:"<math><mfrac><mi mathsize='small'>&#11034;</mi><mi mathsize='small'>&#11034;</mi></mfrac></math>"},{class:"keycap",insert:"(",label:"("},{class:"keycap",label:")"},{class:"keycap btn",insert:"\\R",label:"<math>&#8477;</math>"},{class:"keycap btn",insert:"\\emptyset",label:"<math>&#8709;</math>"},{class:"separator w10"}],[{class:"keycap",label:"4"},{class:"keycap",label:"5"},{class:"keycap",label:"6"},{class:"keycap btn",insert:"\\times ",latex:"\\times "},{class:"keycap btn",insert:"\\sqrt{#0}",label:"<math><msqrt><mi mathsize='small'>&#11034;</mi></msqrt></math>"},{class:"keycap",insert:"\\sin",label:"sin"},{class:"keycap",insert:"\\cos",label:"cos"},{class:"keycap",insert:"\\tan",label:"tan"},{class:"keycap btn",insert:"\\setminus",label:"<math>&#8726;</math>"},{class:"separator w10"}],[{class:"keycap",label:"1"},{class:"keycap",label:"2"},{class:"keycap",label:"3"},{class:"keycap btn",label:"-"},{class:"keycap btn",insert:"#@^{#?}",label:"<math><mi mathsize='small'>&#9633;</mi><sup><mi mathsize='small'>&#11034;</mi></sup></math>"},{class:"keycap",insert:"\\ln",label:"ln"},{class:"keycap",insert:"\\exp",label:"exp"},{class:"separator w10"},{class:"action font-glyph bottom right w20",command:"deletePreviousChar",label:"&#x232b;"}],[{class:"keycap",insert:"",key:"0",command:"",label:"0"},{class:"keycap",insert:"",key:"",command:"",label:"."},{class:"keycap",insert:"\\pi ",key:"",command:"",label:"<math>\u03c0</math>"},{class:"keycap btn",label:"+"},{class:"keycap btn",label:","},{class:"keycap",insert:"-\\infty",label:"<math>- &#8734;</math>"},{class:"keycap",insert:"+\\infty",label:"<math>+ &#8734;</math>"},{class:"action",command:"moveToPreviousChar",label:"<svg><use xlink:href='#svg-arrow-left' /></svg>"},{class:"action",command:"moveToNextChar",label:"<svg><use xlink:href='#svg-arrow-right' /></svg>"},{class:"action",command:"moveToNextPlaceholder",label:"<svg><use xlink:href='#svg-tab' /></svg>"}]]}}};class qh extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"smartFence",default:!1},{name:"virtualKeyboardTheme",default:"material"},{name:"virtualKeyboards",default:"all"},{name:"inlineShortcuts",default:{}},{name:"value",default:""},{name:"virtualKeyboards",default:"all"}],this.inputId="math-input-component",this.virtualKeyboardTheme="material",this.virtualKeyboards="all",this.inlineShortcuts={},this.virtualKeyboardMode="manual"}get config(){return{virtualKeyboardTheme:this.virtualKeyboardTheme,smartFence:this.smartFence,smartMode:this.smartMode,inlineShortcuts:Object.assign({"*":"\\times"},this.inlineShortcuts||{}),virtualKeyboardMode:this.virtualKeyboardMode,virtualKeyboards:this.virtualKeyboards,customVirtualKeyboards:Uh.keyboards,customVirtualKeyboardLayers:Uh.layers}}get value(){return this._value||(this._value="")}set value(e){this._value=e||"",this.mathField&&this.mathField.$insert(e,'{format: "latex"}')}ngOnInit(){const e=document.getElementById(this.inputId);this.mathField=MathLive.makeMathField(e,Object.assign({onContentDidChange:e=>{this._value=e.$latex(),this.changed.emit()}},this.config)),this.mathField.textarea.addEventListener("blur",()=>{this.mathField.$perform("hideVirtualKeyboard")},!1),this.mathField.$el().querySelector(".ML__virtual-keyboard-toggle").addEventListener("click",()=>{this.mathField.focus()}),this.mathField.$insert(this.value,'{format: "latex"}')}ngOnDestroy(){}didConfigChanged(){this.mathField.$setConfig(this.config)}}const Gh={theme:"vs",language:"python",renderWhitespace:"all",renderIndentGuides:!0,autoIndent:!0},Wh=4;class Kh extends Ka{constructor(e){super(e),this._tabSize=4,this._options=Object.assign({},Gh),this.properties=[{name:"options",default:Object.assign({},Gh)},{name:"tabSize",default:Wh},{name:"code",default:""}]}get options(){return this._options}set options(e){this._options=Object.assign({},this._options,e)}get tabSize(){return null==this._tabSize?Wh:this._tabSize}set tabSize(e){this._tabSize=e,this._editor&&this._editor.getModel().updateOptions({tabSize:e})}onInit(e){this._editor=e,this._editor.getModel().updateOptions({tabSize:this.tabSize,insertSpaces:!0,trimAutoWhitespace:!0})}}class Zh extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"label",default:""},{name:"options",default:[]}],this._options=[]}get options(){return this._options||(this._options=[])}set options(e){this._options=e||[]}trackBy(e,t){return e}}class Qh extends Ka{constructor(e){super(e),this.properties=[],this.attributes={boundingbox:[-10,10,10,-10],axis:!0},this.createToolSquare=function(e,t,n){const i=e.create("image",["https://www.shareicon.net/download/2016/09/27/836430_drawing.svg",t,[n,n]]),s=e.create("point",[function(){return i.X()},function(){return i.Y()}],{visible:!1}),r=e.create("circle",[s,n],{visible:!1}),o=e.create("glider",[s.X()+1,s.Y(),r],{name:"",visible:!1}),a=e.create("glider",[s.X()+1,s.Y(),r],{name:"",size:.5}),l=e.create("angle",[o,s,a],{visible:!1});e.create("transform",[function(){return l.Value()},i],{type:"rotate"}).bindTo(i)},this.createProtractor=function(e,t,n){const i=e.create("image",["https://upload.wikimedia.org/wikipedia/commons/9/99/Rapporteur_180deg.svg",t,[n,.55*n]]),s=e.create("point",[function(){return i.X()+.5*n},function(){return i.Y()}],{visible:!1}),r=e.create("circle",[s,.5*n],{visible:!1}),o=e.create("glider",[s.X()+n,s.Y(),r],{name:"",visible:!1}),a=e.create("glider",[s.X()+n,s.Y(),r],{name:"",size:.5}),l=e.create("angle",[o,s,a],{visible:!1});e.create("transform",[function(){return l.Value()},i],{type:"rotate"}).bindTo(i)}}ngOnInit(){JXG.Options=JXG.merge(JXG.Options,{board:{showCopyright:!1,keepAspectRatio:!0},elements:{highlight:!1,showInfobox:!1},point:{showInfobox:!1}}),this.board=JXG.JSXGraph.initBoard("graph",this.attributes),this.board.create("grid",[],{gridX:.25,gridY:.25}),this.board.create("axis",[[0,0],[1,0]],{ticks:{visible:!1}}),this.board.create("axis",[[0,0],[0,1]],{ticks:{visible:!1}});const e=this.board.create("circle",[[0,0],[0,1]],{strokeColor:"blue",fixed:!0}),t=this.board.create("point",[0,0],{size:1,name:"O",color:"black",fixed:!0}),n=this.board.create("point",[1,0],{size:1,name:"A",color:"black",fixed:!0}),i=this.board.create("glider",[1,1,e],{size:2,name:"M",color:"red"});this.board.create("sector",[t,n,i],{color:"orange"})}}class Xh extends Ka{constructor(e){super(e),this.properties=[{name:"points",default:[]},{name:"connections",default:[]}]}get points(){return this._points||(this._points=[])}set points(e){this._points=e||[]}get connections(){return this._connections||(this._connections=[])}set connections(e){this._connections=e||[]}ngOnInit(){}ngAfterViewInit(){this._instance=jsPlumb.getInstance({DragOptions:{cursor:"pointer",zIndex:2e3},Container:this.container.nativeElement}),jsPlumb.bind("ready",()=>{this._instance.bind("connection",e=>{}),this._instance.bind("click",e=>{}),this._instance.bind("endpointClick",e=>{}),this._instance.bind("connectionDetached",e=>{const t=this.points.find(t=>t.id===e.sourceId),n=this.points.find(t=>t.id===e.targetId),i=this.connection(t,n);this.connections=this.connections.filter(e=>e.p1!==i.p1&&e.p2!==i.p2)}),this._instance.bind("beforeDrop",e=>{const t=this.points.find(t=>t.id===e.sourceId),n=this.points.find(t=>t.id===e.targetId);return!(!n.multiple&&this.connected(n)||!t.multiple&&this.connected(t)||(this.connections.push(this.connection(t,n)),0))}),this.addAllPoints()})}ngOnDestroy(){this._instance.unbind("click"),this._instance.unbind("connection"),this._instance.unbind("endpointClick"),this._instance.unbind("connectionDetached"),this._instance.unbind("beforeDrop")}connection(e,t){const n=[e.id,t.id].sort();return{p1:n[0],p2:n[1]}}connected(e){return!!this.connections.find(t=>t.p1===e.id||t.p2===e.id)}addPoint(e){this._instance.addEndpoint(e.id,{isSource:!!e.source,isTarget:!!e.target,anchor:e.source?"Right":"Left",maxConnections:-1,connector:"Straight",cssClass:e.source?"endpoint-source":"endpoint-target"})}addAllPoints(){this.points.forEach(e=>{this.addPoint(e)})}}class Yh{constructor(e){this.injector=e}ngDoBootstrap(){customElements.define("demo-components",Fa(Wa,{injector:this.injector})),customElements.define("checkbox-group-component",Fa(Zh,{injector:this.injector})),customElements.define("input-component",Fa(Za,{injector:this.injector})),customElements.define("drag-drop-component",Fa(Ya,{injector:this.injector})),customElements.define("text-component",Fa(Ja,{injector:this.injector})),customElements.define("sort-list-component",Fa(zh,{injector:this.injector})),customElements.define("transfert-list-component",Fa(jh,{injector:this.injector})),customElements.define("slider-component",Fa($h,{injector:this.injector})),customElements.define("math-input-component",Fa(qh,{injector:this.injector})),customElements.define("code-component",Fa(Kh,{injector:this.injector})),customElements.define("graph-component",Fa(Qh,{injector:this.injector})),customElements.define("nodes-component",Fa(Xh,{injector:this.injector}))}}class Jh{}class eu{}const tu="*";function nu(e,t=null){return{type:2,steps:e,options:t}}function iu(e){return{type:6,styles:e,offset:null}}function su(e){Promise.resolve(null).then(e)}class ru{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){su(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){}setPosition(e){}getPosition(){return 0}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class ou{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,i=0;const s=this.players.length;0==s?su(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==s&&this._onFinish()}),e.onDestroy(()=>{++n==s&&this._onDestroy()}),e.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){let e=0;return this.players.forEach(t=>{const n=t.getPosition();e=Math.min(n,e)}),e}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}const au="!";function lu(){throw Error("Host already has a portal attached")}class cu{attach(e){return null==e&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),e.hasAttached()&&lu(),this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null==e?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class hu extends cu{constructor(e,t,n,i){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=i}}class uu extends cu{constructor(e,t,n){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class du{constructor(){this._isDisposed=!1}hasAttached(){return!!this._attachedPortal}attach(e){return e||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&lu(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),e instanceof hu?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof uu?(this._attachedPortal=e,this.attachTemplatePortal(e)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class pu extends du{constructor(e,t,n,i){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=i}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let n;return e.viewContainerRef?(n=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=t.create(e.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context);return n.detectChanges(),n.rootNodes.forEach(e=>this.outletElement.appendChild(e)),this.setDisposeFn(()=>{let e=t.indexOf(n);-1!==e&&t.remove(e)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class mu extends du{constructor(e,t){super(),this._componentFactoryResolver=e,this._viewContainerRef=t,this._isInitialized=!1,this.attached=new Qt}get portal(){return this._attachedPortal}set portal(e){(!this.hasAttached()||e||this._isInitialized)&&(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const t=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),i=t.createComponent(n,t.length,e.injector||t.injector);return super.setDisposeFn(()=>i.destroy()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(e){e.setAttachedHost(this);const t=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=t,this.attached.emit(t),t}}class fu{}class gu{constructor(e,t){this._parentInjector=e,this._customTokens=t}get(e,t){const n=this._customTokens.get(e);return void 0!==n?n:this._parentInjector.get(e,t)}}const _u=9,bu=13,yu=27,vu=32,wu=33,xu=34,Cu=35,Eu=36,ku=37,Su=38,Tu=39,Iu=40,Au=48,Du=57,Ru=65,Ou=90;function Pu(e,...t){return t.length?t.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}const Nu=new ae("cdk-dir-doc",{providedIn:"root",factory:function(){return De(Kl)}});class Mu{constructor(e){if(this.value="ltr",this.change=new Qt,e){const t=e.documentElement?e.documentElement.dir:null,n=(e.body?e.body.dir:null)||t;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}Mu.ngInjectableDef=re({factory:function(){return new Mu(De(Nu,8))},token:Mu,providedIn:"root"});class Fu{}class Lu{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=lc(-this._previousScrollPosition.left),e.style.top=lc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,n=this._document.body.style,i=t.scrollBehavior||"",s=n.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),t.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),t.scrollBehavior=i,n.scrollBehavior=s}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,t=this._viewportRuler.getViewportSize();return e.scrollHeight>t.height||e.scrollWidth>t.width}}function Vu(){return Error("Scroll strategy has already been attached.")}class zu{constructor(e,t,n,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=(()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())})}attach(e){if(this._overlayRef)throw Vu();this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}}class ju{enable(){}disable(){}attach(){}}function Hu(e,t){return t.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function Bu(e,t){return t.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class $u{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(e){if(this._overlayRef)throw Vu();this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:n}=this._viewportRuler.getViewportSize();Hu(e,[{width:t,height:n,bottom:n,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}}class Uu{constructor(e,t,n,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this.noop=(()=>new ju),this.close=(e=>new zu(this._scrollDispatcher,this._ngZone,this._viewportRuler,e)),this.block=(()=>new Lu(this._viewportRuler,this._document)),this.reposition=(e=>new $u(this._scrollDispatcher,this._viewportRuler,this._ngZone,e)),this._document=i}}Uu.ngInjectableDef=re({factory:function(){return new Uu(De(Wc),De(Qc),De(oi),De(Kl))},token:Uu,providedIn:"root"});class qu{constructor(e){this.scrollStrategy=new ju,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e&&Object.keys(e).forEach(t=>{void 0!==e[t]&&(this[t]=e[t])})}}class Gu{constructor(e,t,n,i,s){this.offsetX=n,this.offsetY=i,this.panelClass=s,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}}class Wu{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}function Ku(e,t){if("top"!==t&&"bottom"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". `+'Expected "top", "bottom" or "center".')}function Zu(e,t){if("start"!==t&&"end"!==t&&"center"!==t)throw Error(`ConnectedPosition: Invalid ${e} "${t}". `+'Expected "start", "end" or "center".')}class Qu{constructor(e){this._attachedOverlays=[],this._keydownListener=(e=>{const t=this._attachedOverlays;for(let n=t.length-1;n>-1;n--)if(t[n]._keydownEventSubscriptions>0){t[n]._keydownEvents.next(e);break}}),this._document=e}ngOnDestroy(){this._detach()}add(e){this.remove(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener,!0),this._isAttached=!0),this._attachedOverlays.push(e)}remove(e){const t=this._attachedOverlays.indexOf(e);t>-1&&this._attachedOverlays.splice(t,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener,!0),this._isAttached=!1)}}Qu.ngInjectableDef=re({factory:function(){return new Qu(De(Kl))},token:Qu,providedIn:"root"});class Xu{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}Xu.ngInjectableDef=re({factory:function(){return new Xu(De(Kl))},token:Xu,providedIn:"root"});class Yu{constructor(e,t,n,i,s,r,o,a){this._portalOutlet=e,this._host=t,this._pane=n,this._config=i,this._ngZone=s,this._keyboardDispatcher=r,this._document=o,this._location=a,this._backdropElement=null,this._backdropClick=new k,this._attachments=new k,this._detachments=new k,this._locationChanges=d.EMPTY,this._keydownEventsObservable=new y(e=>{const t=this._keydownEvents.subscribe(e);return this._keydownEventSubscriptions++,()=>{t.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new k,this._keydownEventSubscriptions=0,i.scrollStrategy&&i.scrollStrategy.attach(this),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._config.scrollStrategy&&this._config.scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Jc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._config.scrollStrategy&&this._config.scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._config.scrollStrategy&&this._config.scrollStrategy.disable(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign({},this._config,e),this._updateElementSize()}setDirection(e){this._config=Object.assign({},this._config,{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){const e=this._pane.style;e.width=lc(this._config.width),e.height=lc(this._config.height),e.minWidth=lc(this._config.minWidth),e.minHeight=lc(this._config.minHeight),e.maxWidth=lc(this._config.maxWidth),e.maxHeight=lc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",e=>this._backdropClick.next(e)),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e,t=this._backdropElement;if(!t)return;let n=()=>{t&&t.parentNode&&t.parentNode.removeChild(t),this._backdropElement==t&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(e,t,n){const i=e.classList;ac(t).forEach(e=>{n?i.add(e):i.remove(e)})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.asObservable().pipe(Oc(K(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),e.unsubscribe())})})}}const Ju="cdk-overlay-connected-position-bounding-box";class ed{constructor(e,t,n,i,s){this._viewportRuler=t,this._document=n,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this.scrollables=[],this._preferredPositions=[],this._positionChanges=new k,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._positionChangeSubscriptions=0,this._appliedPanelClasses=[],this.positionChanges=new y(e=>{const t=this._positionChanges.subscribe(e);return this._positionChangeSubscriptions++,()=>{t.unsubscribe(),this._positionChangeSubscriptions--}}),this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){if(this._overlayRef&&e!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),e.hostElement.classList.add(Ju),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||this._platform&&!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,i=[];let s;for(let r of this._preferredPositions){let o=this._getOriginPoint(e,r),a=this._getOverlayPoint(o,t,r),l=this._getOverlayFit(a,t,n,r);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(r,o);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:r,origin:o,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(o,r)}):(!s||s.overlayFit.visibleArea<l.visibleArea)&&(s={overlayFit:l,overlayPoint:a,originPoint:o,position:r,overlayRect:t})}if(i.length){let e=null,t=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>t&&(t=i,e=n)}return this._isPushed=!1,void this._applyPosition(e.position,e.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&td(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ju),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const e=this._lastPosition||this._preferredPositions[0],t=this._getOriginPoint(this._originRect,e);this._applyPosition(e,t)}}withScrollableContainers(e){return this.scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t){let n,i;if("center"==t.originX)n=e.left+e.width/2;else{const i=this._isRtl()?e.right:e.left,s=this._isRtl()?e.left:e.right;n="start"==t.originX?i:s}return{x:n,y:i="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom}}_getOverlayPoint(e,t,n){let i,s;return i="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,{x:e.x+i,y:e.y+(s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height)}}_getOverlayFit(e,t,n,i){let{x:s,y:r}=e,o=this._getOffset(i,"x"),a=this._getOffset(i,"y");o&&(s+=o),a&&(r+=a);let l=0-r,c=r+t.height-n.height,h=this._subtractOverflows(t.width,0-s,s+t.width-n.width),u=this._subtractOverflows(t.height,l,c),d=h*u;return{visibleArea:d,isCompletelyWithinViewport:t.width*t.height===d,fitsInViewportVertically:u===t.height,fitsInViewportHorizontally:h==t.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const i=n.bottom-t.y,s=n.right-t.x,r=this._overlayRef.getConfig().minHeight,o=this._overlayRef.getConfig().minWidth,a=e.fitsInViewportHorizontally||null!=o&&o<=s;return(e.fitsInViewportVertically||null!=r&&r<=i)&&a}}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=this._viewportRect,s=Math.max(e.x+t.width-i.right,0),r=Math.max(e.y+t.height-i.bottom,0),o=Math.max(i.top-n.top-e.y,0),a=Math.max(i.left-n.left-e.x,0);let l=0,c=0;return this._previousPushAmount={x:l=t.width<=i.width?a||-s:e.x<this._viewportMargin?i.left-n.left-e.x:0,y:c=t.height<=i.height?o||-r:e.y<this._viewportMargin?i.top-n.top-e.y:0},{x:e.x+l,y:e.y+c}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChangeSubscriptions>0){const t=this._getScrollVisibility(),n=new Wu(e,t);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,i=this._isRtl();let s,r,o,a,l,c;if("top"===t.overlayY)s=n.height-(r=e.y)+this._viewportMargin;else if("bottom"===t.overlayY)s=n.height-(o=n.height-e.y+2*this._viewportMargin)+this._viewportMargin;else{const t=Math.min(n.bottom-e.y+n.top,e.y),i=this._lastBoundingBoxSize.height;r=e.y-t,(s=2*t)>i&&!this._isInitialRender&&!this._growAfterOpen&&(r=e.y-i/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)c=n.right-e.x+this._viewportMargin,a=e.x-n.left;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)l=e.x,a=n.right-e.x;else{const t=Math.min(n.right-e.x+n.left,e.x),i=this._lastBoundingBoxSize.width;l=e.x-t,(a=2*t)>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.x-i/2)}return{top:r,left:l,bottom:o,right:c,width:a,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="",i.width=i.height="100%";else{const e=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=lc(n.height),i.top=lc(n.top),i.bottom=lc(n.bottom),i.width=lc(n.width),i.left=lc(n.left),i.right=lc(n.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",e&&(i.maxHeight=lc(e)),s&&(i.maxWidth=lc(s))}this._lastBoundingBoxSize=n,td(this._boundingBox.style,i)}_resetBoundingBoxStyles(){td(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){td(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={};if(this._hasExactPosition()){const i=this._viewportRuler.getViewportScrollPosition();td(n,this._getExactOverlayY(t,e,i)),td(n,this._getExactOverlayX(t,e,i))}else n.position="static";let i="",s=this._getOffset(t,"x"),r=this._getOffset(t,"y");s&&(i+=`translateX(${s}px) `),r&&(i+=`translateY(${r}px)`),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),td(this._pane.style,n)}_getExactOverlayY(e,t,n){let i={top:null,bottom:null},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let r=this._overlayContainer?this._overlayContainer.getContainerElement().getBoundingClientRect().top:0;return s.y-=r,"bottom"===e.overlayY?i.bottom=`${this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)}px`:i.top=lc(s.y),i}_getExactOverlayX(e,t,n){let i,s={left:null,right:null},r=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n)),"right"==(i=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left")?s.right=`${this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)}px`:s.left=lc(r.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this.scrollables.map(e=>e.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Bu(e,n),isOriginOutsideView:Hu(e,n),isOverlayClipped:Bu(t,n),isOverlayOutsideView:Hu(t,n)}}_subtractOverflows(e,...t){return t.reduce((e,t)=>e-Math.max(t,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(e=>{Zu("originX",e.originX),Ku("originY",e.originY),Zu("overlayX",e.overlayX),Ku("overlayY",e.overlayY)})}_addPanelClasses(e){this._pane&&ac(e).forEach(e=>{-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>this._pane.classList.remove(e)),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;return e instanceof bt?e.nativeElement.getBoundingClientRect():e instanceof HTMLElement?e.getBoundingClientRect():{top:e.y,bottom:e.y,left:e.x,right:e.x,height:0,width:0}}}function td(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}class nd{constructor(e,t,n,i,s,r){this._preferredPositions=[],this._positionStrategy=new ed(n,i,s,r).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(e,t)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(e){this._overlayRef=e,this._positionStrategy.attach(e),this._direction&&(e.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(e){this._positionStrategy.withScrollableContainers(e)}withFallbackPosition(e,t,n,i){const s=new Gu(e,t,n,i);return this._preferredPositions.push(s),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(e){return this._overlayRef?this._overlayRef.setDirection(e):this._direction=e,this}withOffsetX(e){return this._positionStrategy.withDefaultOffsetX(e),this}withOffsetY(e){return this._positionStrategy.withDefaultOffsetY(e),this}withLockedPosition(e){return this._positionStrategy.withLockedPosition(e),this}withPositions(e){return this._preferredPositions=e.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(e){return this._positionStrategy.setOrigin(e),this}}const id="cdk-global-overlay-wrapper";class sd{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(id),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();e.position=this._cssPosition,e.marginLeft="100%"===n.width?"0":this._leftOffset,e.marginTop="100%"===n.height?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,"100%"===n.width?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems="100%"===n.height?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(id),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}class rd{constructor(e,t,n,i){this._viewportRuler=e,this._document=t,this._platform=n,this._overlayContainer=i}global(){return new sd}connectedTo(e,t,n){return new nd(t,n,e,this._viewportRuler,this._document)}flexibleConnectedTo(e){return new ed(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}rd.ngInjectableDef=re({factory:function(){return new rd(De(Qc),De(Kl),De(Jl,8),De(Xu,8))},token:rd,providedIn:"root"});let od=0;class ad{constructor(e,t,n,i,s,r,o,a,l,c){this.scrollStrategies=e,this._overlayContainer=t,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=s,this._injector=r,this._ngZone=o,this._document=a,this._directionality=l,this._location=c}create(e){const t=this._createHostElement(),n=this._createPaneElement(t),i=this._createPortalOutlet(n),s=new qu(e);return s.direction=s.direction||this._directionality.value,new Yu(i,t,n,s,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(e){const t=this._document.createElement("div");return t.id=`cdk-overlay-${od++}`,t.classList.add("cdk-overlay-pane"),e.appendChild(t),t}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ki)),new pu(e,this._componentFactoryResolver,this._appRef,this._injector)}}const ld=new ae("cdk-connected-overlay-scroll-strategy");function cd(e){return()=>e.scrollStrategies.reposition()}class hd{}class ud extends Xu{constructor(e){super(e)}ngOnDestroy(){super.ngOnDestroy(),this._fullScreenEventName&&this._fullScreenListener&&this._document.removeEventListener(this._fullScreenEventName,this._fullScreenListener)}_createContainer(){super._createContainer(),this._adjustParentForFullscreenChange(),this._addFullscreenChangeListener(()=>this._adjustParentForFullscreenChange())}_adjustParentForFullscreenChange(){this._containerElement&&(this.getFullscreenElement()||this._document.body).appendChild(this._containerElement)}_addFullscreenChangeListener(e){const t=this._getEventName();t&&(this._fullScreenListener&&this._document.removeEventListener(t,this._fullScreenListener),this._document.addEventListener(t,e),this._fullScreenListener=e)}_getEventName(){return this._fullScreenEventName||(this._document.fullscreenEnabled?this._fullScreenEventName="fullscreenchange":this._document.webkitFullscreenEnabled?this._fullScreenEventName="webkitfullscreenchange":this._document.mozFullScreenEnabled?this._fullScreenEventName="mozfullscreenchange":this._document.msFullscreenEnabled&&(this._fullScreenEventName="MSFullscreenChange")),this._fullScreenEventName}getFullscreenElement(){return this._document.fullscreenElement||this._document.webkitFullscreenElement||this._document.mozFullScreenElement||this._document.msFullscreenElement||null}}ud.ngInjectableDef=re({factory:function(){return new ud(De(Kl))},token:ud,providedIn:"root"});class dd{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}function pd(){throw Error("Attempting to attach dialog content after content is already attached")}class md extends du{constructor(e,t,n,i,s){super(),this._elementRef=e,this._focusTrapFactory=t,this._changeDetectorRef=n,this._document=i,this._config=s,this._elementFocusedBeforeDialogWasOpened=null,this._state="enter",this._animationStateChanged=new Qt,this._ariaLabelledBy=null}attachComponentPortal(e){return this._portalOutlet.hasAttached()&&pd(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached()&&pd(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(e)}_trapFocus(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;this._config.restoreFocus&&e&&"function"==typeof e.focus&&e.focus(),this._focusTrap&&this._focusTrap.destroy()}_savePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_onAnimationDone(e){"enter"===e.toState?this._trapFocus():"exit"===e.toState&&this._restoreFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}let fd=0;class gd{constructor(e,t,n,i=`mat-dialog-${fd++}`){this._overlayRef=e,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new k,this._afterClosed=new k,this._beforeClosed=new k,t._id=i,t._animationStateChanged.pipe(Ac(e=>"done"===e.phaseName&&"enter"===e.toState),Jc(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Ac(e=>"done"===e.phaseName&&"exit"===e.toState),Jc(1)).subscribe(()=>this._overlayRef.dispose()),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Ac(e=>e.keyCode===yu&&!this.disableClose)).subscribe(()=>this.close())}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ac(e=>"start"===e.phaseName),Jc(1)).subscribe(()=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop()}),this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened.asObservable()}afterClosed(){return this._afterClosed.asObservable()}beforeClosed(){return this._beforeClosed.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._getPositionStrategy().width(e).height(t),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}afterOpen(){return this.afterOpened()}beforeClose(){return this.beforeClosed()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}const _d=new ae("MatDialogData"),bd=new ae("mat-dialog-default-options"),yd=new ae("mat-dialog-scroll-strategy");function vd(e){return()=>e.scrollStrategies.block()}class wd{constructor(e,t,n,i,s,r,o){var a;this._overlay=e,this._injector=t,this._location=n,this._defaultOptions=i,this._parentDialog=r,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new k,this._afterOpenedAtThisLevel=new k,this._ariaHiddenElements=new Map,this.afterAllClosed=(a=(()=>this.openDialogs.length?this._afterAllClosed:this._afterAllClosed.pipe(Fc(void 0))),new y(e=>{let t;try{t=a()}catch(n){return void e.error(n)}return(t?H(t):jc()).subscribe(e)})),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}get afterOpen(){return this.afterOpened}get _afterAllClosed(){const e=this._parentDialog;return e?e._afterAllClosed:this._afterAllClosedAtThisLevel}open(e,t){if((t=function(e,t){return Object.assign({},t,e)}(t,this._defaultOptions||new dd)).id&&this.getDialogById(t.id))throw Error(`Dialog with id "${t.id}" exists already. The dialog id must be unique.`);const n=this._createOverlay(t),i=this._attachDialogContainer(n,t),s=this._attachDialogContent(e,i,n,t);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(t=>t.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const t=this._getOverlayConfig(e);return this._overlay.create(t)}_getOverlayConfig(e){const t=new qu({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(t.backdropClass=e.backdropClass),t}_attachDialogContainer(e,t){const n=new gu(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[dd,t]])),i=new hu(md,t.viewContainerRef,n);return e.attach(i).instance}_attachDialogContent(e,t,n,i){const s=new gd(n,t,this._location,i.id);if(i.hasBackdrop&&n.backdropClick().subscribe(()=>{s.disableClose||s.close()}),e instanceof Xt)t.attachTemplatePortal(new uu(e,null,{$implicit:i.data,dialogRef:s}));else{const n=this._createInjector(i,s,t),r=t.attachComponentPortal(new hu(e,void 0,n));s.componentInstance=r.instance}return s.updateSize(i.width,i.height).updatePosition(i.position),s}_createInjector(e,t,n){const i=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=new WeakMap([[md,n],[_d,e.data],[gd,t]]);return!e.direction||i&&i.get(Mu,null)||s.set(Mu,{value:e.direction,change:hc()}),new gu(i||this._injector,s)}_removeOpenDialog(e){const t=this.openDialogs.indexOf(e);t>-1&&(this.openDialogs.splice(t,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const t=e.parentElement.children;for(let n=t.length-1;n>-1;n--){let i=t[n];i===e||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let t=e.length;for(;t--;)e[t].close()}}class xd{}let Cd=null;function Ed(){return Cd}class kd{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(e){this._attrToPropMap=e}}class Sd extends kd{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(e=>{null!=this.getStyle(t,e)&&(this._transitionEnd=n[e])})}catch(e){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(e){return e.getDistributedNodes()}resolveAndSetHref(e,t,n){e.href=null==n?t:t+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const Td={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Id=3,Ad={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"};let Rd;fe.Node&&(Rd=fe.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});class Od extends Sd{parse(e){throw new Error("parse not implemented")}static makeCurrent(){var e;e=new Od,Cd||(Cd=e)}hasProperty(e,t){return t in e}setProperty(e,t,n){e[t]=n}getProperty(e,t){return e[t]}invoke(e,t,n){e[t](...n)}logError(e){window.console&&(console.error?console.error(e):console.log(e))}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return Td}contains(e,t){return Rd.call(e,t)}querySelector(e,t){return e.querySelector(t)}querySelectorAll(e,t){return e.querySelectorAll(t)}on(e,t,n){e.addEventListener(t,n,!1)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}createMouseEvent(e){const t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t}createEvent(e){const t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t}preventDefault(e){e.preventDefault(),e.returnValue=!1}isPrevented(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue}getInnerHTML(e){return e.innerHTML}getTemplateContent(e){return"content"in e&&this.isTemplateElement(e)?e.content:null}getOuterHTML(e){return e.outerHTML}nodeName(e){return e.nodeName}nodeValue(e){return e.nodeValue}type(e){return e.type}content(e){return this.hasProperty(e,"content")?e.content:e}firstChild(e){return e.firstChild}nextSibling(e){return e.nextSibling}parentElement(e){return e.parentNode}childNodes(e){return e.childNodes}childNodesAsList(e){const t=e.childNodes,n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=t[i];return n}clearNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}appendChild(e,t){e.appendChild(t)}removeChild(e,t){e.removeChild(t)}replaceChild(e,t,n){e.replaceChild(t,n)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}insertBefore(e,t,n){e.insertBefore(n,t)}insertAllBefore(e,t,n){n.forEach(n=>e.insertBefore(n,t))}insertAfter(e,t,n){e.insertBefore(n,t.nextSibling)}setInnerHTML(e,t){e.innerHTML=t}getText(e){return e.textContent}setText(e,t){e.textContent=t}getValue(e){return e.value}setValue(e,t){e.value=t}getChecked(e){return e.checked}setChecked(e,t){e.checked=t}createComment(e){return this.getDefaultDocument().createComment(e)}createTemplate(e){const t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createElementNS(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)}createTextNode(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)}createScriptTag(e,t,n){const i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(e,t),i}createStyleElement(e,t){const n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n}createShadowRoot(e){return e.createShadowRoot()}getShadowRoot(e){return e.shadowRoot}getHost(e){return e.host}clone(e){return e.cloneNode(!0)}getElementsByClassName(e,t){return e.getElementsByClassName(t)}getElementsByTagName(e,t){return e.getElementsByTagName(t)}classList(e){return Array.prototype.slice.call(e.classList,0)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}hasClass(e,t){return e.classList.contains(t)}setStyle(e,t,n){e.style[t]=n}removeStyle(e,t){e.style[t]=""}getStyle(e,t){return e.style[t]}hasStyle(e,t,n){const i=this.getStyle(e,t)||"";return n?i==n:i.length>0}tagName(e){return e.tagName}attributeMap(e){const t=new Map,n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i);t.set(e.name,e.value)}return t}hasAttribute(e,t){return e.hasAttribute(t)}hasAttributeNS(e,t,n){return e.hasAttributeNS(t,n)}getAttribute(e,t){return e.getAttribute(t)}getAttributeNS(e,t,n){return e.getAttributeNS(t,n)}setAttribute(e,t,n){e.setAttribute(t,n)}setAttributeNS(e,t,n,i){e.setAttributeNS(t,n,i)}removeAttribute(e,t){e.removeAttribute(t)}removeAttributeNS(e,t,n){e.removeAttributeNS(t,n)}templateAwareRoot(e){return this.isTemplateElement(e)?this.content(e):e}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(e){return e.title}setTitle(e,t){e.title=t||""}elementMatches(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))}isTemplateElement(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName}isTextNode(e){return e.nodeType===Node.TEXT_NODE}isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}hasShadowRoot(e){return null!=e.shadowRoot&&e instanceof HTMLElement}isShadowRoot(e){return e instanceof DocumentFragment}importIntoDoc(e){return document.importNode(this.templateAwareRoot(e),!0)}adoptNode(e){return document.adoptNode(e)}getHref(e){return e.getAttribute("href")}getEventKey(e){let t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),e.location===Id&&Dd.hasOwnProperty(t)&&(t=Dd[t]))}return Ad[t]||t}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=Nd||(Nd=document.querySelector("base"))?Nd.getAttribute("href"):null;return null==t?null:(n=t,Pd||(Pd=document.createElement("a")),Pd.setAttribute("href",n),"/"===Pd.pathname.charAt(0)?Pd.pathname:"/"+Pd.pathname);var n}resetBaseElement(){Nd=null}getUserAgent(){return window.navigator.userAgent}setData(e,t,n){this.setAttribute(e,"data-"+t,n)}getData(e,t){return this.getAttribute(e,"data-"+t)}getComputedStyle(e){return getComputedStyle(e)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[i,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,e)}setCookie(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)}}let Pd,Nd=null;const Md=Kl;function Fd(){return!!window.history.pushState}class Ld extends el{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Ed().getLocation(),this._history=Ed().getHistory()}getBaseHrefFromDOM(){return Ed().getBaseHref(this._doc)}onPopState(e){Ed().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Ed().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){Fd()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){Fd()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}}Ld.ctorParameters=(()=>[{type:void 0,decorators:[{type:xe,args:[Md]}]}]);const Vd=new ae("TRANSITION_ID"),zd=[{provide:Bn,useFactory:function(e,t,n){return()=>{n.get($n).donePromise.then(()=>{const n=Ed();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(t=>n.getAttribute(t,"ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[Vd,Md,qe],multi:!0}];class jd{static init(){var e;e=new jd,_i=e}addToWindow(e){fe.getAngularTestability=((t,n=!0)=>{const i=e.findTestabilityInTree(t,n);if(null==i)throw new Error("Could not find testability for element.");return i}),fe.getAllAngularTestabilities=(()=>e.getAllTestabilities()),fe.getAllAngularRootElements=(()=>e.getAllRootElements()),fe.frameworkStabilizers||(fe.frameworkStabilizers=[]),fe.frameworkStabilizers.push(e=>{const t=fe.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,0==--n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?Ed().isShadowRoot(t)?this.findTestabilityInTree(e,Ed().getHost(t),!0):this.findTestabilityInTree(e,Ed().parentElement(t),!0):null}}function Hd(e,t){"undefined"!=typeof COMPILED&&COMPILED||((fe.ng=fe.ng||{})[e]=t)}const Bd={ApplicationRef:ki,NgZone:oi};function $d(e){return Fi(e)}const Ud=new ae("EventManagerPlugins");class qd{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let i=0;i<n.length;i++){const t=n[i];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}class Gd{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=Ed().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}class Wd{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}class Kd extends Wd{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ed().remove(e))}}const Zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qd=/%COMP%/g,Xd="_nghost-%COMP%",Yd="_ngcontent-%COMP%";function Jd(e,t,n){for(let i=0;i<t.length;i++){let s=t[i];Array.isArray(s)?Jd(e,s,n):(s=s.replace(Qd,e),n.push(s))}return n}function ep(e){return t=>{!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}class tp{constructor(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new np(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case de.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new rp(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case de.Native:case de.ShadowDom:return new op(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Jd(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class np{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Zd[t],e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=`${i}:${t}`;const s=Zd[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Zd[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&xt.DashCase?e.style.setProperty(t,n,i&xt.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&xt.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){sp(t,"property"),e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return sp(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ep(n)):this.eventManager.addEventListener(e,t,ep(n))}}const ip="@".charCodeAt(0);function sp(e,t){if(e.charCodeAt(0)===ip)throw new Error(`Found the synthetic ${t} ${e}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class rp extends np{constructor(e,t,n){super(e),this.component=n;const i=Jd(n.id,n.styles,[]);t.addStyles(i),this.contentAttr=Yd.replace(Qd,n.id),this.hostAttr=Xd.replace(Qd,n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class op extends np{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===de.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=Jd(i.id,i.styles,[]);for(let r=0;r<s.length;r++){const e=document.createElement("style");e.textContent=s[r],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const ap="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},lp=ap("addEventListener"),cp=ap("removeEventListener"),hp={},up="FALSE",dp="ANGULAR",pp="addEventListener",mp="removeEventListener",fp="__zone_symbol__propagationStopped",gp="__zone_symbol__stopImmediatePropagation";let _p;"undefined"!=typeof Zone&&Zone[ap("BLACK_LISTED_EVENTS")]&&(_p={});const bp=function(e){return!!_p&&_p.hasOwnProperty(e)},yp=function(e){const t=hp[e.type];if(!t)return;const n=this[t];if(!n)return;const i=[e];if(1===n.length){const e=n[0];return e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}{const t=n.slice();for(let n=0;n<t.length&&!0!==e[fp];n++){const e=t[n];e.zone!==Zone.current?e.zone.run(e.handler,this,i):e.handler.apply(this,i)}}};class vp extends Gd{constructor(e,t,n){super(e),this.ngZone=t,n&&function(e){return e===Ql}(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[gp])return;const e=Event.prototype[gp]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[fp]=!0),e&&e.apply(this,arguments)}}supports(e){return!0}addEventListener(e,t,n){let i=n;if(!e[lp]||oi.isInAngularZone()&&!bp(t))e[pp](t,i,!1);else{let n=hp[t];n||(n=hp[t]=ap(dp+t+up));let s=e[n];const r=s&&s.length>0;s||(s=e[n]=[]);const o=bp(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:o,handler:i});else{let e=!1;for(let t=0;t<s.length;t++)if(s[t].handler===i){e=!0;break}e||s.push({zone:o,handler:i})}r||e[lp](t,yp,!1)}return()=>this.removeEventListener(e,t,i)}removeEventListener(e,t,n){let i=e[cp];if(!i)return e[mp].apply(e,[t,n,!1]);let s=hp[t],r=s&&e[s];if(!r)return e[mp].apply(e,[t,n,!1]);let o=!1;for(let a=0;a<r.length;a++)if(r[a].handler===n){o=!0,r.splice(a,1);break}o?0===r.length&&i.apply(e,[t,yp,!1]):e[mp].apply(e,[t,n,!1])}}const wp={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},xp=new ae("HammerGestureConfig"),Cp=new ae("HammerLoader");class Ep{constructor(){this.events=[],this.overrides={}}buildHammer(e){const t=new Hammer(e,this.options);t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0});for(const n in this.overrides)t.get(n).set(this.overrides[n]);return t}}class kp extends Gd{constructor(e,t,n,i){super(e),this._config=t,this.console=n,this.loader=i}supports(e){return!(!wp.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${e}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(e,t,n){const i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){let i=!1,s=()=>{i=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=(()=>{}));i||(s=this.addEventListener(e,t,n))}).catch(()=>{this.console.warn(`The "${t}" event cannot be bound because the custom `+"Hammer.JS loader failed."),s=(()=>{})}),()=>{s()}}return i.runOutsideAngular(()=>{const s=this._config.buildHammer(e),r=function(e){i.runGuarded(function(){n(e)})};return s.on(t,r),()=>{s.off(t,r),"function"==typeof s.destroy&&s.destroy()}})}isCustomEvent(e){return this._config.events.indexOf(e)>-1}}const Sp=["alt","control","meta","shift"],Tp={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};class Ip extends Gd{constructor(e){super(e)}supports(e){return null!=Ip.parseEventName(e)}addEventListener(e,t,n){const i=Ip.parseEventName(t),s=Ip.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ed().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const t=e.toLowerCase().split("."),n=t.shift();if(0===t.length||"keydown"!==n&&"keyup"!==n)return null;const i=Ip._normalizeKey(t.pop());let s="";if(Sp.forEach(e=>{const n=t.indexOf(e);n>-1&&(t.splice(n,1),s+=e+".")}),s+=i,0!=t.length||0===i.length)return null;const r={};return r.domEventName=n,r.fullKey=s,r}static getEventFullKey(e){let t="",n=Ed().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Sp.forEach(i=>{i!=n&&(0,Tp[i])(e)&&(t+=i+".")}),t+=n}static eventCallback(e,t,n){return i=>{Ip.getEventFullKey(i)===e&&n.runGuarded(()=>t(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}class Ap{}class Dp extends Ap{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case Jt.NONE:return t;case Jt.HTML:return t instanceof Op?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){let n=null;try{Kt=Kt||new Dt(e);let i=t?String(t):"";n=Kt.getInertBodyElement(i);let s=5,r=i;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,i=r,r=n.innerHTML,n=Kt.getInertBodyElement(i)}while(i!==r);const o=new Ut,a=o.sanitizeChildren(Zt(n)||n);return At()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}finally{if(n){const e=Zt(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}(this._doc,String(t)));case Jt.STYLE:return t instanceof Pp?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";const t=e.match(nn);return t&&Pt(t[1])===t[1]||e.match(tn)&&function(e){let t=!0,n=!0;for(let i=0;i<e.length;i++){const s=e.charAt(i);"'"===s&&n?t=!t:'"'===s&&t&&(n=!n)}return t&&n}(e)?e:(At()&&console.warn(`WARNING: sanitizing unsafe style value ${e} (see http://g.co/ng/security#xss).`),"unsafe")}(t));case Jt.SCRIPT:if(t instanceof Np)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case Jt.URL:return t instanceof Fp||t instanceof Mp?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Pt(String(t)));case Jt.RESOURCE_URL:if(t instanceof Fp)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(e,t){if(e instanceof Rp)throw new Error(`Required a safe ${t}, got a ${e.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(e){return new Op(e)}bypassSecurityTrustStyle(e){return new Pp(e)}bypassSecurityTrustScript(e){return new Np(e)}bypassSecurityTrustUrl(e){return new Mp(e)}bypassSecurityTrustResourceUrl(e){return new Fp(e)}}class Rp{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Op extends Rp{getTypeName(){return"HTML"}}class Pp extends Rp{getTypeName(){return"Style"}}class Np extends Rp{getTypeName(){return"Script"}}class Mp extends Rp{getTypeName(){return"URL"}}class Fp extends Rp{getTypeName(){return"ResourceURL"}}const Lp=wi(Ji,"browser",[{provide:Kn,useValue:Zl},{provide:Wn,useValue:function(){Od.makeCurrent(),jd.init()},multi:!0},{provide:el,useClass:Ld,deps:[Md]},{provide:Md,useFactory:function(){return document},deps:[]}]);function Vp(){return new bn}class zp{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:zp,providers:[{provide:Un,useValue:e.appId},{provide:Vd,useExisting:Un},zd]}}}class jp{constructor(e){this._doc=e,this._dom=Ed()}addTag(e,t=!1){return e?this._getOrCreateElement(e,t):null}addTags(e,t=!1){return e?e.reduce((e,n)=>(n&&e.push(this._getOrCreateElement(n,t)),e),[]):[]}getTag(e){return e&&this._dom.querySelector(this._doc,`meta[${e}]`)||null}getTags(e){if(!e)return[];const t=this._dom.querySelectorAll(this._doc,`meta[${e}]`);return t?[].slice.call(t):[]}updateTag(e,t){if(!e)return null;t=t||this._parseSelector(e);const n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)}removeTag(e){this.removeTagElement(this.getTag(e))}removeTagElement(e){e&&this._dom.remove(e)}_getOrCreateElement(e,t=!1){if(!t){const t=this._parseSelector(e),n=this.getTag(t);if(n&&this._containsAttributes(e,n))return n}const n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);const i=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(i,n),n}_setMetaElementAttributes(e,t){return Object.keys(e).forEach(n=>this._dom.setAttribute(t,n,e[n])),t}_parseSelector(e){const t=e.name?"name":"property";return`${t}="${e[t]}"`}_containsAttributes(e,t){return Object.keys(e).every(n=>this._dom.getAttribute(t,n)===e[n])}}jp.ngInjectableDef=re({factory:function(){return new jp(De(Md))},token:jp,providedIn:"root"});class Hp{constructor(e){this._doc=e}getTitle(){return Ed().getTitle(this._doc)}setTitle(e){Ed().setTitle(this._doc,e)}}function Bp(e,t=Cc){return n=>n.lift(new $p(e,t))}Hp.ngInjectableDef=re({factory:function(){return new Hp(De(Md))},token:Hp,providedIn:"root"}),"undefined"!=typeof window&&window;class $p{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Up(e,this.dueTime,this.scheduler))}}class Up extends f{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(qp,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function qp(e){e.debouncedNext()}const Gp=" ";function Wp(e,t){return(e.getAttribute(t)||"").match(/\S+/g)||[]}const Kp="cdk-describedby-message-container",Zp="cdk-describedby-message",Qp="cdk-describedby-host";let Xp=0;const Yp=new Map;let Jp=null;class em{constructor(e){this._document=e}describe(e,t){this._canBeDescribed(e,t)&&(Yp.has(t)||this._createMessageElement(t),this._isElementDescribedByMessage(e,t)||this._addMessageReference(e,t))}removeDescription(e,t){if(!this._canBeDescribed(e,t))return;this._isElementDescribedByMessage(e,t)&&this._removeMessageReference(e,t);const n=Yp.get(t);n&&0===n.referenceCount&&this._deleteMessageElement(t),Jp&&0===Jp.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Qp}]`);for(let t=0;t<e.length;t++)this._removeCdkDescribedByReferenceIds(e[t]),e[t].removeAttribute(Qp);Jp&&this._deleteMessagesContainer(),Yp.clear()}_createMessageElement(e){const t=this._document.createElement("div");t.setAttribute("id",`${Zp}-${Xp++}`),t.appendChild(this._document.createTextNode(e)),this._createMessagesContainer(),Jp.appendChild(t),Yp.set(e,{messageElement:t,referenceCount:0})}_deleteMessageElement(e){const t=Yp.get(e),n=t&&t.messageElement;Jp&&n&&Jp.removeChild(n),Yp.delete(e)}_createMessagesContainer(){if(!Jp){const e=this._document.getElementById(Kp);e&&e.parentNode.removeChild(e),(Jp=this._document.createElement("div")).id=Kp,Jp.setAttribute("aria-hidden","true"),Jp.style.display="none",this._document.body.appendChild(Jp)}}_deleteMessagesContainer(){Jp&&Jp.parentNode&&(Jp.parentNode.removeChild(Jp),Jp=null)}_removeCdkDescribedByReferenceIds(e){const t=Wp(e,"aria-describedby").filter(e=>0!=e.indexOf(Zp));e.setAttribute("aria-describedby",t.join(" "))}_addMessageReference(e,t){const n=Yp.get(t);!function(e,t,n){const i=Wp(e,t);i.some(e=>e.trim()==n.trim())||(i.push(n.trim()),e.setAttribute(t,i.join(Gp)))}(e,"aria-describedby",n.messageElement.id),e.setAttribute(Qp,""),n.referenceCount++}_removeMessageReference(e,t){const n=Yp.get(t);n.referenceCount--,function(e,t,n){const i=Wp(e,t).filter(e=>e!=n.trim());e.setAttribute(t,i.join(Gp))}(e,"aria-describedby",n.messageElement.id),e.removeAttribute(Qp)}_isElementDescribedByMessage(e,t){const n=Wp(e,"aria-describedby"),i=Yp.get(t),s=i&&i.messageElement.id;return!!s&&-1!=n.indexOf(s)}_canBeDescribed(e,t){return e.nodeType===this._document.ELEMENT_NODE&&null!=t&&!!`${t}`.trim()}}em.ngInjectableDef=re({factory:function(){return new em(De(Kl))},token:em,providedIn:"root"});class tm{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new k,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=(e=>e.disabled),this._pressedLetters=[],this.tabOut=new k,this.change=new k,e instanceof Ti&&e.changes.subscribe(e=>{if(this._activeItem){const t=e.toArray().indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){if(this._items.length&&this._items.some(e=>"function"!=typeof e.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(nh(e=>this._pressedLetters.push(e)),Bp(e),Ac(()=>this._pressedLetters.length>0),L(()=>this._pressedLetters.join(""))).subscribe(e=>{const t=this._getItemsArray();for(let n=1;n<t.length+1;n++){const i=(this._activeItemIndex+n)%t.length,s=t[i];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}setActiveItem(e){const t=this._activeItemIndex;this.updateActiveItem(e),this._activeItemIndex!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(t=>!e[t]||this._allowedModifierKeys.indexOf(t)>-1);switch(t){case _u:return void this.tabOut.next();case Iu:if(this._vertical&&n){this.setNextItemActive();break}return;case Su:if(this._vertical&&n){this.setPreviousItemActive();break}return;case Tu:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case ku:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||Pu(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=Ru&&t<=Ou||t>=Au&&t<=Du)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e),i=t[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}updateActiveItemIndex(e){this.updateActiveItem(e)}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const i=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Ti?this._items.toArray():this._items}}class nm extends tm{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}class im{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const t=function(e){try{return e.frameElement}catch(HC){return null}}((n=e).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(t){const e=t&&t.nodeName.toLowerCase();if(-1===rm(t))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===e)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(t))return!1}let i=e.nodeName.toLowerCase(),s=rm(e);if(e.hasAttribute("contenteditable"))return-1!==s;if("iframe"===i)return!1;if("audio"===i){if(!e.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!e.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(e){let t=e.nodeName.toLowerCase(),n="input"===t&&e.type;return"text"===n||"password"===n||"select"===t||"textarea"===t}(e))&&e.tabIndex>=0}isFocusable(e){return function(e){return!function(e){return function(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function(e){let t=e.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(e)||function(e){return function(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||sm(e))}(e)&&!this.isDisabled(e)&&this.isVisible(e)}}function sm(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let t=e.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function rm(e){if(!sm(e))return null;const t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}im.ngInjectableDef=re({factory:function(){return new im(De(Jl))},token:im,providedIn:"root"});class om{constructor(e,t,n,i,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=i,this._hasAttached=!1,this._startAnchorListener=(()=>this.focusLastTabbableElement()),this._endAnchorListener=(()=>this.focusFirstTabbableElement()),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this._startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this._endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this._startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this._endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], `+`[cdkFocusRegion${e}], `+`[cdk-focus-${e}]`);for(let n=0;n<t.length;n++)t[n].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', `+`use 'cdkFocusRegion${e}' instead. The deprecated `+"attribute will be removed in 8.0.0.",t[n]):t[n].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', `+`use 'cdkFocusRegion${e}' instead. The deprecated attribute `+"will be removed in 8.0.0.",t[n]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return e?(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),At()&&!this._checker.isFocusable(e)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",e),e.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=0;n<t.length;n++){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(e)return e}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let n=t.length-1;n>=0;n--){let e=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(e)return e}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.asObservable().pipe(Jc(1)).subscribe(e)}}class am{constructor(e,t,n){this._checker=e,this._ngZone=t,this._document=n}create(e,t=!1){return new om(e,this._checker,this._ngZone,this._document,t)}}am.ngInjectableDef=re({factory:function(){return new am(De(im),De(oi),De(Kl))},token:am,providedIn:"root"});const lm=new ae("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}});class cm{constructor(e,t,n){this._ngZone=t,this._document=n,this._liveElement=e||this._createLiveElement()}announce(e,...t){let n,i;return 1===t.length&&"number"==typeof t[0]?i=t[0]:[n,i]=t,this.clear(),clearTimeout(this._previousTimeout),this._liveElement.setAttribute("aria-live",n||"polite"),this._ngZone.runOutsideAngular(()=>new Promise(t=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,t(),"number"==typeof i&&(this._previousTimeout=setTimeout(()=>this.clear(),i))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e=this._document.getElementsByClassName("cdk-live-announcer-element"),t=this._document.createElement("div");for(let n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n]);return t.classList.add("cdk-live-announcer-element"),t.classList.add("cdk-visually-hidden"),t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),t}}cm.ngInjectableDef=re({factory:function(){return new cm(De(lm,8),De(oi),De(Kl))},token:cm,providedIn:"root"});const hm=650,um=sc({passive:!0,capture:!0});class dm{constructor(e,t){this._ngZone=e,this._platform=t,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=(()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")}),this._documentMousedownListener=(()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")}),this._documentTouchstartListener=(e=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=e.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,hm)}),this._windowFocusListener=(()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)})}monitor(e,t=!1){if(!this._platform.isBrowser)return hc(null);const n=cc(e);if(this._elementInfo.has(n)){let e=this._elementInfo.get(n);return e.checkChildren=t,e.subject.asObservable()}let i={unlisten:()=>{},checkChildren:t,subject:new k};this._elementInfo.set(n,i),this._incrementMonitoredElementCount();let s=e=>this._onFocus(e,n),r=e=>this._onBlur(e,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",s,!0),n.addEventListener("blur",r,!0)}),i.unlisten=(()=>{n.removeEventListener("focus",s,!0),n.removeEventListener("blur",r,!0)}),i.subject.asObservable()}stopMonitoring(e){const t=cc(e),n=this._elementInfo.get(t);n&&(n.unlisten(),n.subject.complete(),this._setClasses(t),this._elementInfo.delete(t),this._decrementMonitoredElementCount())}focusVia(e,t,n){const i=cc(e);this._setOriginForCurrentEventQueue(t),"function"==typeof i.focus&&i.focus(n)}ngOnDestroy(){this._elementInfo.forEach((e,t)=>this.stopMonitoring(t))}_toggleClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}_setClasses(e,t){this._elementInfo.get(e)&&(this._toggleClass(e,"cdk-focused",!!t),this._toggleClass(e,"cdk-touch-focused","touch"===t),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===t),this._toggleClass(e,"cdk-mouse-focused","mouse"===t),this._toggleClass(e,"cdk-program-focused","program"===t))}_setOriginForCurrentEventQueue(e){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(e){let t=e.target;return this._lastTouchTarget instanceof Node&&t instanceof Node&&(t===this._lastTouchTarget||t.contains(this._lastTouchTarget))}_onFocus(e,t){const n=this._elementInfo.get(t);if(!n||!n.checkChildren&&t!==e.target)return;let i=this._origin;i||(i=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(e)?"touch":"program"),this._setClasses(t,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}_onBlur(e,t){const n=this._elementInfo.get(t);!n||n.checkChildren&&e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||(this._setClasses(t),this._emitOrigin(n.subject,null))}_emitOrigin(e,t){this._ngZone.run(()=>e.next(t))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{document.addEventListener("keydown",this._documentKeydownListener,um),document.addEventListener("mousedown",this._documentMousedownListener,um),document.addEventListener("touchstart",this._documentTouchstartListener,um),window.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,um),document.removeEventListener("mousedown",this._documentMousedownListener,um),document.removeEventListener("touchstart",this._documentTouchstartListener,um),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}dm.ngInjectableDef=re({factory:function(){return new dm(De(oi),De(Jl))},token:dm,providedIn:"root"});class pm{}class mm{}mm.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",mm.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",mm.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",mm.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";class fm{}fm.COMPLEX="375ms",fm.ENTERING="225ms",fm.EXITING="195ms";const gm=new ae("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});class _m{constructor(e,t){this._sanityChecksEnabled=e,this._hammerLoader=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&At()&&!this._isTestEnv()}_isTestEnv(){const e=this._window;return e&&(e.__karma__||e.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const t=getComputedStyle(e);t&&"none"!==t.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}function bm(e){return class extends e{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=rc(e)}}}function ym(e,t){return class extends e{get color(){return this._color}set color(e){const n=e||t;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.color=t}}}function vm(e){return class extends e{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=rc(e)}}}function wm(e,t=0){return class extends e{constructor(...e){super(...e),this._tabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?e:t}}}function xm(e){return class extends e{constructor(...e){super(...e),this.errorState=!1,this.stateChanges=new k}updateErrorState(){const e=this.errorState,t=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);t!==e&&(this.errorState=t,this.stateChanges.next())}}}let Cm;try{Cm="undefined"!=typeof Intl}catch(HC){Cm=!1}class Em{isErrorState(e,t){return!!(e&&e.invalid&&(e.touched||t&&t.submitted))}}Em.ngInjectableDef=re({factory:function(){return new Em},token:Em,providedIn:"root"});const km=new ae("MAT_HAMMER_OPTIONS"),Sm=["longpress","slide","slidestart","slideend","slideright","slideleft"],Tm={on:()=>{},off:()=>{}};class Im extends Ep{constructor(e,t){super(),this._hammerOptions=e,this.events=Sm,t&&t._checkHammerIsAvailable()}buildHammer(e){const t="undefined"!=typeof window?window.Hammer:null;if(!t)return Tm;const n=new t(e,this._hammerOptions||void 0),i=new t.Pan,s=new t.Swipe,r=new t.Press,o=this._createRecognizer(i,{event:"slide",threshold:0},s),a=this._createRecognizer(r,{event:"longpress",time:500});return i.recognizeWith(s),a.recognizeWith(o),n.add([s,r,i,o,a]),n}_createRecognizer(e,t,...n){let i=new e.constructor(t);return n.push(e),n.forEach(e=>i.recognizeWith(e)),i}}function Am(e,t,n){const i=e.nativeElement.classList;n?i.add(t):i.remove(t)}class Dm{}const Rm=function(){var e={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return e[e.FADING_IN]="FADING_IN",e[e.VISIBLE]="VISIBLE",e[e.FADING_OUT]="FADING_OUT",e[e.HIDDEN]="HIDDEN",e}();class Om{constructor(e,t,n){this._renderer=e,this.element=t,this.config=n,this.state=Rm.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Pm={enterDuration:450,exitDuration:400},Nm=800,Mm=sc({passive:!0});class Fm{constructor(e,t,n,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this.onMousedown=(e=>{const t=function(e){return 0===e.buttons}(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Nm;this._target.rippleDisabled||t||n||(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}),this.onTouchStart=(e=>{if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let e=0;e<t.length;e++)this.fadeInRipple(t[e].clientX,t[e].clientY,this._target.rippleConfig)}}),this.onPointerUp=(()=>{this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(e.state===Rm.VISIBLE||e.config.terminateOnPointerUp&&e.state===Rm.FADING_IN)&&e.fadeOut()}))}),i.isBrowser&&(this._containerElement=n.nativeElement,this._triggerEvents.set("mousedown",this.onMousedown).set("mouseup",this.onPointerUp).set("mouseleave",this.onPointerUp).set("touchstart",this.onTouchStart).set("touchend",this.onPointerUp).set("touchcancel",this.onPointerUp))}fadeInRipple(e,t,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign({},Pm,n.animation);n.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const r=n.radius||function(e,t,n){const i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),s=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+s*s)}(e,t,i),o=e-i.left,a=t-i.top,l=s.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=`${o-r}px`,c.style.top=`${a-r}px`,c.style.height=`${2*r}px`,c.style.width=`${2*r}px`,c.style.backgroundColor=n.color||null,c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new Om(this,c,n);return h.state=Rm.FADING_IN,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this.runTimeoutOutsideZone(()=>{const e=h===this._mostRecentTransientRipple;h.state=Rm.VISIBLE,n.persistent||e&&this._isPointerDown||h.fadeOut()},l),h}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const n=e.element,i=Object.assign({},Pm,e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Rm.FADING_OUT,this.runTimeoutOutsideZone(()=>{e.state=Rm.HIDDEN,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}setupTriggerEvents(e){e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(()=>{this._triggerEvents.forEach((t,n)=>{e.addEventListener(n,t,Mm)})}),this._triggerElement=e)}runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_removeTriggerEvents(){this._triggerElement&&this._triggerEvents.forEach((e,t)=>{this._triggerElement.removeEventListener(t,e,Mm)})}}const Lm=new ae("mat-ripple-global-options");class Vm{constructor(e,t,n,i,s){this._elementRef=e,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new Fm(this,t,e,n),"NoopAnimations"===s&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,t=0,n){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,t,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,e))}}class zm{}class jm{}class Hm{}const Bm=new ae("mat-label-global-options");var $m=Cs({encapsulation:2,styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}@media (-ms-high-contrast:active){.mat-dialog-container{outline:solid 1px}}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button+.mat-button,.mat-dialog-actions .mat-button+.mat-raised-button,.mat-dialog-actions .mat-raised-button+.mat-button,.mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-button+.mat-raised-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-button,[dir=rtl] .mat-dialog-actions .mat-raised-button+.mat-raised-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"dialogContainer",definitions:[{type:0,name:"void, exit",styles:{type:6,styles:{opacity:0,transform:"scale(0.7)"},offset:null},options:void 0},{type:0,name:"enter",styles:{type:6,styles:{transform:"none"},offset:null},options:void 0},{type:1,expr:"* => enter",animation:{type:4,styles:{type:6,styles:{transform:"none",opacity:1},offset:null},timings:"150ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void, * => exit",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"75ms cubic-bezier(0.4, 0.0, 0.2, 1)"},options:null}],options:{}}]}});function Um(e){return yo(0,[(e()(),Ys(0,null,null,0))],null,null)}function qm(e){return yo(0,[so(402653184,1,{_portalOutlet:0}),(e()(),Ys(16777216,null,null,1,null,Um)),Hr(2,212992,[[1,4]],0,mu,[ft,Ii],{portal:[0,"portal"]},null)],function(e,t){e(t,2,0,"")},null)}function Gm(e){return yo(0,[(e()(),Js(0,0,null,null,1,"mat-dialog-container",[["aria-modal","true"],["class","mat-dialog-container"],["tabindex","-1"]],[[1,"id",0],[1,"role",0],[1,"aria-labelledby",0],[1,"aria-label",0],[1,"aria-describedby",0],[40,"@dialogContainer",0]],[["component","@dialogContainer.start"],["component","@dialogContainer.done"]],function(e,t,n){var i=!0;return"component:@dialogContainer.start"===t&&(i=!1!==Ir(e,1)._onAnimationStart(n)&&i),"component:@dialogContainer.done"===t&&(i=!1!==Ir(e,1)._onAnimationDone(n)&&i),i},qm,$m)),Hr(1,49152,null,0,md,[bt,am,Di,[2,Kl],dd],null,null)],null,function(e,t){e(t,0,0,Ir(t,1)._id,Ir(t,1)._config.role,Ir(t,1)._config.ariaLabel?null:Ir(t,1)._ariaLabelledBy,Ir(t,1)._config.ariaLabel,Ir(t,1)._config.ariaDescribedBy||null,Ir(t,1)._state)})}var Wm=_r("mat-dialog-container",md,Gm,{},{},[]);const Km={};class Zm{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Qm(e,this.resultSelector))}}class Qm extends F{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Km),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++){const t=e[n];this.add(M(this,t,t,n))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n,i,s){const r=this.values,o=this.toRespond?r[n]===Km?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Xm=new Set;let Ym;class Jm{constructor(e){this.platform=e,this._matchMedia=this.platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):ef}matchMedia(e){return this.platform.WEBKIT&&function(e){if(!Xm.has(e))try{Ym||((Ym=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(Ym)),Ym.sheet&&(Ym.sheet.insertRule(`@media ${e} {.fx-query-test{ }}`,0),Xm.add(e))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}function ef(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}Jm.ngInjectableDef=re({factory:function(){return new Jm(De(Jl))},token:Jm,providedIn:"root"});class tf{constructor(e,t){this.mediaMatcher=e,this.zone=t,this._queries=new Map,this._destroySubject=new k}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return nf(ac(e)).some(e=>this._registerQuery(e).mql.matches)}observe(e){return function(...e){let t=null,n=null;return T(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),W(e,n).lift(new Zm(t))}(nf(ac(e)).map(e=>this._registerQuery(e).observable)).pipe(Bp(0,vc),L(e=>{const t={matches:!1,breakpoints:{}};return e.forEach(e=>{t.matches=t.matches||e.matches,t.breakpoints[e.query]=e.matches}),t}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const t=this.mediaMatcher.matchMedia(e);let n;const s={observable:function e(t,n,s){return s?e(t,n).pipe(L(e=>l(e)?s(...e):s(e))):new y(e=>{const s=(...t)=>e.next(1===t.length?t[0]:t);let r;try{r=t(s)}catch(o){return void e.error(o)}if(i(n))return()=>n(s,r)})}(e=>{t.addListener(n=(t=>this.zone.run(()=>e(t))))},()=>t.removeListener(n)).pipe(Fc(t),L(t=>({query:e,matches:t.matches})),Oc(this._destroySubject)),mql:t};return this._queries.set(e,s),s}}function nf(e){return e.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}tf.ngInjectableDef=re({factory:function(){return new tf(De(Jm),De(oi))},token:tf,providedIn:"root"});const sf={XSmall:"(max-width: 599.99px)",Small:"(min-width: 600px) and (max-width: 959.99px)",Medium:"(min-width: 960px) and (max-width: 1279.99px)",Large:"(min-width: 1280px) and (max-width: 1919.99px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.99px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.99px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},rf=20,of=new ae("mat-tooltip-scroll-strategy");function af(e){return()=>e.scrollStrategies.reposition({scrollThrottle:rf})}class lf{constructor(e,t){this._changeDetectorRef=e,this._breakpointObserver=t,this._visibility="initial",this._closeOnInteraction=!1,this._onHide=new k,this._isHandset=this._breakpointObserver.observe(sf.Handset)}show(e){this._hideTimeoutId&&(clearTimeout(this._hideTimeoutId),this._hideTimeoutId=null),this._closeOnInteraction=!0,this._showTimeoutId=setTimeout(()=>{this._visibility="visible",this._showTimeoutId=null,this._markForCheck()},e)}hide(e){this._showTimeoutId&&(clearTimeout(this._showTimeoutId),this._showTimeoutId=null),this._hideTimeoutId=setTimeout(()=>{this._visibility="hidden",this._hideTimeoutId=null,this._markForCheck()},e)}afterHidden(){return this._onHide.asObservable()}isVisible(){return"visible"===this._visibility}ngOnDestroy(){this._onHide.complete()}_animationStart(){this._closeOnInteraction=!1}_animationDone(e){const t=e.toState;"hidden"!==t||this.isVisible()||this._onHide.next(),"visible"!==t&&"hidden"!==t||(this._closeOnInteraction=!0)}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}}class cf{}class hf{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}hf.ngInjectableDef=re({factory:function(){return new hf},token:hf,providedIn:"root"});class uf{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=cc(e);return new y(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new k,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}uf.ngInjectableDef=re({factory:function(){return new uf(De(hf))},token:uf,providedIn:"root"});class df{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new Qt,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=rc(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=oc(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Bp(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class pf{}var mf=Cs({encapsulation:2,styles:[".mat-tooltip-panel{pointer-events:none!important}.mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis}@media (-ms-high-contrast:active){.mat-tooltip{outline:solid 1px}}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"initial, void, hidden",styles:{type:6,styles:{opacity:0,transform:"scale(0)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"scale(1)"},offset:null},options:void 0},{type:1,expr:"* => visible",animation:{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"scale(0)",offset:0},offset:null},{type:6,styles:{opacity:.5,transform:"scale(0.99)",offset:.5},offset:null},{type:6,styles:{opacity:1,transform:"scale(1)",offset:1},offset:null}]},timings:"200ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => hidden",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms cubic-bezier(0, 0, 0.2, 1)"},options:null}],options:{}}]}});function ff(e){return yo(2,[(e()(),Js(0,0,null,null,3,"div",[["class","mat-tooltip"]],[[2,"mat-tooltip-handset",null],[24,"@state",0]],[[null,"@state.start"],[null,"@state.done"]],function(e,t,n){var i=!0,s=e.component;return"@state.start"===t&&(i=!1!==s._animationStart()&&i),"@state.done"===t&&(i=!1!==s._animationDone(n)&&i),i},null,null)),Hr(1,278528,null,0,ul,[Ki,Zi,bt,Ct],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),Br(131072,ql,[Di]),(e()(),go(3,null,["",""]))],function(e,t){e(t,1,0,"mat-tooltip",t.component.tooltipClass)},function(e,t){var n,i=t.component;e(t,0,0,null==(n=vs(t,0,0,Ir(t,2).transform(i._isHandset)))?null:n.matches,i._visibility),e(t,3,0,i.message)})}function gf(e){return yo(0,[(e()(),Js(0,0,null,null,1,"mat-tooltip-component",[["aria-hidden","true"]],[[4,"zoom",null]],[["body","click"]],function(e,t,n){var i=!0;return"body:click"===t&&(i=!1!==Ir(e,1)._handleBodyInteraction()&&i),i},ff,mf)),Hr(1,180224,null,0,lf,[Di,tf],null,null)],null,function(e,t){e(t,0,0,"visible"===Ir(t,1)._visibility?1:null)})}var _f=_r("mat-tooltip-component",lf,gf,{},{},[]);let bf=0;class yf{constructor(){this._stateChanges=new k,this._openCloseAllActions=new k,this.id=`cdk-accordion-${bf++}`,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=rc(e)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(e){this.multi&&this._openCloseAllActions.next(e)}}let vf=0;class wf{constructor(e,t,n){this.accordion=e,this._changeDetectorRef=t,this._expansionDispatcher=n,this._openCloseAllSubscription=d.EMPTY,this.closed=new Qt,this.opened=new Qt,this.destroyed=new Qt,this.expandedChange=new Qt,this.id=`cdk-accordion-child-${vf++}`,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=(()=>{}),this._removeUniqueSelectionListener=n.listen((e,t)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===t&&this.id!==e&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=rc(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=rc(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}class xf{}const Cf=new ae("MAT_ACCORDION");let Ef=0;const kf=new ae("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");class Sf extends wf{constructor(e,t,n,i,s,r,o){var a;super(e,t,n),this._viewContainerRef=i,this._animationMode=r,this._hideToggle=!1,this.afterExpand=new Qt,this.afterCollapse=new Qt,this._inputChanges=new k,this._headerId=`mat-expansion-panel-header-${Ef++}`,this._bodyAnimationDone=new k,this.accordion=e,this._document=s,this._bodyAnimationDone.pipe((a=((e,t)=>e.fromState===t.fromState&&e.toState===t.toState),e=>e.lift(new wc(a,void 0)))).subscribe(e=>{"void"!==e.fromState&&("expanded"===e.toState?this.afterExpand.emit():"collapsed"===e.toState&&this.afterCollapse.emit())}),o&&(this.hideToggle=o.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=rc(e)}_hasSpacing(){return!!this.accordion&&"default"===(this.expanded?this.accordion.displayMode:this._getExpandedState())}_getExpandedState(){return this.expanded?"expanded":"collapsed"}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Fc(null),Ac(()=>this.expanded&&!this._portal),Jc(1)).subscribe(()=>{this._portal=new uu(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body&&this._document){const e=this._document.activeElement,t=this._body.nativeElement;return e===t||t.contains(e)}return!1}}class Tf{constructor(e,t,n,i,s){this.panel=e,this._element=t,this._focusMonitor=n,this._changeDetectorRef=i,this._parentChangeSubscription=d.EMPTY;const r=e.accordion?e.accordion._stateChanges.pipe(Ac(e=>!!e.hideToggle)):zc;this._parentChangeSubscription=K(e.opened,e.closed,r,e._inputChanges.pipe(Ac(e=>!(!e.hideToggle&&!e.disabled)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Ac(()=>e._containsFocus())).subscribe(()=>n.focusVia(t,"program")),n.monitor(t).subscribe(t=>{t&&e.accordion&&e.accordion._handleHeaderFocus(this)}),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_keydown(e){switch(e.keyCode){case vu:case bu:Pu(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e="program"){this._focusMonitor.focusVia(this._element,e)}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}class If{}class Af extends yf{constructor(){super(...arguments),this._hideToggle=!1,this.displayMode="default"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=rc(e)}ngAfterContentInit(){this._keyManager=new nm(this._headers).withWrap()}_handleHeaderKeydown(e){const{keyCode:t}=e,n=this._keyManager;t===Eu?(n.setFirstItemActive(),e.preventDefault()):t===Cu?(n.setLastItemActive(),e.preventDefault()):this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}}class Df{}function Rf(){return"undefined"!=typeof process}function Of(e){switch(e.length){case 0:return new ru;case 1:return e[0];default:return new ou(e)}}function Pf(e,t,n,i,s={},r={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(e=>{const n=e.offset,i=n==l,h=i&&c||{};Object.keys(e).forEach(n=>{let i=n,a=e[n];if("offset"!==n)switch(i=t.normalizePropertyName(i,o),a){case au:a=s[n];break;case tu:a=r[n];break;default:a=t.normalizeStyleValue(n,i,a,o)}h[i]=a}),i||a.push(h),c=h,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function Nf(e,t,n,i){switch(t){case"start":e.onStart(()=>i(n&&Mf(n,"start",e)));break;case"done":e.onDone(()=>i(n&&Mf(n,"done",e)));break;case"destroy":e.onDestroy(()=>i(n&&Mf(n,"destroy",e)))}}function Mf(e,t,n){const i=n.totalTime,s=Ff(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==i?e.totalTime:i,!!n.disabled),r=e._data;return null!=r&&(s._data=r),s}function Ff(e,t,n,i,s="",r=0,o){return{element:e,triggerName:t,fromState:n,toState:i,phaseName:s,totalTime:r,disabled:!!o}}function Lf(e,t,n){let i;return e instanceof Map?(i=e.get(t))||e.set(t,i=n):(i=e[t])||(i=e[t]=n),i}function Vf(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let zf=(e,t)=>!1,jf=(e,t)=>!1,Hf=(e,t,n)=>[];const Bf=Rf();if(Bf||"undefined"!=typeof Element){if(zf=((e,t)=>e.contains(t)),Bf||Element.prototype.matches)jf=((e,t)=>e.matches(t));else{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;t&&(jf=((e,n)=>t.apply(e,[n])))}Hf=((e,t,n)=>{let i=[];if(n)i.push(...e.querySelectorAll(t));else{const n=e.querySelector(t);n&&i.push(n)}return i})}let $f=null,Uf=!1;function qf(e){$f||($f=("undefined"!=typeof document?document.body:null)||{},Uf=!!$f.style&&"WebkitAppearance"in $f.style);let t=!0;return $f.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&!(t=e in $f.style)&&Uf&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in $f.style),t}const Gf=jf,Wf=zf,Kf=Hf;function Zf(e){const t={};return Object.keys(e).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[i]=e[n]}),t}class Qf{validateStyleProperty(e){return qf(e)}matchesElement(e,t){return Gf(e,t)}containsElement(e,t){return Wf(e,t)}query(e,t,n){return Kf(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,i,s,r=[],o){return new ru(n,i)}}class Xf{}Xf.NOOP=new Qf;const Yf=1e3,Jf="{{",eg="ng-enter",tg="ng-leave",ng="ng-trigger",ig=".ng-trigger",sg="ng-animating",rg=".ng-animating";function og(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ag(parseFloat(t[1]),t[2])}function ag(e,t){switch(t){case"s":return e*Yf;default:return e}}function lg(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let i,s=0,r="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};i=ag(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(s=ag(parseFloat(o),n[4]));const a=n[5];a&&(r=a)}else i=e;if(!n){let n=!1,r=t.length;i<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(r,0,`The provided timing value "${e}" is invalid.`)}return{duration:i,delay:s,easing:r}}(e,t,n)}function cg(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function hg(e,t,n={}){if(t)for(let i in e)n[i]=e[i];else cg(e,n);return n}function ug(e,t,n){return n?t+":"+n+";":""}function dg(e){let t="";for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t+=ug(0,i,e.style.getPropertyValue(i))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=ug(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function pg(e,t,n){e.style&&(Object.keys(t).forEach(i=>{const s=wg(i);n&&!n.hasOwnProperty(i)&&(n[i]=e.style[s]),e.style[s]=t[i]}),Rf()&&dg(e))}function mg(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=wg(t);e.style[n]=""}),Rf()&&dg(e))}function fg(e){return Array.isArray(e)?1==e.length?e[0]:nu(e):e}const gg=new RegExp(`${Jf}\\s*(.+?)\\s*}}`,"g");function _g(e){let t=[];if("string"==typeof e){const n=e.toString();let i;for(;i=gg.exec(n);)t.push(i[1]);gg.lastIndex=0}return t}function bg(e,t,n){const i=e.toString(),s=i.replace(gg,(e,i)=>{let s=t[i];return t.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),s=""),s.toString()});return s==i?e:s}function yg(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const vg=/-+([a-z0-9])/g;function wg(e){return e.replace(vg,(...e)=>e[1].toUpperCase())}function xg(e,t){return 0===e||0===t}function Cg(e,t,n){const i=Object.keys(n);if(i.length&&t.length){let r=t[0],o=[];if(i.forEach(e=>{r.hasOwnProperty(e)||o.push(e),r[e]=n[e]}),o.length)for(var s=1;s<t.length;s++){let n=t[s];o.forEach(function(t){n[t]=kg(e,t)})}}return t}function Eg(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function kg(e,t){return window.getComputedStyle(e)[t]}const Sg="*";function Tg(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>(function(e,t,n){if(":"==e[0]){const i=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof i)return void t.push(i);e=i}const i=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const s=i[1],r=i[2],o=i[3];t.push(Dg(s,o)),"<"!=r[0]||s==Sg&&o==Sg||t.push(Dg(o,s))})(e,n,t)):n.push(e),n}const Ig=new Set(["true","1"]),Ag=new Set(["false","0"]);function Dg(e,t){const n=Ig.has(e)||Ag.has(e),i=Ig.has(t)||Ag.has(t);return(s,r)=>{let o=e==Sg||e==s,a=t==Sg||t==r;return!o&&n&&"boolean"==typeof s&&(o=s?Ig.has(e):Ag.has(e)),!a&&i&&"boolean"==typeof r&&(a=r?Ig.has(t):Ag.has(t)),o&&a}}const Rg=":self",Og=new RegExp(`s*${Rg}s*,?`,"g");function Pg(e,t,n){return new Mg(e).build(t,n)}const Ng="";class Mg{constructor(e){this._driver=e}build(e,t){const n=new Fg(t);return this._resetContextStyleTimingState(n),Eg(this,fg(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector=Ng,e.collectedStyles={},e.collectedStyles[Ng]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const s=[],r=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,i=n.name;i.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,s.push(this.visitState(n,t))}),n.name=i}else if(1==e.type){const s=this.visitTransition(e,t);n+=s.queryCount,i+=s.depCount,r.push(s)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:r,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,r=i||{};if(n.styles.forEach(e=>{if(Lg(e)){const t=e;Object.keys(t).forEach(e=>{_g(t[e]).forEach(e=>{r.hasOwnProperty(e)||s.add(e)})})}}),s.size){const n=yg(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Eg(this,fg(e.animation),t);return{type:1,matchers:Tg(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Vg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>Eg(this,e,t)),options:Vg(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const s=e.steps.map(e=>{t.currentTime=n;const s=Eg(this,e,t);return i=Math.max(i,t.currentTime),s});return t.currentTime=i,{type:3,steps:s,options:Vg(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return zg(lg(e,t).duration,0,"");const i=e;if(i.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=zg(0,0,"");return e.dynamic=!0,e.strValue=i,e}return zg((n=n||lg(i,t)).duration,n.delay,n.easing)}(e.timings,t.errors);let i;t.currentAnimateTimings=n;let s=e.styles?e.styles:iu({});if(5==s.type)i=this.visitKeyframes(s,t);else{let s=e.styles,r=!1;if(!s){r=!0;const e={};n.easing&&(e.easing=n.easing),s=iu(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(s,t);o.isEmptyStep=r,i=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==tu?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let i=!1,s=null;return n.forEach(e=>{if(Lg(e)){const t=e,n=t.easing;if(n&&(s=n,delete t.easing),!i)for(let e in t)if(t[e].toString().indexOf(Jf)>=0){i=!0;break}}}),{type:6,styles:n,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const r=t.collectedStyles[t.currentQuerySelector],o=r[n];let a=!0;o&&(s!=i&&s>=o.startTime&&i<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),a=!1),s=o.startTime),a&&(r[n]={startTime:s,endTime:i}),t.options&&function(i,s,r){const o=t.options.params||{},a=_g(e[n]);a.length&&a.forEach(e=>{o.hasOwnProperty(e)||r.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(0,0,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const s=[];let r=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(Lg(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Lg(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,r=r||c<a,a=c,s.push(c),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),r&&t.errors.push("Please ensure that all keyframe offsets are in order");const c=e.steps.length;let h=0;i>0&&i<c?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));const u=c-1,d=t.currentTime,p=t.currentAnimateTimings,m=p.duration;return l.forEach((e,i)=>{const r=h>0?i==u?1:h*i:s[i],o=r*m;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=r,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:Eg(this,fg(e.animation),t),options:Vg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vg(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,r]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>e==Rg);return t&&(e=e.replace(Og,"")),[e=e.replace(/@\*/g,ig).replace(/@\w+/g,e=>ig+"-"+e.substr(1)).replace(/:animating/g,rg),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Lf(t.collectedStyles,t.currentQuerySelector,{});const o=Eg(this,fg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:r,animation:o,originalSelector:e.selector,options:Vg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:lg(e.timings,t.errors,!0);return{type:12,animation:Eg(this,fg(e.animation),t),timings:n,options:null}}}class Fg{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Lg(e){return!Array.isArray(e)&&"object"==typeof e}function Vg(e){var t;return e?(e=cg(e)).params&&(e.params=(t=e.params)?cg(t):null):e={},e}function zg(e,t,n){return{duration:e,delay:t,easing:n}}function jg(e,t,n,i,s,r,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:i,duration:s,delay:r,totalTime:s+r,easing:o,subTimeline:a}}class Hg{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Bg=1,$g=new RegExp(":enter","g"),Ug=new RegExp(":leave","g");function qg(e,t,n,i,s,r={},o={},a,l,c=[]){return(new Gg).buildKeyframes(e,t,n,i,s,r,o,a,l,c)}class Gg{buildKeyframes(e,t,n,i,s,r,o,a,l,c=[]){l=l||new Hg;const h=new Kg(e,t,l,i,s,c,[]);h.options=a,h.currentTimeline.setStyles([r],null,h.errors,a),Eg(this,n,h);const u=h.timelines.filter(e=>e.containsAnimation());if(u.length&&Object.keys(o).length){const e=u[u.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,h.errors,a)}return u.length?u.map(e=>e.buildKeyframes()):[jg(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,r=this._visitSubInstructions(n,i,i.options);s!=r&&t.transformIntoNewTimeline(r)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let i=t.currentTimeline.currentTime;const s=null!=n.duration?og(n.duration):null,r=null!=n.delay?og(n.delay):null;return 0!==s&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,s,r);i=Math.max(i,n.duration+n.delay)}),i}visitReference(e,t){t.updateOptions(e.options,!0),Eg(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&((i=t.createSubContext(s)).transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Wg);const e=og(s.delay);i.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>Eg(this,e,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?og(e.options.delay):0;e.steps.forEach(r=>{const o=t.createSubContext(e.options);s&&o.delayNextStep(s),Eg(this,r,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return lg(t.params?bg(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,s=n.duration,r=t.createSubContext().currentTimeline;r.easing=n.easing,e.styles.forEach(e=>{r.forwardTime((e.offset||0)*s),r.setStyles(e.styles,e.easing,t.errors,t.options),r.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(r),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?og(i.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Wg);let r=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{t.currentQueryIndex=i;const o=t.createSubContext(e.options,n);s&&o.delayNextStep(s),n===t.element&&(a=o.currentTimeline),Eg(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),r=Math.max(r,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(r),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,s=e.timings,r=Math.abs(s.duration),o=r*(t.currentQueryTotal-1);let a=r*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Eg(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const Wg={};class Kg{constructor(e,t,n,i,s,r,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=s,this.errors=r,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Wg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Zg(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=og(n.duration)),null!=n.delay&&(i.delay=og(n.delay));const s=n.params;if(s){let e=i.params;e||(e=this.options.params={}),Object.keys(s).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=bg(s[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,s=new Kg(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Wg,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},s=new Qg(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,s,r){let o=[];if(i&&o.push(this.element),e.length>0){e=(e=e.replace($g,"."+this._enterClassName)).replace(Ug,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return s||0!=o.length||r.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Zg{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Zg(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Bg,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||tu,this._currentKeyframe[e]=tu}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},r=function(e,t){const n={};let i;return e.forEach(e=>{"*"===e?(i=i||Object.keys(t)).forEach(e=>{n[e]=tu}):hg(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(r).forEach(e=>{const t=bg(r[e],s,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:tu),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],i=e._styleSummary[t];(!n||i.time>n.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((s,r)=>{const o=hg(s,!0);Object.keys(o).forEach(n=>{const i=o[n];i==au?e.add(n):i==tu&&t.add(n)}),n||(o.offset=r/this.duration),i.push(o)});const s=e.size?yg(e.values()):[],r=t.size?yg(t.values()):[];if(n){const e=i[0],t=cg(e);e.offset=0,t.offset=1,i=[e,t]}return jg(this.element,i,s,r,this.duration,this.startTime,this.easing,!1)}}class Qg extends Zg{constructor(e,t,n,i,s,r,o=!1){super(e,t,r.delay),this.element=t,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:r.duration,delay:r.delay,easing:r.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],r=n+t,o=t/r,a=hg(e[0],!1);a.offset=0,s.push(a);const l=hg(e[0],!1);l.offset=Xg(o),s.push(l);const c=e.length-1;for(let i=1;i<=c;i++){let o=hg(e[i],!1);o.offset=Xg((t+o.offset*n)/r),s.push(o)}n=r,t=0,i="",e=s}return jg(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function Xg(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Yg{}class Jg extends Yg{normalizePropertyName(e,t){return wg(e)}normalizeStyleValue(e,t,n,i){let s="";const r=n.toString().trim();if(e_[t]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&i.push(`Please provide a CSS unit value for ${e}:${n}`)}return r+s}}const e_=t_("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","));function t_(e){const t={};return e.forEach(e=>t[e]=!0),t}function n_(e,t,n,i,s,r,o,a,l,c,h,u,d){return{type:0,element:e,triggerName:t,isRemovalTransition:s,fromState:n,fromStyles:r,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const i_={};class s_{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function(e,t,n,i,s){return e.some(e=>e(t,n,i,s))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){const i=this._stateStyles["*"],s=this._stateStyles[e],r=i?i.buildStyles(t,n):{};return s?s.buildStyles(t,n):r}build(e,t,n,i,s,r,o,a,l,c){const h=[],u=this.ast.options&&this.ast.options.params||i_,d=this.buildStyles(n,o&&o.params||i_,h),p=a&&a.params||i_,m=this.buildStyles(i,p,h),f=new Set,g=new Map,_=new Map,b="void"===i,y={params:Object.assign({},u,p)},v=c?[]:qg(e,t,this.ast.animation,s,r,d,m,y,l,h);let w=0;if(v.forEach(e=>{w=Math.max(e.duration+e.delay,w)}),h.length)return n_(t,this._triggerName,n,i,b,d,m,[],[],g,_,w,h);v.forEach(e=>{const n=e.element,i=Lf(g,n,{});e.preStyleProps.forEach(e=>i[e]=!0);const s=Lf(_,n,{});e.postStyleProps.forEach(e=>s[e]=!0),n!==t&&f.add(n)});const x=yg(f.values());return n_(t,this._triggerName,n,i,b,d,m,v,x,g,_,w)}}class r_{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},i=cg(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(i[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const s=e;Object.keys(s).forEach(e=>{let r=s[e];r.length>1&&(r=bg(r,i,t)),n[e]=r})}}),n}}class o_{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new r_(e.style,e.options&&e.options.params||{})}),a_(this.states,"true","1"),a_(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new s_(e,t,this.states))}),this.fallbackTransition=new s_(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(s=>s.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function a_(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const l_=new Hg;class c_{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],i=Pg(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,n){const i=e.element,s=Pf(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],s=this._animations[e];let r;const o=new Map;if(s?(r=qg(this._driver,t,s,eg,tg,{},{},n,l_,i)).forEach(e=>{const t=Lf(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)}):(i.push("The requested animation doesn't exist or has already been destroyed"),r=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,tu)})});const a=Of(r.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,i){const s=Ff(t,"","","");return Nf(this._getPlayer(e),n,s,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const h_="ng-animate-queued",u_=".ng-animate-queued",d_="ng-animate-disabled",p_=".ng-animate-disabled",m_="ng-star-inserted",f_=".ng-star-inserted",g_=[],__={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},b_={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},y_="__ng_removed";class v_{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function(e){return null!=e?e:null}(n?e.value:e),n){const t=cg(e);delete t.value,this.options=t}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const w_="void",x_=new v_(w_);class C_{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,R_(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(s=n)&&"done"!=s)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var s;const r=Lf(this._elementListeners,e,[]),o={name:t,phase:n,callback:i};r.push(o);const a=Lf(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(R_(e,ng),R_(e,ng+"-"+t),a[t]=x_),()=>{this._engine.afterFlush(()=>{const e=r.indexOf(o);e>=0&&r.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,i=!0){const s=this._getTrigger(t),r=new k_(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(R_(e,ng),R_(e,ng+"-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new v_(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=x_),l.value!==w_&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),i=Object.keys(t);if(n.length!=i.length)return!1;for(let s=0;s<n.length;s++){const i=n[s];if(!t.hasOwnProperty(i)||e[i]!==t[i])return!1}return!0}(a.params,l.params)){const t=[],n=s.matchStyles(a.value,a.params,t),i=s.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{mg(e,n),pg(e,i)})}return}const c=Lf(this._engine.playersByElement,e,[]);c.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let h=s.matchTransition(a.value,l.value,e,l.params),u=!1;if(!h){if(!i)return;h=s.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:a,toState:l,player:r,isFallbackTransition:u}),u||(R_(e,h_),r.onStart(()=>{O_(e,h_)})),r.onDone(()=>{let t=this.players.indexOf(r);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(r);e>=0&&n.splice(e,1)}}),this.players.push(r),c.push(r),r}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t,n=!1){this._engine.driver.query(e,ig,!0).forEach(e=>{if(e[y_])return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)})}triggerLeaveAnimation(e,t,n,i){const s=this._engine.statesByElement.get(e);if(s){const r=[];if(Object.keys(s).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,w_,i);n&&r.push(n)}}),r.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Of(r).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e);if(t){const n=new Set;t.forEach(t=>{const i=t.name;if(n.has(i))return;n.add(i);const s=this._triggers[i].fallbackTransition,r=this._engine.statesByElement.get(e)[i]||x_,o=new v_(w_),a=new k_(this.id,i,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:s,fromState:r,toState:o,player:a,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t,!0),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)i=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){i=!0;break}}}this.prepareLeaveAnimationListeners(e),i?n.markElementAsRemoved(this.id,e,!1,t):(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}insertNode(e,t){R_(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const s=n.element,r=this._elementListeners.get(s);r&&r.forEach(t=>{if(t.name==n.triggerName){const i=Ff(s,n.triggerName,n.fromState.value,n.toState.value);i._data=e,Nf(n.player,t.phase,i,t.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,i=t.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),!!this._queue.find(t=>t.element===e)||t}}class E_{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=((e,t)=>{})}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new C_(e,t,this);return t.parentNode?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let i=0;i<e.length;i++){const s=n[e[i]].namespaceId;if(s){const e=this._fetchNamespace(s);e&&t.add(e)}}}return t}trigger(e,t,n,i){if(S_(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!S_(t))return;const s=t[y_];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const i=this._fetchNamespace(e);i&&i.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),R_(e,d_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),O_(e,d_))}removeNode(e,t,n){if(!S_(t))return void this._onRemovalComplete(t,n);const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,n):this.markElementAsRemoved(e,t,!1,n)}markElementAsRemoved(e,t,n,i){this.collectedLeaveElements.push(t),t[y_]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,i,s){return S_(t)?this._fetchNamespace(e).listen(t,n,i,s):()=>{}}_buildInstruction(e,t,n,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,ig,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,rg,!0)).forEach(e=>this.finishActiveQueriedAnimationOnElement(e))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Of(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[y_];if(t&&t.setForRemoval){if(e[y_]=__,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,p_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,p_,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)R_(this.collectedEnterElements[n],m_);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?Of(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new Hg,i=[],s=new Map,r=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(e=>{c.add(e);const t=this.driver.query(e,u_,!0);for(let n=0;n<t.length;n++)c.add(t[n])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=A_(u,this.collectedEnterElements),p=new Map;let m=0;d.forEach((e,t)=>{const n=eg+m++;p.set(t,n),e.forEach(e=>R_(e,n))});const f=[],g=new Set,_=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){const e=this.collectedLeaveElements[D],t=e[y_];t&&t.setForRemoval&&(f.push(e),g.add(e),t.hasAnimation?this.driver.query(e,f_,!0).forEach(e=>g.add(e)):_.add(e))}const b=new Map,y=A_(u,Array.from(g));y.forEach((e,t)=>{const n=tg+m++;b.set(t,n),e.forEach(e=>R_(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>O_(e,n))}),y.forEach((e,t)=>{const n=b.get(t);e.forEach(e=>O_(e,n))}),f.forEach(e=>{this.processLeaveNode(e)})});const v=[],w=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(t).forEach(e=>{const t=e.player,s=e.element;if(v.push(t),this.collectedEnterElements.length){const e=s[y_];if(e&&e.setForMove)return void t.destroy()}const c=!h||!this.driver.containsElement(h,s),u=b.get(s),d=p.get(s),m=this._buildInstruction(e,n,d,u,c);if(!m.errors||!m.errors.length)return c?(t.onStart(()=>mg(s,m.fromStyles)),t.onDestroy(()=>pg(s,m.toStyles)),void i.push(t)):e.isFallbackTransition?(t.onStart(()=>mg(s,m.fromStyles)),t.onDestroy(()=>pg(s,m.toStyles)),void i.push(t)):(m.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(s,m.timelines),r.push({instruction:m,player:t,element:s}),m.queriedElements.forEach(e=>Lf(o,e,[]).push(t)),m.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),void m.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let i=l.get(t);i||l.set(t,i=new Set),n.forEach(e=>i.add(e))}));w.push(m)});if(w.length){const e=[];w.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),v.forEach(e=>e.destroy()),this.reportError(e)}const x=new Map,C=new Map;r.forEach(e=>{const t=e.element;n.has(t)&&(C.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,x))}),i.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{Lf(x,t,[]).push(e),e.destroy()})});const E=f.filter(e=>N_(e,a,l)),k=new Map;I_(k,this.driver,_,l,tu).forEach(e=>{N_(e,a,l)&&E.push(e)});const S=new Map;d.forEach((e,t)=>{I_(S,this.driver,new Set(e),a,au)}),E.forEach(e=>{const t=k.get(e),n=S.get(e);k.set(e,Object.assign({},t,n))});const T=[],I=[],A={};r.forEach(e=>{const{element:t,player:r,instruction:o}=e;if(n.has(t)){if(c.has(t))return r.onDestroy(()=>pg(t,o.toStyles)),r.disabled=!0,r.overrideTotalTime(o.totalTime),void i.push(r);let e=A;if(C.size>1){let n=t;const i=[];for(;n=n.parentNode;){const t=C.get(n);if(t){e=t;break}i.push(n)}i.forEach(t=>C.set(t,e))}const n=this._buildAnimation(r.namespaceId,o,x,s,S,k);if(r.setRealPlayer(n),e===A)T.push(r);else{const t=this.playersByElement.get(e);t&&t.length&&(r.parentPlayer=Of(t)),i.push(r)}}else mg(t,o.fromStyles),r.onDestroy(()=>pg(t,o.toStyles)),I.push(r),c.has(t)&&i.push(r)}),I.forEach(e=>{const t=s.get(e.element);if(t&&t.length){const n=Of(t);e.setRealPlayer(n)}}),i.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let D=0;D<f.length;D++){const e=f[D],t=e[y_];if(O_(e,tg),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let i=this.driver.query(e,rg,!0);for(let e=0;e<i.length;e++){let t=o.get(i[e]);t&&t.length&&n.push(...t)}}const i=n.filter(e=>!e.destroyed);i.length?P_(this,e,i):this.processLeaveNode(e)}return f.length=0,T.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),T}elementContainsData(e,t){let n=!1;const i=t[y_];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,s){let r=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(r=t)}else{const t=this.playersByElement.get(e);if(t){const e=!s||s==w_;t.forEach(t=>{t.queued||(e||t.triggerName==i)&&r.push(t)})}}return(n||i)&&(r=r.filter(e=>!(n&&n!=e.namespaceId||i&&i!=e.triggerName))),r}_beforeAnimationBuild(e,t,n){const i=t.element,s=t.isRemovalTransition?void 0:e,r=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==i,l=Lf(n,e,[]);this._getPreviousPlayers(e,a,s,r,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}mg(i,t.fromStyles)}_buildAnimation(e,t,n,i,s,r){const o=t.triggerName,a=t.element,l=[],c=new Set,h=new Set,u=t.timelines.map(t=>{const u=t.element;c.add(u);const d=u[y_];if(d&&d.removedBeforeQueried)return new ru(t.duration,t.delay);const p=u!==a,m=function(e){const t=[];return function e(t,n){for(let i=0;i<t.length;i++){const s=t[i];s instanceof ou?e(s.players,n):n.push(s)}}((n.get(u)||g_).map(e=>e.getRealPlayer()),t),t}().filter(e=>!!e.element&&e.element===u),f=s.get(u),g=r.get(u),_=Pf(0,this._normalizer,0,t.keyframes,f,g),b=this._buildPlayer(t,_,m);if(t.subTimeline&&i&&h.add(u),p){const t=new k_(e,o,u);t.setRealPlayer(b),l.push(t)}return b});l.forEach(e=>{Lf(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>(function(e,t,n){let i;if(e instanceof Map){if(i=e.get(t)){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&e.delete(t)}}else if(i=e[t]){if(i.length){const e=i.indexOf(n);i.splice(e,1)}0==i.length&&delete e[t]}return i})(this.playersByQueriedElement,e.element,e))}),c.forEach(e=>R_(e,sg));const d=Of(u);return d.onDestroy(()=>{c.forEach(e=>O_(e,sg)),pg(a,t.toStyles)}),h.forEach(e=>{Lf(i,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new ru(e.duration,e.delay)}}class k_{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new ru,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Nf(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Lf(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function S_(e){return e&&1===e.nodeType}function T_(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function I_(e,t,n,i,s){const r=[];n.forEach(e=>r.push(T_(e)));const o=[];i.forEach((n,i)=>{const r={};n.forEach(e=>{const n=r[e]=t.computeStyle(i,e,s);n&&0!=n.length||(i[y_]=b_,o.push(i))}),e.set(i,r)});let a=0;return n.forEach(e=>T_(e,r[a++])),o}function A_(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const i=new Set(t),s=new Map;return t.forEach(e=>{const t=function e(t){if(!t)return 1;let r=s.get(t);if(r)return r;const o=t.parentNode;return r=n.has(o)?o:i.has(o)?1:e(o),s.set(t,r),r}(e);1!==t&&n.get(t).push(e)}),n}const D_="$$classes";function R_(e,t){if(e.classList)e.classList.add(t);else{let n=e[D_];n||(n=e[D_]={}),n[t]=!0}}function O_(e,t){if(e.classList)e.classList.remove(t);else{let n=e[D_];n&&delete n[t]}}function P_(e,t,n){Of(n).onDone(()=>e.processLeaveNode(t))}function N_(e,t,n){const i=n.get(e);if(!i)return!1;let s=t.get(e);return s?i.forEach(e=>s.add(e)):t.set(e,i),n.delete(e),!0}class M_{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=((e,t)=>{}),this._transitionEngine=new E_(e,t,n),this._timelineEngine=new c_(e,t,n),this._transitionEngine.onRemovalComplete=((e,t)=>this.onRemovalComplete(e,t))}registerTrigger(e,t,n,i,s){const r=e+"-"+i;let o=this._triggerCache[r];if(!o){const e=[],t=Pg(this._driver,s,e);if(e.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new o_(e,t)}(i,t),this._triggerCache[r]=o}this._transitionEngine.registerTrigger(t,i,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n){this._transitionEngine.removeNode(e,t,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[e,s]=Vf(n);this._timelineEngine.command(e,t,s,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,s){if("@"==n.charAt(0)){const[e,i]=Vf(n);return this._timelineEngine.listen(e,t,i,s)}return this._transitionEngine.listen(e,t,n,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function F_(e,t){let n=null,i=null;return Array.isArray(t)&&t.length?(n=V_(t[0]),t.length>1&&(i=V_(t[t.length-1]))):t&&(n=V_(t)),n||i?new L_(e,n,i):null}class L_{constructor(e,t,n){this._element=e,this._startStyles=t,this._endStyles=n,this._state=0;let i=L_.initialStylesByElement.get(e);i||L_.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&pg(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pg(this._element,this._initialStyles),this._endStyles&&(pg(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(L_.initialStylesByElement.delete(this._element),this._startStyles&&(mg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mg(this._element,this._endStyles),this._endStyles=null),pg(this._element,this._initialStyles),this._state=3)}}function V_(e){let t=null;const n=Object.keys(e);for(let i=0;i<n.length;i++){const s=n[i];z_(s)&&((t=t||{})[s]=e[s])}return t}function z_(e){return"display"===e||"position"===e}L_.initialStylesByElement=new WeakMap;const j_=3,H_="animation",B_="animationend",$_=1e3;class U_{constructor(e,t,n,i,s,r,o){this._element=e,this._name=t,this._duration=n,this._delay=i,this._easing=s,this._fillMode=r,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=(e=>this._handleCallback(e))}apply(){!function(e,t){const n=Q_(e,"").trim();n.length&&(function(e,t){let n=0;for(let i=0;i<e.length;i++)","===e.charAt(i)&&n++}(n),t=`${n}, ${t}`),Z_(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),K_(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){q_(this._element,this._name,"paused")}resume(){q_(this._element,this._name,"running")}setPosition(e){const t=G_(this._element,this._name);this._position=e*this._duration,Z_(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=parseFloat(e.elapsedTime.toFixed(j_))*$_;e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),K_(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Q_(e,"").split(","),i=W_(n,t);i>=0&&(n.splice(i,1),Z_(e,"",n.join(",")))}(this._element,this._name))}}function q_(e,t,n){Z_(e,"PlayState",n,G_(e,t))}function G_(e,t){const n=Q_(e,"");return n.indexOf(",")>0?W_(n.split(","),t):W_([n],t)}function W_(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function K_(e,t,n){n?e.removeEventListener(B_,t):e.addEventListener(B_,t)}function Z_(e,t,n,i){const s=H_+t;if(null!=i){const t=e.style[s];if(t.length){const e=t.split(",");e[i]=n,n=e.join(",")}}e.style[s]=n}function Q_(e,t){return e.style[H_+t]}const X_="forwards",Y_="linear";class J_{constructor(e,t,n,i,s,r,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=i,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=r||Y_,this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new U_(this.element,this.animationName,this._duration,this._delay,this.easing,X_,()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:kg(this.element,n))})}this.currentSnapshot=e}}class eb extends ru{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Zf(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}const tb="gen_css_kf_",nb=" ";class ib{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(e){return qf(e)}matchesElement(e,t){return Gf(e,t)}containsElement(e,t){return Wf(e,t)}query(e,t,n){return Kf(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Zf(e));let i=`@keyframes ${t} {\n`,s="";n.forEach(e=>{s=nb;const t=parseFloat(e.offset);i+=`${s}${100*t}% {\n`,s+=nb,Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(i+=`${s}animation-timing-function: ${n};\n`));default:return void(i+=`${s}${t}: ${n};\n`)}}),i+=`${s}}\n`}),i+="}\n";const r=document.createElement("style");return r.innerHTML=i,r}animate(e,t,n,i,s,r=[],o){o&&this._notifyFaultyScrubber();const a=r.filter(e=>e instanceof J_),l={};xg(n,i)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=Cg(e,t,l));if(0==n)return new eb(e,c);const h=`${tb}${this._count++}`,u=this.buildKeyframeElement(e,h,t);document.querySelector("head").appendChild(u);const d=F_(e,t),p=new J_(e,t,h,n,i,s,c,d);return p.onDestroy(()=>(function(e){u.parentNode.removeChild(u)})()),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class sb{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:kg(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class rb{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ob().toString()),this._cssKeyframesDriver=new ib}validateStyleProperty(e){return qf(e)}matchesElement(e,t){return Gf(e,t)}containsElement(e,t){return Wf(e,t)}query(e,t,n){return Kf(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,i,s,r=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,s,r);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};s&&(a.easing=s);const l={},c=r.filter(e=>e instanceof sb);xg(n,i)&&c.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const h=F_(e,t=Cg(e,t=t.map(e=>hg(e,!1)),l));return new sb(e,t,a,h)}}function ob(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class ab extends Jh{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:de.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?nu(e):e;return hb(this._renderer,null,t,"register",[n]),new lb(t,this._renderer)}}class lb extends eu{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new cb(this._id,e,t||{},this._renderer)}}class cb{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return hb(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(e){this._command("setPosition",e)}getPosition(){return 0}}function hb(e,t,n,i,s){return e.setProperty(t,`@@${n}:${i}`,s)}const ub="@",db="@.disabled";class pb{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=((e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)})}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new mb("",n,this.engine),this._rendererCache.set(n,e)),e}const i=t.id,s=t.id+"-"+this._currentId;return this._currentId++,this.engine.register(s,e),t.data.animation.forEach(t=>this.engine.registerTrigger(i,s,e,t.name,t)),new fb(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class mb{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,!0)}removeChild(e,t){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==ub&&t==db?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class fb extends mb{constructor(e,t,n,i){super(t,n,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==ub?"."==t.charAt(1)&&t==db?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==ub){const i=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let s=t.substr(1),r="";return s.charAt(0)!=ub&&([s,r]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,i,s,r,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}class gb extends M_{constructor(e,t,n){super(e.body,t,n)}}function _b(){return"function"==typeof ob()?new rb:new ib}function bb(){return new Jg}function yb(e,t,n){return new pb(e,t,n)}const vb=new ae("AnimationModuleType");class wb{}var xb=Cs({encapsulation:2,styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(.4,0,.2,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}@media (-ms-high-contrast:active){.mat-expansion-panel{outline:solid 1px}}.mat-expansion-panel._mat-animation-noopable,.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button{margin-left:0;margin-right:8px}"],data:{animation:[{type:7,name:"bodyExpansion",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{height:"0px",visibility:"hidden"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{height:"*",visibility:"visible"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}}]}});function Cb(e){return yo(0,[(e()(),Ys(0,null,null,0))],null,null)}function Eb(e){return yo(2,[so(402653184,1,{_body:0}),co(null,0),(e()(),Js(2,0,[[1,0],["body",1]],null,5,"div",[["class","mat-expansion-panel-content"],["role","region"]],[[24,"@bodyExpansion",0],[1,"aria-labelledby",0],[8,"id",0]],[[null,"@bodyExpansion.done"]],function(e,t,n){var i=!0;return"@bodyExpansion.done"===t&&(i=!1!==e.component._bodyAnimationDone.next(n)&&i),i},null,null)),(e()(),Js(3,0,null,null,3,"div",[["class","mat-expansion-panel-body"]],null,null,null,null,null)),co(null,1),(e()(),Ys(16777216,null,null,1,null,Cb)),Hr(6,212992,null,0,mu,[ft,Ii],{portal:[0,"portal"]},null),co(null,2)],function(e,t){e(t,6,0,t.component._portal)},function(e,t){var n=t.component;e(t,2,0,n._getExpandedState(),n._headerId,n.id)})}var kb=Cs({encapsulation:2,styles:[".mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:0}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-description,.mat-expansion-panel-header-title{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-description,[dir=rtl] .mat-expansion-panel-header-title{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:'';display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}"],data:{animation:[{type:7,name:"indicatorRotate",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{transform:"rotate(0deg)"},offset:null},options:void 0},{type:0,name:"expanded",styles:{type:6,styles:{transform:"rotate(180deg)"},offset:null},options:void 0},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"},options:null}],options:{}},{type:7,name:"expansionHeight",definitions:[{type:0,name:"collapsed, void",styles:{type:6,styles:{height:"{{collapsedHeight}}"},offset:null},options:{params:{collapsedHeight:"48px"}}},{type:0,name:"expanded",styles:{type:6,styles:{height:"{{expandedHeight}}"},offset:null},options:{params:{expandedHeight:"64px"}}},{type:1,expr:"expanded <=> collapsed, void => collapsed",animation:{type:3,steps:[{type:11,selector:"@indicatorRotate",animation:{type:9,options:null},options:{optional:!0}},{type:4,styles:null,timings:"225ms cubic-bezier(0.4,0.0,0.2,1)"}],options:null},options:null}],options:{}}]}});function Sb(e){return yo(0,[(e()(),Js(0,0,null,null,0,"span",[["class","mat-expansion-indicator"]],[[24,"@indicatorRotate",0]],null,null,null,null))],null,function(e,t){e(t,0,0,t.component._getExpandedState())})}function Tb(e){return yo(2,[(e()(),Js(0,0,null,null,3,"span",[["class","mat-content"]],null,null,null,null,null)),co(null,0),co(null,1),co(null,2),(e()(),Ys(16777216,null,null,1,null,Sb)),Hr(5,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,5,0,t.component._showToggle())},null)}class Ib{constructor(){}transform(e){switch(e){case Ba.display4:return"mat-display-4";case Ba.display3:return"mat-display-3";case Ba.display2:return"mat-display-2";case Ba.display1:return"mat-display-1";case Ba.headline:return"mat-h1";case Ba.title:return"mat-h2";case Ba.subheading2:return"mat-h3";case Ba.subheading1:return"mat-h4";case Ba.body1:return"mat-body-1";case Ba.body2:return"mat-body-2";case Ba.caption:return"mat-caption";default:return"mat-body-1"}}}class Ab{constructor(e){this.domSanitizer=e}transform(e){return this.domSanitizer.bypassSecurityTrustHtml(e)}}class Db{constructor(){}transform(e){let t=0;return(e=(e||"").trim()).split(" ").reduce((e,n,i)=>0===n.trim().length?e:`${e} <span data-index="${t++}">${n}</span>`,"")}}var Rb=Cs({encapsulation:2,styles:[[".highlight-state{border:1px solid #b8daff;border-radius:.25rem;color:#004085;background-color:#cce5ff}"]],data:{}});function Ob(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Pb(e){return yo(0,[Br(0,Ib,[]),Br(0,Ab,[Ap]),Br(0,Db,[]),so(402653184,1,{container:0}),(e()(),Js(4,0,[[1,0],["container",1]],null,3,"div",[],[[8,"className",0],[8,"innerHTML",1]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.didSelect(n)&&i),i},null,null)),uo(5,1),uo(6,1),uo(7,1),(e()(),Ys(16777216,null,null,1,null,Ob)),Hr(9,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,9,0,t.component.debug)},function(e,t){var n=t.component,i=Qs(2,"text-component ",n.state," ",vs(t,4,0,e(t,5,0,Ir(t,0),n.typo)),""),s=vs(t,4,1,e(t,7,0,Ir(t,1),vs(t,4,1,e(t,6,0,Ir(t,2),n.text))));e(t,4,0,i,s)})}function Nb(e){return yo(0,[(e()(),Js(0,0,null,null,1,"text-component",[],null,null,null,Pb,Rb)),Hr(1,49152,null,0,Ja,[Di],null,null)],null,null)}var Mb=_r("text-component",Ja,Nb,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",selectable:"selectable",state:"state",text:"text",typo:"typo",selections:"selections"},{changed:"changed"},[]);class Fb{}function Lb(e){return Error(`A hint was already declared for 'align="${e}"'.`)}let Vb=0;const zb=.75,jb=5;class Hb{constructor(e){this._elementRef=e}}const Bb=ym(Hb,"primary"),$b=new ae("MAT_FORM_FIELD_DEFAULT_OPTIONS");class Ub extends Bb{constructor(e,t,n,i,s,r,o,a){super(e),this._elementRef=e,this._changeDetectorRef=t,this._dir=i,this._defaults=s,this._platform=r,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new k,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${Vb++}`,this._labelId=`mat-form-field-label-${Vb++}`,this._labelOptions=n||{},this.floatLabel=this._labelOptions.float||"auto",this._animationsEnabled="NoopAnimations"!==a,this.appearance=s&&s.appearance?s.appearance:"legacy"}get appearance(){return this._appearance}set appearance(e){const t=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&t!==e&&this._updateOutlineGapOnStable()}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=rc(e)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Fc(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Oc(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck());const t=this._ngZone;t&&t.runOutsideAngular(()=>{t.onStable.asObservable().pipe(Oc(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),K(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._updateOutlineGapOnStable(),this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Fc(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Fc(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Oc(this._destroyed)).subscribe(()=>this.updateOutlineGap())}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const t=this._control?this._control.ngControl:null;return t&&t[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,Ha(this._label.nativeElement,"transitionend").pipe(Jc(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let e,t;this._hintChildren.forEach(n=>{if("start"===n.align){if(e||this.hintLabel)throw Lb("start");e=n}else if("end"===n.align){if(t)throw Lb("end");t=n}})}}_syncDescribedByIds(){if(this._control){let e=[];if("hint"===this._getDisplayedMessages()){const t=this._hintChildren?this._hintChildren.find(e=>"start"===e.align):null,n=this._hintChildren?this._hintChildren.find(e=>"end"===e.align):null;t?e.push(t.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&(e=this._errorChildren.map(e=>e.id));this._control.setDescribedByIds(e)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!e||!e.children.length||!e.textContent.trim())return;if(this._platform&&!this._platform.isBrowser)return;if(!document.documentElement.contains(this._elementRef.nativeElement))return void(this._outlineGapCalculationNeededImmediately=!0);let t=0,n=0;const i=this._connectionContainerRef.nativeElement,s=i.querySelectorAll(".mat-form-field-outline-start"),r=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const s=i.getBoundingClientRect();if(0===s.width&&0===s.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const r=this._getStartEnd(s),o=this._getStartEnd(e.children[0].getBoundingClientRect());let a=0;for(const t of e.children)a+=t.offsetWidth;t=o-r-jb,n=a>0?a*zb+2*jb:0}for(let o=0;o<s.length;o++)s.item(o).style.width=`${t}px`;for(let o=0;o<r.length;o++)r.item(o).style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_updateOutlineGapOnStable(){this._ngZone?this._outlineGapCalculationNeededOnStable=!0:Promise.resolve().then(()=>this.updateOutlineGap())}}class qb{}var Gb=Cs({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function Wb(e){return yo(0,[(e()(),Js(0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),Js(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(e()(),Js(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),Js(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),Js(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(e()(),Js(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(e()(),Js(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(e()(),Js(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(e()(),Js(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function Kb(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),co(null,0)],null,null)}function Zb(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),co(null,2),(e()(),go(2,null,["",""]))],null,function(e,t){e(t,2,0,t.component._control.placeholder)})}function Qb(e){return yo(0,[co(null,3),(e()(),Ys(0,null,null,0))],null,null)}function Xb(e){return yo(0,[(e()(),Js(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(e()(),go(-1,null,[" *"]))],null,null)}function Yb(e){return yo(0,[(e()(),Js(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],function(e,t,n){var i=!0;return"cdkObserveContent"===t&&(i=!1!==e.component.updateOutlineGap()&&i),i},null,null)),Hr(1,16384,null,0,yl,[],{ngSwitch:[0,"ngSwitch"]},null),Hr(2,1196032,null,0,df,[uf,bt,oi],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(e()(),Ys(16777216,null,null,1,null,Zb)),Hr(4,278528,null,0,vl,[Ii,Xt,yl],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ys(16777216,null,null,1,null,Qb)),Hr(6,278528,null,0,vl,[Ii,Xt,yl],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ys(16777216,null,null,1,null,Xb)),Hr(8,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n._hasLabel()),e(t,2,0,"outline"!=n.appearance),e(t,4,0,!1),e(t,6,0,!0),e(t,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)},function(e,t){var n=t.component;e(t,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)})}function Jb(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),co(null,4)],null,null)}function ey(e){return yo(0,[(e()(),Js(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(e()(),Js(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,function(e,t){var n=t.component;e(t,1,0,"accent"==n.color,"warn"==n.color)})}function ty(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),co(null,5)],null,function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function ny(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(e()(),go(1,null,["",""]))],null,function(e,t){var n=t.component;e(t,0,0,n._hintLabelId),e(t,1,0,n.hintLabel)})}function iy(e){return yo(0,[(e()(),Js(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,ny)),Hr(2,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),co(null,6),(e()(),Js(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),co(null,7)],function(e,t){e(t,2,0,t.component.hintLabel)},function(e,t){e(t,0,0,t.component._subscriptAnimationState)})}function sy(e){return yo(2,[so(671088640,1,{underlineRef:0}),so(402653184,2,{_connectionContainerRef:0}),so(402653184,3,{_inputContainerRef:0}),so(671088640,4,{_label:0}),(e()(),Js(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(e()(),Js(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],function(e,t,n){var i=!0,s=e.component;return"click"===t&&(i=!1!==(s._control.onContainerClick&&s._control.onContainerClick(n))&&i),i},null,null)),(e()(),Ys(16777216,null,null,1,null,Wb)),Hr(7,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Ys(16777216,null,null,1,null,Kb)),Hr(9,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Js(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),co(null,1),(e()(),Js(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,Yb)),Hr(14,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Ys(16777216,null,null,1,null,Jb)),Hr(16,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Ys(16777216,null,null,1,null,ey)),Hr(18,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Js(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),Hr(20,16384,null,0,yl,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Ys(16777216,null,null,1,null,ty)),Hr(22,278528,null,0,vl,[Ii,Xt,yl],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ys(16777216,null,null,1,null,iy)),Hr(24,278528,null,0,vl,[Ii,Xt,yl],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(e,t){var n=t.component;e(t,7,0,"outline"==n.appearance),e(t,9,0,n._prefixChildren.length),e(t,14,0,n._hasFloatingLabel()),e(t,16,0,n._suffixChildren.length),e(t,18,0,"outline"!=n.appearance),e(t,20,0,n._getDisplayedMessages()),e(t,22,0,"error"),e(t,24,0,"hint")},null)}function ry(...e){if(1===e.length){const t=e[0];if(l(t))return oy(t,null);if(c(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return oy(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return oy(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(L(e=>t(...e)))}return oy(e,null)}function oy(e,t){return new y(n=>{const i=e.length;if(0===i)return void n.complete();const s=new Array(i);let r=0,o=0;for(let a=0;a<i;a++){const l=H(e[a]);let c=!1;n.add(l.subscribe({next:e=>{c||(c=!0,o++),s[a]=e},error:e=>n.error(e),complete:()=>{++r!==i&&c||(o===i&&n.next(t?t.reduce((e,t,n)=>(e[t]=s[n],e),{}):s),n.complete())}}))}})}class ay{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ly extends ay{get formDirective(){return null}get path(){return null}}function cy(e){return null==e||0===e.length}const hy=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class uy{static min(e){return t=>{if(cy(t.value)||cy(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(cy(t.value)||cy(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}static required(e){return cy(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return cy(e.value)?null:hy.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(cy(t.value))return null;const n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}static maxLength(e){return t=>{const n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}static pattern(e){if(!e)return uy.nullValidator;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(cy(e.value))return null;const i=e.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(dy);return 0==t.length?null:function(e){return my(function(e,n){return t.map(t=>t(e))}(e))}}static composeAsync(e){if(!e)return null;const t=e.filter(dy);return 0==t.length?null:function(e){return ry(function(e,n){return t.map(t=>t(e))}(e).map(py)).pipe(L(my))}}}function dy(e){return null!=e}function py(e){const t=jn(e)?H(e):e;if(!Hn(t))throw new Error("Expected validator to return Promise or Observable.");return t}function my(e){const t=e.reduce((e,t)=>null!=t?Object.assign({},e,t):e,{});return 0===Object.keys(t).length?null:t}const fy=new ae("NgValueAccessor"),gy=new ae("CompositionEventMode");class _y{constructor(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Ed()?Ed().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}function by(e){return e.validate?t=>e.validate(t):e}function yy(e){return e.validate?t=>e.validate(t):e}function vy(){throw new Error("unimplemented")}class wy extends ay{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return vy()}get asyncValidator(){return vy()}}class xy{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}const Cy={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class Ey{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Cy.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Cy.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${Cy.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${Cy.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${Cy.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${Cy.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(e){console.warn(`\n    It looks like you're using ngModel on the same form field as ${e}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===e?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function ky(e,t){return[...t.path,e]}function Sy(e,t){e||Dy(t,"Cannot find control with"),t.valueAccessor||Dy(t,"No value accessor for form control with"),e.validator=uy.compose([e.validator,t.validator]),e.asyncValidator=uy.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ty(e,t)})}(e,t),function(e,t){e.registerOnChange((e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ty(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function Ty(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Iy(e,t){null==e&&Dy(t,"Cannot find control with"),e.validator=uy.compose([e.validator,t.validator]),e.asyncValidator=uy.composeAsync([e.asyncValidator,t.asyncValidator])}function Ay(e){return Dy(e,"There is no FormControl instance attached to form control element with")}function Dy(e,t){let n;throw n=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${n}`)}function Ry(e){return null!=e?uy.compose(e.map(by)):null}function Oy(e){return null!=e?uy.composeAsync(e.map(yy)):null}function Py(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!ve(t,n.currentValue)}const Ny=[class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},class{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=(e=>{}),this.onTouched=(()=>{})}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=(t=>{e(""==t?null:parseFloat(t))})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=ve}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(e){this.onChange=(t=>{this.value=this._getOptionValue(t),e(this.value)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},class{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=(e=>{}),this.onTouched=(()=>{}),this._compareWith=ve}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=((e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)})}else t=((e,t)=>{e._setSelected(!1)});this._optionMap.forEach(t)}registerOnChange(e){this.onChange=(t=>{const n=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const i=e.item(t),s=this._getOptionValue(i.value);n.push(s)}}else{const e=t.options;for(let t=0;t<e.length;t++){const i=e.item(t);if(i.selected){const e=this._getOptionValue(i.value);n.push(e)}}}this.value=n,e(n)})}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},class{constructor(e,t,n,i){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=i,this.onChange=(()=>{}),this.onTouched=(()=>{})}ngOnInit(){this._control=this._injector.get(wy),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=(()=>{e(this.value),this._registry.select(this)})}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function My(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Fy(e,t){if(!t)return null;Array.isArray(t)||Dy(e,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,s=void 0;return t.forEach(t=>{t.constructor===_y?n=t:function(e){return Ny.some(t=>e.constructor===t)}(t)?(i&&Dy(e,"More than one built-in value accessor matches form control with"),i=t):(s&&Dy(e,"More than one custom value accessor matches form control with"),s=t)}),s||i||n||(Dy(e,"No valid value accessor for form control with"),null)}function Ly(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Vy(e,t,n,i){At()&&"never"!==i&&((null!==i&&"once"!==i||t._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(Ey.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}class zy extends ly{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ky(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ry(this._validators)}get asyncValidator(){return Oy(this._asyncValidators)}_checkParentType(){}}class jy{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class Hy extends jy{constructor(e){super(e)}}const By="VALID",$y="INVALID",Uy="PENDING",qy="DISABLED";function Gy(e){const t=Ky(e)?e.validators:e;return Array.isArray(t)?Ry(t):t||null}function Wy(e,t){const n=Ky(t)?t.asyncValidators:e;return Array.isArray(n)?Oy(n):n||null}function Ky(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Zy{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=(()=>{}),this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===By}get invalid(){return this.status===$y}get pending(){return this.status==Uy}get disabled(){return this.status===qy}get enabled(){return this.status!==qy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=Gy(e)}setAsyncValidators(e){this.asyncValidator=Wy(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Uy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){this.status=qy,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign({},e,{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(e),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){this.status=By,this._forEachChild(t=>{t.enable(Object.assign({},e,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(e),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==By&&this.status!==Uy||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qy:By}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Uy;const t=py(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){return null==t?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce((e,t)=>e instanceof Xy?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Yy&&e.at(t)||null,e))}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Qt,this.statusChanges=new Qt}_calculateStatus(){return this._allControlsDisabled()?qy:this.errors?$y:this._anyControlsHaveStatus(Uy)?Uy:this._anyControlsHaveStatus($y)?$y:By}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ky(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}}class Qy extends Zy{constructor(e=null,t,n){super(Gy(t),Wy(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=(()=>{})}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Xy extends Zy{constructor(e,t,n){super(Gy(t),Wy(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Qy?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((n,i)=>{t=t||this.contains(i)&&e(n)}),t}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,i)=>{n=t(n,e,i)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Yy extends Zy{constructor(e,t,n){super(Gy(t),Wy(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t),this._updatePristine(t),this._updateTouched(t)}getRawValue(){return this.controls.map(e=>e instanceof Qy?e.value:e.getRawValue())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Jy=Promise.resolve(null);class ev extends ly{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Qt,this.form=new Xy({},Ry(e),Oy(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Jy.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),Sy(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Jy.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Ly(this._directives,e)})}addFormGroup(e){Jy.then(()=>{const t=this._findContainer(e.path),n=new Xy({});Iy(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Jy.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){Jy.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,My(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}class tv{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${Cy.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${Cy.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${Cy.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${Cy.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${Cy.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${Cy.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const nv=new ae("NgFormSelectorWarning");class iv{constructor(e){(e&&"once"!==e||iv._ngFormWarning)&&"always"!==e||(tv.ngFormWarning(),iv._ngFormWarning=!0)}}iv._ngFormWarning=!1;class sv extends zy{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){this._parent instanceof sv||this._parent instanceof ev||tv.modelGroupParentException()}}const rv=Promise.resolve(null);class ov extends wy{constructor(e,t,n,i){super(),this.control=new Qy,this._registered=!1,this.update=new Qt,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=Fy(this,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Py(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ky(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ry(this._rawValidators)}get asyncValidator(){return Oy(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof sv)&&this._parent instanceof zy?tv.formGroupNameException():this._parent instanceof sv||this._parent instanceof ev||tv.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||tv.missingNameException()}_updateValue(e){rv.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;rv.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}const av=new ae("NgModelWithFormControlWarning");class lv extends wy{constructor(e,t,n,i){super(),this._ngModelWarningConfig=i,this.update=new Qt,this._ngModelWarningSent=!1,this._rawValidators=e||[],this._rawAsyncValidators=t||[],this.valueAccessor=Fy(this,n)}set isDisabled(e){Ey.disabledAttrWarning()}ngOnChanges(e){this._isControlChanged(e)&&(Sy(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Py(e,this.viewModel)&&(Vy("formControl",lv,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return Ry(this._rawValidators)}get asyncValidator(){return Oy(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}lv._ngModelWarningSentOnce=!1;class cv extends ly{constructor(e,t){super(),this._validators=e,this._asyncValidators=t,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Qt}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return Sy(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){Ly(this.directives,e)}addFormGroup(e){const t=this.form.get(e.path);Iy(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormGroup(e){}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){const t=this.form.get(e.path);Iy(t,e),t.updateValueAndValidity({emitEvent:!1})}removeFormArray(e){}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,My(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=this.form.get(e.path);e.control!==t&&(function(e,t){t.valueAccessor.registerOnChange(()=>Ay(t)),t.valueAccessor.registerOnTouched(()=>Ay(t)),t._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),e&&e._clearChangeFns()}(e.control,e),t&&Sy(t,e),e.control=t)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const e=Ry(this._validators);this.form.validator=uy.compose([this.form.validator,e]);const t=Oy(this._asyncValidators);this.form.asyncValidator=uy.composeAsync([this.form.asyncValidator,t])}_checkFormPresent(){this.form||Ey.missingFormException()}}class hv extends zy{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}_checkParentType(){dv(this._parent)&&Ey.groupParentException()}}class uv extends ly{constructor(e,t,n){super(),this._parent=e,this._validators=t,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ky(this.name,this._parent)}get validator(){return Ry(this._validators)}get asyncValidator(){return Oy(this._asyncValidators)}_checkParentType(){dv(this._parent)&&Ey.arrayParentException()}}function dv(e){return!(e instanceof hv||e instanceof cv||e instanceof uv)}class pv extends wy{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Qt,this._ngModelWarningSent=!1,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=n||[],this.valueAccessor=Fy(this,i)}set isDisabled(e){Ey.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),Py(e,this.viewModel)&&(Vy("formControlName",pv,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return ky(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Ry(this._rawValidators)}get asyncValidator(){return Oy(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof hv)&&this._parent instanceof zy?Ey.ngModelGroupException():this._parent instanceof hv||this._parent instanceof cv||this._parent instanceof uv||Ey.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}pv._ngModelWarningSentOnce=!1;class mv{group(e,t=null){const n=this._reduceControls(e);let i=null,s=null,r=void 0;return null==t||void 0===t.asyncValidator&&void 0===t.validator?null!=t&&(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null),new Xy(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new Qy(e,t,n)}array(e,t,n){const i=e.map(e=>this._createControl(e));return new Yy(i,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Qy||e instanceof Xy||e instanceof Yy?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}class fv{}class gv{static withConfig(e){return{ngModule:gv,providers:[{provide:nv,useValue:e.warnOnDeprecatedNgFormSelector}]}}}class _v{static withConfig(e){return{ngModule:_v,providers:[{provide:av,useValue:e.warnOnNgModelWithFormControl}]}}}const bv=sc({passive:!0});class yv{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return zc;const t=cc(e),n=this._monitoredElements.get(t);if(n)return n.subject.asObservable();const i=new k,s="cdk-text-field-autofilled",r=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(s)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(s)&&(t.classList.remove(s),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!1}))):(t.classList.add(s),this._ngZone.run(()=>i.next({target:e.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{t.addEventListener("animationstart",r,bv),t.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(t,{subject:i,unlisten:()=>{t.removeEventListener("animationstart",r,bv)}}),i.asObservable()}stopMonitoring(e){const t=cc(e),n=this._monitoredElements.get(t);n&&(n.unlisten(),n.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach((e,t)=>this.stopMonitoring(t))}}yv.ngInjectableDef=re({factory:function(){return new yv(De(Jl),De(oi))},token:yv,providedIn:"root"});class vv{constructor(e,t,n){this._elementRef=e,this._platform=t,this._ngZone=n,this._destroyed=new k,this._enabled=!0,this._previousMinRows=-1,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(e){this._minRows=e,this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=e,this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){e=rc(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}_setMinHeight(){const e=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){const e=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{Ha(window,"resize").pipe(Ic(16),Oc(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0))}))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,this._textareaElement.parentNode.removeChild(e),this._setMinHeight(),this._setMaxHeight()}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled)return;if(this._cacheTextareaLineHeight(),!this._cachedLineHeight)return;const t=this._elementRef.nativeElement,n=t.value;if(!e&&this._minRows===this._previousMinRows&&n===this._previousValue)return;const i=t.placeholder;t.classList.add("cdk-textarea-autosize-measuring"),t.placeholder="",t.style.height=`${t.scrollHeight-4}px`,t.classList.remove("cdk-textarea-autosize-measuring"),t.placeholder=i,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(t)):setTimeout(()=>this._scrollToCaretPosition(t))}),this._previousValue=n,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(e){const{selectionStart:t,selectionEnd:n}=e;this._destroyed.isStopped||document.activeElement!==e||e.setSelectionRange(t,n)}}class wv{}class xv extends vv{get matAutosizeMinRows(){return this.minRows}set matAutosizeMinRows(e){this.minRows=e}get matAutosizeMaxRows(){return this.maxRows}set matAutosizeMaxRows(e){this.maxRows=e}get matAutosize(){return this.enabled}set matAutosize(e){this.enabled=e}get matTextareaAutosize(){return this.enabled}set matTextareaAutosize(e){this.enabled=e}}const Cv=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Ev=0;class kv{constructor(e,t,n,i){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=i}}const Sv=xm(kv);class Tv extends Sv{constructor(e,t,n,i,s,r,o,a,l){super(r,i,s,n),this._elementRef=e,this._platform=t,this.ngControl=n,this._autofillMonitor=a,this._uid=`mat-input-${Ev++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new k,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>nc().has(e));const c=this._elementRef.nativeElement;this._inputValueAccessor=o||c,this._previousNativeValue=this.value,this.id=this.id,t.IOS&&l.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",e=>{let t=e.target;t.value||t.selectionStart||t.selectionEnd||(t.setSelectionRange(1,1),t.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===c.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=c.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=rc(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required}set required(e){this._required=rc(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea()&&nc().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=rc(e)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(){this._elementRef.nativeElement.focus()}_focusChanged(e){e===this.focused||this.readonly&&e||(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){if(Cv.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,t=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&t&&t.label)}return this.focused||!this.empty}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focused||this.focus()}}class Iv{}var Av=Cs({encapsulation:2,styles:[[".input-component{width:var(--width,auto);height:var(--height,auto)}"]],data:{}});function Dv(e){return yo(0,[(e()(),Js(0,0,null,null,19,null,null,null,null,null,null,null)),(e()(),Js(1,0,null,null,18,"mat-form-field",[["class","input-component mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,sy,Gb)),Hr(2,7520256,null,7,Ub,[bt,Di,[2,Bm],[2,Mu],[2,$b],Jl,oi,[2,vb]],null,null),so(335544320,1,{_control:0}),so(335544320,2,{_placeholderChild:0}),so(335544320,3,{_labelChild:0}),so(603979776,4,{_errorChildren:1}),so(603979776,5,{_hintChildren:1}),so(603979776,6,{_prefixChildren:1}),so(603979776,7,{_suffixChildren:1}),(e()(),Js(10,0,null,1,9,"textarea",[["class","mat-input-element mat-form-field-autofill-control cdk-textarea-autosize mat-autosize"],["matInput",""],["matTextareaAutosize",""],["rows","1"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0,s=e.component;return"input"===t&&(i=!1!==Ir(e,11)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==Ir(e,11).onTouched()&&i),"compositionstart"===t&&(i=!1!==Ir(e,11)._compositionStart()&&i),"compositionend"===t&&(i=!1!==Ir(e,11)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==Ir(e,16)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==Ir(e,16)._focusChanged(!0)&&i),"input"===t&&(i=!1!==Ir(e,16)._onInput()&&i),"input"===t&&(i=!1!==Ir(e,17)._noopInputHandler()&&i),"ngModelChange"===t&&(i=!1!==(s.value=n)&&i),i},null,null)),Hr(11,16384,null,0,_y,[Ct,bt,[2,gy]],null,null),$r(1024,null,fy,function(e){return[e]},[_y]),Hr(13,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(15,16384,null,0,Hy,[[4,wy]],null,null),Hr(16,999424,null,0,Tv,[bt,Jl,[6,wy],[2,ev],[2,cv],Em,[8,null],yv,oi],{disabled:[0,"disabled"],placeholder:[1,"placeholder"],type:[2,"type"]},null),Hr(17,4603904,null,0,xv,[bt,Jl,oi],{matTextareaAutosize:[0,"matTextareaAutosize"]},null),$r(2048,[[1,4]],Fb,null,[Tv]),(e()(),go(-1,null,["            "]))],function(e,t){var n=t.component;e(t,13,0,n.disabled,n.value),e(t,16,0,n.disabled,n.placeholder,n.type),e(t,17,0,"")},function(e,t){e(t,1,1,["standard"==Ir(t,2).appearance,"fill"==Ir(t,2).appearance,"outline"==Ir(t,2).appearance,"legacy"==Ir(t,2).appearance,Ir(t,2)._control.errorState,Ir(t,2)._canLabelFloat,Ir(t,2)._shouldLabelFloat(),Ir(t,2)._hasFloatingLabel(),Ir(t,2)._hideControlPlaceholder(),Ir(t,2)._control.disabled,Ir(t,2)._control.autofilled,Ir(t,2)._control.focused,"accent"==Ir(t,2).color,"warn"==Ir(t,2).color,Ir(t,2)._shouldForward("untouched"),Ir(t,2)._shouldForward("touched"),Ir(t,2)._shouldForward("pristine"),Ir(t,2)._shouldForward("dirty"),Ir(t,2)._shouldForward("valid"),Ir(t,2)._shouldForward("invalid"),Ir(t,2)._shouldForward("pending"),!Ir(t,2)._animationsEnabled]),e(t,10,1,[Ir(t,15).ngClassUntouched,Ir(t,15).ngClassTouched,Ir(t,15).ngClassPristine,Ir(t,15).ngClassDirty,Ir(t,15).ngClassValid,Ir(t,15).ngClassInvalid,Ir(t,15).ngClassPending,Ir(t,16)._isServer,Ir(t,16).id,Ir(t,16).placeholder,Ir(t,16).disabled,Ir(t,16).required,Ir(t,16).readonly&&!Ir(t,16)._isNativeSelect||null,Ir(t,16)._ariaDescribedby||null,Ir(t,16).errorState,Ir(t,16).required.toString()])})}function Rv(e){return yo(0,[(e()(),Js(0,0,null,null,17,null,null,null,null,null,null,null)),(e()(),Js(1,0,null,null,16,"mat-form-field",[["class","input-component mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,sy,Gb)),Hr(2,7520256,null,7,Ub,[bt,Di,[2,Bm],[2,Mu],[2,$b],Jl,oi,[2,vb]],null,null),so(335544320,8,{_control:0}),so(335544320,9,{_placeholderChild:0}),so(335544320,10,{_labelChild:0}),so(603979776,11,{_errorChildren:1}),so(603979776,12,{_hintChildren:1}),so(603979776,13,{_prefixChildren:1}),so(603979776,14,{_suffixChildren:1}),(e()(),Js(10,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(e,t,n){var i=!0,s=e.component;return"input"===t&&(i=!1!==Ir(e,11)._handleInput(n.target.value)&&i),"blur"===t&&(i=!1!==Ir(e,11).onTouched()&&i),"compositionstart"===t&&(i=!1!==Ir(e,11)._compositionStart()&&i),"compositionend"===t&&(i=!1!==Ir(e,11)._compositionEnd(n.target.value)&&i),"blur"===t&&(i=!1!==Ir(e,16)._focusChanged(!1)&&i),"focus"===t&&(i=!1!==Ir(e,16)._focusChanged(!0)&&i),"input"===t&&(i=!1!==Ir(e,16)._onInput()&&i),"ngModelChange"===t&&(i=!1!==(s.value=n)&&i),i},null,null)),Hr(11,16384,null,0,_y,[Ct,bt,[2,gy]],null,null),$r(1024,null,fy,function(e){return[e]},[_y]),Hr(13,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(15,16384,null,0,Hy,[[4,wy]],null,null),Hr(16,999424,null,0,Tv,[bt,Jl,[6,wy],[2,ev],[2,cv],Em,[8,null],yv,oi],{disabled:[0,"disabled"],placeholder:[1,"placeholder"],type:[2,"type"]},null),$r(2048,[[8,4]],Fb,null,[Tv])],function(e,t){var n=t.component;e(t,13,0,n.disabled,n.value),e(t,16,0,n.disabled,n.placeholder,n.type)},function(e,t){e(t,1,1,["standard"==Ir(t,2).appearance,"fill"==Ir(t,2).appearance,"outline"==Ir(t,2).appearance,"legacy"==Ir(t,2).appearance,Ir(t,2)._control.errorState,Ir(t,2)._canLabelFloat,Ir(t,2)._shouldLabelFloat(),Ir(t,2)._hasFloatingLabel(),Ir(t,2)._hideControlPlaceholder(),Ir(t,2)._control.disabled,Ir(t,2)._control.autofilled,Ir(t,2)._control.focused,"accent"==Ir(t,2).color,"warn"==Ir(t,2).color,Ir(t,2)._shouldForward("untouched"),Ir(t,2)._shouldForward("touched"),Ir(t,2)._shouldForward("pristine"),Ir(t,2)._shouldForward("dirty"),Ir(t,2)._shouldForward("valid"),Ir(t,2)._shouldForward("invalid"),Ir(t,2)._shouldForward("pending"),!Ir(t,2)._animationsEnabled]),e(t,10,1,[Ir(t,15).ngClassUntouched,Ir(t,15).ngClassTouched,Ir(t,15).ngClassPristine,Ir(t,15).ngClassDirty,Ir(t,15).ngClassValid,Ir(t,15).ngClassInvalid,Ir(t,15).ngClassPending,Ir(t,16)._isServer,Ir(t,16).id,Ir(t,16).placeholder,Ir(t,16).disabled,Ir(t,16).required,Ir(t,16).readonly&&!Ir(t,16)._isNativeSelect||null,Ir(t,16)._ariaDescribedby||null,Ir(t,16).errorState,Ir(t,16).required.toString()])})}function Ov(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Pv(e){return yo(0,[(e()(),Js(0,0,null,null,5,null,null,null,null,null,null,null)),Hr(1,16384,null,0,yl,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),Ys(16777216,null,null,1,null,Dv)),Hr(3,278528,null,0,vl,[Ii,Xt,yl],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),Ys(16777216,null,null,1,null,Rv)),Hr(5,16384,null,0,wl,[Ii,Xt,yl],null,null),(e()(),Ys(16777216,null,null,1,null,Ov)),Hr(7,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.type),e(t,3,0,"multiline"),e(t,7,0,n.debug)},null)}function Nv(e){return yo(0,[(e()(),Js(0,0,null,null,1,"input-component",[],null,null,null,Pv,Av)),Hr(1,114688,null,0,Za,[Di],null,null)],function(e,t){e(t,1,0)},null)}var Mv=_r("input-component",Za,Nv,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",disabled:"disabled",type:"type",value:"value",placeholder:"placeholder"},{changed:"changed"},[]);const Fv=30,Lv=7,Vv=7,zv=10;class jv{}class Hv{constructor(e){this._elementRef=e}}const Bv=wm(ym(bm(Hv),"accent"));class $v extends Bv{constructor(e,t,n,i,s,r){super(e),this._focusMonitor=t,this._changeDetectorRef=n,this._dir=i,this._animationMode=r,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Qt,this.input=new Qt,this.valueChange=new Qt,this.onTouched=(()=>{}),this._percent=0,this._isSliding=!1,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=(()=>{}),this._dirChangeSubscription=d.EMPTY,this.tabIndex=parseInt(s)||0}get invert(){return this._invert}set invert(e){this._invert=rc(e)}get max(){return this._max}set max(e){this._max=oc(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=oc(e,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=oc(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=rc(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?oc(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let t=oc(e);this._roundToDecimal&&(t=parseFloat(t.toFixed(this._roundToDecimal))),this._value=t,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=rc(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(){this._focusHostElement()}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}get _invertAxis(){return this.vertical?!this.invert:this.invert}get _isMinValue(){return 0===this.percent}get _thumbGap(){return this.disabled?Lv:this._isMinValue&&!this.thumbLabel?this._isActive?zv:Vv:0}get _trackBackgroundStyles(){const e=this.vertical?`1, ${1-this.percent}, 1`:`${1-this.percent}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._thumbGap}px) scale3d(${e})`}}get _trackFillStyles(){const e=this.vertical?`1, ${this.percent}, 1`:`${this.percent}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._thumbGap}px) scale3d(${e})`}}get _ticksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}get _ticksStyles(){let e=100*this._tickIntervalPercent,t={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};return this._isMinValue&&this._thumbGap&&(t[`padding${this.vertical?this._invertAxis?"Bottom":"Top":this._invertAxis?"Right":"Left"}`]=`${this._thumbGap}px`),t}get _thumbContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){return"rtl"!=this._getDirection()||this.vertical?this._invertAxis:!this._invertAxis}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngOnInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onMousedown(e){if(this.disabled||0!==e.button)return;const t=this.value;this._isSliding=!1,this._focusHostElement(),this._updateValueFromPosition({x:e.clientX,y:e.clientY}),t!=this.value&&(this._emitInputEvent(),this._emitChangeEvent())}_onSlide(e){if(this.disabled)return;this._isSliding||this._onSlideStart(null),e.preventDefault();let t=this.value;this._updateValueFromPosition({x:e.center.x,y:e.center.y}),t!=this.value&&this._emitInputEvent()}_onSlideStart(e){this.disabled||this._isSliding||(this._onMouseenter(),this._isSliding=!0,this._focusHostElement(),this._valueOnSlideStart=this.value,e&&(this._updateValueFromPosition({x:e.center.x,y:e.center.y}),e.preventDefault()))}_onSlideEnd(){this._isSliding=!1,this._valueOnSlideStart==this.value||this.disabled||this._emitChangeEvent(),this._valueOnSlideStart=null}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||Pu(e))return;const t=this.value;switch(e.keyCode){case wu:this._increment(10);break;case xu:this._increment(-10);break;case Cu:this.value=this.max;break;case Eu:this.value=this.min;break;case ku:this._increment("rtl"==this._getDirection()?1:-1);break;case Su:this._increment(1);break;case Tu:this._increment("rtl"==this._getDirection()?-1:1);break;case Iu:this._increment(-1);break;default:return}t!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,e.preventDefault()}_onKeyup(){this._isSliding=!1}_increment(e){this.value=this._clamp((this.value||0)+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let t=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(t=1-t),0===t)this.value=this.min;else if(1===t)this.value=this.max;else{const e=this._calculateValue(t),n=Math.round((e-this.min)/this.step)*this.step+this.min;this.value=this._clamp(n,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let e=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,t=Math.ceil(Fv/(e*this.step/(this.max-this.min)));this._tickIntervalPercent=t*this.step/e}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(e=this.value){let t=new jv;return t.source=this,t.value=e,t}_calculatePercentage(e){return((e||0)-this.min)/(this.max-this.min)}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,t=0,n=1){return Math.max(t,Math.min(e,n))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(){this._elementRef.nativeElement.focus()}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}class Uv{}var qv=Cs({encapsulation:2,styles:[".mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:0;vertical-align:middle}.mat-slider-wrapper{position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label{cursor:-webkit-grab;cursor:grab}.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb,.mat-slider-sliding:not(.mat-slider-disabled) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb-label:active,.mat-slider:not(.mat-slider-disabled) .mat-slider-thumb:active{cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(.7);transition:transform .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1),border-color .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform .4s cubic-bezier(.25,.8,.25,1),border-radius .4s cubic-bezier(.25,.8,.25,1),background-color .4s cubic-bezier(.25,.8,.25,1)}@media (-ms-high-contrast:active){.mat-slider-thumb-label{outline:solid 1px}}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-sliding .mat-slider-thumb-container,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-track-fill{transition-duration:0s}.mat-slider-has-ticks .mat-slider-wrapper::after{content:'';position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity .4s cubic-bezier(.25,.8,.25,1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}@media (-ms-high-contrast:active){.mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}@media (-ms-high-contrast:active){.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}@media (-ms-high-contrast:active){.mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-track-fill{transition:none}"],data:{}});function Gv(e){return yo(2,[so(402653184,1,{_sliderWrapper:0}),(e()(),Js(1,0,[[1,0],["sliderWrapper",1]],null,16,"div",[["class","mat-slider-wrapper"]],null,null,null,null,null)),(e()(),Js(2,0,null,null,4,"div",[["class","mat-slider-track-wrapper"]],null,null,null,null,null)),(e()(),Js(3,0,null,null,1,"div",[["class","mat-slider-track-background"]],null,null,null,null,null)),Hr(4,278528,null,0,xl,[Zi,bt,Ct],{ngStyle:[0,"ngStyle"]},null),(e()(),Js(5,0,null,null,1,"div",[["class","mat-slider-track-fill"]],null,null,null,null,null)),Hr(6,278528,null,0,xl,[Zi,bt,Ct],{ngStyle:[0,"ngStyle"]},null),(e()(),Js(7,0,null,null,3,"div",[["class","mat-slider-ticks-container"]],null,null,null,null,null)),Hr(8,278528,null,0,xl,[Zi,bt,Ct],{ngStyle:[0,"ngStyle"]},null),(e()(),Js(9,0,null,null,1,"div",[["class","mat-slider-ticks"]],null,null,null,null,null)),Hr(10,278528,null,0,xl,[Zi,bt,Ct],{ngStyle:[0,"ngStyle"]},null),(e()(),Js(11,0,null,null,6,"div",[["class","mat-slider-thumb-container"]],null,null,null,null,null)),Hr(12,278528,null,0,xl,[Zi,bt,Ct],{ngStyle:[0,"ngStyle"]},null),(e()(),Js(13,0,null,null,0,"div",[["class","mat-slider-focus-ring"]],null,null,null,null,null)),(e()(),Js(14,0,null,null,0,"div",[["class","mat-slider-thumb"]],null,null,null,null,null)),(e()(),Js(15,0,null,null,2,"div",[["class","mat-slider-thumb-label"]],null,null,null,null,null)),(e()(),Js(16,0,null,null,1,"span",[["class","mat-slider-thumb-label-text"]],null,null,null,null,null)),(e()(),go(17,null,["",""]))],function(e,t){var n=t.component;e(t,4,0,n._trackBackgroundStyles),e(t,6,0,n._trackFillStyles),e(t,8,0,n._ticksContainerStyles),e(t,10,0,n._ticksStyles),e(t,12,0,n._thumbContainerStyles)},function(e,t){e(t,17,0,t.component.displayValue)})}var Wv=Cs({encapsulation:2,styles:[[".mat-slider{width:var(--width,auto);height:var(--height,auto)}"]],data:{}});function Kv(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,[" ","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Zv(e){return yo(0,[(e()(),Js(0,0,null,null,5,"mat-slider",[["class","mat-slider"],["color","primary"],["role","slider"],["thumbLabel",""],["tickInterval","auto"]],[[8,"tabIndex",0],[1,"aria-disabled",0],[1,"aria-valuemax",0],[1,"aria-valuemin",0],[1,"aria-valuenow",0],[1,"aria-orientation",0],[2,"mat-slider-disabled",null],[2,"mat-slider-has-ticks",null],[2,"mat-slider-horizontal",null],[2,"mat-slider-axis-inverted",null],[2,"mat-slider-sliding",null],[2,"mat-slider-thumb-label-showing",null],[2,"mat-slider-vertical",null],[2,"mat-slider-min-value",null],[2,"mat-slider-hide-last-tick",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"focus"],[null,"blur"],[null,"mousedown"],[null,"keydown"],[null,"keyup"],[null,"mouseenter"],[null,"slide"],[null,"slideend"],[null,"slidestart"]],function(e,t,n){var i=!0,s=e.component;return"focus"===t&&(i=!1!==Ir(e,1)._onFocus()&&i),"blur"===t&&(i=!1!==Ir(e,1)._onBlur()&&i),"mousedown"===t&&(i=!1!==Ir(e,1)._onMousedown(n)&&i),"keydown"===t&&(i=!1!==Ir(e,1)._onKeydown(n)&&i),"keyup"===t&&(i=!1!==Ir(e,1)._onKeyup()&&i),"mouseenter"===t&&(i=!1!==Ir(e,1)._onMouseenter()&&i),"slide"===t&&(i=!1!==Ir(e,1)._onSlide(n)&&i),"slideend"===t&&(i=!1!==Ir(e,1)._onSlideEnd()&&i),"slidestart"===t&&(i=!1!==Ir(e,1)._onSlideStart(n)&&i),"ngModelChange"===t&&(i=!1!==(s.value=n)&&i),"change"===t&&(i=!1!==s.didChanged()&&i),i},Gv,qv)),Hr(1,245760,null,0,$v,[bt,dm,Di,[2,Mu],[8,null],[2,vb]],{disabled:[0,"disabled"],color:[1,"color"],max:[2,"max"],min:[3,"min"],step:[4,"step"],thumbLabel:[5,"thumbLabel"],tickInterval:[6,"tickInterval"],vertical:[7,"vertical"]},{change:"change"}),$r(1024,null,fy,function(e){return[e]},[$v]),Hr(3,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(5,16384,null,0,Hy,[[4,wy]],null,null),(e()(),Ys(16777216,null,null,1,null,Kv)),Hr(7,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.disabled,"primary",n.max,n.min,n.step,"","auto",n.vertical),e(t,3,0,n.disabled,n.value),e(t,7,0,n.debug)},function(e,t){e(t,0,1,[Ir(t,1).tabIndex,Ir(t,1).disabled,Ir(t,1).max,Ir(t,1).min,Ir(t,1).value,Ir(t,1).vertical?"vertical":"horizontal",Ir(t,1).disabled,Ir(t,1).tickInterval,!Ir(t,1).vertical,Ir(t,1)._invertAxis,Ir(t,1)._isSliding,Ir(t,1).thumbLabel,Ir(t,1).vertical,Ir(t,1)._isMinValue,Ir(t,1).disabled||Ir(t,1)._isMinValue&&Ir(t,1)._thumbGap&&Ir(t,1)._invertAxis,"NoopAnimations"===Ir(t,1)._animationMode,Ir(t,5).ngClassUntouched,Ir(t,5).ngClassTouched,Ir(t,5).ngClassPristine,Ir(t,5).ngClassDirty,Ir(t,5).ngClassValid,Ir(t,5).ngClassInvalid,Ir(t,5).ngClassPending])})}function Qv(e){return yo(0,[(e()(),Js(0,0,null,null,1,"slider-component",[],null,null,null,Zv,Wv)),Hr(1,49152,null,0,$h,[Di],null,null)],null,null)}var Xv=_r("slider-component",$h,Qv,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",disabled:"disabled",vertical:"vertical",step:"step",min:"min",max:"max",value:"value"},{changed:"changed"},[]);let Yv=0;class Jv{constructor(e,t){this.source=e,this.value=t}}class ew{constructor(e){this._changeDetector=e,this._value=null,this._name=`mat-radio-group-${Yv++}`,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=(()=>{}),this.onTouched=(()=>{}),this.change=new Qt}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=rc(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=rc(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(e=>{e.checked=this.value===e.value,e.checked&&(this._selected=e)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Jv(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}class tw{constructor(e){this._elementRef=e}}const nw=ym(vm(wm(tw)),"accent");class iw extends nw{constructor(e,t,n,i,s,r){super(t),this._changeDetector=n,this._focusMonitor=i,this._radioDispatcher=s,this._animationMode=r,this._uniqueId=`mat-radio-${++Yv}`,this.id=this._uniqueId,this.change=new Qt,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=(()=>{}),this.radioGroup=e,this._removeUniqueSelectionListener=s.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const t=rc(e);this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){const t=rc(e);this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=rc(e)}get inputId(){return`${this.id||this._uniqueId}-input`}focus(){this._focusMonitor.focusVia(this._inputElement,"keyboard")}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.name=this.radioGroup.name)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Jv(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputChange(e){e.stopPropagation();const t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}class sw{}var rw=Cs({encapsulation:2,styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;height:20px;left:0;position:absolute;top:0;transition:transform ease 280ms,background-color ease 280ms;width:20px;transform:scale(.001)}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-checked .mat-radio-inner-circle{transform:scale(.5)}@media (-ms-high-contrast:active){.mat-radio-checked .mat-radio-inner-circle{border:solid 10px}}.mat-radio-label-content{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple,.mat-radio-persistent-ripple{opacity:0}@media (hover:none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{bottom:0;left:50%}@media (-ms-high-contrast:active){.mat-radio-disabled{opacity:.5}}"],data:{}});function ow(e){return yo(2,[so(402653184,1,{_inputElement:0}),(e()(),Js(1,0,[["label",1]],null,12,"label",[["class","mat-radio-label"]],[[1,"for",0]],null,null,null,null)),(e()(),Js(2,0,null,null,7,"div",[["class","mat-radio-container"]],null,null,null,null,null)),(e()(),Js(3,0,null,null,0,"div",[["class","mat-radio-outer-circle"]],null,null,null,null,null)),(e()(),Js(4,0,null,null,0,"div",[["class","mat-radio-inner-circle"]],null,null,null,null,null)),(e()(),Js(5,0,null,null,3,"div",[["class","mat-radio-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),Hr(6,212992,null,0,Vm,[bt,oi,Jl,[2,Lm],[2,vb]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),mo(7,{enterDuration:0}),(e()(),Js(8,0,null,null,0,"div",[["class","mat-ripple-element mat-radio-persistent-ripple"]],null,null,null,null,null)),(e()(),Js(9,0,[[1,0],["input",1]],null,0,"input",[["class","mat-radio-input cdk-visually-hidden"],["type","radio"]],[[8,"id",0],[8,"checked",0],[8,"disabled",0],[8,"tabIndex",0],[1,"name",0],[8,"required",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-describedby",0]],[[null,"change"],[null,"click"]],function(e,t,n){var i=!0,s=e.component;return"change"===t&&(i=!1!==s._onInputChange(n)&&i),"click"===t&&(i=!1!==s._onInputClick(n)&&i),i},null,null)),(e()(),Js(10,0,null,null,3,"div",[["class","mat-radio-label-content"]],[[2,"mat-radio-label-before",null]],null,null,null,null)),(e()(),Js(11,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),go(-1,null,["\xa0"])),co(null,0)],function(e,t){var n=t.component,i=e(t,7,0,150);e(t,6,0,!0,20,i,n._isRippleDisabled(),Ir(t,1))},function(e,t){var n=t.component;e(t,1,0,n.inputId),e(t,5,0,Ir(t,6).unbounded),e(t,9,0,n.inputId,n.checked,n.disabled,n.tabIndex,n.name,n.required,n.ariaLabel,n.ariaLabelledby,n.ariaDescribedby),e(t,10,0,"before"==n.labelPosition)})}class aw extends Ka{constructor(e){super(e),this.properties=[{name:"disabled",default:!1},{name:"label",default:""},{name:"labelPosition",default:"before"},{name:"options",default:[]},{name:"selection",default:null}],this._options=[]}get selection(){return this._selection}set selection(e){this._selection=e}get options(){return this._options||(this._options=[])}set options(e){this._options=e||[]}trackBy(e,t){return e}}var lw=Cs({encapsulation:2,styles:[[".radio-group-component{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.radio-group-component .mat-radio-button{margin-bottom:8px}"]],data:{}});function cw(e){return yo(0,[(e()(),Js(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),Js(1,0,null,null,3,"mat-radio-button",[["class","mat-radio-button"],["color","primary"]],[[2,"mat-radio-checked",null],[2,"mat-radio-disabled",null],[2,"_mat-animation-noopable",null],[1,"tabindex",0],[1,"id",0]],[[null,"focus"]],function(e,t,n){var i=!0;return"focus"===t&&(i=!1!==Ir(e,2)._inputElement.nativeElement.focus()&&i),i},ow,rw)),Hr(2,4440064,[[1,4]],0,iw,[[2,ew],bt,Di,dm,qc,[2,vb]],{color:[0,"color"],name:[1,"name"],value:[2,"value"]},null),(e()(),Js(3,0,null,0,1,"div",[],[[8,"className",0],[8,"innerHTML",1]],null,null,null,null)),uo(4,1)],function(e,t){e(t,2,0,"primary",t.context.$implicit.id,t.context.$implicit)},function(e,t){e(t,1,0,Ir(t,2).checked,Ir(t,2).disabled,"NoopAnimations"===Ir(t,2)._animationMode,-1,Ir(t,2).id);var n=Qs(1,"",t.context.$implicit.state,""),i=vs(t,3,1,e(t,4,0,Ir(t.parent,0),t.context.$implicit.label));e(t,3,0,n,i)})}function hw(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function uw(e){return yo(0,[Br(0,Ab,[Ap]),(e()(),Js(1,0,null,null,8,"mat-radio-group",[["class","radio-group-component mat-radio-group"],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(e,t,n){var i=!0,s=e.component;return"ngModelChange"===t&&(i=!1!==(s.selection=n)&&i),"change"===t&&(i=!1!==s.didChanged()&&i),i},null,null)),Hr(2,1064960,null,1,ew,[Di],{disabled:[0,"disabled"]},{change:"change"}),so(603979776,1,{_radios:1}),$r(1024,null,fy,function(e){return[e]},[ew]),Hr(5,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(7,16384,null,0,Hy,[[4,wy]],null,null),(e()(),Ys(16777216,null,null,1,null,cw)),Hr(9,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),Ys(16777216,null,null,1,null,hw)),Hr(11,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.disabled),e(t,5,0,n.disabled,n.selection),e(t,9,0,n.options,n.trackBy),e(t,11,0,n.debug)},function(e,t){e(t,1,0,Ir(t,7).ngClassUntouched,Ir(t,7).ngClassTouched,Ir(t,7).ngClassPristine,Ir(t,7).ngClassDirty,Ir(t,7).ngClassValid,Ir(t,7).ngClassInvalid,Ir(t,7).ngClassPending)})}function dw(e){return yo(0,[(e()(),Js(0,0,null,null,1,"radio-group-component",[],null,null,null,uw,lw)),Hr(1,49152,null,0,aw,[Di],null,null)],null,null)}var pw=_r("radio-group-component",aw,dw,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",selection:"selection",disabled:"disabled",label:"label",options:"options"},{changed:"changed"},[]);const mw=new ae("mat-checkbox-click-action");let fw=0;const gw=function(){var e={Init:0,Checked:1,Unchecked:2,Indeterminate:3};return e[e.Init]="Init",e[e.Checked]="Checked",e[e.Unchecked]="Unchecked",e[e.Indeterminate]="Indeterminate",e}();class _w{}class bw{constructor(e){this._elementRef=e}}const yw=wm(ym(vm(bm(bw)),"accent"));class vw extends yw{constructor(e,t,n,i,s,r,o){super(e),this._changeDetectorRef=t,this._focusMonitor=n,this._ngZone=i,this._clickAction=r,this._animationMode=o,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId=`mat-checkbox-${++fw}`,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Qt,this.indeterminateChange=new Qt,this._onTouched=(()=>{}),this._currentAnimationClass="",this._currentCheckState=gw.Init,this._controlValueAccessorChangeFn=(()=>{}),this._checked=!1,this._disabled=!1,this._indeterminate=!1,this.tabIndex=parseInt(s)||0,this._focusMonitor.monitor(e,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),t.markForCheck()})})}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=rc(e)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const t=rc(e);t!==this.disabled&&(this._disabled=t,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const t=e!=this._indeterminate;this._indeterminate=e,t&&(this._transitionCheckState(this._indeterminate?gw.Indeterminate:this.checked?gw.Checked:gw.Unchecked),this.indeterminateChange.emit(this._indeterminate))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let t=this._currentCheckState,n=this._elementRef.nativeElement;if(t!==e&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const e=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(e)},1e3)})}}_emitChangeEvent(){const e=new _w;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e)}toggle(){this.checked=!this.checked}_onInputClick(e){e.stopPropagation(),this.disabled||"noop"===this._clickAction?this.disabled||"noop"!==this._clickAction||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==this._clickAction&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?gw.Checked:gw.Unchecked),this._emitChangeEvent())}focus(){this._focusMonitor.focusVia(this._inputElement,"keyboard")}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,t){if("NoopAnimations"===this._animationMode)return"";let n="";switch(e){case gw.Init:if(t===gw.Checked)n="unchecked-checked";else{if(t!=gw.Indeterminate)return"";n="unchecked-indeterminate"}break;case gw.Unchecked:n=t===gw.Checked?"unchecked-checked":"unchecked-indeterminate";break;case gw.Checked:n=t===gw.Unchecked?"checked-unchecked":"checked-indeterminate";break;case gw.Indeterminate:n=t===gw.Checked?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}}class ww{}var xw=Cs({encapsulation:2,styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.91026}50%{animation-timing-function:cubic-bezier(0,0,.2,.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0,0,0,1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(.4,0,1,1);stroke-dashoffset:0}to{stroke-dashoffset:-22.91026}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0,0,.2,.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(.14,0,0,1);opacity:1;transform:rotate(0)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}100%,32.8%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0,0,.2,.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}@media (-ms-high-contrast:active){.mat-checkbox.cdk-keyboard-focused .mat-checkbox-frame{border-style:dotted}}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0,0,.2,.1),opacity 90ms cubic-bezier(0,0,.2,.1)}._mat-animation-noopable .mat-checkbox-background{transition:none}.mat-checkbox-persistent-ripple{width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.91026;stroke-dasharray:22.91026;stroke-width:2.13333px}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0);border-radius:2px}@media (-ms-high-contrast:active){.mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0s mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0s mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0s mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:.5s linear 0s mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0s mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:.3s linear 0s mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}"],data:{}});function Cw(e){return yo(2,[so(402653184,1,{_inputElement:0}),so(402653184,2,{ripple:0}),(e()(),Js(2,0,[["label",1]],null,16,"label",[["class","mat-checkbox-layout"]],[[1,"for",0]],null,null,null,null)),(e()(),Js(3,0,null,null,10,"div",[["class","mat-checkbox-inner-container"]],[[2,"mat-checkbox-inner-container-no-side-margin",null]],null,null,null,null)),(e()(),Js(4,0,[[1,0],["input",1]],null,0,"input",[["class","mat-checkbox-input cdk-visually-hidden"],["type","checkbox"]],[[8,"id",0],[8,"required",0],[8,"checked",0],[1,"value",0],[8,"disabled",0],[1,"name",0],[8,"tabIndex",0],[8,"indeterminate",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-checked",0]],[[null,"change"],[null,"click"]],function(e,t,n){var i=!0,s=e.component;return"change"===t&&(i=!1!==s._onInteractionEvent(n)&&i),"click"===t&&(i=!1!==s._onInputClick(n)&&i),i},null,null)),(e()(),Js(5,0,null,null,3,"div",[["class","mat-checkbox-ripple mat-ripple"],["matRipple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),Hr(6,212992,[[2,4]],0,Vm,[bt,oi,Jl,[2,Lm],[2,vb]],{centered:[0,"centered"],radius:[1,"radius"],animation:[2,"animation"],disabled:[3,"disabled"],trigger:[4,"trigger"]},null),mo(7,{enterDuration:0}),(e()(),Js(8,0,null,null,0,"div",[["class","mat-ripple-element mat-checkbox-persistent-ripple"]],null,null,null,null,null)),(e()(),Js(9,0,null,null,0,"div",[["class","mat-checkbox-frame"]],null,null,null,null,null)),(e()(),Js(10,0,null,null,3,"div",[["class","mat-checkbox-background"]],null,null,null,null,null)),(e()(),Js(11,0,null,null,1,":svg:svg",[[":xml:space","preserve"],["class","mat-checkbox-checkmark"],["focusable","false"],["version","1.1"],["viewBox","0 0 24 24"]],null,null,null,null,null)),(e()(),Js(12,0,null,null,0,":svg:path",[["class","mat-checkbox-checkmark-path"],["d","M4.1,12.7 9,17.6 20.3,6.3"],["fill","none"],["stroke","white"]],null,null,null,null,null)),(e()(),Js(13,0,null,null,0,"div",[["class","mat-checkbox-mixedmark"]],null,null,null,null,null)),(e()(),Js(14,0,[["checkboxLabel",1]],null,4,"span",[["class","mat-checkbox-label"]],null,[[null,"cdkObserveContent"]],function(e,t,n){var i=!0;return"cdkObserveContent"===t&&(i=!1!==e.component._onLabelTextChange()&&i),i},null,null)),Hr(15,1196032,null,0,df,[uf,bt,oi],null,{event:"cdkObserveContent"}),(e()(),Js(16,0,null,null,1,"span",[["style","display:none"]],null,null,null,null,null)),(e()(),go(-1,null,["\xa0"])),co(null,0)],function(e,t){var n=t.component,i=e(t,7,0,150);e(t,6,0,!0,20,i,n._isRippleDisabled(),Ir(t,2))},function(e,t){var n=t.component;e(t,2,0,n.inputId),e(t,3,0,!Ir(t,14).textContent||!Ir(t,14).textContent.trim()),e(t,4,1,[n.inputId,n.required,n.checked,n.value,n.disabled,n.name,n.tabIndex,n.indeterminate,n.ariaLabel||null,n.ariaLabelledby,n._getAriaChecked()]),e(t,5,0,Ir(t,6).unbounded)})}var Ew=Cs({encapsulation:2,styles:[[".checkbox-group-component{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.checkbox-group-component .mat-checkbox{margin-bottom:8px}"]],data:{}});function kw(e){return yo(0,[(e()(),Js(0,0,null,null,8,null,null,null,null,null,null,null)),(e()(),Js(1,0,null,null,7,"mat-checkbox",[["class","mat-checkbox"],["color","primary"]],[[8,"id",0],[1,"tabindex",0],[2,"mat-checkbox-indeterminate",null],[2,"mat-checkbox-checked",null],[2,"mat-checkbox-disabled",null],[2,"mat-checkbox-label-before",null],[2,"_mat-animation-noopable",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"]],function(e,t,n){var i=!0,s=e.component;return"ngModelChange"===t&&(i=!1!==(e.context.$implicit.checked=n)&&i),"change"===t&&(i=!1!==s.didChanged()&&i),i},Cw,xw)),Hr(2,8568832,null,0,vw,[bt,Di,dm,oi,[8,null],[2,mw],[2,vb]],{color:[0,"color"],disabled:[1,"disabled"]},{change:"change"}),$r(1024,null,fy,function(e){return[e]},[vw]),Hr(4,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(6,16384,null,0,Hy,[[4,wy]],null,null),(e()(),Js(7,0,null,0,1,"div",[],[[8,"className",0],[8,"innerHTML",1]],null,null,null,null)),uo(8,1)],function(e,t){var n=t.component;e(t,2,0,"primary",n.disabled),e(t,4,0,n.disabled,t.context.$implicit.checked)},function(e,t){e(t,1,1,[Ir(t,2).id,null,Ir(t,2).indeterminate,Ir(t,2).checked,Ir(t,2).disabled,"before"==Ir(t,2).labelPosition,"NoopAnimations"===Ir(t,2)._animationMode,Ir(t,6).ngClassUntouched,Ir(t,6).ngClassTouched,Ir(t,6).ngClassPristine,Ir(t,6).ngClassDirty,Ir(t,6).ngClassValid,Ir(t,6).ngClassInvalid,Ir(t,6).ngClassPending]);var n=t.context.$implicit.state,i=vs(t,7,1,e(t,8,0,Ir(t.parent,0),t.context.$implicit.label));e(t,7,0,n,i)})}function Sw(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Tw(e){return yo(0,[Br(0,Ab,[Ap]),(e()(),Js(1,0,null,null,2,"div",[["class","checkbox-group-component"]],null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,kw)),Hr(3,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),Ys(16777216,null,null,1,null,Sw)),Hr(5,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,3,0,n.options,n.trackBy),e(t,5,0,n.debug)},null)}function Iw(e){return yo(0,[(e()(),Js(0,0,null,null,1,"checkbox-group-component",[],null,null,null,Tw,Ew)),Hr(1,49152,null,0,Zh,[Di],null,null)],null,null)}var Aw=_r("checkbox-group-component",Zh,Iw,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",disabled:"disabled",label:"label",options:"options"},{changed:"changed"},[]);class Dw{}const Rw=vm(Dw);class Ow{}const Pw=vm(Ow);class Nw extends Rw{constructor(){super(...arguments),this._stateChanges=new k}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}class Mw extends Rw{constructor(e){super(),this._elementRef=e,this._stateChanges=new k,"action-list"===this._getListType()&&e&&e.nativeElement.classList.add("mat-action-list")}_getListType(){const e=this._elementRef;if(e){const t=e.nativeElement.nodeName.toLowerCase();if("mat-list"===t)return"list";if("mat-action-list"===t)return"action-list"}return null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}class Fw extends Pw{constructor(e,t,n,i){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new k,this._isInteractiveList=!!(t||n&&"action-list"===n._getListType()),this._list=t||n;const s=this._getHostElement();"button"!==s.nodeName.toLowerCase()||s.hasAttribute("type")||s.setAttribute("type","button"),this._list&&i&&this._list._stateChanges.pipe(Oc(this._destroyed)).subscribe(()=>{i.markForCheck()})}ngAfterContentInit(){var e,t;t=this._element,(e=this._lines).changes.pipe(Fc(e)).subscribe(({length:e})=>{Am(t,"mat-2-line",!1),Am(t,"mat-3-line",!1),Am(t,"mat-multi-line",!1),2===e||3===e?Am(t,`mat-${e}-line`,!0):e>3&&Am(t,"mat-multi-line",!0)})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}class Lw{}class Vw{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=rc(e)}get inset(){return this._inset}set inset(e){this._inset=rc(e)}}class zw{}var jw=Cs({encapsulation:2,styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],data:{}});function Hw(e){return yo(2,[co(null,0)],null,null)}var Bw=Cs({encapsulation:2,styles:[],data:{}});function $w(e){return yo(2,[(e()(),Js(0,0,null,null,6,"div",[["class","mat-list-item-content"]],null,null,null,null,null)),(e()(),Js(1,0,null,null,1,"div",[["class","mat-list-item-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),Hr(2,212992,null,0,Vm,[bt,oi,Jl,[2,Lm],[2,vb]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null),co(null,0),(e()(),Js(4,0,null,null,1,"div",[["class","mat-list-text"]],null,null,null,null,null)),co(null,1),co(null,2)],function(e,t){var n=t.component;e(t,2,0,n._isRippleDisabled(),n._getHostElement())},function(e,t){e(t,1,0,Ir(t,2).unbounded)})}var Uw=Cs({encapsulation:2,styles:[[".sort-list-component{padding:0!important;max-width:100%!important;display:block;border:1px solid #ccc;background:#fff;border-radius:4px;overflow:hidden}.sort-list-component.disabled{pointer-events:none;border:1px dashed #ccc}.sort-item{cursor:move;border:none;min-height:48px!important;height:auto!important;padding:20px 10px!important;border-bottom:1px solid #ccc;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:-webkit-transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1),-webkit-transform 250ms cubic-bezier(0,0,.2,1)}.sort-item:last-child{border:none}.sort-list.cdk-drop-list-dragging .sort-item:not(.cdk-drag-placeholder){transition:-webkit-transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1),-webkit-transform 250ms cubic-bezier(0,0,.2,1)}"]],data:{}});function qw(e){return yo(0,[(e()(),Js(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),Js(1,16777216,null,null,11,"mat-list-item",[["cdkDrag",""],["class","cdk-drag mat-list-item"]],[[8,"className",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,$w,Bw)),$r(6144,null,Rh,null,[Ph]),Hr(3,4866048,[[1,4]],3,Ph,[bt,[3,Dh],Kl,oi,Ii,Qc,Th,Oh,[2,Mu],Ah,Di],null,null),so(603979776,2,{_handles:1}),so(335544320,3,{_previewTemplate:0}),so(335544320,4,{_placeholderTemplate:0}),Hr(7,1228800,null,3,Fw,[bt,[2,Nw],[2,Mw],Di],null,null),so(603979776,5,{_lines:1}),so(335544320,6,{_avatar:0}),so(335544320,7,{_icon:0}),(e()(),Js(11,0,null,2,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),uo(12,1),(e()(),Ys(0,null,null,0))],null,function(e,t){e(t,1,0,Qs(1,"sort-item ",t.context.$implicit.state,""),Ir(t,3).disabled,Ir(t,3)._dragRef.isDragging(),Ir(t,7)._avatar||Ir(t,7)._icon,Ir(t,7)._avatar||Ir(t,7)._icon);var n=vs(t,11,0,e(t,12,0,Ir(t.parent,0),t.context.$implicit.text));e(t,11,0,n)})}function Gw(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Ww(e){return yo(0,[Br(0,Ab,[Ap]),(e()(),Js(1,0,null,null,7,"mat-list",[["cdkDropList",""],["class","sort-list-component cdk-drop-list mat-list mat-list-base"]],[[2,"disabled",null],[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,t,n){var i=!0;return"cdkDropListDropped"===t&&(i=!1!==e.component.drop(n)&&i),i},Hw,jw)),$r(6144,null,Dh,null,[Lh]),Hr(3,1196032,null,1,Lh,[bt,Th,Di,[2,Mu],[3,Mh],[2,Kl],Ah],null,{dropped:"cdkDropListDropped"}),so(603979776,1,{_draggables:1}),Hr(5,704512,null,0,Mw,[bt],null,null),$r(256,null,Mh,void 0,[]),(e()(),Ys(16777216,null,0,1,null,qw)),Hr(8,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),Ys(16777216,null,null,1,null,Gw)),Hr(10,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,8,0,n.source,n.trackBy),e(t,10,0,n.debug)},function(e,t){e(t,1,0,t.component.disabled,Ir(t,3).id,Ir(t,3).disabled,Ir(t,3)._dropListRef.isDragging(),Ir(t,3)._dropListRef.isReceiving())})}function Kw(e){return yo(0,[(e()(),Js(0,0,null,null,1,"sort-list-component",[],null,null,null,Ww,Uw)),Hr(1,49152,null,0,zh,[Di],null,null)],null,null)}var Zw=_r("sort-list-component",zh,Kw,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",source:"source",disabled:"disabled"},{changed:"changed"},[]),Qw=Cs({encapsulation:2,styles:[[".transfert-list-component{display:grid;grid-gap:8px;grid-template-columns:repeat(2,1fr)}.transfert-list-component.disabled{pointer-events:none;border:1px dashed #ccc}.sort-list{padding:0!important;max-width:100%!important;display:block;border:1px solid #ccc;background:#fff;border-radius:4px;overflow:hidden}.sort-item{cursor:move;border:none;min-height:48px!important;height:auto!important;padding:20px 10px!important;border-bottom:1px solid #ccc;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:center;align-items:center;-webkit-justify-content:space-between;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:-webkit-transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1),-webkit-transform 250ms cubic-bezier(0,0,.2,1)}.sort-item:last-child{border:none}.sort-list.cdk-drop-list-dragging .sort-item:not(.cdk-drag-placeholder){transition:-webkit-transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1);transition:transform 250ms cubic-bezier(0,0,.2,1),-webkit-transform 250ms cubic-bezier(0,0,.2,1)}"]],data:{}});function Xw(e){return yo(0,[(e()(),Js(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),Js(1,16777216,null,null,11,"mat-list-item",[["cdkDrag",""],["class","cdk-drag mat-list-item"]],[[8,"className",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,$w,Bw)),$r(6144,null,Rh,null,[Ph]),Hr(3,4866048,[[1,4]],3,Ph,[bt,[3,Dh],Kl,oi,Ii,Qc,Th,Oh,[2,Mu],Ah,Di],null,null),so(603979776,2,{_handles:1}),so(335544320,3,{_previewTemplate:0}),so(335544320,4,{_placeholderTemplate:0}),Hr(7,1228800,null,3,Fw,[bt,[2,Nw],[2,Mw],Di],null,null),so(603979776,5,{_lines:1}),so(335544320,6,{_avatar:0}),so(335544320,7,{_icon:0}),(e()(),Js(11,0,null,2,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),uo(12,1),(e()(),Ys(0,null,null,0))],null,function(e,t){e(t,1,0,Qs(1,"sort-item ",t.context.$implicit.state,""),Ir(t,3).disabled,Ir(t,3)._dragRef.isDragging(),Ir(t,7)._avatar||Ir(t,7)._icon,Ir(t,7)._avatar||Ir(t,7)._icon);var n=vs(t,11,0,e(t,12,0,Ir(t.parent,0),t.context.$implicit.text));e(t,11,0,n)})}function Yw(e){return yo(0,[(e()(),Js(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),Js(1,16777216,null,null,11,"mat-list-item",[["cdkDrag",""],["class","cdk-drag mat-list-item"]],[[8,"className",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null],[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,$w,Bw)),$r(6144,null,Rh,null,[Ph]),Hr(3,4866048,[[8,4]],3,Ph,[bt,[3,Dh],Kl,oi,Ii,Qc,Th,Oh,[2,Mu],Ah,Di],null,null),so(603979776,9,{_handles:1}),so(335544320,10,{_previewTemplate:0}),so(335544320,11,{_placeholderTemplate:0}),Hr(7,1228800,null,3,Fw,[bt,[2,Nw],[2,Mw],Di],null,null),so(603979776,12,{_lines:1}),so(335544320,13,{_avatar:0}),so(335544320,14,{_icon:0}),(e()(),Js(11,0,null,2,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),uo(12,1),(e()(),Ys(0,null,null,0))],null,function(e,t){e(t,1,0,Qs(1,"sort-item ",t.context.$implicit.state,""),Ir(t,3).disabled,Ir(t,3)._dragRef.isDragging(),Ir(t,7)._avatar||Ir(t,7)._icon,Ir(t,7)._avatar||Ir(t,7)._icon);var n=vs(t,11,0,e(t,12,0,Ir(t.parent,0),t.context.$implicit.text));e(t,11,0,n)})}function Jw(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function ex(e){return yo(0,[Br(0,Ab,[Ap]),(e()(),Js(1,0,null,null,18,"div",[["class","transfert-list-component"]],[[2,"disabled",null]],null,null,null,null)),(e()(),Js(2,0,null,null,8,"mat-list",[["cdkDropList",""],["class","sort-list cdk-drop-list mat-list mat-list-base"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,t,n){var i=!0;return"cdkDropListDropped"===t&&(i=!1!==e.component.drop(n)&&i),i},Hw,jw)),$r(6144,null,Dh,null,[Lh]),Hr(4,1196032,[["leftList",4]],1,Lh,[bt,Th,Di,[2,Mu],[3,Mh],[2,Kl],Ah],{connectedTo:[0,"connectedTo"],data:[1,"data"]},{dropped:"cdkDropListDropped"}),so(603979776,1,{_draggables:1}),po(6,1),Hr(7,704512,null,0,Mw,[bt],null,null),$r(256,null,Mh,void 0,[]),(e()(),Ys(16777216,null,0,1,null,Xw)),Hr(10,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),Js(11,0,null,null,8,"mat-list",[["cdkDropList",""],["class","sort-list cdk-drop-list mat-list mat-list-base"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],function(e,t,n){var i=!0;return"cdkDropListDropped"===t&&(i=!1!==e.component.drop(n)&&i),i},Hw,jw)),$r(6144,null,Dh,null,[Lh]),Hr(13,1196032,[["rightList",4]],1,Lh,[bt,Th,Di,[2,Mu],[3,Mh],[2,Kl],Ah],{connectedTo:[0,"connectedTo"],data:[1,"data"]},{dropped:"cdkDropListDropped"}),so(603979776,8,{_draggables:1}),po(15,1),Hr(16,704512,null,0,Mw,[bt],null,null),$r(256,null,Mh,void 0,[]),(e()(),Ys(16777216,null,0,1,null,Yw)),Hr(19,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),Ys(16777216,null,null,1,null,Jw)),Hr(21,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component,i=e(t,6,0,Ir(t,13));e(t,4,0,i,n.leftSource),e(t,10,0,n.leftSource,n.trackBy);var s=e(t,15,0,Ir(t,4));e(t,13,0,s,n.rightSource),e(t,19,0,n.rightSource,n.trackBy),e(t,21,0,n.debug)},function(e,t){e(t,1,0,t.component.disabled),e(t,2,0,Ir(t,4).id,Ir(t,4).disabled,Ir(t,4)._dropListRef.isDragging(),Ir(t,4)._dropListRef.isReceiving()),e(t,11,0,Ir(t,13).id,Ir(t,13).disabled,Ir(t,13)._dropListRef.isDragging(),Ir(t,13)._dropListRef.isReceiving())})}function tx(e){return yo(0,[(e()(),Js(0,0,null,null,1,"transfert-list-component",[],null,null,null,ex,Qw)),Hr(1,49152,null,0,jh,[Di],null,null)],null,null)}var nx=_r("transfert-list-component",jh,tx,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",leftSource:"leftSource",rightSource:"rightSource",disabled:"disabled"},{changed:"changed"},[]),ix=Cs({encapsulation:2,styles:[[".drag-drop-component{cursor:pointer;display:-webkit-inline-flex;display:inline-flex;min-width:3em;min-height:2em;vertical-align:middle;text-align:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;border:2px solid transparent;border-radius:6px;margin-top:var(--margin-top,0);margin-right:var(--margin-right,0);margin-bottom:var(--margin-bottom,0);margin-left:var(--margin-left,0);background-color:var(--background-color,#faebd7);color:var(--color,#000)}.drag-drop-component.dnd-over{border:2px solid #000}.drag-drop-component.disabled{border:1px dashed;pointer-events:none}"]],data:{}});function sx(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,[" ","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function rx(e){return yo(0,[Br(0,Ab,[Ap]),so(402653184,1,{directive:0}),(e()(),Js(2,0,null,null,2,"div",[["class","drag-drop-component"],["dragNdrop",""]],[[2,"disabled",null],[8,"innerHTML",1]],[[null,"dropped"]],function(e,t,n){var i=!0;return"dropped"===t&&(i=!1!==e.component.dropped(n)&&i),i},null,null)),Hr(3,1196032,[[1,4]],0,Qa,[bt,Ct],null,{dropped:"dropped"}),uo(4,1),(e()(),Ys(16777216,null,null,1,null,sx)),Hr(6,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,6,0,t.component.debug)},function(e,t){var n=t.component,i=n.disabled,s=vs(t,2,1,e(t,4,0,Ir(t,0),n.content));e(t,2,0,i,s)})}function ox(e){return yo(0,[(e()(),Js(0,0,null,null,1,"drag-drop-component",[],null,null,null,rx,ix)),Hr(1,4440064,null,0,Ya,[Di,Xa],null,null)],function(e,t){e(t,1,0)},null)}var ax=_r("drag-drop-component",Ya,ox,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",content:"content",data:"data",disabled:"disabled",droppable:"droppable"},{changed:"changed"},[]),lx=Cs({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}});function cx(e){return yo(2,[],null,null)}var hx=Cs({encapsulation:2,styles:[[".math-input-component{border:1px solid #ddd;padding:5px;margin:10px 0;border-radius:5px;background-color:#fff;font-size:large}.math-input-component .ML__virtual-keyboard-toggle{z-index:100}.math-input-component.disabled{pointer-events:none;border:1px dashed}.math-input-component .ML__fieldcontainer__field{height:100%!important}"]],data:{}});function ux(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function dx(e){return yo(0,[(e()(),Js(0,0,null,null,0,"div",[["class","math-input-component"],["id","math-input-component"]],[[2,"disabled",null]],null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,ux)),Hr(2,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.debug)},function(e,t){e(t,0,0,t.component.disabled)})}function px(e){return yo(0,[(e()(),Js(0,0,null,null,1,"math-input-component",[],null,null,null,dx,hx)),Hr(1,245760,null,0,qh,[Di],null,null)],function(e,t){e(t,1,0)},null)}var mx=_r("math-input-component",qh,px,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",smartFence:"smartFence",smartMode:"smartMode",virtualKeyboardTheme:"virtualKeyboardTheme",virtualKeyboards:"virtualKeyboards",inlineShortcuts:"inlineShortcuts",disabled:"disabled",value:"value"},{changed:"changed"},[]),fx=Cs({encapsulation:0,styles:["[_nghost-%COMP%] {\n      display: block;\n      height: 200px;\n    }\n\n    .editor-container[_ngcontent-%COMP%] {\n      width: 100%;\n      height: 98%;\n    }"],data:{}});function gx(e){return yo(0,[so(402653184,1,{_editorContainer:0}),(e()(),Js(1,0,[[1,0],["editorContainer",1]],null,0,"div",[["class","editor-container"]],null,null,null,null,null))],null,null)}var _x=Cs({encapsulation:2,styles:[[".code-component .editor-container{height:var(--height,auto);border-bottom:1px solid #ddd;border-bottom-left-radius:8px;border-bottom-right-radius:8px;-o-box-shadow:1px 1px 5px 0 #ddd;box-shadow:1px 1px 5px 0 #ddd;filter:progid:DXImageTransform.Microsoft.Shadow(color=#DDD, Direction=134, Strength=5)}"]],data:{}});function bx(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function yx(e){return yo(0,[(e()(),Js(0,0,null,null,5,"ngx-monaco-editor",[["class","code-component"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"onInit"]],function(e,t,n){var i=!0,s=e.component;return"ngModelChange"===t&&(i=!1!==(s.code=n)&&i),"onInit"===t&&(i=!1!==s.onInit(n)&&i),i},gx,fx)),Hr(1,4374528,null,0,qa,[oi,za],{options:[0,"options"]},{onInit:"onInit"}),$r(1024,null,fy,function(e){return[e]},[qa]),Hr(3,671744,null,0,ov,[[8,null],[8,null],[8,null],[6,fy]],{model:[0,"model"]},{update:"ngModelChange"}),$r(2048,null,wy,null,[ov]),Hr(5,16384,null,0,Hy,[[4,wy]],null,null),(e()(),Ys(16777216,null,null,1,null,bx)),Hr(7,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.options),e(t,3,0,n.code),e(t,7,0,n.debug)},function(e,t){e(t,0,0,Ir(t,5).ngClassUntouched,Ir(t,5).ngClassTouched,Ir(t,5).ngClassPristine,Ir(t,5).ngClassDirty,Ir(t,5).ngClassValid,Ir(t,5).ngClassInvalid,Ir(t,5).ngClassPending)})}function vx(e){return yo(0,[(e()(),Js(0,0,null,null,1,"code-component",[],null,null,null,yx,_x)),Hr(1,49152,null,0,Kh,[Di],null,null)],null,null)}var wx=_r("code-component",Kh,vx,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",options:"options",tabSize:"tabSize",code:"code"},{changed:"changed"},[]),xx=Cs({encapsulation:2,styles:[[""]],data:{}});function Cx(e){return yo(0,[(e()(),Js(0,0,null,null,0,"div",[["class","jxgbox"],["id","graph"],["style","width:500px; height:500px;"]],null,null,null,null,null))],null,null)}function Ex(e){return yo(0,[(e()(),Js(0,0,null,null,1,"graph-component",[],null,null,null,Cx,xx)),Hr(1,114688,null,0,Qh,[Di],null,null)],function(e,t){e(t,1,0)},null)}var kx=_r("graph-component",Qh,Ex,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",board:"board",attributes:"attributes"},{changed:"changed"},[]),Sx=Cs({encapsulation:2,styles:[[".nodes-component{display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.nodes-component .point{padding:8px;max-width:100%;box-shadow:0 1px 2px 0 #b0c1d9}.nodes-component svg path{stroke:#456;fill:#456;stroke-width:4}.nodes-component svg path:hover{stroke:#000;fill:#000}.nodes-component .endpoint-source svg{width:20px;height:20px}.nodes-component .endpoint-source svg circle{fill:transparent;stroke:#456;stroke-width:3px}.nodes-component .endpoint-target svg{width:20px;height:20px}.nodes-component .endpoint-target svg circle{fill:#456;stroke:#456;stroke-width:3px}.nodes-component .align-left{float:left}.nodes-component .align-right{float:right}"]],data:{}});function Tx(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[["class","point"]],[[8,"id",0],[8,"innerHTML",1]],null,null,null,null)),uo(1,1)],null,function(e,t){var n=t.parent.context.$implicit.id,i=vs(t,0,1,e(t,1,0,Ir(t.parent.parent,0),t.parent.context.$implicit.content));e(t,0,0,n,i)})}function Ix(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,Tx)),Hr(2,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Ys(0,null,null,0))],function(e,t){e(t,2,0,t.context.$implicit.source)},null)}function Ax(e){return yo(0,[(e()(),Js(0,0,null,null,1,"div",[["class","point"]],[[8,"id",0],[8,"innerHTML",1]],null,null,null,null)),uo(1,1)],null,function(e,t){var n=t.parent.context.$implicit.id,i=vs(t,0,1,e(t,1,0,Ir(t.parent.parent,0),t.parent.context.$implicit.content));e(t,0,0,n,i)})}function Dx(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,Ax)),Hr(2,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null),(e()(),Ys(0,null,null,0))],function(e,t){e(t,2,0,t.context.$implicit.target)},null)}function Rx(e){return yo(0,[(e()(),Js(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),go(1,null,["\n","\n"])),Br(0,Gl,[])],null,function(e,t){var n=t.component;e(t,1,0,vs(t,1,0,Ir(t,2).transform(n.serialize())))})}function Ox(e){return yo(0,[Br(0,Ab,[Ap]),so(402653184,1,{container:0}),(e()(),Js(2,0,[[1,0],["container",1]],null,6,"div",[["class","nodes-component"]],null,null,null,null,null)),(e()(),Js(3,0,null,null,2,"div",[["class","align-left"]],null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,Ix)),Hr(5,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"]},null),(e()(),Js(6,0,null,null,2,"div",[["class","align-right"]],null,null,null,null,null)),(e()(),Ys(16777216,null,null,1,null,Dx)),Hr(8,278528,null,0,pl,[Ii,Xt,Ki],{ngForOf:[0,"ngForOf"]},null),(e()(),Ys(16777216,null,null,1,null,Rx)),Hr(10,16384,null,0,fl,[Ii,Xt],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,5,0,n.points),e(t,8,0,n.points),e(t,10,0,n.debug)},null)}function Px(e){return yo(0,[(e()(),Js(0,0,null,null,1,"nodes-component",[],null,null,null,Ox,Sx)),Hr(1,4440064,null,0,Xh,[Di],null,null)],function(e,t){e(t,1,0)},null)}var Nx=_r("nodes-component",Xh,Px,{cid:"cid",debug:"debug",serialize:"serialize",deserialize:"deserialize",points:"points",connections:"connections"},{changed:"changed"},[]),Mx=Cs({encapsulation:0,styles:[[".group[_ngcontent-%COMP%]{display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column;width:50%}"]],data:{}});function Fx(e){return yo(0,[(e()(),Js(0,0,null,null,199,"mat-accordion",[["class","mat-accordion"]],null,null,null,null,null)),Hr(1,1720320,null,1,Af,[],null,null),so(603979776,1,{_headers:1}),$r(2048,null,Cf,null,[Af]),(e()(),Js(4,16777216,null,null,32,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(5,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,2,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(8,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,9)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,9)._keydown(n)&&i),i},Tb,kb)),Hr(9,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(10,{collapsedHeight:0,expandedHeight:1}),mo(11,{value:0,params:1}),(e()(),Js(12,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(13,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Text Component \u2713 "])),(e()(),Js(15,0,null,1,1,"text-component",[["typo","caption"]],null,null,null,Pb,Rb)),Hr(16,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(17,0,null,1,1,"text-component",[["state","warning-state"],["typo","body1"]],null,null,null,Pb,Rb)),Hr(18,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],state:[1,"state"],text:[2,"text"],typo:[3,"typo"]},null),(e()(),Js(19,0,null,1,1,"text-component",[["state","success-state"],["typo","body2"]],null,null,null,Pb,Rb)),Hr(20,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],state:[1,"state"],text:[2,"text"],typo:[3,"typo"]},null),(e()(),Js(21,0,null,1,1,"text-component",[["state","error-state"],["typo","headline"]],null,null,null,Pb,Rb)),Hr(22,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],state:[1,"state"],text:[2,"text"],typo:[3,"typo"]},null),(e()(),Js(23,0,null,1,1,"text-component",[["typo","title"]],null,null,null,Pb,Rb)),Hr(24,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(25,0,null,1,1,"text-component",[["typo","subheading1"]],null,null,null,Pb,Rb)),Hr(26,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(27,0,null,1,1,"text-component",[["typo","subheading2"]],null,null,null,Pb,Rb)),Hr(28,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(29,0,null,1,1,"text-component",[["typo","display1"]],null,null,null,Pb,Rb)),Hr(30,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(31,0,null,1,1,"text-component",[["typo","display2"]],null,null,null,Pb,Rb)),Hr(32,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(33,0,null,1,1,"text-component",[["typo","display3"]],null,null,null,Pb,Rb)),Hr(34,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(35,0,null,1,1,"text-component",[["typo","display4"]],null,null,null,Pb,Rb)),Hr(36,49152,null,0,Ja,[Di],{selectable:[0,"selectable"],text:[1,"text"],typo:[2,"typo"]},null),(e()(),Js(37,16777216,null,null,22,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(38,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,3,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(41,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,42)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,42)._keydown(n)&&i),i},Tb,kb)),Hr(42,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(43,{collapsedHeight:0,expandedHeight:1}),mo(44,{value:0,params:1}),(e()(),Js(45,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(46,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Input Component \u2713 "])),(e()(),Js(48,0,null,1,1,"input-component",[["placeholder","text"],["type","text"]],null,null,null,Pv,Av)),Hr(49,114688,null,0,Za,[Di],{disabled:[0,"disabled"],type:[1,"type"],placeholder:[2,"placeholder"]},null),(e()(),Js(50,0,null,1,0,"br",[],null,null,null,null,null)),(e()(),Js(51,0,null,1,1,"input-component",[["color","warn"],["placeholder","number"],["type","number"]],null,null,null,Pv,Av)),Hr(52,114688,null,0,Za,[Di],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Js(53,0,null,1,0,"br",[],null,null,null,null,null)),(e()(),Js(54,0,null,1,1,"input-component",[["placeholder","color"],["type","color"]],null,null,null,Pv,Av)),Hr(55,114688,null,0,Za,[Di],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Js(56,0,null,1,0,"br",[],null,null,null,null,null)),(e()(),Js(57,0,null,1,1,"input-component",[["placeholder","multiline"],["type","multiline"]],null,null,null,Pv,Av)),Hr(58,114688,null,0,Za,[Di],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),Js(59,0,null,1,0,"br",[],null,null,null,null,null)),(e()(),Js(60,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(61,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,4,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(64,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,65)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,65)._keydown(n)&&i),i},Tb,kb)),Hr(65,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(66,{collapsedHeight:0,expandedHeight:1}),mo(67,{value:0,params:1}),(e()(),Js(68,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(69,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Slider Component \u2713 "])),(e()(),Js(71,0,null,1,1,"slider-component",[["max","100"],["min","10"]],null,null,null,Zv,Wv)),Hr(72,49152,null,0,$h,[Di],{min:[0,"min"],max:[1,"max"]},null),(e()(),Js(73,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(74,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,5,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(77,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,78)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,78)._keydown(n)&&i),i},Tb,kb)),Hr(78,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(79,{collapsedHeight:0,expandedHeight:1}),mo(80,{value:0,params:1}),(e()(),Js(81,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(82,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" RadioGroup Component \u2713 "])),(e()(),Js(84,0,null,1,1,"radio-group-component",[],null,null,null,uw,lw)),Hr(85,49152,null,0,aw,[Di],{options:[0,"options"]},null),(e()(),Js(86,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(87,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,6,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(90,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,91)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,91)._keydown(n)&&i),i},Tb,kb)),Hr(91,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(92,{collapsedHeight:0,expandedHeight:1}),mo(93,{value:0,params:1}),(e()(),Js(94,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(95,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" CheckBox Component \u2713 "])),(e()(),Js(97,0,null,1,1,"checkbox-group-component",[],null,null,null,Tw,Ew)),Hr(98,49152,null,0,Zh,[Di],{options:[0,"options"]},null),(e()(),Js(99,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(100,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,7,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(103,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,104)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,104)._keydown(n)&&i),i},Tb,kb)),Hr(104,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(105,{collapsedHeight:0,expandedHeight:1}),mo(106,{value:0,params:1}),(e()(),Js(107,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(108,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" SortList Component \u2713 "])),(e()(),Js(110,0,null,1,1,"sort-list-component",[],null,null,null,Ww,Uw)),Hr(111,49152,null,0,zh,[Di],{source:[0,"source"]},null),(e()(),Js(112,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(113,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,8,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(116,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,117)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,117)._keydown(n)&&i),i},Tb,kb)),Hr(117,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(118,{collapsedHeight:0,expandedHeight:1}),mo(119,{value:0,params:1}),(e()(),Js(120,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(121,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" TransfertList Component \u2713 "])),(e()(),Js(123,0,null,1,1,"transfert-list-component",[],null,null,null,ex,Qw)),Hr(124,49152,null,0,jh,[Di],{leftSource:[0,"leftSource"],rightSource:[1,"rightSource"]},null),(e()(),Js(125,16777216,null,null,21,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(126,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,9,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(129,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,130)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,130)._keydown(n)&&i),i},Tb,kb)),Hr(130,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(131,{collapsedHeight:0,expandedHeight:1}),mo(132,{value:0,params:1}),(e()(),Js(133,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(134,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" DragDrop Component \u2713 "])),(e()(),Js(136,0,null,1,4,"div",[["style","display: flex"]],null,null,null,null,null)),(e()(),Js(137,0,null,null,1,"drag-drop-component",[["content","A"],["data","1"]],null,null,null,rx,ix)),Hr(138,4440064,null,0,Ya,[Di,Xa],{content:[0,"content"],data:[1,"data"],disabled:[2,"disabled"]},null),(e()(),Js(139,0,null,null,1,"drag-drop-component",[["content","B"],["data","2"]],null,null,null,rx,ix)),Hr(140,4440064,null,0,Ya,[Di,Xa],{content:[0,"content"],data:[1,"data"]},null),(e()(),Js(141,0,null,1,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,cx,lx)),Hr(142,49152,null,0,Vw,[],null,null),(e()(),Js(143,0,null,1,1,"drag-drop-component",[],null,null,null,rx,ix)),Hr(144,4440064,null,0,Ya,[Di,Xa],{droppable:[0,"droppable"]},null),(e()(),Js(145,0,null,1,1,"drag-drop-component",[],null,null,null,rx,ix)),Hr(146,4440064,null,0,Ya,[Di,Xa],{disabled:[0,"disabled"],droppable:[1,"droppable"]},null),(e()(),Js(147,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(148,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,10,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(151,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,152)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,152)._keydown(n)&&i),i},Tb,kb)),Hr(152,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(153,{collapsedHeight:0,expandedHeight:1}),mo(154,{value:0,params:1}),(e()(),Js(155,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(156,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" MathInput Component \u2713 "])),(e()(),Js(158,0,null,1,1,"math-input-component",[],null,null,null,dx,hx)),Hr(159,245760,null,0,qh,[Di],null,null),(e()(),Js(160,16777216,null,null,13,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(161,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,11,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(164,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,165)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,165)._keydown(n)&&i),i},Tb,kb)),Hr(165,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(166,{collapsedHeight:0,expandedHeight:1}),mo(167,{value:0,params:1}),(e()(),Js(168,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(169,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Code Component \u2713 "])),(e()(),Js(171,0,null,1,2,"code-component",[],null,null,null,yx,_x)),Hr(172,49152,null,0,Kh,[Di],{options:[0,"options"]},null),mo(173,{theme:0}),(e()(),Js(174,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(175,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,12,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(178,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,179)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,179)._keydown(n)&&i),i},Tb,kb)),Hr(179,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(180,{collapsedHeight:0,expandedHeight:1}),mo(181,{value:0,params:1}),(e()(),Js(182,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(183,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Graph Component \u2713 "])),(e()(),Js(185,0,null,1,1,"graph-component",[],null,null,null,Cx,xx)),Hr(186,114688,null,0,Qh,[Di],null,null),(e()(),Js(187,16777216,null,null,12,"mat-expansion-panel",[["class","mat-expansion-panel"]],[[2,"mat-expanded",null],[2,"_mat-animation-noopable",null],[2,"mat-expansion-panel-spacing",null]],null,null,Eb,xb)),Hr(188,1753088,null,1,Sf,[[3,Cf],Di,qc,Ii,Kl,[2,vb],[2,kf]],null,null),so(335544320,13,{_lazyContent:0}),$r(256,null,Cf,void 0,[]),(e()(),Js(191,0,null,0,6,"mat-expansion-panel-header",[["class","mat-expansion-panel-header"],["role","button"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-controls",0],[1,"aria-expanded",0],[1,"aria-disabled",0],[2,"mat-expanded",null],[40,"@expansionHeight",0]],[[null,"click"],[null,"keydown"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==Ir(e,192)._toggle()&&i),"keydown"===t&&(i=!1!==Ir(e,192)._keydown(n)&&i),i},Tb,kb)),Hr(192,180224,[[1,4]],0,Tf,[Sf,bt,dm,Di,[2,kf]],null,null),mo(193,{collapsedHeight:0,expandedHeight:1}),mo(194,{value:0,params:1}),(e()(),Js(195,0,null,0,2,"mat-panel-title",[["class","mat-expansion-panel-header-title"]],null,null,null,null,null)),Hr(196,16384,null,0,If,[],null,null),(e()(),go(-1,null,[" Nodes Component \u2713 "])),(e()(),Js(198,0,null,1,1,"nodes-component",[],null,null,null,Ox,Sx)),Hr(199,4440064,null,0,Xh,[Di],{debug:[0,"debug"]},null)],function(e,t){var n=t.component;e(t,16,0,!0,n.text2,"caption"),e(t,18,0,!0,"warning-state",n.text2,"body1"),e(t,20,0,!0,"success-state",n.text2,"body2"),e(t,22,0,!0,"error-state",n.text2,"headline"),e(t,24,0,!0,n.text2,"title"),e(t,26,0,!0,n.text2,"subheading1"),e(t,28,0,!0,n.text2,"subheading2"),e(t,30,0,!0,n.text2,"display1"),e(t,32,0,!0,n.text2,"display2"),e(t,34,0,!0,n.text2,"display3"),e(t,36,0,!0,n.text2,"display4"),e(t,49,0,!0,"text","text"),e(t,52,0,"number","number"),e(t,55,0,"color","color"),e(t,58,0,"multiline","multiline"),e(t,72,0,"10","100"),e(t,85,0,n.radio),e(t,98,0,n.checkbox),e(t,111,0,n.data1),e(t,124,0,n.data1,n.data2),e(t,138,0,"A","1",!0),e(t,140,0,"B","2"),e(t,144,0,!0),e(t,146,0,!0,!0),e(t,159,0);var i=e(t,173,0,"vs");e(t,172,0,i),e(t,186,0),e(t,199,0,!0)},function(e,t){e(t,4,0,Ir(t,5).expanded,"NoopAnimations"===Ir(t,5)._animationMode,Ir(t,5)._hasSpacing());var n=Ir(t,9).panel._headerId,i=Ir(t,9).disabled?-1:0,s=Ir(t,9)._getPanelId(),r=Ir(t,9)._isExpanded(),o=Ir(t,9).panel.disabled,a=Ir(t,9)._isExpanded(),l=e(t,11,0,Ir(t,9)._getExpandedState(),e(t,10,0,Ir(t,9).collapsedHeight,Ir(t,9).expandedHeight));e(t,8,0,n,i,s,r,o,a,l),e(t,37,0,Ir(t,38).expanded,"NoopAnimations"===Ir(t,38)._animationMode,Ir(t,38)._hasSpacing());var c=Ir(t,42).panel._headerId,h=Ir(t,42).disabled?-1:0,u=Ir(t,42)._getPanelId(),d=Ir(t,42)._isExpanded(),p=Ir(t,42).panel.disabled,m=Ir(t,42)._isExpanded(),f=e(t,44,0,Ir(t,42)._getExpandedState(),e(t,43,0,Ir(t,42).collapsedHeight,Ir(t,42).expandedHeight));e(t,41,0,c,h,u,d,p,m,f),e(t,60,0,Ir(t,61).expanded,"NoopAnimations"===Ir(t,61)._animationMode,Ir(t,61)._hasSpacing());var g=Ir(t,65).panel._headerId,_=Ir(t,65).disabled?-1:0,b=Ir(t,65)._getPanelId(),y=Ir(t,65)._isExpanded(),v=Ir(t,65).panel.disabled,w=Ir(t,65)._isExpanded(),x=e(t,67,0,Ir(t,65)._getExpandedState(),e(t,66,0,Ir(t,65).collapsedHeight,Ir(t,65).expandedHeight));e(t,64,0,g,_,b,y,v,w,x),e(t,73,0,Ir(t,74).expanded,"NoopAnimations"===Ir(t,74)._animationMode,Ir(t,74)._hasSpacing());var C=Ir(t,78).panel._headerId,E=Ir(t,78).disabled?-1:0,k=Ir(t,78)._getPanelId(),S=Ir(t,78)._isExpanded(),T=Ir(t,78).panel.disabled,I=Ir(t,78)._isExpanded(),A=e(t,80,0,Ir(t,78)._getExpandedState(),e(t,79,0,Ir(t,78).collapsedHeight,Ir(t,78).expandedHeight));e(t,77,0,C,E,k,S,T,I,A),e(t,86,0,Ir(t,87).expanded,"NoopAnimations"===Ir(t,87)._animationMode,Ir(t,87)._hasSpacing());var D=Ir(t,91).panel._headerId,R=Ir(t,91).disabled?-1:0,O=Ir(t,91)._getPanelId(),P=Ir(t,91)._isExpanded(),N=Ir(t,91).panel.disabled,M=Ir(t,91)._isExpanded(),F=e(t,93,0,Ir(t,91)._getExpandedState(),e(t,92,0,Ir(t,91).collapsedHeight,Ir(t,91).expandedHeight));e(t,90,0,D,R,O,P,N,M,F),e(t,99,0,Ir(t,100).expanded,"NoopAnimations"===Ir(t,100)._animationMode,Ir(t,100)._hasSpacing());var L=Ir(t,104).panel._headerId,V=Ir(t,104).disabled?-1:0,z=Ir(t,104)._getPanelId(),j=Ir(t,104)._isExpanded(),H=Ir(t,104).panel.disabled,B=Ir(t,104)._isExpanded(),$=e(t,106,0,Ir(t,104)._getExpandedState(),e(t,105,0,Ir(t,104).collapsedHeight,Ir(t,104).expandedHeight));e(t,103,0,L,V,z,j,H,B,$),e(t,112,0,Ir(t,113).expanded,"NoopAnimations"===Ir(t,113)._animationMode,Ir(t,113)._hasSpacing());var U=Ir(t,117).panel._headerId,q=Ir(t,117).disabled?-1:0,G=Ir(t,117)._getPanelId(),W=Ir(t,117)._isExpanded(),K=Ir(t,117).panel.disabled,Z=Ir(t,117)._isExpanded(),Q=e(t,119,0,Ir(t,117)._getExpandedState(),e(t,118,0,Ir(t,117).collapsedHeight,Ir(t,117).expandedHeight));e(t,116,0,U,q,G,W,K,Z,Q),e(t,125,0,Ir(t,126).expanded,"NoopAnimations"===Ir(t,126)._animationMode,Ir(t,126)._hasSpacing());var X=Ir(t,130).panel._headerId,Y=Ir(t,130).disabled?-1:0,J=Ir(t,130)._getPanelId(),ee=Ir(t,130)._isExpanded(),te=Ir(t,130).panel.disabled,ne=Ir(t,130)._isExpanded(),ie=e(t,132,0,Ir(t,130)._getExpandedState(),e(t,131,0,Ir(t,130).collapsedHeight,Ir(t,130).expandedHeight));e(t,129,0,X,Y,J,ee,te,ne,ie),e(t,141,0,Ir(t,142).vertical?"vertical":"horizontal",Ir(t,142).vertical,!Ir(t,142).vertical,Ir(t,142).inset),e(t,147,0,Ir(t,148).expanded,"NoopAnimations"===Ir(t,148)._animationMode,Ir(t,148)._hasSpacing());var se=Ir(t,152).panel._headerId,re=Ir(t,152).disabled?-1:0,oe=Ir(t,152)._getPanelId(),ae=Ir(t,152)._isExpanded(),le=Ir(t,152).panel.disabled,ce=Ir(t,152)._isExpanded(),he=e(t,154,0,Ir(t,152)._getExpandedState(),e(t,153,0,Ir(t,152).collapsedHeight,Ir(t,152).expandedHeight));e(t,151,0,se,re,oe,ae,le,ce,he),e(t,160,0,Ir(t,161).expanded,"NoopAnimations"===Ir(t,161)._animationMode,Ir(t,161)._hasSpacing());var ue=Ir(t,165).panel._headerId,de=Ir(t,165).disabled?-1:0,pe=Ir(t,165)._getPanelId(),me=Ir(t,165)._isExpanded(),fe=Ir(t,165).panel.disabled,ge=Ir(t,165)._isExpanded(),_e=e(t,167,0,Ir(t,165)._getExpandedState(),e(t,166,0,Ir(t,165).collapsedHeight,Ir(t,165).expandedHeight));e(t,164,0,ue,de,pe,me,fe,ge,_e),e(t,174,0,Ir(t,175).expanded,"NoopAnimations"===Ir(t,175)._animationMode,Ir(t,175)._hasSpacing());var be=Ir(t,179).panel._headerId,ye=Ir(t,179).disabled?-1:0,ve=Ir(t,179)._getPanelId(),we=Ir(t,179)._isExpanded(),xe=Ir(t,179).panel.disabled,Ce=Ir(t,179)._isExpanded(),Ee=e(t,181,0,Ir(t,179)._getExpandedState(),e(t,180,0,Ir(t,179).collapsedHeight,Ir(t,179).expandedHeight));e(t,178,0,be,ye,ve,we,xe,Ce,Ee),e(t,187,0,Ir(t,188).expanded,"NoopAnimations"===Ir(t,188)._animationMode,Ir(t,188)._hasSpacing());var ke=Ir(t,192).panel._headerId,Se=Ir(t,192).disabled?-1:0,Te=Ir(t,192)._getPanelId(),Ie=Ir(t,192)._isExpanded(),Ae=Ir(t,192).panel.disabled,De=Ir(t,192)._isExpanded(),Re=e(t,194,0,Ir(t,192)._getExpandedState(),e(t,193,0,Ir(t,192).collapsedHeight,Ir(t,192).expandedHeight));e(t,191,0,ke,Se,Te,Ie,Ae,De,Re)})}function Lx(e){return yo(0,[(e()(),Js(0,0,null,null,1,"app-root",[],null,null,null,Fx,Mx)),Hr(1,114688,null,0,Wa,[],null,null)],function(e,t){e(t,1,0)},null)}var Vx=_r("app-root",Wa,Lx,{},{},[]);const zx=new ae("mat-menu-scroll-strategy");function jx(e){return()=>e.scrollStrategies.reposition()}class Hx{}const Bx=new ae("mat-autocomplete-scroll-strategy");function $x(e){return()=>e.scrollStrategies.reposition()}class Ux{}class qx{constructor(e){this.template=e}}class Gx{constructor(e,t){this._elementRef=e,this._tree=t,this._destroyed=new k,this._dataChanges=new k,this.role="treeitem",Gx.mostRecentTreeNode=this}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}ngOnDestroy(){Gx.mostRecentTreeNode===this&&(Gx.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw Error("Could not find functions for nested/flat tree in tree control.");const e=this._tree.treeControl.getChildren(this._data);Array.isArray(e)?this._setRoleFromChildren(e):e instanceof y&&e.pipe(Oc(this._destroyed)).subscribe(e=>this._setRoleFromChildren(e))}}_setRoleFromChildren(e){this.role=e&&e.length?"group":"treeitem"}}Gx.mostRecentTreeNode=null;class Wx{}const Kx=new ae("mat-select-scroll-strategy");function Zx(e){return()=>e.scrollStrategies.reposition()}class Qx{}class Xx{}const Yx=100,Jx=10;class eC{constructor(e){this._elementRef=e}}const tC=ym(eC,"primary"),nC="\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n";class iC extends tC{constructor(e,t,n,i,s){super(e),this._elementRef=e,this._document=n,this.animationMode=i,this.defaults=s,this._value=0,this._fallbackAnimation=!1,this._noopAnimations="NoopAnimations"===this.animationMode&&!!this.defaults&&!this.defaults._forceAnimations,this._diameter=Yx,this.mode="determinate",this._fallbackAnimation=t.EDGE||t.TRIDENT,s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.nativeElement.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}get diameter(){return this._diameter}set diameter(e){this._diameter=oc(e),this._fallbackAnimation||iC.diameters.has(this._diameter)||this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=oc(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,oc(e)))}get _circleRadius(){return(this.diameter-Jx)/2}get _viewBox(){const e=2*this._circleRadius+this.strokeWidth;return`0 0 ${e} ${e}`}get _strokeCircumference(){return 2*Math.PI*this._circleRadius}get _strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._strokeCircumference:null}get _circleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){let e=iC.styleTag;e||(e=this._document.createElement("style"),this._document.head.appendChild(e),iC.styleTag=e),e&&e.sheet&&e.sheet.insertRule(this._getAnimationText(),0),iC.diameters.add(this.diameter)}_getAnimationText(){return nC.replace(/START_VALUE/g,`${.95*this._strokeCircumference}`).replace(/END_VALUE/g,`${.2*this._strokeCircumference}`).replace(/DIAMETER/g,`${this.diameter}`)}}iC.diameters=new Set([Yx]),iC.styleTag=null;class sC{}class rC{}class oC{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(e=>{const t=e.indexOf(":");if(t>0){const n=e.slice(0,t),i=n.toLowerCase(),s=e.slice(t+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const i=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oC?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oC;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oC?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let e=this.headers.get(t);if(!e)return;0===(e=e.filter(e=>-1===s.indexOf(e))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,e)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class aC{encodeKey(e){return lC(e)}encodeValue(e){return lC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}function lC(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class cC{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new aC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){const n=new Map;return e.length>0&&e.split("&").forEach(e=>{const i=e.indexOf("="),[s,r]=-1==i?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,i)),t.decodeValue(e.slice(i+1))],o=n.get(s)||[];o.push(r),n.set(s,o)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t];this.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(e=>t+"="+this.encoder.encodeValue(e)).join("&")}).join("&")}clone(e){const t=new cC({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat([e]),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e.value),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const n=t.indexOf(e.value);-1!==n&&t.splice(n,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=null)}}function hC(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function uC(e){return"undefined"!=typeof Blob&&e instanceof Blob}function dC(e){return"undefined"!=typeof FormData&&e instanceof FormData}class pC{constructor(e,t,n,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,s=i):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.params&&(this.params=s.params)),this.headers||(this.headers=new oC),this.params){const e=this.params.toString();if(0===e.length)this.urlWithParams=t;else{const n=t.indexOf("?");this.urlWithParams=t+(-1===n?"?":n<t.length-1?"&":"")+e}}else this.params=new cC,this.urlWithParams=t}serializeBody(){return null===this.body?null:hC(this.body)||uC(this.body)||dC(this.body)||"string"==typeof this.body?this.body:this.body instanceof cC?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:dC(this.body)?null:uC(this.body)?this.body.type||null:hC(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof cC?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,r=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,o=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let a=e.headers||this.headers,l=e.params||this.params;return void 0!==e.setHeaders&&(a=Object.keys(e.setHeaders).reduce((t,n)=>t.set(n,e.setHeaders[n]),a)),e.setParams&&(l=Object.keys(e.setParams).reduce((t,n)=>t.set(n,e.setParams[n]),l)),new pC(t,n,s,{params:l,headers:a,reportProgress:o,responseType:i,withCredentials:r})}}const mC=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}();class fC{constructor(e,t=200,n="OK"){this.headers=e.headers||new oC,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class gC extends fC{constructor(e={}){super(e),this.type=mC.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gC({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function _C(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}class bC{constructor(e){this.handler=e}request(e,t,n={}){let i;if(e instanceof pC)i=e;else{let s=void 0;s=n.headers instanceof oC?n.headers:new oC(n.headers);let r=void 0;n.params&&(r=n.params instanceof cC?n.params:new cC({fromObject:n.params})),i=new pC(e,t,void 0!==n.body?n.body:null,{headers:s,params:r,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=hc(i).pipe(B(e=>this.handler.handle(e),void 0,1));if(e instanceof pC||"events"===n.observe)return s;const r=s.pipe(Ac(e=>e instanceof gC));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return r.pipe(L(e=>{if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return r.pipe(L(e=>{if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return r.pipe(L(e=>{if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return r.pipe(L(e=>e.body))}case"response":return r;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:(new cC).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,n={}){return this.request("PATCH",e,_C(n,t))}post(e,t,n={}){return this.request("POST",e,_C(n,t))}put(e,t,n={}){return this.request("PUT",e,_C(n,t))}}class yC{constructor(e){this.selector=e}call(e,t){return t.subscribe(new vC(e,this.selector,this.caught))}}class vC extends F{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const i=new I(this,void 0,void 0);this.add(i),M(this,n,void 0,void 0,i)}}}class wC{constructor(e){this.callback=e}call(e,t){return t.subscribe(new xC(e,this.callback))}}class xC extends f{constructor(e,t){super(e),this.add(new d(t))}}function CC(e){return Error(`Unable to find icon with the name "${e}"`)}function EC(e){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+`via Angular's DomSanitizer. Attempted URL was "${e}".`)}function kC(e){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+`Angular's DomSanitizer. Attempted literal was "${e}".`)}class SC{constructor(e){e.nodeName?this.svgElement=e:this.url=e}}class TC{constructor(e,t,n){this._httpClient=e,this._sanitizer=t,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t){return this.addSvgIconInNamespace("",e,t)}addSvgIconLiteral(e,t){return this.addSvgIconLiteralInNamespace("",e,t)}addSvgIconInNamespace(e,t,n){return this._addSvgIconConfig(e,t,new SC(n))}addSvgIconLiteralInNamespace(e,t,n){const i=this._sanitizer.sanitize(Jt.HTML,n);if(!i)throw kC(n);const s=this._createSvgElementForSingleIcon(i);return this._addSvgIconConfig(e,t,new SC(s))}addSvgIconSet(e){return this.addSvgIconSetInNamespace("",e)}addSvgIconSetLiteral(e){return this.addSvgIconSetLiteralInNamespace("",e)}addSvgIconSetInNamespace(e,t){return this._addSvgIconSetConfig(e,new SC(t))}addSvgIconSetLiteralInNamespace(e,t){const n=this._sanitizer.sanitize(Jt.HTML,t);if(!n)throw kC(t);const i=this._svgElementFromString(n);return this._addSvgIconSetConfig(e,new SC(i))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(Jt.RESOURCE_URL,e);if(!t)throw EC(e);const n=this._cachedIconsByUrl.get(t);return n?hc(IC(n)):this._loadSvgIconFromConfig(new SC(e)).pipe(nh(e=>this._cachedIconsByUrl.set(t,e)),L(e=>IC(e)))}getNamedSvgIcon(e,t=""){const n=AC(t,e),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const s=this._iconSetConfigs.get(t);return s?this._getSvgFromIconSetConfigs(e,s):Hc(CC(n))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgElement?hc(IC(e.svgElement)):this._loadSvgIconFromConfig(e).pipe(nh(t=>e.svgElement=t),L(e=>IC(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);return n?hc(n):ry(t.filter(e=>!e.svgElement).map(e=>this._loadSvgIconSetFromConfig(e).pipe(function(e){return function(t){const n=new yC(e),i=t.lift(n);return n.caught=i}}(t=>{const n=this._sanitizer.sanitize(Jt.RESOURCE_URL,e.url);return console.error(`Loading icon set URL: ${n} failed: ${t.message}`),hc(null)})))).pipe(L(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw CC(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.svgElement){const t=this._extractSvgIconFromSet(i.svgElement,e);if(t)return t}}return null}_loadSvgIconFromConfig(e){return this._fetchUrl(e.url).pipe(L(e=>this._createSvgElementForSingleIcon(e)))}_loadSvgIconSetFromConfig(e){return e.svgElement?hc(e.svgElement):this._fetchUrl(e.url).pipe(L(t=>(e.svgElement||(e.svgElement=this._svgElementFromString(t)),e.svgElement)))}_createSvgElementForSingleIcon(e){const t=this._svgElementFromString(e);return this._setSvgAttributes(t),t}_extractSvgIconFromSet(e,t){const n=e.querySelector("#"+t);if(!n)return null;const i=n.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i));const s=this._svgElementFromString("<svg></svg>");return s.appendChild(i),this._setSvgAttributes(s)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){let t=this._svgElementFromString("<svg></svg>");for(let n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[n].cloneNode(!0));return t}_setSvgAttributes(e){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),e}_fetchUrl(e){if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==e)throw Error(`Cannot fetch icon from URL "${e}".`);const t=this._sanitizer.sanitize(Jt.RESOURCE_URL,e);if(!t)throw EC(e);const n=this._inProgressUrlFetches.get(t);if(n)return n;const i=this._httpClient.get(t,{responseType:"text"}).pipe((s=(()=>this._inProgressUrlFetches.delete(t)),e=>e.lift(new wC(s))),ne());var s;return this._inProgressUrlFetches.set(t,i),i}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(AC(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}}function IC(e){return e.cloneNode(!0)}function AC(e,t){return e+":"+t}TC.ngInjectableDef=re({factory:function(){return new TC(De(bC,8),De(Ap),De(Kl,8))},token:TC,providedIn:"root"});class DC{}const RC=new ae("mat-chips-default-options");class OC{}class PC{}class NC{}class MC{}class FC{constructor(e){this._viewContainer=e,FC.mostRecentCellOutlet=this}ngOnDestroy(){FC.mostRecentCellOutlet===this&&(FC.mostRecentCellOutlet=null)}}FC.mostRecentCellOutlet=null;class LC{}class VC{}class zC{}var jC=Sa(Yh,[],function(e){return function(e){const t={},n=[];let i=!1;for(let s=0;s<e.length;s++){const r=e[s];r.token===ct&&!0===r.value&&(i=!0),1073741824&r.flags&&n.push(r.token),r.index=s,t[ys(r.token)]=r}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:i}}([lr(512,ft,gt,[[8,[Wm,_f,Vx,Mv,ax,Mb,Zw,nx,pw,Aw,Xv,mx,wx,kx,Nx]],[3,ft],at]),lr(5120,es,is,[[3,es]]),lr(4608,cl,hl,[es,[2,ll]]),lr(4608,Yn,Yn,[]),lr(5120,Un,qn,[]),lr(5120,Ki,ts,[]),lr(5120,Zi,ns,[]),lr(4608,Ap,Dp,[Kl]),lr(6144,en,null,[Ap]),lr(4608,xp,Im,[[2,km],[2,_m]]),lr(5120,Ud,function(e,t,n,i,s,r,o,a){return[new vp(e,t,n),new Ip(i),new kp(s,r,o,a)]},[Kl,oi,Kn,Kl,Kl,xp,Qn,[2,Cp]]),lr(4608,qd,qd,[Ud,oi]),lr(135680,Kd,Kd,[Kl]),lr(4608,tp,tp,[qd,Kd]),lr(5120,Xf,_b,[]),lr(5120,Yg,bb,[]),lr(4608,M_,gb,[Kl,Xf,Yg]),lr(5120,wt,yb,[tp,M_,oi]),lr(6144,Wd,null,[Kd]),lr(4608,pi,pi,[oi]),lr(4608,xy,xy,[]),lr(4608,mv,mv,[]),lr(4608,Jh,ab,[wt,Md]),lr(4608,ad,ad,[Uu,Xu,ft,rd,Qu,qe,oi,Kl,Mu,[2,tl]]),lr(5120,ld,cd,[ad]),lr(5120,yd,vd,[ad]),lr(135680,wd,wd,[ad,qe,[2,tl],[2,bd],yd,[3,wd],Xu]),lr(4608,hf,hf,[]),lr(5120,of,af,[ad]),lr(4608,Em,Em,[]),lr(4608,Ah,Ah,[Kl,oi,Qc,Th]),lr(5120,zx,jx,[ad]),lr(5120,Bx,$x,[ad]),lr(135680,dm,dm,[oi,Jl]),lr(4608,qx,qx,[Xt]),lr(5120,Kx,Zx,[ad]),lr(1073742336,Wl,Wl,[]),lr(1024,bn,Vp,[]),lr(1024,Bn,function(e){return[(t=e,Hd("probe",$d),Hd("coreTokens",Object.assign({},Bd,(t||[]).reduce((e,t)=>(e[t.name]=t.token,e),{}))),()=>$d)];var t},[[2,vi]]),lr(512,$n,$n,[[2,Bn]]),lr(131584,ki,ki,[oi,Qn,qe,bn,ft,$n]),lr(1073742336,ss,ss,[ki]),lr(1073742336,zp,zp,[[3,zp]]),lr(1073742336,fv,fv,[]),lr(1073742336,gv,gv,[]),lr(1073742336,_v,_v,[]),lr(1073742336,wb,wb,[]),lr(1073742336,Fu,Fu,[]),lr(1073742336,fu,fu,[]),lr(1073742336,ec,ec,[]),lr(1073742336,Kc,Kc,[]),lr(1073742336,hd,hd,[]),lr(1073742336,_m,_m,[[2,gm],[2,Cp]]),lr(1073742336,xd,xd,[]),lr(1073742336,pf,pf,[]),lr(1073742336,pm,pm,[]),lr(1073742336,cf,cf,[]),lr(1073742336,zm,zm,[]),lr(1073742336,Xx,Xx,[]),lr(1073742336,sC,sC,[]),lr(1073742336,rC,rC,[]),lr(1073742336,qb,qb,[]),lr(1073742336,wv,wv,[]),lr(1073742336,Iv,Iv,[]),lr(1073742336,Vh,Vh,[]),lr(1073742336,Hx,Hx,[]),lr(1073742336,DC,DC,[]),lr(1073742336,Dm,Dm,[]),lr(1073742336,jm,jm,[]),lr(1073742336,zw,zw,[]),lr(1073742336,Lw,Lw,[]),lr(1073742336,xf,xf,[]),lr(1073742336,Df,Df,[]),lr(1073742336,OC,OC,[]),lr(1073742336,PC,PC,[]),lr(1073742336,Hm,Hm,[]),lr(1073742336,Ux,Ux,[]),lr(1073742336,Wx,Wx,[]),lr(1073742336,NC,NC,[]),lr(1073742336,ww,ww,[]),lr(1073742336,Qx,Qx,[]),lr(1073742336,sw,sw,[]),lr(1073742336,Uv,Uv,[]),lr(1073742336,MC,MC,[]),lr(1073742336,LC,LC,[]),lr(1073742336,VC,VC,[]),lr(1073742336,zC,zC,[]),lr(1073742336,Ga,Ga,[]),lr(1073742336,Yh,Yh,[qe]),lr(256,ct,!0,[]),lr(256,vb,"BrowserAnimations",[]),lr(256,RC,{separatorKeyCodes:[bu]},[]),lr(256,za,{baseUrl:"/static/components/dist/assets",defaultOptions:{automaticLayout:!0}},[])])});(function(){if(It)throw new Error("Cannot enable prod mode after platform setup.");Tt=!1})(),Lp().bootstrapModuleFactory(jC).catch(e=>console.error(e))}},[[0,0]]]);